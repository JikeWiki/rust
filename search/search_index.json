{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u9996\u9875","text":"\u300aRust\u4e2d\u6587Wiki\u300b <p>\u5feb\u901f\u4e0a\u624bRust\uff0c\u638c\u63e1Rust\u8bed\u8a00\u6838\u5fc3\u77e5\u8bc6\uff01</p> <p>\u4f5c\u8005: https://phy.xyz</p> <p></p> <p>        \u5f00\u59cb\u9605\u8bfb           \u4e0b\u8f7d\u4ee3\u7801    </p>"},{"location":"reference/","title":"\u53c2\u8003\u8d44\u6599","text":""},{"location":"reference/#_2","title":"\u4e66\u7c4d","text":"<ul> <li>\u300aRust\u6743\u5a01\u6307\u5357\u300b</li> </ul>"},{"location":"reference/#_3","title":"\u89c6\u9891","text":"<ul> <li>[BiliBili-\u8f6f\u4ef6\u5de5\u827a\u5e08\uff1aRust\u7f16\u7a0b\u8bed\u8a00\u5165\u95e8\u6559\u7a0b] https://www.bilibili.com/video/BV1hp4y1k7SV</li> </ul>"},{"location":"00_preface/01_introduction/","title":"Rust\u7b80\u4ecb","text":""},{"location":"00_preface/01_introduction/#1-rust","title":"1 \u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528Rust\uff1f","text":"<p>Rust\u662f\u4e00\u79cd\u4ee4\u4eba\u5174\u594b\u7684\u65b0\u5174\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u53ef\u4ee5\u8ba9\u6bcf\u4e2a\u4eba\u7f16\u5199\u53ef\u9760\u4e14\u9ad8\u6548\u7684\u8f6f\u4ef6\u3002Rust\u53ef\u4ee5\u7528\u6765\u66ff\u6362C/C++\uff0cRust\u548c\u4ed6\u4eec\u5177\u6709\u76f8\u540c\u7684\u6027\u80fd\uff0c\u4f46\u662f\u5f88\u591a\u5e38\u89c1\u7684bug\u5728\u7f16\u8bd1\u65f6\u5c31\u53ef\u4ee5\u88ab\u6d88\u706d\u3002Rust\u662f\u4e00\u79cd\u901a\u7528\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u4f46\u662f\u5b83\u66f4\u5584\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a</p> <ul> <li>\u9700\u8981\u8fd0\u884c\u65f6\u7684\u901f\u5ea6</li> <li>\u9700\u8981\u5185\u5b58\u5b89\u5168</li> <li>\u66f4\u597d\u5730\u5229\u7528\u591a\u6838\u5904\u7406\u5668</li> </ul>"},{"location":"00_preface/01_introduction/#2-rust","title":"2 Rust\u4e0e\u5176\u4ed6\u8bed\u8a00\u7684\u6bd4\u8f83","text":"<p>C/C++\u6027\u80fd\u975e\u5e38\u597d\uff0c\u4f46\u7c7b\u578b\u7cfb\u7edf\u548c\u5185\u5b58\u90fd\u4e0d\u592a\u5b89\u5168\u3002Java/C#\u62e5\u6709GC\uff08\u5185\u5b58\u56de\u6536\u5668\uff09\uff0c\u80fd\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\uff0c\u4e5f\u6709\u5f88\u591a\u4f18\u79c0\u7279\u6027\uff0c\u4f46\u662f\u6027\u80fd\u76f8\u5bf9C/C++\u4e0d\u8db3\u3002Rust\u5219\u5177\u6709\u8fd9\u4e24\u7c7b\u8bed\u8a00\u7684\u5171\u540c\u4f18\u70b9\uff1a</p> <ul> <li>\u5b89\u5168</li> <li>\u65e0\u9700GC</li> <li>\u6613\u4e8e\u7ef4\u62a4\u3001\u8c03\u8bd5\uff0c\u4ee3\u7801\u5b89\u5168\u9ad8\u6548</li> </ul>"},{"location":"00_preface/01_introduction/#3-rust","title":"3 Rust\u64c5\u957f\u7684\u9886\u57df","text":"<ul> <li>\u9ad8\u6027\u80fd\u7684 Web Service</li> <li>WebAssembly</li> <li>\u547d\u4ee4\u884c\u5de5\u5177</li> <li>\u5d4c\u5165\u5f0f\u8bbe\u5907</li> <li>\u7cfb\u7edf\u7f16\u7a0b</li> </ul>"},{"location":"00_preface/01_introduction/#4-rustfirefox","title":"4 Rust\u4e0eFirefox","text":"<p>Rust\u6700\u521d\u662f Mozilla \u516c\u53f8\u4e00\u4e2a\u7814\u7a76\u6027\u9879\u76ee\u3002Firefox \u662f Rust \u4ea7\u54c1\u5e94\u7528\u7684\u4e00\u4e2a\u91cd\u8981\u7684\u4f8b\u5b50\u3002Mozzilla\u4e00\u76f4\u4ee5\u6765\u90fd\u5728\u4f7f\u7528 Rust \u521b\u5efa\u4e00\u4e2a\u540d\u4e3aServo \u7684\u5b9e\u9a8c\u6027\u6d4f\u89c8\u5668\u5f15\u64ce\uff0c\u5176\u4e2d\u6240\u6709\u5185\u5bb9\u90fd\u662f\u5e76\u884c\u6267\u884c\u7684\u3002\u76ee\u524d Servo \u7684\u90e8\u5206\u529f\u80fd\u5df2\u7ecf\u88ab\u96c6\u6210\u5230 Firefox \u91cc\u9762\u4e86\u3002Firefox\u539f\u6765\u7684\u91cf\u5b50\u7248\u5c31\u5305\u542b\u4e86 Servo \u7684CSS\u6e32\u67d3\u5f15\u64ce\uff0cRust\u4f7f\u5f97 Firefox \u5728\u8fd9\u65b9\u9762\u5f97\u5230\u4e86\u5de8\u5927\u7684\u6027\u80fd\u6539\u8fdb\u3002</p>"},{"location":"00_preface/01_introduction/#5-rust","title":"5 Rust\u7684\u7528\u6237\u6848\u4f8b","text":"<ul> <li> <p>Google\uff1a \u65b0\u64cd\u4f5c\u7cfb\u7edf Fuschia \uff0c\u5176\u4e2d Rust \u4ee3\u7801\u91cf\u5927\u7ea6\u536030%</p> </li> <li> <p>Amazon\uff1a \u57fa\u4e8eLinux\u5f00\u53d1\u4e86\u53ef\u4ee5\u5728\u76f4\u63a5\u88f8\u673a\u3001\u865a\u62df\u673a\u4e0a\u8fd0\u884c\u5bb9\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf</p> </li> <li> <p>System76: \u4f7f\u7528\u7eafRust\u5f00\u53d1\u4e86\u4e0b\u4e00\u4ee3\u5b89\u5168\u64cd\u4f5c\u7cfb\u7edf Redox</p> </li> <li> <p>\u8682\u8681\u91d1\u670d\uff1a \u5e93\u64cd\u4f5c\u7cfb\u7edf Occlum</p> </li> <li> <p>\u65af\u5766\u798f\u548c\u5bc6\u6b47\u6839\u5927\u5b66\uff1a \u4f7f\u7528 Rust \u5f00\u53d1\u5d4c\u5165\u5f0f\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e94\u7528\u4e8e Google \u7684\u52a0\u5bc6\u4ea7\u54c1</p> </li> <li> <p>\u5fae\u8f6f\uff1a \u6b63\u5728\u4f7f\u7528 Rust \u91cd\u5199 Windows \u4e2d\u7684\u4e00\u4e9b\u4f4e\u7ea7\u7684\u7cfb\u7edf\u7ec4\u4ef6</p> </li> <li> <p>\u5fae\u8f6f\uff1a WinRT/Rust \u9879\u76ee</p> </li> <li> <p>Drobox\u3001Yelp\u3001Coursera\u3001LINE\u3001Cloudflare\u3001Alassian\u3001npm\u3001Ceph\u3001\u767e\u5ea6\u3001\u534e\u4e3a\u3001Sentry\u3001Deno...</p> </li> </ul>"},{"location":"00_preface/01_introduction/#6-rust","title":"6 Rust\u7684\u4f18\u70b9","text":"<ul> <li> <p>\u6027\u80fd\u9ad8</p> </li> <li> <p>\u5b89\u5168\u6027\u9ad8</p> </li> <li> <p>\u65e0\u6240\u754f\u60e7\u7684\u5e76\u53d1</p> </li> </ul>"},{"location":"00_preface/01_introduction/#8","title":"8 \u603b\u7ed3","text":"<p>Rust\u662f\u4e00\u95e8\u9762\u5411\u672a\u6765\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u6211\u76f8\u4fe1\u5b66\u4e60Rust\u53ef\u4ee5\u8ba9\u81ea\u5df1\u672a\u6765\u53d1\u5c55\u4e4b\u8def\u8d8a\u8d70\u8d8a\u8fdc\u3002\u4f46\u4e5f\u8981\u6ce8\u610f\u7684\u662f\uff0cRust \u6709\u5f88\u591a\u72ec\u6709\u7684\u6982\u5ff5\uff0c\u5b83\u4eec\u548c\u73b0\u5728\u5927\u591a\u6570\u4e3b\u6d41\u8bed\u8a00\u90fd\u4e0d\u540c\uff0c\u6240\u4ee5\u5b66\u4e60 Rust \u7684\u65f6\u5019\u5fc5\u987b\u4ece\u57fa\u7840\u6982\u5ff5\u4e00\u6b65\u4e00\u6b65\u5730\u5b66\u3002</p>"},{"location":"01_primer/01_installation/","title":"\u5b89\u88c5","text":"<p>Rust \u7684\u5b98\u65b9\u7f51\u5740\u662f: https://www.rust-lang.org/</p>"},{"location":"01_primer/01_installation/#1-rust","title":"1. \u5b89\u88c5 Rust","text":""},{"location":"01_primer/01_installation/#11","title":"1.1. \u811a\u672c\u5b89\u88c5\u65b9\u5f0f","text":"<p>\u4f7f\u7528\u7535\u8111\u6253\u5f00\u5230 Rust \u7684\u5b98\u65b9\u7f51\u7ad9\u4e4b\u540e\uff0cRust \u4f1a\u5224\u65ad\u6211\u4eec\u5f53\u524d\u7684\u64cd\u4f5c\u7cfb\u7edf\u5e76\u5f15\u5bfc\u6211\u4eec\u8fdb\u884c\u5b89\u88c5\u3002</p> <p>Windows \u7684 Linux\u5b50\u7cfb\u7edf\u3001Linux\u3001MacOS \u53ea\u9700\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5373\u53ef\u6839\u636e\u63d0\u793a\u8fdb\u884c\u5b89\u88c5</p> <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre> <p>\u63a8\u8350\u4f7f\u7528\u811a\u672c\u7684\u65b9\u5f0f\u8fdb\u884c\u5b89\u88c5\uff0c\u5b89\u88c5\u811a\u672c\u4f1a\u5c06 Rust \u76f8\u5173\u7ec4\u4ef6\u5b89\u88c5\u81ea\u5df1\u7684\u7528\u6237\u76ee\u5f55\u4e0a\uff0c\u5e76\u4e14\u8bbe\u7f6e\u597d\u76f8\u5173\u7684\u73af\u5883\u53d8\u91cf</p>"},{"location":"01_primer/01_installation/#11_1","title":"1.1. \u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\u5b89\u88c5","text":"<p>Rust \u4e5f\u652f\u6301\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u5305\u7684\u65b9\u5f0f\u7684\u5b89\u88c5\u65b9\u5f0f\u3002</p> <p>\u6253\u5f00\u5176\u4ed6\u5b89\u88c5\u65b9\u5f0f\u7684\u9875\u9762\uff1ahttps://forge.rust-lang.org/infra/other-installation-methods.html\uff0c\u6211\u4eec\u627e\u5230\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\u4e0b\u8f7d\u94fe\u63a5\u7684\u9875\u9762\u4f4d\u7f6e\uff0c\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p> <p>\u5728\u7f16\u5199\u6b64\u6587\u6863\u7684\u65f6\u5019\uff0cRust\u7684\u6700\u65b0\u7a33\u5b9a\u7248\u672c\u662f<code>1.60.0</code>\uff0c\u4f60\u5728\u6253\u5f00\u7684\u65f6\u5019\uff0c\u9875\u9762\u53ef\u80fd\u6709\u6240\u53d8\u5316\u3002</p> <p>\u627e\u5230\u4e0e\u81ea\u5df1\u64cd\u4f5c\u7cfb\u7edf\u5339\u914d\u7684\u5b89\u88c5\u5305\uff0c\u70b9\u51fb\u4e0b\u8f7d\u8fdb\u884c\u5b89\u88c5\u5373\u53ef\u3002</p>"},{"location":"01_primer/01_installation/#12","title":"1.2. \u5305\u7ba1\u7406\u5de5\u5177\u5b89\u88c5","text":"<p>\u5305\u7ba1\u7406\u5de5\u5177\u53ef\u4ee5\u5feb\u901f\u5b89\u88c5Rust\uff0c\u5982mac\u7535\u8111\u4f7f\u7528homebrew\u5b89\u88c5\uff0c\u5982\u4e0b\u547d\u4ee4</p> <pre><code>brew install rust\n</code></pre>"},{"location":"01_primer/01_installation/#13","title":"1.3. \u5b89\u88c5\u9a8c\u8bc1","text":"<p>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7248\u672c\u53f7\uff0c\u5982\u679c\u6b63\u5e38\u663e\u793arust\u7248\u672c\u4fe1\u606f\u4ee3\u8868\u5b89\u88c5\u6210\u529f\uff0c\u5426\u5219\u91cd\u542f\u7ec8\u7aef\u6216\u8005\u68c0\u67e5\u5176\u4ed6\u539f\u56e0</p> <pre><code>rustc --version\n</code></pre> <p>\u4f7f\u7528\u811a\u672c\u65b9\u5f0f\u5b89\u88c5\u7684 Rust \u4f1a\u5305\u542b\u4e00\u4e2a <code>rustup</code> \u5de5\u5177\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>rustup</code> \u7684 <code>doc</code> \u6307\u4ee4\u901a\u8fc7\u6d4f\u89c8\u5668\u6253\u5f00\u672c\u5730\u6587\u6863\uff0c\u5982\u4e0b</p> <pre><code>rustup doc\n</code></pre>"},{"location":"01_primer/01_installation/#2-ide","title":"2. IDE\u5f00\u53d1","text":"<p>\u5982\u679c\u4f7f\u7528 <code>VsCode</code> \u6216\u8005 <code>Intellij Idea</code> \u8fdb\u884c <code>Rust</code> \u4ee3\u7801\u5f00\u53d1\uff0c\u8fd8\u53ef\u4ee5\u5728\u63d2\u4ef6\u5e02\u573a\u641c\u7d22 <code>Rust</code>\uff0c\u5b89\u88c5\u4e0a <code>Rust</code> \u7684\u5b98\u65b9\u63d2\u4ef6\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u5728 <code>IDE</code> \u4e2d\u4f7f\u7528 <code>Rust</code> \u7684\u76f8\u5173\u529f\u80fd\u3002</p>"},{"location":"01_primer/02_hello_world/","title":"\u8fd0\u884cHello World","text":""},{"location":"01_primer/02_hello_world/#1","title":"1. \u6587\u4ef6\u547d\u540d\u89c4\u8303","text":"<p>\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u4e00\u4e2a \u82f1\u6587\u540d\u79f0\u7684 \u7a7a\u76ee\u5f55\u4f5c\u4e3a <code>Rust</code> \u9879\u76ee\u7684\u76ee\u5f55\uff0c\u5e76\u9075\u5faa\u4ee5\u4e0b\u89c4\u8303\uff1a</p> <ul> <li>\u7a0b\u5e8f\u6587\u4ef6\u540d\u540e\u7f00\u4e3a\uff1a <code>rs</code></li> <li>\u6587\u4ef6\u547d\u540d\u5e94\u5f53\u4f7f\u7528\u5c0f\u5199\uff0c\u5982\u679c\u540d\u79f0\u5305\u542b\u591a\u4e2a\u5355\u8bcd\uff0c\u6bcf\u4e2a\u5355\u8bcd\u4e4b\u95f4\u4f7f\u7528\u4e0b\u5212\u7ebf\u9694\u5f00\uff0c\u5982\uff1a <code>hello_world.rs</code></li> </ul>"},{"location":"01_primer/02_hello_world/#2-rust","title":"2. \u7f16\u5199\u7b2c\u4e00\u4e2aRust\u7a0b\u5e8f","text":""},{"location":"01_primer/02_hello_world/#21","title":"2.1. \u521b\u5efa\u4ee3\u7801","text":"<p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>hello_world</code>\u7684\u76ee\u5f55\uff0c\u5728\u76ee\u5f55\u4e0b\u521b\u5efa<code>main.rs</code>\u6587\u4ef6\uff0c\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>fn main() {\nprintln!(\"Hello, world!\");\n}\n</code></pre> <p>\u4ee5\u4e0a\u5185\u5bb9\u5c31\u662f Rust \u7a0b\u5e8f\u6700\u7b80\u5355\u7684\u4ee3\u7801\uff1a</p> <ul> <li> <p>\u5b9a\u4e49\u51fd\u6570: <code>fn main(){}</code> \u4ee3\u8868\u4e00\u4e2a\u6ca1\u6709\u53c2\u6570\u4e5f\u6ca1\u6709\u8fd4\u56de\u503c\u7684\u540d\u4e3a<code>main</code>\u7684\u51fd\u6570</p> </li> <li> <p><code>main</code>\u51fd\u6570: \u5728 <code>Rust</code> \u4e2d\uff0c <code>mian</code> \u51fd\u6570\u662f <code>Rust</code> \u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u5165\u53e3</p> </li> <li> <p>\u6253\u5370\u6587\u672c: <code>println!(\"Hello, world!\")</code>\uff0cRust\u4ee3\u7801\u7684\u7f29\u8fdb\u662f4\u4e2a\u7a7a\u683c\uff0c\u800c\u4e0d\u662ftab\uff0c<code>println!</code>\u662f Rust macro(\u5b8f)\uff0c\u5982\u679c\u662f\u51fd\u6570\uff0c\u5c31\u6ca1\u6709<code>!</code>\uff0cRust\u4ee3\u7801\u4ee5<code>;</code>\u7ed3\u5c3e</p> </li> </ul> <p>\u4ee5\u4e0a\u4ee3\u7801\u7684\u529f\u80fd\u662f: \u5728<code>mian</code> \u51fd\u6570\u4e2d\u8c03\u7528 <code>println!</code>\u5b8f \u5728\u63a7\u5236\u53f0\u6253\u5370\u4e86\u4e00\u6761\u5b57\u7b26\u4e32\uff1a\"Hello, world!\"</p>"},{"location":"01_primer/02_hello_world/#22","title":"2.2. \u7f16\u8bd1\u4ee3\u7801","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1</p> <pre><code>rustc main.rs\n</code></pre> <p>\u5982\u679c\u662f\u5728windows\u7f16\u8bd1\uff0c\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\u4e3a<code>main.exe</code>\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6267\u884c</p> <pre><code>.\\main.exe\n</code></pre> <p>\u5982\u679c\u662f\u5728mac/Linux\u4e2d\u7f16\u8bd1\uff0c\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\u4e3a<code>main</code>\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6267\u884c</p> <pre><code>./main\n</code></pre>"},{"location":"01_primer/02_hello_world/#3","title":"3. \u603b\u7ed3","text":"<p>Rust \u4ee3\u7801\u5148\u7f16\u8bd1\u6210\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u7a0b\u5e8f\u624d\u80fd\u8fd0\u884c\uff0c\u7f16\u8bd1\u547d\u4ee4\u4e3a <code>rustc \u6e90\u4ee3\u7801\u6587\u4ef6\u540d</code> \uff0c\u5982</p> <pre><code>rustc main.rs\n</code></pre> <ul> <li> <p>\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5728 Windows \u4e0a\u8fd8\u4f1a\u591a\u51fa\u4e00\u4e2a\u540e\u7f00\u4e3a <code>.pdb</code> \u7684\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542b\u8c03\u8bd5\u4fe1\u606f</p> </li> <li> <p>Rust \u662f ahead-of-time \u7f16\u8bd1\u7684\u8bed\u8a00\uff0c\u53ef\u4ee5\u5148\u7f16\u8bd1\u7a0b\u5e8f\uff0c\u7136\u540e\u628a\u53ef\u6267\u884c\u6587\u4ef6\u4ea4\u7ed9\u522b\u4eba\u8fd0\u884c\uff0c\u65e0\u9700\u5b89\u88c5 Rust</p> </li> <li> <p><code>rustc</code> \u53ea\u9002\u5408\u7b80\u5355\u7684 Rust \u7a0b\u5e8f\uff0c\u5982\u679c\u6e90\u4ee3\u7801\u6bd4\u8f83\u591a\uff0c\u4f7f\u7528 <code>rustc</code> \u5e76\u4e0d\u5408\u9002\uff0c\u5728\u540e\u7eed\u5c06\u4f1a\u4ecb\u7ecd <code>Cargo</code>\uff0c\u7528\u4e8e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> </li> </ul>"},{"location":"01_primer/03_cargo/","title":"Cargo\u6784\u5efa\u5de5\u5177","text":""},{"location":"01_primer/03_cargo/#1-cargo","title":"1. Cargo \u7b80\u4ecb","text":"<p>\u5bf9\u4e8e\u7b80\u5355\u7684\u7a0b\u5e8f\uff0c\u6211\u4eec\u4f7f\u7528 <code>rustc</code> \u547d\u4ee4\u5373\u53ef\u7f16\u8bd1\uff0c\u4f46\u5bf9\u4e8e\u8f83\u4e3a\u590d\u6742\u7684\u7a0b\u5e8f\uff0c\u5e94\u5f53\u4f7f\u7528 <code>Cargo</code> \u8fd9\u4e2a\u5de5\u5177\u3002<code>Cargo</code> \u662f Rust \u7684\u6784\u5efa\u7cfb\u7edf\u548c\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u4e8e\u4f9d\u8d56\u5e93\u5b89\u88c5\u548c\u4ee3\u7801\u6784\u5efa\u3002\u6211\u4eec\u4f7f\u7528\u811a\u672c\u5b89\u88c5 Rust \u7684\u65f6\u5019\u5df2\u7ecf\u5b89\u88c5\u4e0a\u4e86 Cargo\uff0c\u4f7f\u7528\u4ee5\u4e0b\u67e5\u770b Cargo \u7248\u672c\u7684\u547d\u4ee4\u53ef\u4ee5\u9a8c\u8bc1 Cargo \u662f\u5426\u5df2\u7ecf\u6b63\u5e38\u5de5\u4f5c</p> <pre><code>cargo --version\n</code></pre>"},{"location":"01_primer/03_cargo/#2-cargo","title":"2. \u4f7f\u7528Cargo\u521b\u5efa\u9879\u76ee","text":""},{"location":"01_primer/03_cargo/#21","title":"2.1. \u521d\u59cb\u5316\u9879\u76ee","text":"<p>\u521b\u5efa\u9879\u76ee\uff0c\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo new hello_cargo\n</code></pre> <p>\u547d\u4ee4\u6267\u884c\u4e4b\u540e\uff0c\u751f\u6210\u4e00\u4e2a\u540d\u4e3a <code>hello_cargo</code> \u9879\u76ee\u76ee\u5f55\uff0c\u76ee\u5f55\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9</p> <ul> <li><code>src</code>: \u8fd9\u4e2a\u76ee\u5f55\u7528\u4e8e\u5b58\u653e\u6e90\u4ee3\u7801\uff0c\u5e76\u9ed8\u8ba4\u751f\u6210\u4e86\u4e00\u4e2a <code>main.rs</code> \u6587\u4ef6</li> <li><code>.gitignore</code>: \u9ed8\u8ba4\u751f\u6210\u7684 gitignore \u6587\u4ef6, \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4f7f\u7528 Cargo \u521b\u5efa\u9879\u76ee\u7684\u65f6\u5019\uff0cCargo \u5e2e\u6211\u4eec\u5728\u9879\u76ee\u76ee\u5f55\u521d\u59cb\u5316\u4e86 git \u4ed3\u5e93</li> <li><code>Cargo.toml</code>: TOML\uff08Tom's Obvious, Minimal Language\uff09\u683c\u5f0f\uff0c\u662f Cargo \u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\uff0c\u4ee5\u4e0b\u662f\u9ed8\u8ba4\u7684\u5185\u5bb9</li> </ul> <pre><code>[package]\nname = \"hello_cargo\"\nversion = \"0.1.0\"\nedition = \"2021\"\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\n</code></pre>"},{"location":"01_primer/03_cargo/#22","title":"2.2. \u5305\u4fe1\u606f\u914d\u7f6e","text":"<ul> <li><code>package</code>: \u662f\u4e00\u4e2a\u533a\u57df\u6807\u9898\uff0c\u5728\u8fd9\u91cc\u8868\u793a\u4e0b\u65b9\u914d\u7f6e\u5185\u5bb9\u7528\u6765\u914d\u7f6e\u5305\uff08package\uff09\u7684</li> </ul> <p><code>package</code>\u4e0b\u7684\u914d\u7f6e\u9879\uff1a</p> <ul> <li><code>name</code>: \u9879\u76ee\u540d</li> <li><code>version</code>: \u9879\u76ee\u7248\u672c</li> <li><code>authors</code>: \u9879\u76ee\u4f5c\u8005</li> <li><code>edition</code>: \u9879\u76ee\u4f7f\u7528\u7684Rust\u7248\u672c</li> </ul>"},{"location":"01_primer/03_cargo/#23","title":"2.3. \u4f9d\u8d56\u914d\u7f6e","text":"<ul> <li><code>dependencies</code>: \u8be5\u533a\u57df\u4e4b\u4e0b\u7684\u5185\u5bb9\uff0c\u6807\u8bc6\u9879\u76ee\u4f9d\u8d56\u7684\u4ee3\u7801\u5305\u6216\u4ee3\u7801\u5e93\uff0c\u5728 Rust \u91cc\uff0c\u4ee3\u7801\u7684\u5305\u6216\u5e93\u88ab\u79f0\u4e3a <code>crate</code></li> </ul>"},{"location":"01_primer/03_cargo/#24","title":"2.4. \u6587\u4ef6\u7ed3\u6784\u8bf4\u660e","text":"<p>Cargo\u751f\u6210\u7684 <code>main.rs</code> \u5728 src \u76ee\u5f55\u4e0b\uff0c\u800c Cargo.toml \u5728\u9879\u76ee\u9876\u5c42\u4e0b\uff0c\u6e90\u4ee3\u7801\u90fd\u5e94\u8be5\u5728 src \u76ee\u5f55\u4e0b\uff0c\u9876\u5c42\u76ee\u5f55\u53ef\u4ee5\u653e\u7f6e\uff1aREADME\u3001\u8bb8\u53ef\u4fe1\u606f\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u5176\u4ed6\u4e0e\u7a0b\u5e8f\u6e90\u4ee3\u7801\u65e0\u5173\u7684\u6587\u4ef6\u3002</p> <p>\u5982\u679c\u5728\u521b\u5efa\u9879\u76ee\u7684\u65f6\u5019\u6ca1\u6709\u4f7f\u7528 Cargo \u6765\u521b\u5efa\uff0c\u4e5f\u53ef\u4ee5\u628a\u9879\u76ee\u8f6c\u5316\u4e3a Cargo \u9879\u76ee\uff0c\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <ul> <li>\u628a\u6e90\u4ee3\u7801\u6587\u4ef6\u79fb\u5230 <code>src</code> \u76ee\u5f55\u4e0b</li> <li>\u521b\u5efa Cargo.toml \u5e76\u586b\u5199\u76f8\u5e94\u7684\u914d\u7f6e</li> </ul>"},{"location":"01_primer/03_cargo/#3","title":"3. \u6784\u5efa\u9879\u76ee","text":""},{"location":"01_primer/03_cargo/#31","title":"3.1. \u7f16\u8bd1\u4ee3\u7801","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u7f16\u8bd1\u4ee3\u7801\uff0c\u751f\u6210\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6</p> <pre><code>cargo build\n</code></pre> <p>\u5982\u679c\u662f\u5728Mac/Linux\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\u5982\u4e0b</p> <pre><code>target/debug/hello_cargo\n</code></pre> <p>\u5982\u679c\u662f\u5728windows\u4e2d\uff0c\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84\u5982\u4e0b</p> <pre><code>target/debug/hello_cargo.exe\n</code></pre> <p>\u7b2c\u4e00\u6b21\u8fd0\u884c<code>cargo build</code>\u4f1a\u5728\u9876\u5c42\u76ee\u5f55\u751f\u6210 <code>cargo.lock</code> \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u8d1f\u8d23\u8ffd\u8e2a\u9879\u76ee\u4ee5\u6765\u7684\u786e\u5207\u7248\u672c\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u53bb\u4fee\u6539\u8be5\u6587\u4ef6</p>"},{"location":"01_primer/03_cargo/#32","title":"3.2. \u7f16\u8bd1\u5e76\u6267\u884c\u4ee3\u7801","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u7f16\u8bd1\u4ee3\u7801\u540e\u76f4\u63a5\u6267\u884c\u7a0b\u5e8f\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo run </code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u6267\u884c <code>cargo run</code> \u547d\u4ee4\u540e\uff0ccargo \u5148\u7f16\u8bd1\u7a0b\u5e8f\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u518d\u6267\u884c\u7a0b\u5e8f\uff0c\u5982\u679c\u4e4b\u524d\u7f16\u7a0b\u6210\u529f\u8fc7\uff0c\u5e76\u4e14\u6e90\u4ee3\u7801\u6ca1\u6709\u4fee\u6539\u7684\u60c5\u51b5\u4e0b\uff0c\u90a3\u4e48\u5c31\u4f1a\u76f4\u63a5\u8fd0\u884c\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u3002</p>"},{"location":"01_primer/03_cargo/#33","title":"3.3. \u68c0\u67e5\u4ee3\u7801","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u53ef\u4ee5\u68c0\u67e5\u4ee3\u7801\uff0c\u786e\u4fdd\u7f16\u8bd1\u901a\u8fc7\uff0c\u4f46\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u53ef\u6267\u884c\u6587\u4ef6</p> <pre><code>cargo check\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c<code>cargo check</code>\u8981\u6bd4<code>cargo build</code>\u6267\u884c\u5feb\u7684\u591a\uff0c\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\u5f00\u53d1\u8005\u53ef\u4ee5\u8fde\u7eed\u53cd\u590d\u7684\u4f7f\u7528<code>cargo check</code>\u68c0\u67e5\u4ee3\u7801\uff0c\u786e\u4fdd\u81ea\u5df1\u7684\u4ee3\u7801\u5199\u7684\u6ca1\u6709\u95ee\u9898\uff0c\u6700\u540e\u9700\u8981\u6267\u884c\u7684\u65f6\u5019\u518d\u4f7f\u7528 <code>cargo build</code> \u751f\u6210\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</p>"},{"location":"01_primer/03_cargo/#34","title":"3.4. \u6784\u5efa\u53d1\u884c\u7248\u7a0b\u5e8f","text":"<p>\u5b9e\u9645\u4e0a\uff0c\u5728\u4e0a\u9762\u6267\u884c <code>cargo build</code> \u547d\u4ee4\u751f\u6210\u4e86\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\u8c03\u8bd5\u4f7f\u7528\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5f53\u6211\u4eec\u771f\u6b63\u9700\u8981\u53d1\u7248\u7684\u65f6\u5019\uff0c\u9700\u8981 \u52a0\u4e0a <code>--release</code> \u53c2\u6570\u8fdb\u884c\u7f16\u8bd1\uff0c\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo build --release\n</code></pre> <p>\u52a0\u4e0a <code>--release</code> \u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4ee3\u7801\u4f1a\u8fdb\u884c\u4f18\u5316\uff0c\u7f16\u8bd1\u7684\u65f6\u5019\u53d8\u957f\uff0c\u4f46\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u6267\u884c\u6548\u7387\u4e5f\u66f4\u9ad8\u3002\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u5c06\u4fdd\u5b58\u5728 <code>target/release</code> \u76ee\u5f55\u4e2d\uff0c\u800c\u4e0d\u662f <code>target/debug</code> \u76ee\u5f55\u4e2d\u3002</p> <p>\u6700\u540e\u5f97\u51fa\u4ee5\u4e0b\u7ed3\u8bba\uff1a</p> <ul> <li> <p>\u5728\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u4ee3\u7801\u7f16\u8bd1\u65f6\u4f7f\u7528 <code>cargo build</code> \u547d\u4ee4</p> </li> <li> <p>\u5728\u9879\u76ee\u53d1\u5e03\u65f6\uff0c\u4ee3\u7801\u7f16\u8bd1\u4f7f\u7528 <code>cargo build --release</code> \u547d\u4ee4</p> </li> </ul>"},{"location":"02_guessing_game/01_guessing_game/","title":"\u731c\u6570\u6e38\u620f","text":""},{"location":"02_guessing_game/01_guessing_game/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u4f7f\u7528\u731c\u6570\u6e38\u620f\u7684\u7a0b\u5e8f\uff0c\u6765\u5b66\u4e60\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>let\u3001match\u7b49\u7684\u65b9\u6cd5</li> <li>\u76f8\u5173\u7684\u51fd\u6570</li> <li>\u5916\u90e8crate</li> </ul> <p>\u6e38\u620f\u76ee\u6807\uff1a</p> <ul> <li>\u751f\u62101-100\u4e4b\u95f4\u7684\u968f\u673a\u6570</li> <li>\u63d0\u793a\u73a9\u5bb6\u505a\u4e00\u4e2a\u731c\u6d4b</li> <li>\u731c\u6d4b\u5b8c\u6210\u4e4b\u540e\uff0c\u7a0b\u5e8f\u4f1a\u63d0\u793a\u592a\u5927\u6216\u8005\u592a\u5c0f</li> <li>\u5982\u679c\u731c\u6d4b\u6b63\u786e\uff0c\u6253\u5370\u4e00\u4e2a\u5e86\u795d\u4fe1\u606f\uff0c\u5e76\u9000\u51fa\u7a0b\u5e8f</li> </ul>"},{"location":"02_guessing_game/01_guessing_game/#_3","title":"\u4e8c\u3001\u5b9e\u6218\u8fc7\u7a0b","text":""},{"location":"02_guessing_game/01_guessing_game/#21","title":"2.1 \u751f\u6210\u968f\u673a\u6570","text":"<p>\u65b0\u5efa\u540d\u4e3a <code>guessing_game</code> \u7684\u9879\u76ee\uff0c\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo new guessing_game\n</code></pre> <p>\u6211\u4eec\u7f16\u8f91<code>main.rs</code>\u6587\u4ef6\uff0c\u4fee\u6539\u4e3a\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>use std::io;\nfn main() {\nprintln!(\"\u731c\u6570!\");\nprintln!(\"\u731c\u4e00\u4e2a\u6570\u5b57\");\n// \u4f7f\u7528let\u58f0\u660e\u53d8\u91cf\nlet mut guess = String::new();\nio::stdin().read_line(&amp;mut guess).expect(\"\u65e0\u6cd5\u8bfb\u53d6\u884c\");\nprintln!(\"\u4f60\u731c\u7684\u6570\u5b57\u662f: {}\", guess);\n}\n</code></pre> <p>\u76f8\u5173\u77e5\u8bc6\u70b9\uff1a</p>"},{"location":"02_guessing_game/01_guessing_game/#211-use","title":"2.1.1 use","text":"<p>\u6211\u4eec\u5728\u4e0a\u9762\u7684\u7b2c\u4e00\u884c\u4ee3\u7801\u4e2d\u4f7f\u7528\u4e86<code>use</code>\u5173\u952e\u5b57\uff0c\u8be5\u5173\u952e\u5b57\u662f\u7528\u4e8e\u5bfc\u5165\u5e93\u3002\u5728main\u51fd\u6570\u4e2d\u6211\u4eec\u4f7f\u7528\u5230\u4e86<code>read_line</code>\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7528\u4e8e\u8bfb\u53d6\u7ec8\u7aef\u8f93\u5165\uff0c\u8be5\u51fd\u6570\u5728<code>io</code>\u5e93\u4e2d\uff0c\u800c<code>io</code>\u5e93\u5c5e\u4e8erust\u7684\u6807\u51c6\u5e93\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u4e86<code>use std::io;</code>\u8fdb\u884c\u5f15\u5165\u3002</p> <p>rust\u9ed8\u8ba4\u4f1a\u628a\u4e00\u4e2a\u53eb\u505a<code>prelude</code>\u7684\u5e93\u5bfc\u5165\u5230\u7a0b\u5e8f\u4e2d\uff0c\u5305\u542b\u4e86\u4e00\u4e9b\u57fa\u672c\u7684\u51fd\u6570\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528\u7684\u51fd\u6570\u4e0d\u5728<code>prelude</code>\u5e93\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u663e\u5f0f\u5730\u5bfc\u5165\u5230\u7a0b\u5e8f\u4e2d\uff0c\u5bfc\u5165\u5305\u7684\u5173\u952e\u5b57\u5c31\u662f<code>use</code>\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#212-let","title":"2.1.2 let","text":"<p>\u5728rust\u4e2d\u4f7f\u7528<code>let</code>\u5173\u952e\u5b57\u58f0\u660e\u53d8\u91cf\uff0c\u4f46\u662f\u53d8\u91cf\u9ed8\u8ba4\u4e0d\u53ef\u53d8\uff0c\u5c5e\u4e8e<code>immutable</code>\u72b6\u6001\uff0c\u5982\u679c\u6211\u4eec\u5728\u58f0\u660e\u53d8\u91cf\u7684\u65f6\u5019\u5e0c\u671b\u80fd\u4fee\u6539\u5b83\uff0c\u90a3\u4e48\u8fd8\u9700\u52a0\u4e0a<code>mut</code>\u5173\u952e\u5b57</p>"},{"location":"02_guessing_game/01_guessing_game/#213","title":"2.1.3 \u5173\u8054\u51fd\u6570","text":"<p>\u5728\u4ee5\u4e0a\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u5305\u542b\u4ee5\u4e0b\u7684\u4e00\u884c</p> <pre><code>let mut guess = String::new();\n</code></pre> <p>String\u662f\u4e00\u4e2a\u7c7b\uff0c<code>::</code>\u7b26\u53f7\u7528\u4e8e\u8c03\u7528\u5173\u8054\u51fd\u6570<code>new()</code>\uff0c\u8fd9\u6837\u5c31\u751f\u6210\u4e86\u4e00\u4e2a\u7a7a\u7684\u5b57\u7b26\u4e32\u3002rust\u91cc\u7684\u5173\u8054\u51fd\u6570\u7c7b\u4f3c\u4e8e<code>Java</code>\u7684\u4e2d\u9759\u6001\u65b9\u6cd5\u3002\u5728Rust\u91cc\uff0c\u5f88\u591a\u5730\u65b9\u4f1a\u51fa\u73b0<code>new()</code>\u51fd\u6570\uff0c\u7528\u4e8e\u521d\u59cb\u5316\u5bf9\u8c61\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#214","title":"2.1.4 \u53d6\u5730\u5740\u7b26\u53f7","text":"<p>\u5728\u4e0a\u9762\u7684<code>io::stdin().read_line(&amp;mut guess)</code>\u8fd9\u90e8\u5206\u4ee3\u7801\u4e2d\uff0c<code>read_line</code>\u51fd\u6570\u9700\u8981\u4f20\u5165\u4e86\u4e00\u4e2a\u53ef\u53d8\u7684\u53d8\u91cf\uff0c\u5e76\u4e14\u6211\u4eec\u5728\u53d8\u91cf\u524d\u9762\u52a0\u4e86<code>&amp;</code>\u7b26\u53f7\uff0c\u4ee3\u8868\u4f20\u5165\u7684\u662f\u8fd9\u4e2a\u53d8\u91cf\u7684\u5f15\u7528\uff0c\u53d8\u91cf\u7684\u996e\u7528\u6307\u5411\u53d8\u91cf\u7684\u539f\u59cb\u5185\u5b58\u5730\u5740\u3002\u628a\u5f15\u7528\u4f20\u5230<code>read_line</code>\u51fd\u6570\u91cc\u9762\uff0c\u8ba9\u51fd\u6570\u80fd\u4fee\u6539\u6307\u9488\u5730\u5740\u6240\u5b58\u50a8\u7684\u503c\u3002\u5f15\u7528\u5728rust\u91cc\u4e5f\u662f\u9ed8\u8ba4\u4e0d\u53ef\u53d8\u7684\uff0c\u9700\u8981\u6dfb\u52a0<code>mut</code>\u5173\u952e\u5b57\u8ba9\u53d8\u91cf\u53ef\u53d8\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#215-ioresult","title":"2.1.5 io::Result","text":"<p><code>read_line</code>\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u8fd4\u56de\u4e00\u4e2a<code>io::Result</code>\u7684\u7ed3\u679c\uff0c\u5728rust\u7684\u6807\u51c6\u5e93\u91cc\u90fd\u6709\u4e00\u4e2a\u53eb<code>Result</code>\u7684\u7c7b\u578b\uff0c\u6709\u6cdb\u578b<code>Result</code>\uff0c\u4e5f\u6709\u5b50\u6a21\u5757<code>Result</code>\uff0c\u5982\u4e0a\u9762<code>io::Result</code>\u5c31\u5c5e\u4e8e<code>io</code>\u8fd9\u4e2a\u5b50\u6a21\u5757\u7684<code>Result</code>\u3002</p> <p>\u8fd9\u91cc\u7684<code>Result</code>\u662f\u4e00\u4e2a\u679a\u4e3e(enum)\u7c7b\u578b\uff0c\u4e00\u4e2a\u679a\u4e3e\u7c7b\u578b\u901a\u5e38\u6709\u51e0\u4e2a\u56fa\u5b9a\u7684\u503c\uff0c\u8fd9\u4e9b\u503c\u79f0\u4f5c\u8fd9\u4e2a\u679a\u4e3e\u7c7b\u578b\u7684\u53d8\u4f53\u3002<code>io::Result</code>\u8fd9\u4e2a\u679a\u4e3e\u7c7b\u578b\u4e00\u5171\u6709\u4e24\u4e2a\u53d8\u4f53\uff0c\u4e00\u4e2a\u662f<code>OK</code>\uff0c\u53e6\u4e00\u4e2a\u662f<code>Err</code>\u3002<code>Result</code>\u8fd9\u4e2a\u7c7b\u578b\u901a\u5e38\u5b9a\u4e49\u4e86\u4e00\u4e9b\u65b9\u6cd5\uff0c\u6bd4\u5982\u6211\u4eec\u5728\u4ee3\u7801\u91cc\u8c03\u7528\u7684<code>expect</code>\u65b9\u6cd5\u3002</p> <p>\u5047\u5982\u8fd4\u56de\u7684<code>io.Result</code>\u503c\u662f<code>Err</code>\uff0c\u90a3\u4e48<code>expect</code>\u5c31\u4f1a\u4e2d\u65ad\u5f53\u524d\u7684\u7a0b\u5e8f\uff0c\u5e76\u5c06\u4f20\u5165\u7684\u5b57\u7b26\u4e32\u4fe1\u606f\u5199\u51fa\u6765\uff1b\u5982\u679c\u8fd4\u56de\u7684\u503c\u662f<code>OK</code>\uff0c\u90a3\u4e48expect\u5c31\u4f1a\u63d0\u53d6<code>OK</code>\u4e2d\u9644\u52a0\u7684\u503c\uff0c\u5e76\u5c06\u8fd9\u4e2a\u503c\u4f5c\u4e3a\u7ed3\u679c\u8fd4\u56de\u7ed9\u7528\u6237\u3002</p> <p>\u5982\u679c\u6211\u4eec\u8c03\u7528read_line\u4e4b\u540e\u6ca1\u6709\u8c03\u7528expect\uff0c\u90a3\u4e48\u7f16\u8bd1\u4ee3\u7801\u65f6rust\u5c06\u4f1a\u63d0\u793a\u76f8\u5e94\u7684\u8b66\u544a\uff0c\u56e0\u4e3a\u8fd4\u56de\u7684<code>io::Result</code>\u662f\u4e00\u4e2a\u672a\u4f7f\u7528\u7684\u53d8\u91cf\uff0c\u7a0b\u5e8f\u53ef\u80fd\u5b58\u5728\u6f5c\u5728\u6027\u7684\u9519\u8bef\u3002\u8fd9\u662frust\u7684\u5b89\u5168\u673a\u5236\u5f15\u8d77\u7684\uff0c\u4e5f\u56e0\u6b64\u6211\u4eec\u5728\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u907f\u514d\u5f88\u591a\u9519\u8bef\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#216","title":"2.1.6 \u5360\u4f4d\u7b26","text":"<p>\u5728\u4ee5\u4e0b\u7684\u8fd9\u4e2a\u884c\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u5230\u4e86<code>{}</code>\uff0c\u5728rust\u7684\u53cc\u5f15\u53f7\u5185\uff0c\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u4f1a\u66ff\u6362\u6210\u540e\u9762\u7684\u53d8\u91cf\u3002\u5982\u679c\u53cc\u5f15\u53f7\u4e2d\u91cc\u6709\u591a\u4e2a\u82b1\u62ec\u53f7\uff0c\u5728\u7f16\u8bd1\u65f6\u4f1a\u66ff\u6362\u6210\u540e\u9762\u7684\u591a\u4e2a\u53d8\u91cf\u503c\u3002</p> <pre><code>println!(\"\u4f60\u731c\u7684\u6570\u5b57\u662f: {}\", guess);\n</code></pre>"},{"location":"02_guessing_game/01_guessing_game/#22","title":"2.2 \u751f\u6210\u795e\u79d8\u6570\u5b57","text":""},{"location":"02_guessing_game/01_guessing_game/#221","title":"2.2.1 \u4e0b\u8f7d\u4f9d\u8d56\u5305","text":"<p>\u6211\u4eec\u9996\u5148\u9700\u8981\u751f\u62101\u5230100\u4e4b\u95f4\u7684\u968f\u673a\u6570\uff0c\u4f46\u662frust\u6807\u51c6\u91cc\u5e76\u4e0d\u5305\u542b\u751f\u6210\u968f\u673a\u6570\u5b57\u7684\u529f\u80fd\uff0c\u4e0d\u8fc7\u5b98\u65b9\u63d0\u4f9b\u4e86\u4e00\u4e2a<code>crate</code>\u7528\u4e8e\u751f\u6210\u968f\u673a\u6570\uff0c<code>crate</code>\u540d\u79f0\u53eb\u505a<code>rand</code>\u3002<code>crate</code>\u4ed3\u5e93\u7684\u5b98\u65b9\u7f51\u7ad9\u662f\uff1a[https://crates.io]https://crates.io\uff0c\u6211\u4eec\u53ef\u4ee5\u5728crate\u5b98\u65b9\u7f51\u7ad9\u4e2d\u627e\u5230\u76f8\u5173\u7684<code>crate</code>\u3002</p> <p>\u5728rust\u91cc\uff0c <code>crate</code>\u6211\u4eec\u53ef\u4ee5\u53eb\u505a\u201c\u5e93\u201d\u6216\u8005\u201c\u5305\u201d\uff0ccrate\u53ef\u4ee5\u5206\u4e3a\u4e24\u79cd\uff0c\u4e00\u662f\u6211\u4eec\u6784\u5efa\u597d\u7684\u4e8c\u8fdb\u5236\u53ef\u8fd0\u884c\u6587\u4ef6\uff0c\u53e6\u4e00\u79cd\u662flibrary\uff0clibrary\u7684\u529f\u80fd\u5c31\u662f\u7ed9\u5176\u4ed6\u7a0b\u5e8f\u4f7f\u7528\u3002</p> <p>\u6211\u4eec\u5728\u9879\u76ee\u7684<code>Cargo.toml</code>\u6587\u4ef6\u4e2d\u5f15\u5165<code>rand</code>\u5e93\uff0c\u5982\u4e0b</p> <pre><code>[package]\nname = \"guessing_game\"\nversion = \"0.1.0\"\nedition = \"2021\"\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\nrand = \"0.3.14\"\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5728<code>dependencies</code>\u4e2d\u65b0\u52a0\u4e86\u4e00\u884c<code>rand = \"0.3.14\"</code>\uff0c\u5de6\u8fb9\u4ee3\u8868\u5e93\u7684\u540d\u79f0\uff0c\u53f3\u8fb9\u4ee3\u8868\u5e93\u7684\u7248\u672c\u53f7\uff0c\u8868\u793a\u7684\u662f\u6211\u4eec\u9879\u76ee\u9700\u8981\u4f9d\u8d56\u8fd9\u4e2a\u5e93\u3002\u5f53\u6211\u4eec\u6267\u884c<code>cargo build</code>\u4e4b\u540e\uff0ccargo\u4f1a\u53bb[crates.io]https://crates.io\u4e0b\u8f7d\u6211\u4eec\u5b9a\u4e49\u7684<code>rand</code>\u5e93\u5230\u672c\u5730\uff0c\u540c\u65f6<code>rand</code>\u5e93\u4f9d\u8d56\u7684\u5e93\u4e5f\u4f1a\u88ab\u4e0b\u8f7d\u5230\u672c\u5730\u3002\u4e0b\u8f7d\u5b8c\u6210\u4e4b\u540e\u4f1a\u6267\u884c\u7f16\u8bd1\uff0c\u5982\u679c\u672c\u5730\u5b58\u5728\u4e86\u5bf9\u5e94\u7684\u5e93\uff0c\u5219\u76f4\u63a5\u6267\u884c\u7f16\u8bd1\u3002</p> <p><code>cargo</code>\u7b2c\u4e00\u6b21\u6267\u884c<code>cargo build</code>\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u4f1a\u751f\u6210<code>Cargo.lock</code>\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4fdd\u5b58\u4e86\u5f53\u524d\u9879\u76ee\u4f9d\u8d56\u7684\u6240\u6709\u5e93\u4ee5\u53ca\u5bf9\u5e94\u7684\u5e93\u7248\u672c\uff0c\u5982\u679c\u4e0b\u6b21\u7ee7\u7eed\u6267\u884c<code>build</code>\u6307\u4ee4\uff0c<code>cargo</code>\u5c06\u76f4\u63a5\u4ece<code>Cargo.lock</code>\u4e2d\u76f4\u63a5\u8bfb\u53d6\u4f9d\u8d56\u5e93\u4fe1\u606f\uff0c\u5e76\u52a0\u8f7d\u5230\u6211\u4eec\u7684\u9879\u76ee\u4e2d\u3002</p> <p>\u5f53\u6211\u4eec\u5e0c\u671b<code>cargo</code>\u8bfb\u53d6\u7684\u662f<code>Cargo.toml</code>\u6587\u4ef6\u83b7\u53d6\u7248\u672c\u4fe1\u606f\uff0c\u800c\u4e0d\u662f<code>Cargo.lock</code>\u83b7\u53d6\u7248\u672c\u4fe1\u606f\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>cargo update</code>\u547d\u4ee4\u66f4\u65b0\u4f9d\u8d56\uff0c<code>cargo</code>\u4f1a\u6839\u636e<code>Cargo.toml</code>\u63d0\u4f9b\u7684\u7248\u672c\u4fe1\u606f\u66f4\u65b0\u4f9d\u8d56,\u5e76\u4e14\u518d\u6b21\u5199\u5165\u5230<code>Cargo.lock</code>\u4e2d\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#222-trait","title":"2.2.2 \u5f15\u5165trait","text":"<p>trait\u7c7b\u4f3c\u4e8eJava\u4e2d\u7684\u63a5\u53e3\uff0c\u4f46trait\u4e0d\u662f\u7528\u4e8e\u7ee7\u627f\uff0c\u800c\u662f\u5f15\u7528\uff0c\u5f15\u7528trait\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528trait\u5b9a\u4e49\u7684\u76f8\u5173\u65b9\u6cd5\u3002\u4e0b\u9762\u6211\u4eec\u5f15\u5165<code>rand</code>\u5e93\u4e2d\u7684<code>Rng</code>\uff0c\u5982\u4e0b</p> <pre><code>use rand::Rng;\n</code></pre> <p>\u5f15\u5165\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u751f\u6210\u968f\u673a\u6570\u7684\u51fd\u6570\u4e86\uff0c\u6211\u4eec\u5148\u5c06\u751f\u6210\u7684\u968f\u673a\u6570\u6253\u5370\u51fa\u6765\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let secret_number = rand::thread_rng().gen_range(1, 101);\nprintln!(\"\u795e\u79d8\u6570\u5b57\u662f{}\", secret_number);\n</code></pre> <p>\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u8c03\u7528<code>rand::thread_rng()</code>\u751f\u6210\u4e86\u4e00\u4e2a\u968f\u673a\u6570\u751f\u6210\u5668\uff0c\u518d\u8c03\u7528<code>gen_range()</code>\u65b9\u6cd5\u5b9e\u73b0\u4e86\u968f\u673a\u6570\u7684\u751f\u6210\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6700\u5c0f\u503c\u95ed\u533a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6700\u5927\u503c\u5f00\u533a\u95f4\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#23","title":"2.3 \u6bd4\u8f83\u731c\u6d4b\u7684\u6570\u5b57\u4e0e\u795e\u79d8\u6570\u5b57","text":"<p>\u6211\u4eec\u9700\u8981\u6bd4\u8f83<code>gues</code> \u548c <code>secret_number</code>\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u9996\u5148\u6211\u4eec\u9700\u8981\u4ece\u6807\u51c6\u5e93\u4e2d\u5f15\u5165\u5982\u4e0b<code>cmp::Ordering</code>\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>use std::cmp::Ordering;\n</code></pre> <p>\u8fd9\u91cc\u7684<code>Ordering</code>\u662f\u4e2a\u679a\u4e3e\u7c7b\u578b\uff0c\u5305\u542b\u4e09\u4e2a\u503c\uff0c\u5982\u4e0b</p> <ul> <li>Less: \u5c0f\u4e8e</li> <li>Greater: \u5927\u4e8e</li> <li>Equal: \u7b49\u4e8e</li> </ul> <p>\u6bd4\u8f83\u7684\u4ee3\u7801\u5982\u4e0b</p> <pre><code>// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: u32 = guess.trim().parse().expect(\"Please type a number\")\nmatch guess.cmp(&amp;secret_number){\nOrdering::Less =&gt; println!(\"Too small!\"),\nOrdering::Greater =&gt; print!(\"To big!\"),\nOrdering::Equal =&gt; println!(\"You win\"),\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u540c\u540d\u7684u32\u7c7b\u578b\u7684\u53d8\u91cf<code>guess</code>\uff0c\u8fd9\u6837\uff0c\u5728\u8be5\u884c\u4ee3\u7801\u4e4b\u4e0a\u5b9a\u4e49\u7684String\u7c7b\u578b\u7684<code>guess</code>\u53d8\u91cf\u5c31\u4f1a\u88ab\u9690\u85cf\uff08shadow\uff09\u3002\u5728\u8be5\u884c\u4ee3\u7801\u4ee5\u540e\uff0c\u9047\u5230\u7684<code>guess</code>\u5219\u662fu32\u7c7b\u578b\u7684<code>guess</code>\u3002\u8fd9\u4e2a\u7279\u6027\u901a\u5e38\u4f7f\u7528\u5728\u6211\u4eec\u9700\u8981\u7c7b\u578b\u8f6c\u6362\u7684\u573a\u666f\u4e2d\uff0c\u8fd9\u6837\u6211\u4eec\u65e0\u9700\u65b0\u8d77\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528\u4e4b\u524d\u7684\u53d8\u91cf\u540d\u3002</p> <p><code>trim</code>: trim\u51fd\u6570\u4f1a\u628a\u5b57\u7b26\u4e32\u4e24\u8fb9\u7684\u7a7a\u767d\u5185\u5bb9\u53bb\u6389 <code>parse</code>: parse\u51fd\u6570\u4f1a\u628a\u5c06\u5b57\u7b26\u4e32\u89e3\u6790\u6210u32\u7c7b\u578b</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u751f\u6210\u7684\u968f\u673a\u6570<code>secret_number</code>\u9ed8\u8ba4\u662fi32\u7c7b\u578b\uff0c\u4f46\u662f\u5728\u5f80\u4e0b\u7684\u4ee3\u7801\u4e2d\uff0c<code>secret_number</code>\u88ab\u7528\u4e8e\u4e0e<code>guess</code>\u505a\u5bf9\u6bd4\uff0c\u6240\u4ee5\u6839\u636erust\u7c7b\u578b\u89e3\u6790\u4e0e\u63a8\u5012\u7684\u673a\u5236\uff0c<code>secret_number</code>\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u8f6c\u53d8\u4e3a\u4e86u32\u3002</p>"},{"location":"02_guessing_game/01_guessing_game/#24","title":"2.4 \u591a\u6b21\u731c\u6d4b","text":"<p>\u5728\u4ee5\u4e0a\u7684\u7a0b\u5e8f\u4e2d\uff0c\u7528\u6237\u53ea\u80fd\u731c\u6d4b\u4e00\u6b21\u6570\u636e\u662f\u5426\u6b63\u786e\uff0c\u4e3a\u4e86\u80fd\u5b9e\u73b0\u591a\u6b21\u731c\u6d4b\uff0c\u6211\u4eec\u9700\u8981\u505a\u4e00\u4e2a\u65e0\u7ebf\u5faa\u73af\u3002\u6211\u4eec\u5427\u624d\u731c\u6d4b\u7684\u903b\u8f91\u653e\u5728<code>loop</code>\u4e2d\uff0c\u5373\u53ef\u5b9e\u73b0\u65e0\u9650\u5faa\u73af\u3002</p> <pre><code>loop {\nprintln!(\"\u731c\u4e00\u4e2a\u6570\u5b57\");\nlet mut guess = String::new();\nio::stdin().read_line(&amp;mut guess).expect(\"\u65e0\u6cd5\u8bfb\u53d6\u884c\");\nprintln!(\"\u4f60\u731c\u7684\u6570\u5b57\u662f: {}\", guess);\n// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: u32 = guess.trim().parse().expect(\"Please type a number\");\nmatch guess.cmp(&amp;secret_number) {\nOrdering::Less =&gt; println!(\"Too small!\"),\nOrdering::Greater =&gt; print!(\"To big!\"),\nOrdering::Equal =&gt; println!(\"You win\"),\n}\n}\n</code></pre> <p>\u4f46\u4e0a\u9762\u7684\u7a0b\u5e8f\u4e2d\uff0c\u5373\u4f7f\u6211\u4eec\u731c\u5bf9\u4e86\uff0c\u4e5f\u4e0d\u4f1a\u505c\u6b62\u3002\u6211\u4eec\u5e94\u8be5\u5c06\u903b\u8f91\u6539\u4e3a\uff0c\u8ba9\u8f93\u5165\u6b63\u786e\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u5f53\u8df3\u51fa\u5faa\u73af\uff0c\u6539\u4e3a\u5982\u4e0b\u4ee3\u7801</p> <pre><code>loop {\nprintln!(\"\u731c\u4e00\u4e2a\u6570\u5b57\");\nlet mut guess = String::new();\nio::stdin().read_line(&amp;mut guess).expect(\"\u65e0\u6cd5\u8bfb\u53d6\u884c\");\nprintln!(\"\u4f60\u731c\u7684\u6570\u5b57\u662f: {}\", guess);\n// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: u32 = guess.trim().parse().expect(\"Please type a number\");\nmatch guess.cmp(&amp;secret_number) {\nOrdering::Less =&gt; println!(\"Too small!\"),\nOrdering::Greater =&gt; print!(\"To big!\"),\nOrdering::Equal =&gt; {\nprintln!(\"You win\");\nbreak;\n}\n}\n}\n</code></pre>"},{"location":"02_guessing_game/01_guessing_game/#25","title":"2.5 \u5b8c\u5584\u7a0b\u5e8f","text":""},{"location":"02_guessing_game/01_guessing_game/#251","title":"2.5.1 \u5b8c\u5584\u5065\u58ee\u6027","text":"<p>\u5982\u679c\u6211\u4eec\u5728\u5728\u731c\u6570\u7684\u65f6\u5019\uff0c\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u975e\u6570\u5b57\u7684\u5b57\u7b26\uff0c\u7a0b\u5e8f\u5c06\u88ab\u5f02\u5e38\u9000\u51fa\uff0c\u6211\u4eec\u5728\u89e3\u6790\u6570\u5b57\u7684\u65f6\u5019\u4f7f\u7528<code>match</code>\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f\u91cc\u9488\u5bf9\u4e0d\u540c\u7684\u679a\u4e3e\u7ed3\u679c\u8fdb\u884c\u4e0d\u540c\u7684\u5904\u7406\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let guess: u32 = match guess.trim().parse(){\n// \u89e3\u6790\u6b63\u786e\u65f6\u5c06\u6570\u5b57\u8fd4\u56de\nOk(num) =&gt; num,\n// \u89e3\u6790\u9519\u8bef\u65f6\uff0c\u4f7f\u7528 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\nErr(_) =&gt; continue\n};\n</code></pre>"},{"location":"02_guessing_game/01_guessing_game/#252","title":"2.5.2 \u53d6\u6d88\u63d0\u793a","text":"<p>\u8fd8\u9700\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684\u76ee\u7684\u662f\u8ba9\u7528\u6237\u73a9\u8fd9\u4e2a\u6e38\u620f\uff0c\u90a3\u4e48\u5c31\u4e0d\u5e94\u8be5\u628a\u7ed3\u679c\u6253\u5370\u51fa\u6765\uff0c\u6240\u4ee5\u53bb\u6389\u4e0b\u9762\u8fd9\u884c\u4ee3\u7801</p> <pre><code>println!(\"\u795e\u79d8\u6570\u5b57\u662f{}\", secret_number);\n</code></pre>"},{"location":"02_guessing_game/01_guessing_game/#_4","title":"\u4e09\u3001\u8fd0\u884c\u7a0b\u5e8f","text":"<p>\u6700\u7ec8<code>main.rs</code>\u6587\u4ef6\u7f16\u5199\u7684\u7a0b\u5e8f\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use rand::Rng;\nuse std::cmp::Ordering;\nuse std::io;\nfn main() {\nprintln!(\"\u731c\u6570\u6e38\u620f!\");\nlet secret_number = rand::thread_rng().gen_range(1, 101);\nloop {\nprintln!(\"\u731c\u4e00\u4e2a\u6570\u5b57\");\nlet mut guess = String::new();\nio::stdin().read_line(&amp;mut guess).expect(\"\u65e0\u6cd5\u8bfb\u53d6\u884c\");\nprintln!(\"\u4f60\u731c\u7684\u6570\u5b57\u662f: {}\", guess);\n// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: u32 = match guess.trim().parse() {\n// \u89e3\u6790\u6b63\u786e\u65f6\u5c06\u6570\u5b57\u8fd4\u56de\nOk(num) =&gt; num,\n// \u89e3\u6790\u9519\u8bef\u65f6\uff0c\u4f7f\u7528 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\nErr(_) =&gt; continue,\n};\nmatch guess.cmp(&amp;secret_number) {\nOrdering::Less =&gt; println!(\"Too small!\"),\nOrdering::Greater =&gt; print!(\"To big!\"),\nOrdering::Equal =&gt; {\nprintln!(\"You win\");\nbreak;\n}\n}\n}\n}\n</code></pre> <p>\u7f16\u8bd1</p> <pre><code>cargo build\n</code></pre> <p>\u8fd0\u884c</p> <pre><code>target/debug/guessing_game\n</code></pre>"},{"location":"03_common_programming_concepts/01_variables/","title":"\u53d8\u91cf\u4e0e\u53ef\u53d8\u6027","text":""},{"location":"03_common_programming_concepts/01_variables/#_2","title":"\u4e00\u3001\u53d8\u91cf","text":"<ul> <li> <p>\u58f0\u660e\u53d8\u91cf\u4f7f\u7528let</p> </li> <li> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53d8\u91cf\u662f\u4e0d\u53ef\u53d8\u7684</p> </li> <li> <p>\u5728\u58f0\u660e\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5728\u53d8\u91cf\u7684\u524d\u9762\u52a0\u4e0a<code>mut</code>\uff0c\u5c31\u53ef\u4ee5\u4f7f\u53d8\u91cf\u53ef\u53d8\u3002</p> </li> </ul> <p>\u6211\u4eec\u5148\u6765\u56de\u987e\u4e00\u4e0b\u4ee5\u4e0b\u7684\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = 5;\nprintln!(\"The value of x is {}!\", x);\n}\n</code></pre> <p>\u6211\u4eec\u5148\u58f0\u660e\u4e86\u4e00\u4e2a<code>x</code>\u53d8\u91cf\uff0c\u5e76\u6253\u5370\u5230\u7ec8\u7aef\u4e0a\uff0c<code>x</code>\u9ed8\u8ba4\u88ab\u63a8\u5012\u4e3a<code>i32</code>\u7c7b\u578b\uff0c\u8fd9\u4e2a\u53d8\u91cf\u9ed8\u8ba4\u5c31\u662f\u4e0d\u53ef\u53d8\u7684\u3002\u56e0\u4e3a\u6ca1\u6709<code>mut</code>\u5173\u952e\u5b57\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut x = 5;\nprintln!(\"The value of x is {}!\", x);\nx = 6;\nprintln!(\"The new value of x is {}!\", x);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/01_variables/#_3","title":"\u4e8c\u3001\u5e38\u91cf","text":"<p>\u5e38\u91cf\uff08constant\uff09\uff0c\u5e38\u91cf\u5728\u7ed1\u5b9a\u503c\u4ee5\u540e\u4e5f\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u4f46\u662f\u4ed6\u4e0e\u53d8\u91cf\u6709\u5f88\u591a\u533a\u522b</p> <ul> <li> <p>\u5e38\u91cf\u4e0d\u53ef\u4ee5\u4f7f\u7528mut\uff0c\u5e38\u91cf\u6c38\u8fdc\u90fd\u662f\u4e0d\u53ef\u53d8\u7684</p> </li> <li> <p>\u58f0\u660e\u5e38\u91cf\u4f7f\u7528constant\u5173\u952e\u5b57\uff0c\u5b83\u7684\u7c7b\u578b\u5fc5\u987b\u88ab\u6807\u6ce8\u6e05\u695a</p> </li> <li> <p>\u5e38\u91cf\u53ef\u4ee5\u5728\u4efb\u4f55\u4f5c\u7528\u57df\u5185\u8fdb\u884c\u7533\u660e\uff0c\u5305\u62ec\u5168\u5c40\u4f5c\u7528\u57df</p> </li> <li> <p>\u5e38\u91cf\u53ea\u53ef\u4ee5\u7ed1\u5b9a\u5230\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u65e0\u6cd5\u7ed1\u5b9a\u5230\u51fd\u6570\u8c03\u7528\u7ed3\u679c\u6216\u53ea\u80fd\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u8ba1\u7b97\u51fa\u7684\u503c</p> </li> </ul> <p>\u5728\u7a0b\u5e8f\u8fd0\u884c\u671f\u95f4\uff0c\u5e38\u91cf\u5728\u5176\u4f5c\u7528\u57df\u5185\u4e00\u76f4\u6709\u6548\uff0cRust\u91cc\u5e38\u91cf\u7684\u547d\u540d\u89c4\u8303\u662f\u4f7f\u7528\u5168\u5927\u5199\u5b57\u6bcd\uff0c\u6bcf\u4e2a\u5355\u8bcd\u4e4b\u95f4\u4f7f\u7528\u4e0b\u5212\u7ebf\u5206\u5f00\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>const MAX_POINTS: u32 = 10_0000;\n</code></pre> <p>\u5728rust\u91cc\u6570\u5b57\u53ef\u4ee5\u6dfb\u52a0\u4e0b\u6ed1\u7ebf\uff0c\u6765\u589e\u5f3a\u53ef\u8bfb\u6027\uff0c\u5982\u4ee5\u4e0a\u7684\u503c\u65f6\u5341\u4e07\u3002</p>"},{"location":"03_common_programming_concepts/01_variables/#shadowing","title":"\u4e09\u3001shadowing","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u540d\u79f0\u58f0\u660e\u65b0\u7684\u53d8\u91cf\uff0c\u65b0\u7684\u53d8\u91cf\u5c31\u4f1ashadow\uff08\u9690\u85cf\uff09\u4e4b\u524d\u7684\u540c\u540d\u53d8\u91cf\uff0c\u770b\u5230\u4ee5\u4e0b\u4ee3\u7801\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c\u7f16\u8bd1\u5c06\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u53d8\u91cf\u9ed8\u8ba4\u4e0d\u53ef\u53d8</p> <pre><code>fn main() {\nlet x = 5;\nx = 6;\nprintln!(\"The value of x is {}!\", x);\n}\n</code></pre> <p>\u4f46\u5982\u679c\u6211\u4eec\u4f7f\u7528\u91cd\u65b0\u58f0\u660e\u7684\u65b9\u5f0f\uff0c\u4ee3\u7801\u5c06\u80fd\u7f16\u8bd1\u901a\u8fc7</p> <pre><code>fn main() {\nlet x = 5;\nlet x = x + 1;\nprintln!(\"The value of x is {}!\", x);\n}\n</code></pre> <p>\u5982\u679c\u5728<code>let x = 6;</code>\u8fd9\u884c\u4ee3\u7801\u4e4b\u540e\uff0c\u518d\u4f7f\u7528\u5230<code>x</code>\uff0c\u8be5\u53d8\u91cf\u5c31\u662f\u5c31\u662f\u6700\u65b0\u7684\u53d8\u91cf\u4e86\u3002\u56e0\u4e3a\u540e\u9762<code>x</code>\u7684\u58f0\u660e\u628a\u524d\u9762\u7684<code>x</code>\u8fdb\u884cshaw\uff08\u9690\u85cf\uff09\u4e86\u3002show\uff08\u9690\u85cf\uff09\u548c\u628a\u53d8\u91cf\u6807\u8bb0\u4e3amut\u662f\u4e0d\u4e00\u6837\u3002</p> <ul> <li>\u5982\u679c\u4e0d\u4f7f\u7528let\u5173\u952e\u5b57\uff0c\u90a3\u4e48\u91cd\u65b0\u7ed9\u98demut\u7684\u53d8\u91cf\u8d4b\u503c\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u9519\u8bef</li> <li>\u800c\u4f7f\u7528let\u58f0\u660e\u7684\u540c\u540d\u65b0\u53d8\u91cf\uff0c\u4e5f\u662f\u4e0d\u53d8\u7684</li> <li>\u4f7f\u7528let\u58f0\u660e\u7684\u540c\u540d\u65b0\u53d8\u91cf\uff0c\u5b83\u7684\u7c7b\u578b\u53ef\u4ee5\u548c\u4e4b\u524d\u4e0d\u540c</li> </ul> <p>\u793a\u4f8b\u4ee3\u7801\uff1a</p> <pre><code>fn main() {\nlet spaces = \"   \";\nlet spaces = spaces.len();\nprintln!(\"The spaces value of x is {}!\", spaces);\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u4e2a<code>spaces</code>\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u800c\u7b2c\u4e8c\u4e2a<code>spaces</code>\u5219\u53d8\u6210\u4e86<code>usize</code>\u7c7b\u578b\uff08\u533a\u5206\u8ba1\u7b97\u673a\u4f4d\u6570\u7684\u65e0\u7b26\u53f7\u6574\u578b\uff09\u3002\u5982\u679c\u6211\u4eec\u628a\u4ee3\u7801\u6539\u6210\u5982\u4e0b\u5185\u5bb9</p> <pre><code>fn main() {\nlet mut spaces = \"   \";\nspaces = spaces.len();\nprintln!(\"The spaces value of x is {}!\", spaces);\n}\n</code></pre> <p>\u6b64\u65f6\u7f16\u8bd1\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5728<code>spaces = spaces.len();</code>\u8fd9\u884c\u4ee3\u7801\u4e2d\uff0c\u5de6\u8fb9\u662f\u5305\u542b<code>mut</code>\u5173\u952e\u5b57\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u53f3\u8fb9\u7684\u6267\u884c\u7ed3\u679c\u662f<code>usize</code>\u7c7b\u578b\u3002</p> <p>rust\u7684show\u529f\u80fd\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u7075\u6d3b\u5730\u590d\u7528\u53d8\u91cf\u540d\u3002</p>"},{"location":"03_common_programming_concepts/02_data_type/","title":"\u6570\u636e\u7c7b\u578b","text":""},{"location":"03_common_programming_concepts/02_data_type/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>Rust\u7684\u6570\u636e\u7c7b\u578b\u5305\u542b\u4e24\u4e2a\u5927\u7c7b\uff0c\u5373\uff1a\u6807\u91cf\u548c\u590d\u5408\u7c7b\u578b\u3002Rust\u662f\u9759\u6001\u8bed\u8a00\uff0c\u5728\u7f16\u8bd1\u65f6\u5fc5\u987b\u77e5\u9053\u6240\u6709\u53d8\u91cf\u7c7b\u578b</p> <ul> <li> <p>\u57fa\u4e8e\u4f7f\u7528\u7684\u503c\uff0c\u7f16\u8bd1\u5668\u901a\u5e38\u80fd\u591f\u63a8\u65ad\u51fa\u5b83\u7684\u5177\u4f53\u7c7b\u578b</p> </li> <li> <p>\u4f46\u5982\u679c\u53ef\u80fd\u7684\u7c7b\u578b\u6bd4\u8f83\u591a\uff0c\u5c31\u5fc5\u987b\u6dfb\u52a0\u7c7b\u578b\u58f0\u660e\u6807\u6ce8\uff0c\u5426\u5219\u4f1a\u7f16\u8bd1\u62a5\u9519\u3002\u4f8b\u5982\u628aString\u8c03\u7528parse\u65b9\u6cd5\u8f6c\u4e3a\u6574\u5f62\uff0c\u6211\u4eec\u5fc5\u987b\u6807\u6ce8\u63a5\u53d7\u503c\u7684\u53d8\u91cf\u4e3a\u6574\u5f62\uff0c\u662f\u56e0\u4e3a\u8be5\u65b9\u6cd5\u80fd\u63a8\u65ad\u7684\u7c7b\u578b\u79cd\u7c7b\u6bd4\u8f83\u591a\uff0c\u5982:<code>i32</code>\u3001<code>u32</code>\u7b49\u3002</p> </li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\u4ee3\u7801\u58f0\u660e\u4e00\u4e2a\u6574\u5f62\u53d8\u91cf\uff0c\u7528\u4e8e\u5b58\u50a8\u901a\u8fc7\u89e3\u6790\u5b57\u7b26\u4e32\u5f97\u5230\u7684\u503c\u3002\u8fd9\u6837rust\u5c31\u77e5\u9053\u6211\u4eec\u8981\u89e3\u6790\u7684\u503c\u786e\u5b9a\u662f<code>u32</code>\u7c7b\u578b</p> <pre><code>fn main() {\nlet guess: u32 = \"42\".parse().expect(\"Not a number!\");\nprintln!(\"You guessed: {}\", guess);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#_3","title":"\u4e8c\u3001\u6807\u91cf\u7c7b\u578b","text":"<ul> <li> <p>\u4e00\u4e2a\u6807\u91cf\u7c7b\u578b\u4ee3\u8868\u4e00\u4e2a\u5355\u4e2a\u7684\u503c</p> </li> <li> <p>Rust\u6709\u56db\u4e2a\u4e3b\u8981\u7684\u6807\u91cf\u7c7b\u578b</p> </li> <li> <p>\u6574\u6570\u7c7b\u578b</p> </li> <li> <p>\u6d6e\u70b9\u7c7b\u578b</p> </li> <li> <p>\u5e03\u5c14\u7c7b\u578b</p> </li> <li> <p>\u5b57\u7b26\u7c7b\u578b</p> </li> </ul>"},{"location":"03_common_programming_concepts/02_data_type/#21","title":"2.1 \u6574\u6570\u7c7b\u578b","text":"<p>\u6574\u6570\u7c7b\u578b \u6574\u6570\u7c7b\u578b\u6ca1\u6709\u5c0f\u6570\u90e8\u5206\uff0c\u4f8b\u5982u32\u5c31\u662f\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684\u6574\u6570\u7c7b\u578b\uff0c\u5360\u636e32\u4f4d\u7684\u7a7a\u95f4\u3002\u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\u4ee5u\u5f00\u5934\uff0c\u6709\u7b26\u53f7\u7684\u6570\u636e\u7c7b\u578b\u4ee5i\u5f00\u53d1\uff0crust\u7684\u6574\u6570\u7c7b\u578b\u5217\u8868\u5982\u4e0b\u56fe</p> \u957f\u5ea6 \u6709\u7b26\u53f7\u7c7b\u578b \u65e0\u7b26\u53f7\u7c7b\u578b 8-bit i8 u8 16-bit i16 u16 32-bit i32 u32 64-bit i64 u64 128-bit i128 u128 arch isize usize <p>\u6709\u7b26\u53f7\u7684\u6570\u5b57\u7c7b\u578b\u6709\u6b63\u6709\u8d1f\uff0c\u65e0\u7b26\u53f7\u7684\u6570\u5b57\u7c7b\u578b\u53ea\u6709\u6b63\u6570\u3002</p> <p>\u6709\u7b26\u53f7\u8303\u56f4\uff1a-(2^n - 1) \u5230 2^(n-1) - 1</p> <p>\u65e0\u7b26\u53f7\u8303\u56f4\uff1a2^n - 1</p> <p><code>arch</code>\u7c7b\u578b\u7531\u8ba1\u7b97\u673a\u7684\u67b6\u6784\u4f4d\u6570\u6240\u51b3\u5b9a\uff0c\u5982\u679c\u8ba1\u7b97\u673a\u662f64\u4f4d\uff0c\u90a3\u4e48<code>isize</code>\u548c<code>usize</code>\u7684\u4f4d\u6570\u5c31\u662f64\u3002\u4f7f\u7528<code>isize</code>\u548c<code>usize</code>\u7684\u4e3b\u8981\u573a\u666f\u662f\u5bf9\u67d0\u79cd\u96c6\u5408\u8fdb\u884c\u7d22\u5f15\u64cd\u4f5c\u3002</p> <p>\u6574\u6570\u5b57\u9762\u503c \u6574\u6570\u7684\u5b57\u9762\u503c\uff0c\u53ef\u4ee5\u6709\u591a\u79cd\u8868\u793a\u5f62\u5f0f\uff0c\u5982\u4e0b\u8868</p> \u5b57\u9762\u503c \u793a\u4f8b \u5341\u8fdb\u5236\uff08decimal\uff09 98_222 \u5341\u516d\u8fdb\u5236\uff08hex\uff09 0xff \u516b\u8fdb\u5236\uff08Octal\uff09 0o77 \u4e8c\u8fdb\u5236\uff08Binary\uff09 0b1111_0000 \u5b57\u8282\uff08\u4ec5\u9650\u4e0eu8\u7c7b\u578b\uff09 b'A' <p>\u51fa\u4e86byte\u7c7b\u578b\u4e4b\u5916\uff0c\u6240\u6709\u7684\u6570\u503c\u7c7b\u578b\u90fd\u5141\u8bb8\u4f7f\u7528\u7c7b\u578b\u540e\u7f00\uff0c\u4f8b\u5982\uff1a<code>57u8</code></p> <p>\u5982\u679c\u4e0d\u6e05\u695a\u5e94\u8be5\u4f7f\u7528\u54ea\u79cd\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528rust\u76f8\u5e94\u7684\u9ed8\u8ba4\u7c7b\u578b\uff0c\u6574\u6570\u7684\u9ed8\u8ba4\u7c7b\u578b\u662f<code>i32</code>\uff0c\u603b\u4f53\u4e0a\u6765\u8bf4\u901f\u5ea6\u5f88\u5feb\uff0c\u5373\u4f7f\u572864\u4f4d\u7cfb\u7edf\u4e2d</p>"},{"location":"03_common_programming_concepts/02_data_type/#211","title":"2.1.1 \u6574\u6570\u6ea2\u51fa","text":"<p>\u4f8b\u5982\uff1au8\u7684\u8303\u56f4\u662f0-255\uff0c\u5982\u679c\u4f60\u628a\u4e00\u4e2au8\u53d8\u91cf\u7684\u503c\u8bbe\u4e3a256\uff0c\u90a3\u4e48\uff1a</p> <ul> <li>\u5728\u8c03\u8bd5\u6a21\u5f0f\u4e0b\u7f16\u8bd1\uff0crust\u4f1a\u68c0\u67e5\u6574\u6570\u6ea2\u51fa\uff0c\u5982\u679c\u53d1\u751f\u6ea2\u51fa\uff0c\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u5c31\u4f1a\u53d1\u751fpanic</li> <li>\u5728\u53d1\u5e03\u6a21\u5f0f\u4e0b\uff08--release\uff09\u7f16\u8bd1\uff0crust\u4e0d\u4f1a\u68c0\u67e5\u53ef\u80fd\u5bfc\u81f4panic\u7684\u6574\u6570\u6ea2\u51fa\uff0c\u5982\u679c\u53d1\u751f\u6ea2\u51fa\uff0crust\u4f1a\u6267\u884c\u73af\u7ed5\u64cd\u4f5c\uff0c256\u53d8\u62100\uff0c257\u53d8\u62101\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u4f46\u4e0d\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u7684panic</li> </ul>"},{"location":"03_common_programming_concepts/02_data_type/#22","title":"2.2 \u6d6e\u70b9\u7c7b\u578b","text":"<p>rust\u6709\u4e24\u79cd\u57fa\u7840\u7684\u6d6e\u70b9\u7c7b\u578b\uff0c\u4e5f\u5c31\u662f\u542b\u6709\u5c0f\u6570\u90e8\u5206\u7684\u7c7b\u578b\uff0c\u5305\u542b\u4ee5\u4e0b\u4e24\u79cd</p> <ul> <li> <p>f32\uff0c\u5360\u636e32\u4f4d\u957f\u5ea6\uff0c\u5355\u7cbe\u5ea6</p> </li> <li> <p>f64\uff0c\u5360\u636e64\u4f4d\u957f\u5ea6\uff0c\u53cc\u7cbe\u5ea6</p> </li> </ul> <p>rust\u7684\u6d6e\u70b9\u6570\u7c7b\u578b\u4f7f\u7528\u4e86 IEEE-754 \u6807\u6ce8\u6765\u63cf\u8ff0\uff0cf64 \u662f\u9ed8\u8ba4\u7c7b\u578b\uff0c\u56e0\u4e3a\u5728\u73b0\u4ee3\u8ba1\u7b97\u673a\u91cc\u4e0af64\u548cf32\u8fd0\u884c\u901f\u5ea6\u5dee\u4e0d\u591a\uff0c\u4f46f64\u66f4\u52a0\u7cbe\u786e\u3002</p>"},{"location":"03_common_programming_concepts/02_data_type/#23","title":"2.3 \u6570\u503c\u7684\u64cd\u4f5c","text":"<ul> <li>\u6570\u503c\u652f\u6301\u52a0\u3001\u51cf\u3001\u4e58\u3001\u9664\u3001\u4f59\u8ba1\u7b97\uff0c</li> </ul>"},{"location":"03_common_programming_concepts/02_data_type/#23_1","title":"2.3 \u5e03\u5c14\u7c7b\u578b","text":"<p>rust\u7684\u5e03\u5c14\u7c7b\u578b\u4e5f\u6709\u4e24\u4e2a\u503c\uff1atrue\u548cfalse\uff0c\u5360\u7528\u4e00\u4e2a\u5b57\u8282\u7684\u5927\u5c0f</p>"},{"location":"03_common_programming_concepts/02_data_type/#24","title":"2.4 \u5b57\u7b26\u7c7b\u578b","text":"<p>rust\u8bed\u8a00\u4e2dchar\u7c7b\u578b\u88ab\u7528\u6765\u63cf\u8ff0\u8bed\u8a00\u4e2d\u6700\u57fa\u7840\u7684\u5355\u4e2a\u5b57\u7b26\uff0c\u5b57\u7b26\u7c7b\u578b\u7684\u5b57\u9762\u503c\u4f7f\u7528\u5355\u5f15\u53f7\uff0c\u5360\u75284\u4e2a\u5b57\u8282\u7684\u5927\u5c0f\uff0c\u5b57\u7b26\u7c7b\u578b\u662fUnicode\u6807\u91cf\u503c\uff0c\u53ef\u4ee5\u8868\u793a\u6bd4 ASCII \u591a\u5f88\u591a\u7684\u5b57\u7b26\u5185\u5bb9\uff1a\u62fc\u97f3\u3001\u4e2d\u6587\u3001\u65e5\u6587\u3001\u97e9\u6587\u3001\u96f6\u957f\u5ea6\u7a7a\u767d\u5b57\u7b26\u3001emoji\u8868\u60c5\u7b49\u3002\u8303\u56f4\u503c\u662f </p> <ul> <li> <p>U+0000 \u5230 U+D7FF</p> </li> <li> <p>U+E000 \u5230 U+10FFFF</p> </li> </ul> <p>\u4f46\u662f\uff0cUnicode \u4e2d\u5e76\u6ca1\u6709\u201c\u5b57\u7b26\u201d\u6982\u5ff5\uff0c\u6240\u4ee5\u76f4\u89c9\u4e0a\u8ba4\u4e3a\u7684\u5b57\u7b26\u4e5f\u8bb8\u4e0erust\u4e2d\u7684\u6982\u5ff5\u4e0d\u76f8\u7b26\u3002</p>"},{"location":"03_common_programming_concepts/02_data_type/#_4","title":"\u4e09\u3001\u590d\u5408\u7c7b\u578b","text":"<p>\u590d\u5408\u7c7b\u578b\u53ef\u4ee5\u5c06\u591a\u4e2a\u503c\u653e\u5728\u4e00\u4e2a\u7c7b\u578b\u4e86\uff0crust\u63d0\u4f9b\u4e24\u79cd\u57fa\u7840\u7684\u590d\u5408\u7c7b\u578b\uff1a\u5143\u7ec4\uff08tuple\uff09\u3001\u6570\u7ec4\uff08\u6570\u7ec4\uff09</p>"},{"location":"03_common_programming_concepts/02_data_type/#31","title":"3.1 \u5143\u7ec4","text":"<p>Tuple\u53ef\u4ee5\u5c06\u591a\u4e2a\u7c7b\u578b\u7684\u591a\u4e2a\u503c\u653e\u5728\u4e00\u4e2a\u7c7b\u578b\u91cc\uff0cTuple\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u4e00\u65e6\u58f0\u660e\u540e\u5c31\u65e0\u6cd5\u6539\u53d8\u3002\u521b\u5efaTuple\u7684\u8fc7\u7a0b\u5982\u4e0b</p> <ul> <li> <p>\u5728\u5c0f\u62ec\u53f7\u91cc\uff0c\u5c06\u503c\u7528\u90fd\u597d\u9694\u5f00</p> </li> <li> <p>Tuple\u4e2d\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u90fd\u5bf9\u5e94\u4e00\u4e2a\u7c7b\u578b\uff0cTuple\u4e2d\u5404\u5143\u7d20\u7684\u7c7b\u578b\u4e0d\u5fc5\u76f8\u540c</p> </li> </ul>"},{"location":"03_common_programming_concepts/02_data_type/#311","title":"3.1.1 \u58f0\u660e\u5143\u7ec4","text":"<p>\u4ee5\u4e0b\u521b\u5efa\u4e00\u4e2aTuple\u7c7b\u578b\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5185\u5bb9\u8f93\u51fa\u5230\u7ec8\u7aef\u4e0a</p> <pre><code>fn main() {\nlet tup: (i32, f64, u8) = (500, 6.4, 1);\nlet pat = expr;\n}\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#312-tuple","title":"3.1.2 \u83b7\u53d6tuple\u7684\u5143\u7d20\u503c","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u6765\u7ed3\u6784\uff08destructure\uff09\u4e00\u4e2aTuple\u6765\u83b7\u53d6\u5143\u7d20\u7684\u503c\u3002\u4f8b\u5b50\uff1a</p> <pre><code>fn main() {\nlet tup: (i32, f64, u8) = (500, 6.4, 1);\nlet (x, y, z) = tup;\nprintln!(\"The value of x, y z, is: {},{},{}\", x, y, z);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#313-tuple","title":"3.1.3 \u8bbf\u95eetuple\u7684\u5143\u7d20","text":"<p>\u5728rust\u4e2d\u4f7f\u7528\u70b9\u6807\u8bb0\u6cd5\uff0c\u540e\u63a5\u5143\u7d20\u7d22\u5f15\u53f7\u6765\u8bbf\u95eetuple\u5143\u7d20\uff0c\u5982\u4e0b</p> <pre><code>fn main() {\nlet tup: (i32, f64, u8) = (500, 6.4, 1);\nprintln!(\"The value of tup items is: {},{},{}\", tup.0, tup.1, tup.2);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#32","title":"3.2 \u6570\u7ec4","text":"<p>\u6570\u7ec4\u4e5f\u53ef\u4ee5\u5c06\u591a\u4e2a\u503c\u653e\u5728\u4e00\u4e2a\u7c7b\u578b\u91cc\uff0c\u4f46\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u5fc5\u987b\u76f8\u540c\uff0c\u6570\u7ec4\u7684\u957f\u5ea6\u4e5f\u662f\u56fa\u5b9a\u7684\uff0c\u4e00\u65e6\u58f0\u660e\u4e4b\u540e\uff0c\u4e0d\u53ef\u4ee5\u6539\u53d8\u3002</p> <p>\u58f0\u660e\u6570\u7ec4 \u5728\u4e2d\u62ec\u53f7\u91cc\uff0c\u5404\u4e2a\u503c\u4f7f\u7528\u90fd\u597d\u9694\u5f00\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>let a = [1, 2, 3, 4, 5];\n</code></pre> <p>\u4ee5\u4e0b\u518d\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u6240\u6709\u6708\u4efd\u7684\u6570\u7ec4\uff0c\u5e76\u6253\u5370\u7b2c\u4e00\u4e2a\u5143\u7d20</p> <pre><code>fn main() {\nlet months = [\n\"January\",\n\"February\",\n\"March\",\n\"April\",\n\"May\",\n\"June\",\n\"July\",\n\"August\",\n\"September\",\n\"October\",\n\"November\",\n\"December\",\n];\nprint!(\"the first item is {}\", months[0]);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#322","title":"3.2.2 \u6570\u7ec4\u7684\u7528\u5904","text":"<p>\u5982\u679c\u60f3\u8ba9\u6570\u636e\u5b58\u50a8\u5728\u6808\uff08stack\uff09\u5185\u5b58\u4e0a\uff0c\u800c\u4e0d\u662f\u5806\uff08heap\uff09\u5185\u5b58\u4e0a\uff0c\u6216\u8005\u60f3\u4fdd\u8bc1\u6709\u56fa\u5b9a\u6570\u91cf\u7684\u5143\u7d20\uff0c\u8fd9\u65f6\u4f7f\u7528\u6570\u7ec4\u66f4\u6709\u53f7\u53bb\u5904\u3002</p> <p>\u6570\u7ec4\u662f\u7531\u9884\u5bfc\u5165\u6a21\u5757\uff08prelude\uff09\u63d0\u4f9b\uff0c\u4e0d\u8fc7prelude\u4e5f\u662f\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u7684\u53ef\u4ee5\u8bf4\u6807\u51c6\u5e93\u5f0fprelude\u7684\u8d85\u96c6\u3002</p> <p>\u5b9e\u9645\u4e0arust\u6807\u51c6\u5e93\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u548c\u6570\u7ec4\u7c7b\u578b\u7684\u6570\u636e\u7c7b\u578b--vector\uff0c\u6570\u7ec4\u6ca1\u6709vector\u7075\u6d3b\uff0cvector\u7684\u957f\u5ea6\u53ef\u4ee5\u6539\u53d8\u3002\u5982\u679c\u6211\u4eec\u4e0d\u786e\u5b9a\u4f7f\u7528\u6570\u7ec4\u8fd8\u662f\u4f7f\u7528vector\uff0c\u8fd9\u65f6\u5019\u5e94\u5f53\u4f7f\u7528vector\u3002</p>"},{"location":"03_common_programming_concepts/02_data_type/#323","title":"3.2.3 \u6570\u7ec4\u7684\u7c7b\u578b","text":"<p>\u6570\u7ec4\u7684\u7c7b\u578b\u4ee5\u53ca\u957f\u5ea6\u4ee5\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u8868\u793a<code>[\u7c7b\u578b;\u957f\u5ea6]</code>\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let a:[i32; 5] = [1, 2, 3, 4, 5];\n</code></pre> <p>\u5982\u679c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u76f8\u540c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u58f0\u660e\u65b9\u5f0f</p> <pre><code>let a = [3; 5];\n</code></pre> <p>\u5b83\u5c31\u76f8\u5f53\u4e8e\u4ee5\u4e0b\u8868\u8fbe\u5f0f</p> <pre><code>let a = [3, 3, 3, 3];\n</code></pre>"},{"location":"03_common_programming_concepts/02_data_type/#324","title":"3.2.4 \u6570\u7ec4\u7684\u8bbf\u95ee","text":"<p>\u6570\u7ec4\u662fstack\u4e0a\u5206\u914d\u7684\u5355\u4e2a\u5757\u5185\u5b58\uff0c\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u6765\u8bbf\u95ee\u6570\u7ec4\u5143\u7d20\uff0c\u5982\u4e0b\u8bfb\u53d6<code>months</code>\u8fd9\u4e2a\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20</p> <pre><code>let first = months[0];\n</code></pre> <p>rust\u4e0d\u5141\u8bb8\u7ee7\u7eed\u8bbf\u95ee\u5176\u6570\u636e\u76f8\u90bb\u7684\u5730\u5740\u7684\u5185\u5b58\uff0c\u8fd0\u884c\u7684\u65f6\u5019\u4f1a\u62a5\u6570\u7ec4\u8d8a\u754c\u7684\u9519\u8bef\uff08runtime\u65f6\u4f1apanic\uff09\u3002\u5982\u679c\u8bbf\u95ee\u7684\u6570\u7ec4\u7d22\u5f15\u8d85\u51fa\u4e86\u6570\u7ec4\u7684\u8303\u56f4\uff0c\u7f16\u8bd1\u7684\u65f6\u5019\u53ef\u80fd\u4e0d\u4f1a\u901a\u8fc7\uff0c\u56e0\u4e3arust\u56de\u5bf9\u7f16\u8bd1\u7684\u4ee3\u7801\u8fdb\u884c\u7b80\u5355\u7684\u68c0\u67e5\uff0c\u5982\u4e0b</p> <pre><code>fn main() {\nlet months = [\n\"January\",\n\"February\",\n\"March\",\n\"April\",\n\"May\",\n\"June\",\n\"July\",\n\"August\",\n\"September\",\n\"October\",\n\"November\",\n\"December\",\n];\nlet index = 15;\nprint!(\"{}\", months[index]);\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u7f16\u8bd1\u65f6\u5c06\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3arust\u901a\u8fc7\u7b80\u5355\u7684\u5224\u65ad\u80fd\u5224\u5b9a\u5904<code>months</code>\u5143\u7d20\u4e2a\u6570\u53ea\u670912\u4e2a\uff0c\u4f7f\u7528<code>15</code>\u8fd9\u4e2a\u7d22\u5f15\u503c\u8bbf\u95ee\u662f\u4e0d\u88ab\u5141\u8bb8\u7684\u3002\u4f46\u5982\u679c\u6211\u4eec\u628a\u903b\u8f91\u53d8\u5f97\u66f4\u52a0\u590d\u6742\uff0crust\u5c31\u6ca1\u6cd5\u5728\u7f16\u8bd1\u65f6\u8fdb\u884c\u68c0\u67e5\u4e86\uff0c\u53ea\u80fd\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u4ee3\u7801\u68c0\u67e5\uff0c\u6267\u884c\u8fc7\u7a0b\u4e2d\u903b\u8f91\u51fa\u9519rust\u5c06\u4f1a\u62a5\u9519\u5e76\u9000\u51fa\u7a0b\u5e8f\u3002\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet months = [\n\"January\",\n\"February\",\n\"March\",\n\"April\",\n\"May\",\n\"June\",\n\"July\",\n\"August\",\n\"September\",\n\"October\",\n\"November\",\n\"December\",\n];\nlet index = [15, 16, 17];\nprint!(\"{}\", months[index[0]]);\n}\n</code></pre> <p>\u56e0\u4e3a\u6709\u4e86\u7f16\u8bd1\u65f6\u7b80\u5355\u903b\u8f91\u68c0\u67e5\uff0c\u4e5f\u4f7f\u5f97\u6211\u4eec\u7684\u7a0b\u5e8f\u66f4\u52a0\u5b89\u5168\u3002</p>"},{"location":"03_common_programming_concepts/03_function/","title":"\u51fd\u6570","text":""},{"location":"03_common_programming_concepts/03_function/#1","title":"1. \u51fd\u6570\u7684\u58f0\u660e","text":"<p>\u58f0\u660e\u51fd\u6570\u4f7f\u7528<code>fn</code>\u5173\u952e\u5b57\uff0c\u4f9d\u7167\u60ef\u4f8b\uff0c\u9488\u5bf9\u51fd\u6570\u540d\u548c\u53d8\u91cf\u540d\uff0cRust\u4f7f\u7528snake case \u547d\u540d\u89c4\u8303\uff0c\u5373\u6240\u6709\u5b57\u6bcd\u90fd\u662f\u5c0f\u5199\uff0c\u5355\u8bcd\u4e4b\u95f4\u4f7f\u7528\u4e0b\u82b1\u9999\u5206\u5f00\u3002\u5982\u4e0b</p> <pre><code>fn main() {\nprintln!(\"Hello, world!\");\nannother_function();\n}\nfn annother_function() {\nprintln!(\"Another function.\");\n}\n</code></pre>"},{"location":"03_common_programming_concepts/03_function/#2","title":"2. \u51fd\u6570\u7684\u53c2\u6570","text":"<p>parameters\u662f\u6211\u4eec\u5728\u5b9a\u4e49\u51fd\u6570\u65f6\u7684\u53c2\u6570\uff0c\u53eb\u5f62\u53c2\uff1barguments\u662f\u6211\u4eec\u5728\u8c03\u7528\u51fd\u6570\u65f6\u7684\u5b9e\u9645\u53c2\u6570\uff0c\u53eb\u5b9e\u53c2\u3002\u5728\u51fd\u6570\u7684\u7b7e\u540d\u91cc\uff0c\u5fc5\u987b\u58f0\u660e\u6bcf\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u5982\u4e0b</p> <pre><code>fn main() {\nprintln!(\"Hello, world!\");\nannother_function(5, 6); // arugment is 5 and 6\n}\nfn annother_function(x: i32, y: i32) {\n// parameter is x and y\nprintln!(\"the value of x is: {}\", x);\nprintln!(\"the value of y is: {}\", y);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/03_function/#3-statementexpression","title":"3. \u51fd\u6570\u4e2d\u7684\u8bed\u53e5\uff08statement\uff09\u4e0e\u8868\u8fbe\u5f0f\uff08expression\uff09","text":"<p>\u51fd\u6570\u6709\u4e00\u7cfb\u5217\u7684\u8bed\u53e5\u7ec4\u6210\uff0c\u53ef\u9009\u7684\u53ef\u4ee5\u7531\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7ed3\u675f\u3002\u8bed\u53e5\u662f\u6267\u884c\u4e00\u4e9b\u52a8\u4f5c\u7684\u6307\u4ee4\uff0c\u51fd\u6570\u7684\u5b9a\u4e49\u4e5f\u662f\u8bed\u53e5\uff0c\u8bed\u53e5\u4e0d\u8fd4\u56de\u503c\uff0c\u6240\u4ee5\u4e0d\u53ef\u4ee5\u4f7f\u7528let\u5c06\u4e00\u4e2a\u8bed\u53e5\u8d4b\u7ed9\u4e00\u4e2a\u53d8\u91cf\u3002rust\u662f\u4e00\u4e2a\u57fa\u4e8e\u8868\u8fbe\u5f0f\u7684\u8bed\u8a00\uff0c\u8868\u8fbe\u5f0f\u4f1a\u6267\u884c\u8ba1\u7b97\u5e76\u4ea7\u751f\u4e00\u4e2a\u503c\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\nlet x = 5;\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0cmain\u51fd\u6570\u7684\u6574\u4f53\u4e5f\u662f\u8bed\u53e5\u3002\u5176\u4e2d<code>let x = 5;</code>\u662f\u4e00\u6761\u8bed\u53e5 \uff0c\u8be5\u90e8\u5206\u7684\u53f3\u8fb9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8be5\u8868\u8fbe\u5f0f\u7684\u503c\u5c31\u662f<code>5</code>\uff0c\u5982\u679c\u6211\u4eec\u628a\u8be5\u884c\u6539\u4e3a<code>let x = 5 + 6;</code>\uff0c\u90a3\u4e48\u8868\u8fbe\u5f0f\u5c31\u662f<code>5 + 6</code>\u3002\u8868\u8fbe\u5f0f\u53ef\u4e0e\u4f5c\u4e3a\u8bed\u53e5\u7684\u4e00\u90e8\u5206\uff0c\u8c03\u7528\u51fd\u6570\u662f\u8868\u8fbe\u5f0f\uff0c\u8c03\u7528<code>println!</code>\u5b8f\u4e5f\u662f\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"03_common_programming_concepts/03_function/#3","title":"3. \u51fd\u6570\u7684\u8fd4\u56de\u503c","text":"<p>\u5728<code>-&gt;</code>\u7b26\u53f7\u540e\u9762\u58f0\u660e\u51fd\u6570\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u4f46\u662f\u4e0d\u53ef\u4ee5\u4e3a\u8fd4\u56de\u503c\u547d\u540d\u3002\u5728rust\u91cc\uff0c\u901a\u5e38\u8fd4\u56de\u503c\u5c31\u662f\u51fd\u6570\u4f53\u91cc\u9762\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u5982\u679c\u60f3\u63d0\u524d\u8fd4\u56de\uff0c\u9700\u4f7f\u7528<code>returen</code>\u5173\u952e\u5b57\uff0c\u5e76\u6307\u5b9a\u4e00\u4e2a\u503c\uff0c\u5927\u591a\u6570\u51fd\u6570\u9ed8\u8ba4\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u8fd4\u56de\u503c\u3002\u5982\u4e0b\u4f8b\u5b50\uff1a</p> <pre><code>fn plus_five(x: i32) -&gt; i32 {\nx + 5\n}\nfn main() {\nlet x = plus_five(6);\nprintln!(\"The value of x is: {}\", x);\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>five</code>\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u503c\u662f<code>x = 5</code>\uff0c\u6240\u4ee5<code>x + 5</code>\u662f\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c\u3002\u6ce8\u610f\u7684\u662f<code>x + 5</code>\u540e\u4e0d\u80fd\u52a0<code>;</code>\uff0c\u5426\u5219\u8fd4\u56de\u7684\u662f<code>tuple</code>\uff0c\u800c\u4e0d\u662f<code>i32</code>\u3002</p>"},{"location":"03_common_programming_concepts/03_function/#4","title":"4. \u51fd\u6570\u7684\u6ce8\u91ca","text":"<p>\u51fd\u6570\u53ef\u4ee5\u4f7f\u7528\u5355\u884c\u6ce8\u91ca\u6216\u8005\u591a\u884c\u6ce8\u91ca\u7684\u65b9\u5f0f\uff0c\u5355\u884c\u6ce8\u91ca\u7b26\u53f7\u4e3a<code>//</code>\uff0c\u591a\u884c\u6ce8\u91ca\u4ee5<code>/*</code>\u5f00\u5934\uff0c\u4ee5<code>*/</code>\u7ed3\u5c3e\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>// \u8fd9\u662f\u5355\u884c\u6ce8\u91ca\nfn plus_five(x: i32) -&gt; i32 {\nx + 5\n}\n/**\n * \u8fd9\u662f\u591a\u884c\u6ce8\u91ca\n */\nfn main() {\nlet x = plus_five(6);\nprintln!(\"The value of x is: {}\", x);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/04_control_flow/","title":"\u63a7\u5236\u6d41","text":""},{"location":"03_common_programming_concepts/04_control_flow/#1-ifelse","title":"1. if\u548celse\u8868\u8fbe\u5f0f","text":""},{"location":"03_common_programming_concepts/04_control_flow/#11-if-else","title":"1.1. if-else\u8868\u8fbe\u5f0f","text":"<p>if\u8868\u8fbe\u5f0f\u5141\u8bb8\u4f60\u4f7f\u7528\u6761\u4ef6\u6765\u6267\u884c\u4e0d\u540c\u7684\u4ee3\u7801\u5206\u652f\uff0c\u8fd9\u4e2a\u6761\u4ef6\u5fc5\u987b\u662f bool\u7c7b\u578b\u3002if\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4e0e\u6761\u4ef6\u76f8\u5173\u91cf\u7684\u4ee3\u7801\u53eb\u505a\u5206\u652f\uff08arm\uff09\uff0c\u53ef\u9009\u7684\u5728\u5728if\u8868\u8fbe\u5f0f\u4e4b\u540e\u52a0else\u8868\u8fbe\u5f0f\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet num = 3;\nif num &lt; 5 {\nprintln!(\"condition was true\");\n} else {\nprintln!(\"condition was false\");\n}\n}\n</code></pre>"},{"location":"03_common_programming_concepts/04_control_flow/#12-else-if","title":"1.2. \u4f7f\u7528else if\u5904\u7406\u591a\u91cd\u6761\u4ef6","text":"<p>\u5f53\u903b\u8f91\u6761\u4ef6\u6bd4\u8f83\u591a\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528else if\u5904\u7406\u591a\u91cd\u6761\u4ef6\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet number = 6;\nif number % 4 == 0 {\nprint!(\"{} is divisible by 4\", number);\n} else if number % 3 == 0 {\nprint!(\"{} is divisible by 3\", number);\n} else if number % 2 == 0 {\nprint!(\"{} is divisible by 2\", number);\n} else {\nprint!(\"{} is not divisible by 4, 3, or 2\", number);\n}\n}\n</code></pre> <p>\u4f46\u5982\u679c\u7a0b\u5e8f\u91cc\u4f7f\u7528\u4e86\u591a\u4e8e\u4e00\u4e2a<code>else if</code>\uff0c\u90a3\u4e48\u6700\u597d\u4f7f\u7528<code>match</code>\u6765\u91cd\u6784\u4ee3\u7801\u3002</p>"},{"location":"03_common_programming_concepts/04_control_flow/#13-letif","title":"1.3. \u5728let\u8bed\u53e5\u4e2d\u4f7f\u7528if","text":"<p>\u56e0\u4e3aif\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u5b83\u653e\u5728let\u8bed\u53e5\u4e2d\u7b49\u53f7\u53f3\u8fb9\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\nlet condition = true;\nlet number = if condition { 5 } else { 6 };\nprint!(\"The value of number is: {}\", number);\n}\n</code></pre> <p>\u5355\u8981\u6ce8\u610f\u7684\u662f\uff0cif\u8868\u8fbe\u5f0f\u548c\u7d27\u8ddf\u7740\u7684else\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u5fc5\u987b\u662f\u4e00\u79cd\u7c7b\u578b\uff0c\u5426\u5219rust\u5c06\u4f1a\u7f16\u8bd1\u62a5\u9519\u3002rust\u5728\u7f16\u8bd1\u65f6\u4f1a\u8fdb\u884c\u76f8\u5e94\u7684\u5b89\u5168\u68c0\u67e5\uff0c\u7f16\u8bd1\u7684\u65f6\u5019\u5c31\u5fc5\u987b\u660e\u786e\u53d8\u91cf\u7684\u7c7b\u578b\u662f\u4ec0\u4e48\uff0c\u4ee5\u4fbf\u5728\u5176\u4ed6\u5730\u65b9\u4f7f\u7528\u3002\u5982\u679c\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u7b2c\u4e09\u884c\u4ee3\u7801\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff0c\u6b64\u65f6if\u548celse\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u662f\u4e0d\u540c\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728\u7f16\u8bd1\u65f6\u65e0\u6cd5\u786e\u5b9a<code>number</code>\u53d8\u91cf\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u5c06\u4f1a\u7f16\u8bd1\u4e0d\u901a\u8fc7</p> <pre><code>let number = if condition { 5 } else { \"6\" };\n</code></pre>"},{"location":"03_common_programming_concepts/04_control_flow/#2-rust","title":"2. rust\u7684\u5faa\u73af","text":"<p>rust\u63d0\u4f9b\u4e863\u4e2d\u5faa\u73af\uff1aloop\u3001while\u3001for</p>"},{"location":"03_common_programming_concepts/04_control_flow/#21-loop","title":"2.1. loop\u5faa\u73af","text":"<p>loop\u5173\u952e\u5b57\u544a\u8bc9rust\u53cd\u590d\u6267\u884c\u4e00\u5757\u4ee3\u7801\uff0c\u77e5\u9053\u903b\u8f91\u4e2d\u4e3b\u52a8\u8ba9\u5176\u505c\u6b62\u3002\u53ef\u4ee5\u5728loop\u5faa\u73af\u4e2d\u4f7f\u7528break\u5173\u952e\u5b57\u6765\u544a\u8bc9\u7a0b\u5e8f\u5408\u9002\u505c\u6b62\u5faa\u73af\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut counter = 0;\nlet rustlt = loop {\ncounter += 1;\nif counter == 10 {\nbreak counter * 2;\n}\n};\nprintln!(\"The result is {}\", rustlt);\n}\n</code></pre>"},{"location":"03_common_programming_concepts/04_control_flow/#22-while","title":"2.2. while\u6761\u4ef6\u5faa\u73af","text":"<p>\u53e6\u4e00\u79cd\u5e38\u89c1\u7684\u5faa\u73af\u6a21\u5f0f\u65f6\u6bcf\u6b21\u6267\u884c\u5faa\u73af\u4e4b\u524d\u90fd\u5224\u65ad\u4e00\u6b21\uff0cwhile\u6761\u4ef6\u5faa\u73af\u5c31\u662f\u4e3a\u8fd9\u79cd\u6a21\u5f0f\u800c\u751f</p> <pre><code>fn main() {\nlet mut number = 3;\nwhile number != 0 {\nprintln!(\"{}!\", number);\nnumber = number - 1;\n}\nprintln!(\"LIFTOFF!!!\");\n}\n</code></pre>"},{"location":"03_common_programming_concepts/04_control_flow/#23-for","title":"2.3. \u4f7f\u7528for\u5faa\u73af\u6765\u904d\u5386\u96c6\u5408","text":"<p>\u53ef\u4ee5\u4f7f\u7528while\u5faa\u73af\u6216\u8005loop\u6765\u904d\u5386\u96c6\u5408\uff0c\u4f46\u662f\u5bb9\u6613\u51fa\u9519\u800c\u4e14\u6548\u7387\u4f4e\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet a = [10, 20, 30, 40, 50];\nlet mut index = 0;\nwhile index &lt; 5 {\nprintln!(\"the value is: {}\", a[index]);\nindex += 1;\n}\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u7a0b\u5e8f\u5177\u6709\u4ee5\u4e0b\u7f3a\u70b9</p> <ul> <li> <p>\u5bb9\u6613\u51fa\u9519\uff1a\u6211\u4eec\u5728 while\u7684\u6267\u884c\u6761\u4ef6\u4e2d\u4f7f\u7528\u4e86<code>index &lt; 5</code>\u8868\u8fbe\u5f0f\uff0c\u8fd9\u91cc\u76845\u4ee3\u8868\u6570\u7ec4\u7d22\u5f15\u7684\u6570\u91cf\uff0c\u4f46\u5982\u679c\u6211\u4eec\u6570\u7ec4\u5143\u7d20\u5f88\u591a\uff0c\u5c31\u4f1a\u5f88\u5bb9\u6613\u5199\u9519\u7d22\u5f15\u7684\u6570\u91cf\u3002</p> </li> <li> <p>\u6267\u884c\u6548\u7387\u4f4e\uff1a\u56e0\u4e3a\u6267\u884c\u6bcf\u6b21\u904d\u5386\u4e4b\u524d\uff0c\u7a0b\u5e8f\u5148\u4f1a\u53bb\u68c0\u67e5<code>index &lt; 5</code>\u8fd9\u4e2a\u6761\u4ef6\u3002</p> </li> </ul> <p>\u9488\u5bf9\u96c6\u5408\u7684\u904d\u5386\u573a\u666f\uff0c\u4f7f\u7528for\u5faa\u73af\u66f4\u52a0\u7b80\u6d01\u7d27\u51d1\uff0c\u5b83\u53ef\u4ee5\u9488\u5bf9\u96c6\u5408\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u6267\u884c\u4e00\u4e9b\u4ee3\u7801\u3002\u7531\u4e8efor\u5faa\u73af\u7684\u5b89\u5168\u6027\u3001\u7b80\u6d01\u6027\uff0c\u6240\u4ee5\u5b83\u5728rust\u91cc\u7528\u7684\u6700\u591a\u3002\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>fn main() {\nlet a = [10, 20, 30, 40, 50];\nfor element in a.iter() {\nprintln!(\"the value is: {}\", element);\n}\n}\n</code></pre> <p>for\u5faa\u73af\u5177\u6709\u4e00\u4e0b\u4f18\u70b9</p> <ul> <li>\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\u7d22\u5f15\u9519\u8bef</li> <li>\u6bcf\u6b21\u5faa\u73af\u90fd\u4e0d\u9700\u8981\u989d\u5916\u8fdb\u884c\u5224\u65ad</li> </ul>"},{"location":"03_common_programming_concepts/04_control_flow/#24-range","title":"2.4. Range","text":"<p>Range\u7531\u6807\u51c6\u5e93\u63d0\u4f9b\uff0c\u6307\u5b9a\u4e00\u4e2a\u5f00\u59cb\u6570\u5b57\u548c\u4e00\u4e2a\u7ed3\u675f\u6570\u5b57\uff08\u4e0d\u542b\u7ed3\u675f\u6570\u5b57\uff09\uff0cRange\u53ef\u4ee5\u751f\u6210\u5b83\u4eec\u4e4b\u95f4\u7684\u6570\u5b57\u3002rev\u65b9\u6cd5\u53ef\u4ee5\u53cd\u8f6cRange\u3002\u5982\u679c\u80fd\u7ed3\u5408  for \u5faa\u73af\u548c Range \u6765\u5b9e\u73b0 while \u5faa\u73af\u7684\u529f\u80fd\uff0c\u5c06\u4f1a\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6027\u80fd\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nfor number in (1..4).rev() {\nprintln!(\"{}!\", number);\n}\nprintln!(\"LIFTOFF!!!\");\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u7a0b\u5e8f\uff0c\u5c06\u4f1a\u8f93\u51fa3\u52301\u7684\u7ed3\u679c\u3002</p>"},{"location":"04_ownership/01_stack_and_heap/","title":"\u6808\u5185\u5b58\u548c\u5806\u5185\u5b58","text":""},{"location":"04_ownership/01_stack_and_heap/#1","title":"1. \u6982\u8ff0","text":"<p>\u6240\u6709\u6743\u662fRust\u6700\u72ec\u7279\u7684\u7279\u6027\uff0c\u5b83\u8ba9Rust\u65e0\u9700GC\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002</p>"},{"location":"04_ownership/01_stack_and_heap/#11","title":"1.1. \u4ec0\u4e48\u662f\u6240\u6709\u6743\uff1f","text":"<ul> <li> <p>Rust\u7684\u6838\u5fc3\u7279\u6027\u5c31\u662f\u6240\u6709\u6743</p> </li> <li> <p>\u6240\u6709\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u5c31\u5fc5\u987b\u7ba1\u7406\u5b83\u4eec\u4f7f\u7528\u5185\u5b58\u7684\u65b9\u5f0f\uff1a\u6709\u4e9b\u8bed\u8a00\u6709\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u5b83\u4eec\u4f1a\u4e0d\u65ad\u5730\u5bfb\u627e\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u5c06\u5185\u5b58\u6536\u96c6\u548c\u91ca\u653e\uff0c\u5982Java\uff1b\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\uff0c\u7a0b\u5e8f\u5458\u5fc5\u987b\u663e\u793a\u5730\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff0c\u5982C/C++\u3002</p> </li> <li> <p>Rust\u4f7f\u7528\u4e86\u7b2c\u4e09\u79cd\u65b9\u5f0f\uff1a\u5185\u5b58\u662f\u901a\u8fc7\u6240\u6709\u6743\u6765\u7ba1\u7406\u7684\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u7ec4\u7f16\u8bd1\u5668\u65f6\u68c0\u67e5\u7684\u89c4\u5219\u3002\u5f53\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u6240\u6709\u6743\u7279\u6027\u4e0d\u4f1a\u51cf\u6162\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\u3002</p> </li> </ul>"},{"location":"04_ownership/01_stack_and_heap/#2-stack-vs-heap","title":"2. \u6808\u5185\u5b58\u548c\u5806\u5185\u5b58\uff08stack vs heap\uff09","text":"<p>\u5728rust\u8fd9\u6837\u7684\u7cfb\u7edf\u7ea7\u7f16\u7a0b\u8bed\u8a00\u91cc\uff0c\u4e00\u4e2a\u503c\u662f\u5728stack\u4e0a\u8fd8\u662f\u5728heap\u4e0a\u5bf9\u8bed\u8a00\u7684\u884c\u4e3a\u548c\u4f60\u4e3a\u4ec0\u4e48\u8981\u505a\u67d0\u4e9b\u51b3\u5b9a\u662f\u6709\u66f4\u5927\u7684\u5f71\u54cd\u3002</p> <p>\u5728\u6211\u4eec\u8fd0\u884c\u4ee3\u7801\u7684\u65f6\u5019\uff0cstack\u548cheap\u90fd\u662f\u53ef\u7528\u7684\u5185\u5b58\uff0c\u4f46\u5b83\u4eec\u7684\u7ed3\u6784\u5f88\u4e0d\u76f8\u540c\u3002</p>"},{"location":"04_ownership/01_stack_and_heap/#21","title":"2.1. \u5b58\u50a8\u6570\u636e","text":"<p>stack\u6309\u503c\u7684\u63a5\u6536\u987a\u5e8f\u6765\u5b58\u50a8\uff0c\u6309\u76f8\u53cd\u7684\u987a\u5e8f\u5c06\u5b83\u4eec\u79fb\u9664\uff08\u540e\u8fdb\u5148\u51fa\uff0cLIFO\uff09</p> <ul> <li> <p>\u6dfb\u52a0\u6570\u636e\u53eb\u538b\u6808\u6216\u5165\u6808</p> </li> <li> <p>\u79fb\u9664\u6570\u636e\u53eb\u505a\u51fa\u6808\u6216\u5f39\u51fa\u6808</p> </li> </ul> <p>\u6240\u6709\u5b58\u50a8\u5728stack\u4e0a\u7684\u6570\u636e\u5fc5\u987b\u662f\u5df2\u77e5\u7684\u56fa\u5b9a\u5927\u5c0f\uff0c\u7f16\u8bd1\u65f6\u5927\u5c0f\u672a\u77e5\u7684\u6570\u636e\u6216\u8005\u8fd0\u884c\u65f6\u5927\u5c0f\u53ef\u80fd\u53d1\u751f\u6539\u53d8\u7684\u6570\u636e\u5fc5\u987b\u653e\u5728heap\u4e0a\u3002</p> <p>heap\u5185\u5b58\u7684\u7ec4\u7ec7\u6027\u5dee\u4e00\u4e9b</p> <ul> <li> <p>\u5f53\u4f60\u628a\u6570\u636e\u653e\u5165heap\u65f6\uff0c\u4f60\u4f1a\u8bf7\u6c42\u4e00\u5b9a\u6570\u91cf\u7684\u7a7a\u95f4</p> </li> <li> <p>\u64cd\u4f5c\u7cfb\u7edf\u5728heap\u91cc\u627e\u5230\u4e00\u5757\u8db3\u591f\u5927\u7684\u7a7a\u95f4\uff0c\u628a\u5b83\u6807\u8bb0\u4e3a\u5728\u7528\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u9488\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u7a7a\u95f4\u7684\u5730\u5740</p> </li> </ul> <p>\u628a\u503c\u538b\u5230stack\u4e0a\u4e0d\u53eb\u5206\u914d\uff0c\u56e0\u4e3a\u6307\u9488\u662f\u5df2\u77e5\u56fa\u5b9a\u5927\u5c0f\u7684\uff0c\u53ef\u4ee5\u628a\u6307\u9488\u653e\u5728stack\u4e0a\u3002\u4f46\u5982\u679c\u60f3\u8981\u5b9e\u9645\u6570\u636e\uff0c\u4f60\u5fc5\u987b\u7528\u6307\u9488\u6765\u5b9a\u4f4d\u3002\u628a\u6570\u636e\u538b\u5230stack\u4e0a\u8981\u6bd4heap\u4e0a\u5206\u914d\u5feb\u5f97\u591a\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u9700\u8981\u5bfb\u627e\u5b58\u50a8\u65b0\u6570\u636e\u7684\u7a7a\u964d\uff0c\u90a3\u4e2a\u4f4d\u7f6e\u6c38\u8fdc\u5728stack\u7684\u9876\u7aef\uff1b\u5728heap\u4e0a\u5206\u914d\u7a7a\u95f4\u9700\u8981\u505a\u66f4\u591a\u7684\u5de5\u4f5c\uff0c\u64cd\u4f5c\u7cfb\u7edf\u9996\u5148\u9700\u8981\u627e\u5230\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u7a7a\u95f4\u6765\u5b58\u50a8\u6570\u636e\uff0c\u7136\u540e\u505a\u597d\u8bb0\u5f55\u65b9\u4fbf\u4e0b\u6b21\u518d\u5206\u914d\u3002</p>"},{"location":"04_ownership/01_stack_and_heap/#22","title":"2.2. \u8bbf\u95ee\u6570\u636e","text":"<ul> <li> <p>\u8bbf\u95eeheap\u4e2d\u7684\u6570\u636e\u8981\u6bd4\u8bbf\u95eestack\u4e2d\u7684\u6570\u636e\u6162\uff0c\u56e0\u4e3a\u9700\u8981\u901a\u8fc7\u6307\u9488\u624d\u80fd\u627e\u5230heap\u4e2d\u7684\u6570\u636e\uff0c\u591a\u4e86\u6307\u9488\u8df3\u8f6c\u7684\u73af\u8282\uff0c\u5c5e\u4e8e\u95f4\u63a5\u8bbf\u95ee\u3002\u5bf9\u4e8e\u73b0\u4ee3\u7684\u5904\u7406\u5668\u6765\u8bf4\uff0c\u7531\u4e8e\u7f13\u5b58\u7684\u7f18\u6545\uff0c\u5982\u679c\u6307\u4ee4\u5728\u5185\u5b58\u4e2d\u8df3\u8f6c\u7684\u6b21\u6570\u8d8a\u5c11\uff0c\u90a3\u4e48\u901f\u5ea6\u5c31\u8d8a\u5feb</p> </li> <li> <p>\u5982\u679c\u6570\u636e\u6392\u5217\u7684\u8ddd\u79bb\u6bd4\u8f83\u8fd1\uff0c\u90a3\u4e48\u5904\u7406\u5668\u7684\u5904\u7406\u901f\u5ea6\u5c31\u4f1a\u66f4\u5feb\u4e00\u4e9b\uff08stack\u4e0a\uff09</p> </li> <li> <p>\u5982\u679c\u6570\u636e\u4e4b\u95f4\u7684\u8ddd\u79bb\u6bd4\u8f83\u8fdc\uff0c\u90a3\u4e48\u5904\u7406\u901f\u5ea6\u5c31\u4f1a\u6162\u4e00\u4e9b\uff08heap\u4e0a\uff09\uff0c\u5728heap\u4e0a\u5206\u914d\u5927\u91cf\u7a7a\u95f4\uff0c\u4e5f\u662f\u9700\u8981\u65f6\u95f4\u7684</p> </li> </ul>"},{"location":"04_ownership/01_stack_and_heap/#23","title":"2.3. \u51fd\u6570\u8c03\u7528","text":"<p>\u5f53\u4ee3\u7801\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u503c\u88ab\u4f20\u5165\u51fd\u6570\uff08\u4e5f\u5305\u62ec\u6307\u5411 heap \u7684\u6307\u9488\uff09\uff0c\u51fd\u6570\u672c\u5730\u7684\u53d8\u91cf\u88ab\u538b\u5728 stack \u4e0a\uff0c\u5f53\u51fd\u6570\u7ed3\u675f\u540e\uff0c\u8fd9\u4e9b\u503c\u4f1a\u4ecestack\u4e0a\u5f39\u51fa\u3002</p>"},{"location":"04_ownership/01_stack_and_heap/#3","title":"3. \u6240\u6709\u6743\u5b58\u5728\u7684\u539f\u56e0","text":"<p>\u6240\u6709\u6743\u89e3\u51b3\u7684\u95ee\u9898\uff1a</p> <ul> <li> <p>\u8ddf\u8e2a\u4ee3\u7801\u54ea\u4e9b\u90e8\u5206\u6b63\u5728\u4f7f\u7528 heap \u7684\u54ea\u4e9b\u6570\u636e</p> </li> <li> <p>\u6700\u5c0f\u5316heap\u4e0a\u7684\u91cd\u590d\u6570\u636e</p> </li> <li> <p>\u6e05\u7406heap \u4e0a\u672a\u4f7f\u7528\u7684\u6570\u636e\u4ee5\u907f\u514d\u7a7a\u95f4\u4e0d\u8db3</p> </li> </ul> <p>\u4e00\u65e6\u660e\u767d\u4e86\u6240\u6709\u6743\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u7ecf\u5e38\u53bb\u60f3stack\u6216heap\u4e86\u3002\u4f46\u662f\u77e5\u9053\u7ba1\u7406heap\u6570\u636e\u662f\u6240\u6709\u6743\u5b58\u5728\u7684\u539f\u56e0\uff0c\u8fd9\u6709\u52a9\u4e8e\u89e3\u91ca\u5b83\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\u5de5\u4f5c\uff01</p>"},{"location":"04_ownership/02_ownership_rules/","title":"\u6240\u6709\u6743\u89c4\u5219","text":"<ul> <li> <p>\u6bcf\u4e2a\u503c\u90fd\u6709\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u662f\u8be5\u503c\u7684\u6240\u6709\u8005</p> </li> <li> <p>\u6bcf\u4e2a\u503c\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u6240\u6709\u8005</p> </li> <li> <p>\u5f53\u6240\u6709\u8005\u8d85\u51fa\u4f5c\u7528\u57df\u7684\u65f6\u5019\uff0c\u8be5\u503c\u5c06\u88ab\u5220\u9664</p> </li> </ul>"},{"location":"04_ownership/02_ownership_rules/#1-scope","title":"1. \u53d8\u91cf\u7684\u4f5c\u7528\u57df\uff08scope\uff09","text":"<p>scope\u5c31\u662f\u7a0b\u5e8f\u4e2d\u4e00\u4e2a\u9879\u76ee\u7684\u6709\u6548\u8303\u56f4\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\n// s\u4e0d\u7528\nlet s = \"hello\"; // s\u53ef\u7528\n// \u53ef\u4ee5\u5bf9 s \u8fdb\u884c\u64cd\u4f5c\n} // s\u7684\u4f5c\u7528\u57df\u5230\u6b64\u7ed3\u675f\uff0cs\u4e0d\u518d\u53ef\u7528\n</code></pre>"},{"location":"04_ownership/02_ownership_rules/#11-string","title":"1.1. String\u7c7b\u578b","text":"<ul> <li> <p>String\u6bd4\u90a3\u4e9b\u57fa\u7840\u6807\u91cf\u6570\u636e\u7c7b\u578b\u66f4\u590d\u6742</p> </li> <li> <p>\u5b57\u7b26\u4e32\u5b57\u9762\u503c\uff1a\u7a0b\u5e8f\u91cc\u624b\u5199\u7684\u90a3\u4e9b\u5b57\u7b26\u4e32\u503c\uff0c\u5b83\u4eec\u662f\u4e0d\u53ef\u53d8\u7684</p> </li> <li> <p>Rust\u8fd8\u6709\u7b2c\u4e8c\u79cd\u5b57\u7b26\u4e32\u7c7b\u578b\uff1aString\uff0c\u5728heap\u4e0a\u5206\u914d\uff0c\u80fd\u591f\u5b58\u50a8\u5728\u7f16\u8bd1\u65f6\u672a\u77e5\u6570\u91cf\u7684\u6587\u672c</p> </li> </ul> <p>\u53ef\u4ee5\u4f7f\u7528 from \u51fd\u6570\u4ece\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u521b\u5efa\u51fa String \u7c7b\u578b\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>let s = String::from(\"hello\");\n</code></pre> <p><code>::</code> \u8868\u793a from \u662fString\u7c7b\u578b\u4e0b\u7684\u51fd\u6570\uff0c\u8fd9\u7c7b\u5b57\u7b26\u4e32\u662f\u53ef\u4ee5\u88ab\u4fee\u6539\u7684\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut s = String::from(\"hello\");\ns.push_str(\", world!\");\nprintln!(\"{}\", s);\n}\n</code></pre> <p>\u4e3a\u4ec0\u4e48 String \u7c7b\u578b\u7684\u503c\u53ef\u4ee5\u88ab\u4fee\u6539\uff0c\u800c\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u5374\u4e0d\u80fd\u4fee\u6539\u5462\uff1f</p> <p>\u56e0\u4e3a\u5b83\u4eec\u5904\u7406\u5185\u5b58\u7684\u65b9\u5f0f\u4e0d\u540c\u3002</p> <ul> <li> <p>\u5bf9\u4e8e\u5b57\u7b26\u4e32\u5b57\u9762\u503c\uff0c\u5728\u7f16\u8bd1\u65f6\u5c31\u77e5\u9053\u5b83\u7684\u5185\u5bb9\u4e86\uff0c\u5176\u4e2d\u6587\u672c\u5185\u5bb9\u76f4\u63a5\u88ab\u786c\u7f16\u7801\u5230\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\u91cc\u3002\u56e0\u4e3a\u5176\u4e0d\u53ef\u53d8\u6027\uff0c\u6240\u4ee5\u901f\u5ea6\u5feb\u3001\u9ad8\u6548\u3002</p> </li> <li> <p>\u5bf9\u4e8eString\u7c7b\u578b\uff0c\u4e3a\u4e86\u652f\u6301\u53ef\u53d8\u6027\uff0c\u9700\u8981\u5728heap\u4e0a\u5206\u914d\u5185\u5b58\u6765\u4fdd\u5b58\u7f16\u8bd1\u65f6\u672a\u77e5\u7684\u6587\u672c\u5185\u5bb9\u3002\u64cd\u4f5c\u7cfb\u7edf\u5fc5\u987b\u5728\u8fd0\u884c\u65f6\u6765\u8bf7\u6c42\u5185\u5b58\uff0c\u8fd9\u6b65\u662f\u901a\u8fc7\u8c03\u7528 <code>String::from</code> \u6765\u5b9e\u73b0\uff0c\u5f53\u7528\u5b8cString\u4e4b\u540e\uff0c\u9700\u8981\u4f7f\u7528\u67d0\u79cd\u65b9\u5f0f\u5c06\u5185\u5b58\u8fd4\u56de\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002\u8fd9\u4e00\u6b65\uff0c\u5728\u62e5\u6709GC\u7684\u8bed\u8a00\u4e2d\uff0cGC\u4f1a\u8ddf\u8e2a\u5e76\u6e05\u7406\u4e0d\u518d\u4f7f\u7528\u7684\u5185\u5b58\u3002\u6ca1\u6709GC\uff0c\u5c31\u9700\u8981\u6211\u4eec\u53bb\u8bc6\u522b\u5185\u5b58\u4f55\u65f6\u4e0d\u518d\u4f7f\u7528\uff0c\u5e76\u8c03\u7528\u4ee3\u7801\u5c06\u5b83\u8fd4\u56de\u3002\u5982\u679c\u5fd8\u4e86\uff0c\u90a3\u5c31\u91cf\u8d39\u5185\u5b58\uff1b\u5982\u679c\u63d0\u524d\u505a\u4e86\uff0c\u53d8\u91cf\u5c31\u4f1a\u975e\u6cd5\uff1b\u5982\u679c\u505a\u4e86\u4e24\u6b21\uff0c\u4e5f\u662f\u5bfc\u81f4bug\uff0c\u5fc5\u987b\u4e00\u6b21\u5206\u914d\u5bf9\u5e94\u4e00\u6b21\u91ca\u653e\u3002</p> </li> </ul> <p>Rust\u91c7\u7528\u4e86\u4e0d\u540c\u7684\u5185\u5b58\u56de\u6536\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u503c\u6765\u8bf4\uff0c\u5f53\u62e5\u6709\u5b83\u7684\u53d8\u91cf\u8d70\u51fa\u4f5c\u7528\u8303\u56f4\u65f6\uff0c\u5185\u5b58\u4f1a\u7acb\u5373\u81ea\u52a8\u5730\u4ea4\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf\uff08\u7acb\u5373\u91ca\u653e\uff09\u3002\u5f53\u53d8\u91cf\u8d70\u51fa\u4f5c\u7528\u57df\u4e4b\u540e\uff0c\u4f1a\u8c03\u7528<code>drop</code>\u51fd\u6570\u3002</p>"},{"location":"04_ownership/02_ownership_rules/#12-move","title":"1.2. \u53d8\u91cf\u548c\u6570\u636e\u7684\u4ea4\u4e92\u65b9\u5f0f\uff1a\u79fb\u52a8\uff08Move\uff09","text":"<p>\u6574\u578b\u6570\u636e\u7684\u8d4b\u503c \u591a\u4e2a\u53d8\u91cf\u53ef\u4ee5\u4e0e\u4e00\u4e2a\u6570\u636e\u4f7f\u7528\u4e00\u79cd\u72ec\u7279\u7684\u65b9\u5f0f\u6765\u4ea4\u4e92\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = 5;\nlet y = x;\n}\n</code></pre> <p>\u6574\u6570\u662f\u5df2\u77e5\u4e14\u56fa\u5b9a\u5927\u5c0f\u7684\u7b80\u5355\u7684\u503c\uff0c\u8fd9\u4e24\u4e2a5\u88ab\u538b\u5230\u4e86stack\u4e2d\u3002</p> <p>String\u7684\u8d4b\u503c \u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\nlet s2 = s1;\n}\n</code></pre> <p>\u867d\u7136\u4ee3\u7801\u4e0e\u4e0a\u4e00\u4e2a\u4ee3\u7801\u793a\u4f8b\u5f88\u76f8\u4f3c\uff0c\u4f46\u662f\u8fd0\u884c\u65b9\u5f0f\u65f6\u5b8c\u5168\u4e0d\u4e00\u6837\u7684\u3002\u4e00\u4e2aString\u75313\u90e8\u5206\u7ec4\u6210\uff1a</p> <ul> <li> <p>\u6307\u5411\u5b58\u653e\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u5185\u5b58\u7684\u6307\u9488</p> </li> <li> <p>\u5b57\u7b26\u4e32\u7684\u957f\u5ea6</p> </li> <li> <p>\u5b57\u7b26\u4e32\u7684\u5bb9\u91cf</p> </li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u6570\u636e\u653e\u5728 stack \u4e0a\uff0c\u800c\u5b57\u7b26\u4e32\u771f\u6b63\u7684\u5185\u5bb9\u5728 heap \u4e0a\uff0c\u957f\u5ea6\uff08len\uff09\u662f\u5b58\u653e\u5b57\u7b26\u4e32\u5185\u5bb9\u6240\u9700\u7684\u5b57\u8282\u6570\uff0c\u5bb9\u91cf\uff08capacity\uff09\u662f\u6307 String \u4ece\u64cd\u4f5c\u7cfb\u7edf\u603b\u5171\u83b7\u5f97\u5185\u5b58\u7684\u603b\u5b57\u8282\u6570\u3002\u5982\u4e0b\u56fe</p> <p></p> <ul> <li>\u5f53 s1 \u8d4b\u7ed9 s2 \uff0cString \u7684\u6570\u636e\u88ab\u590d\u5236\u4e86\u4e00\u4efd\uff1a\u5728stack \u4e0a\u590d\u5236\u4e86\u4e00\u4efd\u6307\u9488\u3001\u957f\u5ea6\u3001\u5bb9\u91cf\uff0c\u5e76\u6ca1\u6709\u590d\u5236\u6307\u9488\u6240\u6307\u5411\u7684heap\u4e0a\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u8bf4 rust \u6ca1\u6709\u590d\u5236\u88ab\u5206\u914d\u7684\u5185\u5b58\uff0c\u5982\u4e0b\u56fe</li> </ul> <p></p> <p>\u6839\u636erust\u7684\u7279\u6027\uff0c\u5f53\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0cRust\u4f1a\u81ea\u52a8\u8c03\u7528<code>drop</code>\u51fd\u6570\uff0c\u5e76\u5c06\u53d8\u91cf\u4f7f\u7528\u7684heap\u5185\u5b58\u91ca\u653e\uff0c\u90a3\u4e48\u6309\u7167\u4e0a\u56fe\u7684\u6a21\u578b\uff0c\u5f53s1\u3001s2\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c\u5b83\u4eec\u90fd\u4f1a\u5c1d\u8bd5\u91ca\u653e\u76f8\u540c\u7684\u5185\u5b58\uff0c\u5373\u5bfc\u81f4\u4e8c\u6b21\u91ca\u653e\uff08double free\uff09bug\u3002</p> <p>\u4e0d\u8fc7\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\uff0c\u5f53 s1 \u8d4b\u7ed9 s2 \u540e\uff0crust \u4f1a\u8ba9 s1 \u5931\u6548\u3002\u5f53s1\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\uff0crust\u4e0d\u9700\u8981\u91ca\u653e\u4efb\u4f55\u5185\u5b58\u3002</p> <p>\u5982\u679c\u6211\u4eec\u7f16\u8bd1\u4ee5\u4e0b\u4ee3\u7801\uff0c\u5c06\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3as1 \u8d4b\u7ed9 s2 \u540e\uff0cs1\u5df2\u7ecf\u5931\u6548</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\nlet s2 = s1;\nprint!(\"{}\", s1);\n}\n</code></pre> <p>\u603b\u7ed3 \u4e00\u4e0b\u662f\u603b\u7ed3\u5185\u5bb9</p> <ul> <li> <p>\u6d45\u62f7\u8d1d\uff08shallow copy\uff09\uff1a\u6d45\u62f7\u8d1d\u53ea\u590d\u5236\u6307\u5411\u67d0\u4e2a\u6570\u636e\u7684\u6307\u9488\uff0c\u800c\u4e0d\u590d\u5236\u6570\u636e\u672c\u8eab\uff0c\u65b0\u65e7\u6570\u636e\u8fd8\u662f\u5171\u4eab\u540c\u4e00\u5757\u5185\u5b58</p> </li> <li> <p>\u6df1\u62f7\u8d1d\uff08deep copy\uff09\uff1a\u6df1\u62f7\u8d1d\u4f1a\u53e6\u5916\u521b\u9020\u4e00\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u6570\u636e\uff0c\u65b0\u6570\u636e\u8ddf\u539f\u6570\u636e\u4e0d\u5171\u4eab\u5185\u5b58\uff0c\u4fee\u6539\u65b0\u6570\u636e\u4e0d\u4f1a\u6539\u5230\u539f\u6570\u636e</p> </li> </ul> <p>\u4f46\u7531\u4e8erust\u7684\u8d4b\u503c\u8ba9\u65e7\u53d8\u91cf\u5931\u6548\u4e86\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u65b0\u7684\u672f\u8bed\uff1a\u79fb\u52a8\uff08Move\uff09\u3002\u8fd9\u9690\u542b\u4e86\u4e00\u4e2arust\u7684\u8bbe\u8ba1\u539f\u5219\uff1aRust\u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u6570\u636e\u7684\u6df1\u62f7\u8d1d\uff0c\u5c31\u8fd0\u884c\u65f6\u6027\u80fd\u800c\u8a00\uff0c\u4efb\u4f55\u81ea\u52a8\u8d4b\u503c\u7684\u64cd\u4f5c\u90fd\u662f\u5ec9\u4ef7\u7684\u3002</p> <p>\u5982\u679c\u771f\u60f3\u5bf9heap\u4e0a\u7684String\u6570\u636e\u8fdb\u884c\u6df1\u5ea6\u62f7\u8d1d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662fstack\u4e0a\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528clone\u65b9\u6cd5\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\nlet s2 = s1.clone();\nprintln!(\"s1 = {}, s2 = {}\", s1, s2);\n}\n</code></pre> <p>\u514b\u9686\u7684\u64cd\u4f5c\u662f\u6bd4\u8f83\u6d88\u8017\u8d44\u6e90\u7684\uff0c\u4e3b\u8981\u9488\u5bf9heap\u4e0a\u7684\u6570\u636e\u3002</p> <p>\u9488\u5bf9\u4e8e\u5df2\u77e5\u7c7b\u578b\u548c\u5927\u5c0f\u7684\u6570\u636e\uff0c\u6570\u636e\u5728stack\u4e0a\uff0c\u5728\u53d8\u91cf\u8d4b\u503c\u7684\u65f6\u5019\u76f4\u63a5\u5728 stack \u4e0a\u8fdb\u884c\u6570\u636e\u7684\u590d\u5236\uff0c\u53d8\u91cf\u8d4b\u503c\u8fc7\u540e\u4e0d\u4f1a\u5f71\u54cd\u65e7\u53d8\u91cf\u7684\u4f7f\u7528\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = 5;\nlet y = x;\nprint!(\"{}, {}\", x, y);\n}\n</code></pre> <p>\u4ee5\u4e0a\u7684\u4ee3\u7801\u4e2dx\u5bf9y\u8fdb\u884c\u4e86\u6d45\u62f7\u8d1d\uff0c\u4e0e\u8c03\u7528clone\u51fd\u6570\u5728\u884c\u4e3a\u4e0a\u6ca1\u6709\u4efb\u4f55\u5dee\u522b\u3002</p> <p>rust\u63d0\u4f9b\u4e86\u4e00\u4e2acopy trait\uff0c\u53ef\u4ee5\u7528\u4e8e\u50cf\u6574\u6570\u8fd9\u6837\u5b8c\u5168\u653e\u5728 stack \u4e0a\u9762\u7684\u7c7b\u578b\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u578b\u5b9e\u73b0\u4e86copy\u8fd9\u4e2atrait\uff0c\u90a3\u4e48\u65e7\u7684\u53d8\u91cf\u5728\u8d4b\u503c\u540e\u4ecd\u7136\u53ef\u7528\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u578b\u6216\u8005\u8be5\u7c7b\u578b\u7684\u4e00\u90e8\u5206\u5b9e\u73b0\u4e86 drop trait \uff0c\u90a3\u4e48rust\u4e0d\u5141\u8bb8\u5b83\u518d\u53bb\u5b9e\u73b0 copy trait \u4e86\u3002</p> <p>\u4efb\u4f55\u7b80\u5355\u6807\u91cf\u7684\u7ec4\u5408\u7c7b\u578b\u90fd\u53ef\u4ee5\u662fcopy\u7684\uff0c\u4efb\u4f55\u9700\u8981\u5206\u914d\u5185\u5b58\u6216\u67d0\u79cd\u8d44\u6e90\u7684\u90fd\u4e0d\u662fcopy\u7684\u3002\u4e00\u4e9b\u62e5\u6709copy trait\u7684\u7c7b\u578b\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u6240\u6709\u7684\u6574\u6570\u7c7b\u578b\uff0c\u4f8b\u5982 u32</p> </li> <li> <p>bool</p> </li> <li> <p>char</p> </li> <li> <p>\u6240\u6709\u6d6e\u70b9\u6570\u7c7b\u578b\uff0c\u4f8b\u5982 f64</p> </li> <li> <p>tuple(\u5143\u7ec4)\uff0c\u5982\u679c\u5176\u4ed6\u6240\u6709\u5b57\u6bb5\u90fd\u662f copy \u7684\uff0c\u5982 <code>(i32, i32)</code>\u662f\uff0c <code>(i32, string)</code>\u4e0d\u662f</p> </li> </ul>"},{"location":"04_ownership/03_ownership_and_function/","title":"\u6240\u6709\u6743\u4e0e\u51fd\u6570","text":""},{"location":"04_ownership/03_ownership_and_function/#1","title":"1. \u6982\u8ff0","text":"<p>\u5728\u8bed\u4e49\u4e0a\uff0c\u5c06\u503c\u4f20\u9012\u7ed9\u51fd\u6570\u548c\u628a\u503c\u8d4b\u7ed9\u53d8\u91cf\u662f\u7c7b\u4f3c\u7684\uff1a\u5c06\u503c\u4f20\u9012\u7ed9\u51fd\u6570\u5c06\u4f1a\u53d1\u751f\u79fb\u52a8\u6216\u590d\u5236\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\n// \u58f0\u660eString\u7c7b\u578b\u53d8\u91cf\nlet s = String::from(\"Hello world\");\n// s \u88ab\u79fb\u52a8\u5230\u51fd\u6570\u91cc\u9762\ntake_ownership(s); // \u6b64\u884c\u4ee5\u540e\uff0cs \u4e0d\u518d\u6709\u6548\n// x \u662f\u4e00\u4e2ai32\u7c7b\u578b\u7684\u6574\u6570\uff0c\u7b49\u4e8e 5\nlet x = 5;\n// \u56e0\u4e3a i32 \u5b9e\u73b0\u4e86 copy trait\uff0c\u6240\u4ee5\u5f80\u51fd\u6570\u91cc\u4f20\u7684 x \u662f\u4e00\u4e2a\u62f7\u8d1d\nmakes_copy(x); // \u6b64\u884c\u4ee3\u7801\u4ee5\u540e\uff0cx \u4f9d\u7136\u6709\u6548\nprintln!(\"x: {}\", x)\n} // main\u51fd\u6570\u6267\u884c\u5b8c\u6210\u540e\uff0cx\u548cs\u90fd\u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u56e0\u4e3a s \u5df2\u7ecf\u88ab\u79fb\u52a8\u5230\u4e86 take_ownership \u51fd\u6570\u91cc\u9762\uff0c\u6240\u4ee5\u4e0d\u5728\u6267\u884c\u5185\u5b58\u91ca\u653e\u64cd\u4f5c\nfn take_ownership(some_string: String) {\nprintln!(\"{}\", some_string)\n} // \u6267\u884c\u5b8c\u6bd5\u540e\uff0csome_string \u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u5185\u5b58\u88ab\u91ca\u653e\nfn makes_copy(some_number: i32) {\nprintln!(\"{}\", some_number)\n} // \u6267\u884c\u5b8c\u6bd5\u540e\uff0csome_number \u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u62f7\u8d1d\u7684\u503c\u88ab\u91ca\u653e\n</code></pre> <p>\u518d\u770b\u4ee5\u4e0b\u7684\u4ee3\u7801</p> <pre><code>fn main() {\n// s1 \u53d8\u91cf\u4ece gives_ownershio \u51fd\u6570\u4e2d\u83b7\u5f97\u6240\u6709\u6743\nlet s1 = gives_ownership();\nlet s2 = String::from(\"hello\");\n// s2 \u5c06\u6240\u6709\u6743\u8f6c\u79fb\u7ed9 takes_and_gives_back \u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a String \u7c7b\u578b\u7684\u6570\u636e\uff0c\u5c06\u6240\u6709\u6743\u8f6c\u79fb\u7ed9 s3\nlet s3 = takes_and_gives_back(s2);\n}\nfn gives_ownership() -&gt; String {\nlet some_string = String::from(\"hello\");\nsome_string\n}\nfn takes_and_gives_back(a_string: String) -&gt; String {\na_string\n}\n</code></pre> <p>\u4e00\u4e2a\u53d8\u91cf\u7684\u6240\u6709\u6743\u603b\u662f\u9075\u5faa\u540c\u6837\u7684\u6a21\u5f0f\uff1a</p> <ul> <li> <p>\u628a\u4e00\u4e2a\u503c\u8d4b\u7ed9\u5176\u4ed6\u53d8\u91cf\u65f6\u5c31\u4f1a\u53d1\u751f\u79fb\u52a8</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u5305\u542b heap \u6570\u636e\u7684\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u4ed6\u7684\u503c\u5c31\u4f1a\u88ab drop \u51fd\u6570\u6e05\u7406\uff0c\u9664\u975e\u6570\u636e\u7684\u6240\u6709\u6743\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u53d8\u91cf\u4e0a</p> </li> </ul>"},{"location":"04_ownership/03_ownership_and_function/#2","title":"2. \u8ba9\u51fd\u6570\u4f7f\u7528\u67d0\u4e2a\u503c\uff0c\u4f46\u4e0d\u83b7\u5f97\u6240\u6709\u6743","text":"<p>\u5f53\u6211\u4eec\u5c06\u53d8\u91cf\u8d4b\u7ed9\u51fd\u6570\u65f6\uff0c\u6240\u6709\u6743\u4f1a\u4e22\u5931\uff0c\u5728\u51fd\u6570\u7684\u6700\u540e\u518d\u5c06\u6240\u6709\u6743\u8fd4\u56de\uff0c\u5373\u53ef\u5b9e\u73b0 \u8c03\u7528\u5904\u4fdd\u7559\u4e86\u53c2\u6570\u7684\u6240\u6709\u6743</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\n// \u5728main\u51fd\u6570\u91cc\u5c06s1\u7684\u6240\u6709\u6743\u79fb\u52a8\u7ed9calculate_length\u51fd\u6570\uff0c\u5728 calculate_length \u518d\u5c06\u6240\u6709\u6743\u79fb\u4ea4\u56de\u6765\nlet (s1, len) = calculate_length(s1);\nprintln!(\"The length of '{}' is {}.\", s1, len);\n}\nfn calculate_length(s: String) -&gt; (String, usize) {\nlet length = s.len();\n// calculate_length \u51fd\u6570\u518d\u5c06s\u7684\u6240\u6709\u6743\u79fb\u52a8\u7ed9 \u8c03\u7528\u5b83\u7684\u51fd\u6570\n(s, length)\n}\n</code></pre> <p>\u4f46\u4ee5\u4e0a\u8fd9\u79cd\u505a\u6cd5\u6211\u4eec\u4e0d\u5f97\u4e0d\u5c06\u53c2\u6570\u4f20\u8fdb\u51fd\u6570\u91cc\uff0c\u518d\u5c06\u53c2\u6570\u8fd4\u56de\u56de\u6765\uff0c\u800cRust\u4e2d\u7684\u201c\u5f15\u7528\u201d\u7279\u6027\u53ef\u4ee5\u5b8c\u7f8e\u5730\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"04_ownership/04_reference_and_borrow/","title":"\u5f15\u7528\u4e0e\u501f\u7528","text":""},{"location":"04_ownership/04_reference_and_borrow/#1","title":"1. \u5f15\u7528\u4e0e\u501f\u7528","text":"<p>\u6211\u4eec\u4f7f\u7528\u5f15\u7528\u53c2\u6570\u6765\u8ba1\u7b97\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\nlet len = calculate_length(&amp;s1);\nprintln!(\"The length of '{}' is {}.\", s1, len);\n}\nfn calculate_length(s: &amp;String) -&gt; usize {\ns.len()\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0cmain\u51fd\u6570\u5e76\u6ca1\u6709\u8f6c\u79fbs1\u53c2\u6570\u7684\u6240\u6709\u6743\uff0c\u800c\u662f\u5c06s1\u53c2\u6570\u7684\u5f15\u7528\u4f20\u5230\u8ba1\u7b97\u7684\u51fd\u6570\uff0c\u5728\u4f20\u5165\u53c2\u6570\u524d\u9762\u4f7f\u7528<code>&amp;</code>\u7b26\u53f7\u4ee3\u8868\u4f20\u9012\u4e00\u4e2a\u201c\u5f15\u7528\u201d\u3002<code>&amp;s1</code>\u4ee3\u8868\u521b\u5efa\u4e86<code>s1</code>\u7684\u5f15\u7528\uff0c\u4f46\u4e0d\u62e5\u6709<code>s1</code>\uff0c\u5f53<code>&amp;s1</code>\u5728\u8ba1\u7b97\u51fd\u6570\u5185\u8d70\u51fa\u4f5c\u7528\u57df\u65f6\uff0c\u5b83\u6307\u5411\u7684\u503c\uff08s1\uff09\u5e76\u4e0d\u4f1a\u5728\u6e05\u7406\u6389\u3002</p> <p>\u5728calculate_length\u51fd\u6570\u91cc\uff0c\u53c2\u6570\u7684\u7c7b\u578b\u662f &amp;String\uff0c\u800c\u4e0d\u662f String\uff0c<code>&amp;</code>\u7b26\u53f7\u5c31\u6807\u8bc6\u5f15\u7528\uff0c\u5f15\u7528\u53ef\u4ee5\u505a\u5230 \u5f15\u7528\u67d0\u4e9b\u503c\u800c\u4e0d\u53d6\u5f97\u5176\u6240\u6709\u6743\u3002\u5982\u4e0b\u56fe</p> <p></p> <p>\u5728\u8ba1\u7b97\u51fd\u6570\u4e2d\uff0cs\u7684\u4f5c\u7528\u57df\u4e0e\u5176\u4ed6\u53c2\u6570\u7c7b\u4f3c\uff0c\u4f46\u5b83\u4e0d\u4f1a\u5728\u81ea\u5df1\u79bb\u5f00\u4f5c\u7528\u57df\u540e\u9500\u6bc1\u5176\u6307\u5411\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u5e76\u4e0d\u62e5\u6709\u8be5\u6570\u636e\u7684\u6240\u6709\u6743\uff0c\u6211\u4eec\u5c31\u628a\u4ee5\u5f15\u7528\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u7684\u884c\u4e3a\u53eb\u505a\u201c\u501f\u7528\u201d\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u501f\u7528\u7684\u503c\u4e0d\u53ef\u53d8\u3002</p>"},{"location":"04_ownership/04_reference_and_borrow/#2","title":"2. \u8ba9\u5f15\u7528\u7684\u6570\u636e\u53ef\u53d8","text":"<p>\u901a\u8fc7\u524d\u9762\u7684\u6587\u7ae0\u4e2d\u6211\u4eec\u77e5\u9053<code>mut</code>\u5173\u952e\u5b57\u6807\u8bc6\u53d8\u91cf\u53ef\u53d8\uff0c\u540c\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u539f\u53d8\u91cf\u548c\u5f15\u7528\u540c\u65f6\u52a0\u4e0a<code>mut</code>\u5173\u952e\u5b57\uff0c\u8ba9\u5f15\u7528\u7684\u6570\u636e\u53ef\u53d8\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut s1 = String::from(\"hello\");\nlet len = calculate_length(&amp;mut s1);\nprintln!(\"The length of '{}' is {}.\", s1, len);\n}\nfn calculate_length(s: &amp;mut String) -&gt; usize {\ns.push_str(\", world\");\ns.len()\n}\n</code></pre> <p>\u4f46\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ef\u53d8\u5f15\u7528\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u9650\u5236\uff0c\u5728\u7279\u5b9a\u7684\u4f5c\u7528\u57df\u5185\uff0c\u5bf9\u67d0\u4e00\u5757\u6570\u636e\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\uff0c\u8fd9\u6837\u7684\u597d\u5904\u662f\u53ef\u5728\u7f16\u8bd1\u65f6\u9632\u6b62\u6570\u636e\u7ade\u4e89\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801\u5c06\u4f1a\u7f16\u8bd1\u62a5\u9519</p> <pre><code>fn main() {\nlet mut s = String::from(\"hello\");\nlet s1 = &amp;mut s;\nlet s2 = &amp;mut s;\nprintln!(\"{},{}\", s1, s2);\n}\n</code></pre> <p>\u5728\u4ee5\u4e0b\u4e09\u79cd\u884c\u4e3a\u90fd\u6ee1\u8db3\u7684\u8bdd\u53ef\u80fd\u4f1a\u53d1\u751f\u6570\u636e\u7ade\u4e89</p> <ul> <li>\u4e24\u4e2a\u6216\u591a\u4e2a\u6307\u9488\u540c\u65f6\u8bbf\u95ee\u540c\u4e00\u4e2a\u6570\u636e</li> <li>\u81f3\u5c11\u6709\u4e00\u4e2a\u6307\u9488\u7528\u4e8e\u5199\u5165\u6570\u636e</li> <li>\u6ca1\u6709\u4f7f\u7528\u4efb\u4f55\u673a\u5236\u6765\u540c\u6b65\u6570\u636e\u7684\u8bbf\u95ee</li> </ul> <p>\u8fd9\u79cd\u7ade\u4e89\u673a\u5236\u5728\u8fd0\u884c\u65f6\u662f\u5f88\u96be\u53d1\u73b0\u7684\uff0c\u6240\u4ee5rust\u505a\u4e86\u4e00\u4e2a\u6839\u672c\u7684\u89e3\u51b3\uff0c\u90a3\u5c31\u662f\u7f16\u8bd1\u7684\u65f6\u5019\u5c31\u9632\u6b62 \u4e24\u4e2a\u6307\u9488\u540c\u65f6\u6307\u5411\u4e00\u4e2a\u6570\u636e\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u65b0\u7684\u4f5c\u7528\u57df\uff0c\u6765\u5141\u8bb8\u975e\u540c\u65f6\u5730\u521b\u5efa\u591a\u4e2a\u53ef\u53d8\u7684\u5f15\u7528\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut s = String::from(\"hello\");\n{\nlet s1 = &amp;mut s;\n}\nlet s2 = &amp;mut s;\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0cs1\u7684\u4f5c\u7528\u57df\u7ed3\u675f\u4e86\u4e4b\u540e\uff0c\u5373\u53ef\u521b\u5efas\u7684\u65b0\u5f15\u7528\u8d4b\u7ed9 s2\u3002</p>"},{"location":"04_ownership/04_reference_and_borrow/#3","title":"3. \u4e0d\u53d8\u5f15\u7528","text":"<p>\u4e0d\u53ef\u4ee5\u540c\u65f6\u62e5\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\u548c\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u5982\u4e0b\u4ee3\u7801\u5c06\u4f1a\u7f16\u8bd1\u62a5\u9519</p> <pre><code>fn main() {\nlet mut s = String::from(\"hello\");\nlet r1 = &amp;s;\nlet r2 = &amp;s;\nlet s1 = &amp;mut s;\nprintln!(\"{}, {}, {}\", r1, r2, r3);\n}\n</code></pre> <p>\u4f46\u5141\u8bb8\u591a\u4e2a\u4e0d\u53d8\u5f15\u7528\u540c\u65f6\u5b58\u5728\u7684\u3002</p>"},{"location":"04_ownership/04_reference_and_borrow/#4-dangling-references","title":"4. \u60ac\u7a7a\u5f15\u7528\uff08Dangling References\uff09","text":"<p>\u60ac\u7a7a\u6307\u9488\uff08Dangling Pointer\uff09\uff1a\u4e00\u4e2a\u6307\u9488\u5f15\u7528\u4e86\u5185\u5b58\u7684\u67d0\u4e2a\u5730\u5740\uff0c\u800c\u8fd9\u5757\u5730\u5740\u5185\u5b58\u53ef\u80fd\u5df2\u7ecf\u91ca\u653e\u5e76\u5206\u914d\u7ed9\u5176\u4ed6\u4eba\u4f7f\u7528\u4e86\u3002</p> <p>\u5728Rust\u91cc\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u4fdd\u8bc1\u5f15\u7528\u6c38\u8fdc\u4e0d\u662f\u60ac\u7a7a\u5f15\u7528\uff0c\u5982\u679c\u6211\u4eec\u5f15\u7528\u4e86\u67d0\u4e9b\u6570\u636e\uff0c\u7f16\u8bd1\u5668\u5c06\u4fdd\u8bc1\u5728\u5f15\u7528\u79bb\u5f00\u4f5c\u7528\u57df\u4e4b\u524d\u6570\u636e\u4e0d\u4f1a\u79bb\u5f00\u4f5c\u7528\u57df\u3002\u6211\u4eec\u770b\u4ee5\u4e0b\u7684\u4e00\u4e2a\u4f8b\u5b50</p> <pre><code>fn main() {\nlet r = dangling();\n}\nfn dangling() -&gt; &amp;String {\nlet s = String::from(\"hello\");\n&amp;s\n}\n</code></pre> <p>\u5728dangling\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u8fd4\u56des\u5f15\u7528\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u5f53dangling\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0cs\u53d8\u91cf\u6307\u5411\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u91ca\u653e\uff0c\u90a3\u4e48<code>&amp;s</code>\u5c06\u662f\u4e00\u4e2a\u60ac\u7a7a\u5f15\u7528\u3002\u4e0d\u8fc7\uff0crust\u4e0d\u5141\u8bb8\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u4ee5\u4e0a\u7684\u4ee3\u7801\u5e76\u4e0d\u4f1a\u7f16\u8bd1\u901a\u8fc7\u3002</p>"},{"location":"04_ownership/04_reference_and_borrow/#5","title":"5. \u603b\u7ed3","text":"<p>\u5728\u4efb\u4f55\u7ed9\u5b9a\u7684\u65f6\u523b\uff0c\u5f15\u7528 \u53ea\u80fd\u6ee1\u8db3\u4e0b\u5217\u6761\u4ef6\u4e4b\u4e00\uff1a</p> <ul> <li> <p>\u4e00\u4e2a\u53ef\u53d8\u7684\u5f15\u7528</p> </li> <li> <p>\u4efb\u610f\u6570\u91cf\u4e0d\u53ef\u53d8\u7684\u5f15\u7528</p> </li> </ul> <p>\u53e6\u5916\uff0c\u5f15\u7528\u5fc5\u987b\u4e00\u76f4\u6709\u6548\u3002</p>"},{"location":"04_ownership/05_slice/","title":"\u5207\u7247","text":""},{"location":"04_ownership/05_slice/#1","title":"1. \u6982\u8ff0","text":"<p>Rust\u7684\u53e6\u4e00\u79cd\u4e0d\u6301\u6709\u6240\u6709\u6743\u7684\u6570\u636e\u7c7b\u578b\uff1a\u5207\u7247\uff08slice\uff09</p> <p>\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff0c\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u8ba9\u5b83\u5b9e\u73b0\u4e0b\u5217\u529f\u80fd\uff1a</p> <ul> <li>\u5b83\u80fd\u63a5\u6536\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570</li> <li>\u8fd4\u56de\u5b83\u5728\u8fd9\u4e2a\u5b57\u7b26\u4e32\u91cc\u627e\u5230\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd</li> <li>\u5982\u679c\u51fd\u6570\u6ca1\u6709\u627e\u5230\u4efb\u4f55\u7a7a\u683c\uff0c\u90a3\u4e48\u6574\u4e2a\u5b57\u7b26\u4e32\u5c31\u8fd4\u56de</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u51fd\u6570</p> <pre><code>fn first_world(s: &amp;String) -&gt; usize {\nlet bytes = s.as_bytes();\nfor (i, &amp;item) in bytes.iter().enumerate() {\nif item == b' ' {\nreturn i;\n}\n}\ns.len()\n}\n</code></pre> <p>\u6211\u4eec\u518d\u6dfb\u52a0\u8c03\u7528\u7684\u4e3b\u51fd\u6570</p> <pre><code>fn main() {\nlet mut s = String::from(\"Hello world\");\nlet wordIndex = first_world(&amp;s);\ns.clear();\nprint!(\"{}\", wordIndex)\n}\n</code></pre> <p>\u6211\u4eec\u6e05\u7a7a\u53d8\u91cf<code>s</code>\u4e4b\u540e\uff0c\u5982\u679c\u6211\u4eec\u6211\u4eec\u8fd8\u7528<code>wordIndex</code>\u53bb\u63d0\u53d6\u5b57\u7b26\u4e32\u5185\u5bb9\uff0c\u5c06\u4f1a\u62a5\u9519\uff0c\u5f15\u8d77bug\u3002\u6240\u4ee5\u8fd9\u7c7b\u7684\u51fd\u6570\u8bbe\u8ba1\u6211\u4eec\u5fc5\u987b\u968f\u65f6\u5173\u6ce8<code>wordIndex</code>\u7684\u6709\u6548\u6027\uff0c\u786e\u4fdd\u5b57\u7b26\u4e32\u7684\u7d22\u5f15\u548c\u5b57\u7b26\u4e32\u5177\u6709\u540c\u6b65\u6027\u3002\u4f46\u662f\u8fd9\u7c7b\u5de5\u4f5c\u5f80\u5f80\u6bd4\u8f83\u7e41\u7410\uff0c\u800c\u4e14\u5bb9\u6613\u51fa\u9519\u3002Rust\u4e3a\u8fd9\u7c7b\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u5c31\u662f\u6211\u4eec\u8981\u5b66\u4e60\u7684\u5b57\u7b26\u4e32\u5207\u7247\u3002</p>"},{"location":"04_ownership/05_slice/#2","title":"2. \u6982\u5ff5","text":"<p>\u5b57\u7b26\u4e32\u5207\u7247\u662f\u6307\u5411\u5b57\u7b26\u4e32\u5176\u4e2d\u4e00\u90e8\u5206\u5185\u5bb9\u7684\u5f15\u7528</p> <p>\u5f62\u5f0f\uff1a[\u5f00\u59cb\u7d22\u5f15..\u7ed3\u675f\u7d22\u5f15]</p> <ul> <li>\u5f00\u59cb\u7d22\u5f15\uff1a\u5207\u7247\u8d77\u59cb\u4f4d\u7f6e\u7684\u7d22\u5f15\u503c</li> <li>\u7ed3\u675f\u7d22\u5f15\uff1a\u5207\u7247\u7ec8\u6b62\u7d22\u5f15\u4f4d\u7f6e\u7684\u4e0b\u4e00\u4e2a\u7d22\u5f15\u503c</li> </ul> <p>\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s = String::from(\"Hello world\");\nlet hello = &amp;s[0..5];\nlet world = &amp;s[6..11];\nprintln!(\"{}, {}\", hello, world);\n}\n</code></pre> <p>\u5982\u679c\u662f\u5207\u7247\u7684\u5f00\u59cb\u662f\u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u5207\u7247\u7684\u7ed3\u675f\u662f\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u4f4d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u6210\u5982\u4e0b\u8bed\u6cd5</p> <pre><code>let hello = &amp;s[..5];\nlet world = &amp;s[6..];\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u7684\u5207\u7247\u662f\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u5219\u53ef\u4ee5\u5199\u6210\u5982\u4e0b\u5f62\u5f0f</p> <pre><code>let whole = &amp;s[..];\n</code></pre>"},{"location":"04_ownership/05_slice/#3","title":"3. \u91cd\u5199\u83b7\u53d6\u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u5355\u8bcd","text":"<p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u7684\u529f\u80fd\u91cd\u51991\u4e2d\u83b7\u53d6\u5b57\u7b26\u4e32\u4e2d\u7b2c\u4e00\u4e2a\u5355\u8bcd\u7684\u903b\u8f91\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn first_world(s: &amp;str) -&gt; &amp;str {\nlet bytes = s.as_bytes();\nfor (i, &amp;item) in bytes.iter().enumerate() {\nif item == b' ' {\nreturn &amp;s[..i];\n}\n}\n&amp;s[..]\n}\n</code></pre>"},{"location":"04_ownership/05_slice/#4","title":"4. \u5b57\u7b26\u4e32\u5b57\u9762\u503c\u662f\u5207\u7247","text":"<p>\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u88ab\u76f4\u63a5\u5b58\u50a8\u5728\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u4e2d\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let s = \"Hello, World!\";\n</code></pre> <p>\u53d8\u91cfs\u7684\u7c7b\u578b\u662f&amp;str\uff0c\u4ed6\u662f\u4e00\u4e2a\u6307\u5411\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u7279\u5b9a\u4f4d\u7f6e\u7684\u5207\u7247</p> <ul> <li>&amp;str \u662f\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u6240\u4ee5\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u4e5f\u662f\u4e0d\u53ef\u53d8\u7684</li> </ul>"},{"location":"04_ownership/05_slice/#5","title":"5. \u5c06\u5b57\u7b26\u5207\u7247\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012","text":"<p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5b58\u5728\u5982\u4e0b\u5173\u952e\u5185\u5bb9</p> <pre><code>fn first_world(s:&amp;String) -&gt; str {\n</code></pre> <p>\u800c\u6709\u7ecf\u9a8c\u7684Rust\u5f00\u53d1\u8005\u4f1a\u91c7\u7528&amp;str\u4f5c\u4e3a\u53c2\u6570\u7c7b\u578b\uff0c\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ef\u4ee5\u540c\u65f6\u63a5\u6536 String \u548c &amp;str \u7c7b\u578b\u7684\u53c2\u6570\u4e86\u3002\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn first_world(s:&amp;str) -&gt; str {\n</code></pre> <ul> <li>\u5982\u679c\u4f7f\u7528\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u76f4\u63a5\u8c03\u7528\u8be5\u51fd\u6570</li> <li>\u5982\u679c\u4f7f\u7528String\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5b8c\u6574\u7684String\u5207\u7247\u6765\u8c03\u7528\u8be5\u51fd\u6570</li> </ul> <p>\u5b9a\u4e49\u51fd\u6570\u65f6\uff0c\u4f7f\u7528\u5b57\u7b26\u4e32\u5207\u7247\u6765\u4ee3\u66ff\u5b57\u7b26\u4e32\u5f15\u7528\u4f1a\u4f7f\u6211\u4eec\u7684API\u66f4\u52a0\u901a\u7528\uff0c\u4e14\u4e0d\u4f1a\u635f\u5931\u4efb\u4f55\u529f\u80fd\u3002\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet my_string = String::from(\"Hello world\");\nlet word_index = first_world(&amp;my_string[..]);\nlet my_string_literal = \"hello world\";\nlet word_index1 = first_world(my_string_literal);\nprintln!(\"{} {}\", word_index, word_index1)\n}\nfn first_world(s: &amp;str) -&gt; &amp;str {\nlet bytes = s.as_bytes();\nfor (i, &amp;item) in bytes.iter().enumerate() {\nif item == b' ' {\nreturn &amp;s[..i];\n}\n}\n&amp;s[..]\n}\n</code></pre>"},{"location":"04_ownership/05_slice/#6","title":"6. \u5176\u4ed6\u7c7b\u578b\u7684\u5207\u7247","text":"<p>\u5904\u7406\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u4e5f\u53ef\u4ee5\u7528\u5207\u7247\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet a = [1, 2, 3, 4, 5];\nlet slice = &amp;a[1..3];\n}\n</code></pre>"},{"location":"05_struct/01_struct/","title":"struct","text":""},{"location":"05_struct/01_struct/#1","title":"1. \u6982\u8ff0","text":"<p>struct\uff0c\u7ed3\u6784\u4f53</p> <ul> <li>\u81ea\u5b9a\u4e49\u7684\u6570\u636e\u7c7b\u578b</li> <li>\u4e3a\u76f8\u5173\u8054\u7684\u503c\u547d\u540d\uff0c\u6253\u5305\u7ec4\u6210\u6709\u610f\u4e49\u7684\u7ec4\u5408</li> </ul>"},{"location":"05_struct/01_struct/#2-struct","title":"2. struct\u7684\u4f7f\u7528","text":""},{"location":"05_struct/01_struct/#21-struct","title":"2.1. \u5b9a\u4e49struct","text":"<ul> <li>\u4f7f\u7528<code>struct</code>\u5173\u952e\u5b57\uff0c\u5e76\u4e3a\u6574\u4e2astruct\u547d\u540d</li> <li>\u5728\u82b1\u62ec\u53f7\u91cc\uff0c\u4e3a\u6240\u6709\u5b57\u6bb5\uff08field\uff09\u5b9a\u4e49\u540d\u79f0\u548c\u7c7b\u578b</li> </ul> <p>\u4f8b\u5982\uff1a</p> <pre><code>struct User{\nusername: String,\nemail: String,\nsign_in_count: u64,\nactive: bool,\n}\n</code></pre> <p>\u5728\u5b9a\u4e49\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u7684\u540e\u9762\u90fd\u9700\u8981\u5305\u542b\u4e00\u4e2a\u201c\u9017\u53f7\u201d\uff0c\u5373\u4f7f\u662f\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u4e5f\u9700\u8981\u5305\u542b\u9017\u53f7</p>"},{"location":"05_struct/01_struct/#22-struct","title":"2.2. \u5b9e\u4f8b\u5316struct","text":"<p>\u60f3\u8981\u4f7f\u7528struct\uff0c\u9700\u8981\u521b\u5efastruct\u7684\u5b9e\u4f8b\uff1a</p> <ul> <li>\u4e3a\u6bcf\u4e2a\u5b57\u6bb5\u6307\u5b9a\u5177\u4f53\u503c</li> <li>\u65e0\u9700\u6309\u7167\u58f0\u660e\u7684\u987a\u5e8f\u8fdb\u884c\u6307\u5b9a</li> </ul>"},{"location":"05_struct/01_struct/#23-struct","title":"2.3. \u53d6\u5f97struct\u91cc\u9762\u7684\u67d0\u4e2a\u503c","text":"<p>\u4f7f\u7528\u70b9\u6807\u8bb0\u6cd5\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let mut user1 = User{\nemail: String::from(\"some@example.com\"),\nusername: String::from(\"someusername123\"),\nactive: true,\nsign_in_count: 1,\n}\nuser1.email = String::from(\"another@example.com\")\n</code></pre> <p>\u6ce8\u610f\uff1a\u4e00\u65e6struct\u7684\u5b9e\u4f8b\u662f\u53ef\u53d8\u7684\uff0c\u90a3\u4e48\u5b9e\u4f8b\u4e2d\u6240\u6709\u5b57\u6bb5\u90fd\u662f\u53ef\u53d8\u7684</p>"},{"location":"05_struct/01_struct/#24-struct","title":"2.4. struct\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c","text":"<p>struct\u53ef\u4ee5\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn build_user(email: String, username: String)-&gt; User{\nUser {\nemail: email,\nusername: username,\nactive: true,\nsign_in_count: 1,\n}\n}\n</code></pre> <p>\u5f53\u5b57\u6bb5\u540d\u4e0e\u5b57\u6bb5\u503c\u5bf9\u5e94\u7684\u53d8\u91cf\u540d\u76f8\u540c\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b57\u6bb5\u521d\u59cb\u5316\u7b80\u5199\u7684\u65b9\u5f0f\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn build_user(email: String, username: String)-&gt;User{\nUser{\nemail,\nusername,\nactive: true,\nsign_in_count: 1,\n}\n}\n</code></pre>"},{"location":"05_struct/01_struct/#25-struct","title":"2.5. struct\u66f4\u65b0\u8bed\u6cd5","text":"<p>\u5f53\u4f60\u60f3\u57fa\u4e8e\u67d0\u4e2astruct\u5b9e\u4f8b\u6765\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528struct\u7684\u66f4\u65b0\u8bed\u6cd5\uff0c\u6211\u4eec\u5148\u770b\u4e0d\u4f7f\u7528\u66f4\u65b0\u8bed\u6cd5\u7684\u4ee3\u7801</p> <pre><code>let user2 = User{\nemail: String::from(\"another@example.com\"),\nusername: String::from(\"anotheruser567\"),\nactive: user1.active,\nsign_in_count: user1.sign_in_count\n};\n</code></pre> <p>\u4f7f\u7528\u66f4\u65b0\u8bed\u6cd5\u4e4b\u540e\uff0c\u53ef\u4ee5\u5199\u6210\u5982\u4e0b\u4ee3\u7801</p> <pre><code>let user2 = User{\nemail: String::from(\"another@example\"),\n    username: String::from(\"anotherusername567\"),\n    ..user1\n};\n</code></pre>"},{"location":"05_struct/01_struct/#26-tuple-struct","title":"2.6. Tuple struct","text":"<p>\u53ef\u4ee5\u5b9a\u4e49Tuple\u7684struct\uff0c\u53eb\u505atuple struct</p> <ul> <li>Tuple struct\u6574\u4f53\u6709\u4e2a\u540d\uff0c\u4f46\u91cc\u9762\u7684\u5143\u7d20\u6ca1\u6709\u540d</li> <li>\u9002\u7528\uff1a\u60f3\u7ed9\u6574\u4e2atuple\u8d77\u540d\uff0c\u5e76\u8ba9\u5b83\u4e0d\u540c\u4e8e\u5176\u4ed6tuple\uff0c\u800c\u4e14\u53c8\u4e0d\u9700\u8981\u7ed9\u6bcf\u4e2a\u5143\u7d20\u8d77\u540d</li> </ul> <p>\u5b9a\u4e49tuple struct\uff1a\u4f7f\u7528struct\u5173\u952e\u5b57\uff0c\u540e\u9762\u662f\u540d\u5b57\uff0c\u4ee5\u53ca\u91cc\u9762\u5143\u7d20\u7684\u7c7b\u578b</p> <pre><code>struct Color(i32, i32, i32);\nstruct Point(i32, i32, i32);\nlet black = Color(0, 0, 0);\nlet origin = Point(0, 0, 0);\n</code></pre> <p>black\u548corigin\u662f\u4e0d\u901a\u7684\u7c7b\u578b\uff0c\u662f\u4e0d\u901a\u7684tuple struct\u5b9e\u4f8b</p>"},{"location":"05_struct/01_struct/#27-unit-like-struct","title":"2.7. Unit-Like Struct\uff08\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\uff09","text":"<p>\u53ef\u4ee5\u5b9a\u4e49\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\u7684struct\uff0c\u53eb\u505aUnit-Like struct\uff08\u56e0\u4e3a\u4e0e()\uff0c\u5355\u5143\u7c7b\u578b\u7c7b\u4f3c\uff09</p> <ul> <li>\u9002\u7528\u4e8e\u67d0\u4e2a\u7c7b\u578b\u4e0a\u5b9e\u73b0\u67d0\u4e2atrait\uff0c\u4f46\u662f\u5728\u91cc\u9762\u53c8\u6ca1\u6709\u60f3\u8981\u5b58\u50a8\u7684\u6570\u636e</li> </ul>"},{"location":"05_struct/01_struct/#28-struct","title":"2.8. struct\u6570\u636e\u7684\u6240\u6709\u6743","text":"<p>\u6211\u4eec\u5148\u770b\u5982\u4e0b\u4ee3\u7801</p> <pre><code>struct User{\nusername: String,\nemail: String,\nsign_in_count: u64,\nactive: bool,\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u6bb5\u4f7f\u7528\u4e86String\u800c\u4e0d\u662f&amp;str\uff1a</p> <ul> <li>\u8be5struct\u5b9e\u4f8b\u62e5\u6709\u5176\u6240\u6709\u7684\u6570\u636e</li> <li>\u53ea\u8981struct\u5b9e\u4f8b\u662f\u6709\u6548\u7684\uff0c\u90a3\u4e48\u91cc\u9762\u7684\u5b57\u6bb5\u6570\u636e\u4e5f\u662f\u6709\u6548\u7684</li> </ul> <p>struct\u91cc\u4e5f\u53ef\u4ee5\u5b58\u653e\u5f15\u7528\uff0c\u4f46\u9700\u8981\u4f7f\u7528\u751f\u547d\u5468\u671f\uff08\u751f\u547d\u5468\u671f\u540e\u9762\u4f1a\u8bb2\u5230\uff09</p> <ul> <li> <p>\u751f\u547d\u5468\u671f\u4fdd\u8bc1\u53ea\u8981struct\u5b9e\u4f8b\u662f\u6709\u6548\u7684\uff0c\u90a3\u4e48\u91cc\u9762\u7684\u5f15\u7528\u4e5f\u662f\u6709\u6548\u7684</p> </li> <li> <p>\u5982\u679cstruct\u91cc\u5b58\u50a8\u5f15\u7528\uff0c\u800c\u4e0d\u4f7f\u7528\u751f\u547d\u5468\u671f\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519</p> </li> </ul>"},{"location":"05_struct/02_struct_sample/","title":"rust\u793a\u4f8b","text":""},{"location":"05_struct/02_struct_sample/#1","title":"1. \u6982\u8ff0","text":"<p>\u6211\u4eec\u5148\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u8ba1\u7b97\u957f\u65b9\u5f62\u7684\u7684\u9762\u79ef\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet width = 30;\nlet length = 50;\nprintln!(\"{}\", area(width, length));\n}\nfn area(width: u32, length: u32) -&gt; u32 {\nwidth * length\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 width \u548c length \u4f3c\u4e4e\u6ca1\u6709\u5173\u8054\uff0c\u5b83\u4eec\u4e24\u770b\u8d77\u6765\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u3002\u5982\u679c\u6211\u4eec\u80fd\u628a\u957f\u548c\u5bbd\u7ec4\u5408\u5230\u4e00\u8d77\uff0c\u4ee3\u7801\u5c06\u66f4\u5bb9\u6613\u7406\u89e3\u548c\u7ef4\u62a4\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b66\u4e60\u8fc7\u7684\u5143\u7ec4\u6765\u884c\u6765\u5b58\u50a8\u957f\u548c\u5bbd\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet rect = (30, 50);\nprintln!(\"{}\", area(rect));\n}\nfn area(dim: (u32, u32)) -&gt; u32 {\ndim.0 * dim.1\n}\n</code></pre> <p>\u7136\u800c\u6362\u6210\u5143\u7ec4\u4e4b\u540e\uff0c\u867d\u7136\u4e24\u4e2a\u53d8\u91cf\u5728\u4e00\u8d77\u4e86\uff0c\u4f46\u662f\u6bcf\u4e00\u4e2a\u5143\u7d20\u6ca1\u6709\u540d\u79f0\uff0c\u6211\u4eec\u4e0d\u77e5\u9053\u54ea\u4e2a\u662f\u957f\uff0c\u54ea\u4e2a\u662f\u5bbd\u3002\u6b64\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u4f53\u6765\u5b58\u50a8\u957f\u653e\u5fc3\u7684\u957f\u4e0e\u5bbd\u3002</p>"},{"location":"05_struct/02_struct_sample/#2","title":"2. \u7ed3\u6784\u4f53\u7684\u4f7f\u7528","text":"<p>\u6211\u4eec\u4f7f\u7528\u7ed3\u6784\u4f53\u6765\u5b9e\u73b0\u8ba1\u7b97\u957f\u65b9\u5f62\u9762\u79ef\u7684\u529f\u80fd\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>struct Rectangle {\nwidth: u32,\nlength: u32,\n}\nfn main() {\nlet rect = Rectangle {\nwidth: 30,\nlength: 50,\n};\nprintln!(\"{}\", area(&amp;rect));\n}\nfn area(rect: &amp;Rectangle) -&gt; u32 {\nrect.width * rect.length\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528<code>println!</code>\u5b8f\u548c<code>{}</code>\u5360\u4f4d\u7b26\u76f4\u63a5\u6253\u5370<code>reat</code>\uff0c\u5c06\u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>println!(\"{}\", rect);\n</code></pre> <p>\u56e0\u4e3a\u53ef\u4ee5\u4f7f\u7528<code>println!</code>\u6765\u6253\u5370\u7684\u6570\u636e\uff0c\u5b83\u4eec\u90fd\u5b9e\u73b0\u4e86<code>std::fmt::Display</code>\u8fd9\u4e2a\u63a5\u53e3\uff0crust\u91cc\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\u5df2\u5b9e\u73b0\u4e86\u8be5\u63a5\u53e3\uff0c\u4f46\u662f\u7ed3\u6784\u4f53\u6ca1\u6709\u5b9e\u73b0\u8be5\u63a5\u53e3\u3002\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>{:?}</code>\u6216\u8005<code>{:#?}</code>\u6765\u6253\u5370\u7ed3\u6784\u4f53\uff0c\u4f46\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u5b9e\u73b0debug\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>#[derive(Debug)]\nstruct Rectangle {\nwidth: u32,\nlength: u32,\n}\nfn main() {\nlet rect = Rectangle {\nwidth: 30,\nlength: 50,\n};\n// area \u51fd\u6570\u501f\u7528\u4e86area\u7684\u5b9e\u4f8b\uff0c\u8c03\u7528\u5b8c\u6210\u4e4b\u540e\u4e3b\u51fd\u6570\u4ecd\u7136\u53ef\u4ee5\u8c03\u7528reat\nprintln!(\"{}\", area(&amp;rect));\nprintln!(\"{:?}\", rect)\n}\nfn area(rect: &amp;Rectangle) -&gt; u32 {\nrect.width * rect.length\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u7528\u5230<code>derive</code>\u8fd9\u4e2a\u5173\u952e\u8bcd\uff0c\u4ee3\u8868\u6d3e\u751f\u4e00\u4e2aTrait\uff0c\u5b9e\u9645\u4e0arust\u63d0\u4f9b\u5f88\u591a\u53ef\u6d3e\u751f\u7684Trait\uff0c\u4ee5\u4e0a\u7528\u5230\u7684<code>Debug</code>\u53ea\u662f\u5176\u4e2d\u7684\u4f8b\u5b50\u3002</p>"},{"location":"05_struct/02_struct_sample/#3","title":"3. \u603b\u7ed3","text":"<p>\u5728\u8fd9\u7bc7\u6587\u7ae0\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u6743\u9650\u7684\u6253\u5370\u65b9\u6cd5\uff0c\u4e0b\u9762\u505a\u4e00\u4e2a\u603b\u7ed3</p> <p>rust\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\u5b9e\u73b0\u4e86<code>std::fmt::Display</code>\u8fd9\u4e2a\u63a5\u53e3\uff0c\u53ef\u4ee5\u4f7f\u7528<code>{}</code>\u5360\u4f4d\u7b26\u8fdb\u884c\u6253\u5370\uff1b\u5982\u679c\u6211\u4eec\u5e0c\u671b\u81ea\u5b9a\u4e49\u7684\u7ed3\u6784\u4f53\u53ef\u4ee5\u5b9e\u73b0\u6253\u5370\u529f\u80fd\uff0c\u9700\u8981\u5b9e\u73b0<code>std::fmt::Debug</code>\u63a5\u53e3\uff0c\u5b9e\u73b0\u7684\u65b9\u5f0f\u662f\u5728\u7ed3\u6784\u4f53\u5b9a\u4e49\u7684\u5934\u90e8\u6dfb\u52a0\u4e0a\u4ee5\u4e0b\u4e00\u884c\u4ee3\u7801</p> <pre><code>#[derive(Debug)]\n</code></pre> <p>\u52a0\u5165\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b9e\u73b0\u4e86<code>std::fmt::Debug</code>\u63a5\u53e3\uff0c\u90a3\u4e48\u5728\u6253\u5370\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528<code>{:?}</code>\u5360\u4f4d\u7b26\u6216\u8005<code>{:#?}</code>\u5360\u4f4d\u7b26\u3002</p>"},{"location":"05_struct/03_struct_method/","title":"struct\u7684\u65b9\u6cd5","text":""},{"location":"05_struct/03_struct_method/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u65b9\u6cd5\u548c\u51fd\u6570\u5f88\u7c7b\u4f3c\uff1a\u4f7f\u7528fn\u4f5c\u4e3a\u5173\u952e\u5b57\uff0c\u6709\u65b9\u6cd5\u540d\u79f0\u3001\u53c2\u6570\u3001\u8fd4\u56de\u503c</p> <p>\u65b9\u6cd5\u548c\u51fd\u6570\u4e0d\u540c\u4e4b\u5904\uff1a</p> <ul> <li>\u65b9\u6cd5\u662f\u5728struct\uff08\u6216enum\u3001trait\u5bf9\u8c61\uff09\u7684\u4e0a\u4e0b\u6587\u5b9a\u4e49</li> <li>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u603b\u662fself\uff0c\u8868\u793a\u65b9\u6cd5\u88ab\u8c03\u7528\u7684struct\u5b9e\u4f8b</li> </ul>"},{"location":"05_struct/03_struct_method/#_2","title":"\u4e8c\u3001\u65b9\u6cd5\u7684\u4f7f\u7528","text":""},{"location":"05_struct/03_struct_method/#21","title":"2.1 \u65b9\u6cd5\u7684\u5b9e\u73b0","text":"<p>\u6211\u4eec\u53ef\u4ee5\u628a\u8ba1\u7b97\u957f\u65b9\u5f62\u9762\u79ef\u4f7f\u7528\u65b9\u6cd5\u6765\u5b9e\u73b0\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>#[derive(Debug)]\nstruct Rectangle {\nwidth: u32,\nlength: u32\n}\nimpl Rectangle {\nfn area(&amp;self) -&gt; u32 {\nself.width * self.length\n}\n}\nfn main() {\nlet ract = Rectangle {\nwidth: 30,\nlength: 50,\n};\nprintln!(\"{}\", ract.area())\n}\n</code></pre> <p>\u5728main\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u62e5\u6709 ract \u53ef\u53d8\u7684\u501f\u7528\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>impl Rectangle {\nfn area(&amp;mut self) -&gt; u32 {\nself.width * self.length\n}\n}\nfn main() {\nlet mut ract = Rectangle {\nwidth: 30,\nlength: 50,\n};\nprintln!(\"{}\", ract.area())\n}\n</code></pre> <p>\u5728impl\u5757\u91cc\u5b9a\u4e49\u65b9\u6cd5\uff0c\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f <code>&amp;self</code>\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97\u5176\u6240\u6709\u6743\u6216\u53ef\u53d8\u501f\u7528\u3002\u548c\u5176\u4ed6\u53c2\u6570\u4e00\u6837\u3002\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u4ee3\u7801\u62e5\u6709\u66f4\u597d\u7684\u7ec4\u7ec7\u3002\u6bcf\u4e2astruct\u53ef\u4ee5\u5141\u8bb8\u62e5\u6709\u591a\u4e2a<code>impl</code>\u5757\u3002</p>"},{"location":"05_struct/03_struct_method/#22","title":"2.2 \u65b9\u6cd5\u7684\u8fd0\u7b97\u7b26","text":"<ul> <li> <p>C/C++\uff1aobject-&gt;something() \u548c (*object).something() \u4e00\u6837</p> </li> <li> <p>Rust\u6ca1\u6709 <code>-&gt;</code> \u8fd0\u7b97\u7b26</p> </li> <li> <p>Rust\u4f1a\u81ea\u52a8\u5f15\u7528\u6216\u8005\u89e3\u5f15\u7528\u8fd9\u79cd\u884c\u4e3a</p> </li> </ul> <p>\u5728\u8c03\u7528\u65b9\u6cd5\u65f6\uff0cRust\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u6dfb\u52a0<code>&amp;</code>\u3001<code>&amp;mut</code>\u6216<code>*</code>\uff0c\u4ee5\u4fbf object \u53ef\u4ee5\u5339\u914d\u65b9\u6cd5\u7684\u7b7e\u540d\uff0c\u5982\u4e0b\u6765\u4e24\u884c\u4ee3\u7801\u65f6\u7b49\u4ef7\u7684</p> <pre><code>p1.distance(&amp;p2)\n(&amp;p1).distance(&amp;p2)\n</code></pre>"},{"location":"05_struct/03_struct_method/#_3","title":"\u4e09\u3001\u5173\u8054\u51fd\u6570","text":"<p>\u53ef\u4ee5\u5728impl \u5757\u91cc\u5b9a\u4e49\u4e0d\u628aself\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u51fd\u6570\uff0c\u5b83\u4eec\u53eb\u505a\u5173\u8054\u51fd\u6570\uff08\u4e0d\u662f\u65b9\u6cd5\uff09</p> <p>\u4f8b\u5982</p> <pre><code>String::form()\n</code></pre> <p>\u5173\u8054\u51fd\u6570\u901a\u5e38\u7528\u4e8e\u6784\u9020\u5668\uff0c\u5982\u6211\u4eec\u53ef\u4ee5\u521b\u5efa \u957f\u65b9\u5f62\u7684\u5173\u8054\u51fd\u6570<code>square</code>\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>#[derive(Debug)]\nstruct Rectangle {\nwidth: u32,\nlength: u32\n}\nimpl Rectangle {\nfn area(&amp;self) -&gt; u32 {\nself.width * self.length\n}\nfn square(size: u32) -&gt; Rectangle {\nRectangle { width: size, length: size }\n}\n}\nfn main() {\nlet ract = Rectangle {\nwidth: 30,\nlength: 50,\n};\nprintln!(\"{}\", ract.area());\nlet s = Rectangle::square(20);\nprintln!(\"{}\", s.area());\n}\n</code></pre> <p><code>::</code>\u7b26\u53f7\u7528\u4e8e\u5173\u8054\u51fd\u6570\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u6a21\u5757\u521b\u5efa\u547d\u540d\u7a7a\u95f4\u3002</p>"},{"location":"06_enum/01_enum/","title":"\u679a\u4e3e","text":"<p>IP\u5730\u5740\u4e00\u5171\u6709\u4e24\u79cd\u7c7b\u578b\uff1aIPv4\u3001IPv6\uff0c\u6240\u4ee5IP\u5730\u5740\u8981\u4e48\u662f<code>IPv4</code>\u8981\u4e48\u662f<code>IPv6</code>\uff0c\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u7279\u6027\uff0cIP\u5730\u5740\u5c31\u975e\u5e38\u9002\u5408\u7528\u679a\u4e3e\u6765\u8868\u793a\uff0c\u6211\u4eec\u628a\u679a\u4e3e\u6240\u6709\u53ef\u80fd\u7684\u503c\u53eb\u505a\u679a\u4e3e\u7684\u53d8\u4f53\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u5b9a\u4e49IP\u5730\u5740\u7684\u679a\u4e3e\u6570\u636e</p> <pre><code>enum IpAddrKind {\nV4,\nV6,\n}\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u4f7f\u7528\u679a\u4e3e\u503c</p> <pre><code>let four = IpAddrKind::V4;\nlet six = IpAddrKind::V6;\n</code></pre> <p>\u679a\u4e3e\u7684\u53d8\u4f53\u90fd\u4f4d\u4e8e\u679a\u4e3e\u6240\u5728\u6807\u51c6\u547d\u540d\u7a7a\u95f4\u7684\u4e0b\u9762\u3002\u4ee5\u4e0b\u662f\u679a\u4e3e\u503c\u7684\u5e94\u7528\u793a\u4f8b\u4ee3\u7801</p> <pre><code>enum IpAddrKind {\nV4,\nV6,\n}\nfn main() {\nlet four = IpAddrKind::V4;\nlet six = IpAddrKind::V6;\nroute(four);\nroute(six);\nroute(IpAddrKind::V6);\n}\nfn route(ip_kind: IpAddrKind) {}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528struct\u6765\u5b58\u50a8\u679a\u4e3e\u7c7b\u578b\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>enum IpAddrKind {\nV4,\nV6,\n}\nstruct IpAddr {\nkind: IpAddrKind,\naddress: String\n}\nfn main() {\nlet home = IpAddr {\nkind: IpAddrKind::V4,\naddress: String::from(\"127.0.0.1\")\n};\nlet loopback = IpAddr {\nkind: IpAddrKind::V6,\naddress: String::from(\"::1\")\n};\n}\n</code></pre> <p>\u4e0d\u8fc7\u5728rust\u91cc\uff0c\u5141\u8bb8\u76f4\u63a5\u5c06\u6570\u636e\u9644\u52a0\u5200\u7247\u679a\u4e3e\u7684\u53d8\u4f53\u4e2d\uff0c\u5982</p> <pre><code>enum IpAddr {\nV4(String),\nV6(String),\n}\n</code></pre> <p>\u4f18\u70b9\uff1a</p> <ul> <li>\u4e0d\u9700\u8981\u989d\u5916\u7684struct\u5b58\u50a8\u76f8\u5173\u7684\u6570\u636e</li> <li>\u6bcf\u4e2a\u53d8\u4f53\u53ef\u4ee5\u7528\u6709\u4e0d\u540c\u7c7b\u578b\u4ee5\u53ca\u5173\u8054\u7684\u6570\u636e\u7684\u91cf</li> </ul> <pre><code>enum IpAddrKind {\nV4(u8, u8, u8, u8),\nV6(String),\n}\nfn main() {\nlet home = IpAddrKind::V4(127, 0, 0, 1);\nlet loopback = IpAddrKind::V6(String::from(\"::1\"))\n}\n</code></pre> <p>\u6211\u4eec\u518d\u6765\u770b\u6807\u51c6\u5e93\u4e2d\u7684IPAddr</p> <pre><code>struct Ipv4Addr {\n// --snip--\n}\nstruct Ipv6Addr {\n// --sn\n}\nenum IpAddr {\nV4(Ipv4Addr),\nV6(Ipv6Addr),\n}\n</code></pre> <p>\u4e0d\u8bba\u662f\u5b57\u7b26\u4e32\u3001\u6570\u503c\u3001\u7ed3\u6784\u4f53\uff0c\u751a\u81f3\u662f\u53e6\u5916\u4e00\u79cd\u679a\u4e3e\u7c7b\u578b\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u679a\u4e3e\u7684\u53d8\u4f53\u3002\u5982\u4e0b\u4ee3\u7801</p> <pre><code>enum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\nfn main() {\nlet q = Message::Quit;\nlet m = Message::Move { x: 12, y: 24 };\nlet w = Message::Write(String::from(\"Hello\"));\nlet c = Message::ChangeColor(0, 255, 255);\n}\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>impl</code>\u5173\u952e\u5b57\u5b9a\u4e49\u679a\u4e3e\u65b9\u6cd5\uff0c\u5982\u4e0b\u6765\u4e24\u884c\u4ee3\u7801</p> <pre><code>enum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\nimpl Message {\nfn call(&amp;self) {}\n}\nfn main() {\nlet q = Message::Quit;\nlet m = Message::Move { x: 12, y: 24 };\nlet w = Message::Write(String::from(\"Hello\"));\nlet c = Message::ChangeColor(0, 255, 255);\nm.call();\n}\n</code></pre>"},{"location":"06_enum/02_option_enum/","title":"option \u679a\u4e3e","text":""},{"location":"06_enum/02_option_enum/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<ul> <li>option\u679a\u4e3e\u5b9a\u4e49\u4e8e\u6807\u51c6\u5e93\u4e2d</li> <li>\u5728prelude\uff08\u9884\u5bfc\u5165\u6a21\u5757\uff09\u4e2d</li> <li>\u63cf\u8ff0\u4e86\uff1a\u67d0\u4e2a\u503c\u53ef\u80fd\u5b58\u5728\uff08\u67d0\u79cd\u7c7b\u578b\uff09\u6216\u4e0d\u5b58\u5728\u7684\u60c5\u51b5</li> </ul>"},{"location":"06_enum/02_option_enum/#rustnull","title":"\u4e8c\u3001Rust\u6ca1\u6709NULL","text":"<p>\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u90fd\u6709NULL\uff0cNULL\u662f\u4e00\u4e2a\u503c\uff0c\u5b83\u8868\u793a\u201c\u6ca1\u6709\u503c\u201d\u3002\u8fd9\u4e9b\u8bed\u8a00\u4e2d\uff0c\u4e00\u4e2a\u53d8\u91cf\u53ef\u4ee5\u5904\u4e8e\u4e24\u79cd\u72b6\u6001\uff1a\u7a7a\u503c\uff08NULL\uff09\u3001\u975e\u7a7a\u3002NULL\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5f53\u4f60\u5c1d\u8bd5\u4f7f\u7528NULL\u503c\u90a3\u6837\u4f7f\u7528NULL\u503c\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5f15\u8d77\u67d0\u79cd\u9519\u8bef\u3002rust\u6ca1\u6709NULL\uff0c\u4f46\u662fNULL\u7684\u6982\u5ff5\u8fd8\u662f\u6709\u7528\u7684\uff0c\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u53d8\u5f97\u65e0\u6548\u6216\u7f3a\u7701\u7684\u503c\u3002</p> <p>rust\u4e2d\u63d0\u4f9b\u4e86\u7c7b\u4f3cNULL\u6982\u5ff5\u7684\u679a\u4e3e\uff1a<code>Option&lt;T&gt;</code>\uff0c\u5728\u6807\u51c6\u5e93\u4e2d\u5b9a\u4e49\u5982\u4e0b</p> <pre><code>enum Option&lt;T&gt; {\nSome(T),\nNone,\n}\n</code></pre> <p>\u8be5\u679a\u4e3e\u5305\u542b\u5728Prelude\uff08\u9884\u5bfc\u5165\u6a21\u5757\uff09\u4e2d\u3002\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff1a</p> <pre><code>Option&lt;T&gt;\n</code></pre> <p>\u8be5\u679a\u4e3e\u7684\u4e24\u4e2a\u53d8\u4f53\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528</p> <pre><code>Some(T)\nNone\n</code></pre> <p>\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\n// \u6709\u6548\u7684\u503c\nlet some_number = Some(5);\nlet some_string = Some(\"A String\");\n// \u65e0\u6548\u7684\u503c\nlet some_number: Option&lt;i32&gt; = None;\n}\n</code></pre>"},{"location":"06_enum/02_option_enum/#optiontnull","title":"\u4e09\u3001<code>Option&lt;T&gt;</code>\u6bd4<code>Null</code>\u597d\u5728\u54ea\u91cc\uff1f","text":"<p><code>Option&lt;T&gt;</code>\u548c<code>T</code>\u662f\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u4e0d\u53ef\u4ee5\u628a<code>Option&lt;T&gt;</code>\u76f4\u63a5\u5f53\u6210<code>T</code>\uff0c\u82e5\u60f3\u4f7f\u7528<code>Option&lt;T&gt;</code>\u4e2d\u7684<code>T</code>\uff0c\u5fc5\u987b\u5c06\u5b83\u8f6c\u6362\u4e3a<code>T</code>\u3002\u907f\u514d\u4e86\u4f7f\u7528\u975e\u6709\u6548\u503c\u8fdb\u884c\u8ba1\u7b97\u800c\u5bfc\u81f4\u9519\u8bef\uff0c\u5982\u5728<code>C#</code>\u4e2d\u5047\u8bbe\u67d0\u4e2a\u53d8\u91cf\u503c\u4e3a<code>NULL</code>\uff0c\u53c2\u4e0e\u8ba1\u7b97\u65f6\u5c06\u5bfc\u81f4\u9519\u8bef\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>string a = null;\nstring b = a + \"12345\";\n</code></pre> <p>\u6240\u4ee5rust\u7684<code>Option&lt;T&gt;</code>\u7684\u8bbe\u8ba1\u5c31\u907f\u514d\u4e86NULL\u503c\u6cdb\u6ee5\u7684\u60c5\u51b5\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u66f4\u52a0\u5b89\u5168\uff01</p>"},{"location":"06_enum/03_match_expression/","title":"match\u8868\u8fbe\u5f0f","text":""},{"location":"06_enum/03_match_expression/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>match\u662f\u4e00\u4e2a\u63a7\u5236\u6d41\u8fd0\u7b97\u7b26\uff0c\u7528\u4e8e\u5339\u914d\u503c\u4e0e\u6a21\u5f0f\uff0c\u5e76\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u3002</p> <ul> <li>match\u5141\u8bb8\u4e00\u4e2a\u503c\u4e0e\u4e00\u7cfb\u5217\u6a21\u5f0f\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u6267\u884c\u5339\u914d\u7684\u6a21\u5f0f\u5bf9\u5e94\u7684\u4ee3\u7801</li> <li>\u6a21\u5f0f\u53ef\u4ee5\u662f\u5b57\u9762\u503c\u3001\u53d8\u91cf\u540d\u3001\u901a\u914d\u7b26...</li> </ul> <p>match\u8868\u8fbe\u5f0f\u4f1a\u4e00\u6b21\u5224\u65ad\u6a21\u5f0f\u5217\u8868\uff0c\u5982\u679c\u7b26\u5408\u6761\u4ef6\uff0c\u5c06\u6267\u884c\u5bf9\u5e94\u7684\u4ee3\u7801\u3002\u5982\u679c\u5305\u542b\u591a\u884c\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528<code>{}</code>\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>enum Coin {\nPenny,\nNickel,\nDime,\nQuarter\n}\nfn value_in_cents(coin: Coin) -&gt; u8 {\nmatch coin {\nCoin::Penny =&gt; {\nprintln!(\"panny\");\n1\n}\nCoin::Nickel =&gt; 5,\nCoin::Dime =&gt; 10,\nCoin::Quarter =&gt; 25,\n}\n}\nfn main() {}\n</code></pre>"},{"location":"06_enum/03_match_expression/#_2","title":"\u4e8c\u3001\u7ed1\u5b9a\u503c\u7684\u6a21\u5f0f","text":"<p>\u5339\u914d\u7684\u5206\u652f\u53ef\u4ee5\u7ed1\u5b9a\u5230\u88ab\u5339\u914d\u5bf9\u8c61\u7684\u90e8\u5206\u503c\uff0c\u56e0\u6b64\u53ef\u4ee5\u4eceenum\u53d8\u4f53\u4e2d\u63d0\u53d6\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>#[derive(Debug)]\nenum UsState {\nAlabama,\nAlaska\n}\nenum Coin {\nPenny,\nNickel,\nDime,\nQuarter(UsState)\n}\nfn value_in_cents(coin: Coin) -&gt; u8 {\nmatch coin {\nCoin::Penny =&gt; {\nprintln!(\"panny\");\n1\n}\nCoin::Nickel =&gt; 5,\nCoin::Dime =&gt; 10,\nCoin::Quarter(state) =&gt; {\nprintln!(\"State quarter from {:?}!\", state)\n25\n},\n}\n}\nfn main() {\nlet c = Coin::Quarter(UsState::Alaska);\nprintln!(\"{}\", value_in_cents(c));\n}\n</code></pre>"},{"location":"06_enum/03_match_expression/#option","title":"\u4e09\u3001\u5339\u914dOption\u679a\u4e3e <p>macth\u53ef\u4ee5\u5339\u914d\u679a\u4e3e\u503c\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\n    let five = Some(5);\n    let six = puls_one(five);\n    let none = puls_one(None);\n}\n\nfn puls_one(x :Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {\n    match x {\n        None =&gt; None,\n        Some(i) =&gt; Some(i + 1)\n    }\n}\n</code></pre>","text":""},{"location":"06_enum/03_match_expression/#_3","title":"\u56db\u3001\u6ce8\u610f <p>match\u5fc5\u987b\u7a77\u679a\u4e3e\u6240\u6709\u53ef\u80fd\u7684\u503c\uff0c\u7279\u522b\u662f Option\u7c7b\u578b\u7684\u6570\u636e\uff0c\u5982\u679c\u4e0d\u60f3\u7a77\u679a\u4e3e\u6240\u6709\u53ef\u80fd\u7684\u503c\uff0c\u9700\u8981\u4f7f\u7528<code>_</code>\u6765\u4ee3\u66ff\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\n    let v = 0u8;\n    match v {\n        1 =&gt; println!(\"one\"),\n        3 =&gt; println!(\"three\"),\n        5 =&gt; println!(\"five\"),\n        7 =&gt; println!(\"seven\"),\n        _ =&gt; (),\n    }\n}\n</code></pre>","text":""},{"location":"06_enum/04_if_let/","title":"if let","text":"<p>if let \u662f\u4e00\u4e2a\u7b80\u5355\u7684\u63a7\u5236\u6d41\uff0c\u5b83\u503c\u5173\u5fc3\u4e00\u79cd\u5339\u914d\u5ffd\u7565\u5176\u4ed6\u5339\u914d\u7684\u60c5\u51b5\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v = Some(0u8);\nif let Some(3) = v {\nprintln!(\"three\");\n}\n}\n</code></pre> <p>\u5728\u53ea\u5173\u5fc3\u4e00\u79cd\u63a7\u5236\u6d41\u5339\u914d\u503c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 <code>if let</code> \u4ee3\u66ff <code>match</code> \u8ba9\u6211\u4eec\u7f16\u5199\u66f4\u5c11\u7684\u4ee3\u7801\u3002\u4e5f\u653e\u5f03\u4e86\u7a77\u679a\u4e3e\u7684\u53ef\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u628a<code>if let</code>\u770b\u4f5c<code>match</code>\u7684\u8bed\u6cd5\u7cd6\u3002\u4e5f\u5c31\u662f\u9488\u5bf9<code>match</code>\u7684\u67d0\u4e00\u79cd\u7279\u5b9a\u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>if let</code>\u6765\u4ee3\u66ff\u3002<code>if let</code>\u8fd8\u53ef\u4ee5\u642d\u914d<code>else</code>\u6765\u4f7f\u7528\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v = Some(0u8);\nif let Some(3) = v {\nprintln!(\"three\");\n} else {\nprintln!(\"others\");\n}\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528 <code>match</code> \u8868\u8fbe\u5f0f\u6765\u662f\u5b9e\u73b0\uff0c\u5219\u5199\u6cd5\u5982\u4e0b</p> <pre><code>match v {\nSome(3) =&gt; println!(\"three\"),\n_ =&gt; println!(\"others\");\n}\n</code></pre>"},{"location":"07_project_management/01_package_crate_module/","title":"package\u3001crate\u3001module","text":""},{"location":"07_project_management/01_package_crate_module/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":""},{"location":"07_project_management/01_package_crate_module/#11","title":"1.1 \u540d\u8bcd","text":"<p>package\uff1a\u5305</p> <p>crate\uff1a\u5355\u5143\u5305</p> <p>module\uff1a\u6a21\u5757</p>"},{"location":"07_project_management/01_package_crate_module/#12","title":"1.2 \u4ee3\u7801\u7ec4\u7ec7","text":"<p>rust\u7684\u4ee3\u7801\u7ec4\u7ec7\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b</p> <ul> <li>\u54ea\u4e9b\u7ec6\u8282\u53ef\u4ee5\u66b4\u9732\uff0c\u54ea\u4e9b\u7ec6\u8282\u662f\u79c1\u6709\u7684</li> <li>\u4f5c\u7528\u57df\u5185\u54ea\u4e9b\u540d\u79f0\u6709\u6548</li> </ul> <p>\u8fd9\u4e9b\u529f\u80fd\u6709\u65f6\u5019\u7edf\u79f0\u4e3a\u6a21\u5757\u7cfb\u7edf\uff0c\u6a21\u5757\u7cfb\u7edf\u5305\u542b\u5982\u4e0b\u5185\u5bb9</p> <ul> <li>Package\uff08\u5305\uff09\uff1aCargo\u7684\u7279\u6027\uff0c\u8ba9\u4f60\u6784\u5efa\u3001\u6d4b\u8bd5\u3001\u5171\u4eabcrate</li> <li>Crate\uff08\u5171\u4eab\u5305\uff09\uff1a\u4e00\u4e2a\u6a21\u5757\u6811\uff0c\u4ed6\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2alibrary\u6216\u8005\u53ef\u6267\u884c\u6587\u4ef6</li> <li>Module\uff08\u6a21\u5757\uff09\u3001use\uff1a\u8ba9\u4f60\u63a7\u5236\u4ee3\u7801\u7684\u7ec4\u7ec7\u3001\u4f5c\u7528\u57df\u3001\u79c1\u6709\u8def\u5f84</li> <li>Path\uff08\u8def\u5f84\uff09\uff1a\u4e3astruct\u3001function\u6216\u8005module\u7b49\u9879\u547d\u540d\u7684\u65b9\u5f0f</li> </ul>"},{"location":"07_project_management/01_package_crate_module/#packagecrate","title":"\u4e8c\u3001package\u548cCrate","text":""},{"location":"07_project_management/01_package_crate_module/#21-crate","title":"2.1 Crate\u7684\u7c7b\u578b","text":"<ul> <li>binary</li> <li>library</li> </ul>"},{"location":"07_project_management/01_package_crate_module/#22-crate-root","title":"2.2 Crate Root","text":"<ul> <li>\u662f\u6e90\u4ee3\u7801\u6587\u4ef6</li> <li>Rust\u7f16\u8bd1\u5668\u662f\u4ece\u8fd9\u91cc\u5f00\u59cb\uff0c\u7ec4\u6210\u4f60\u7684Crate\u7684\u6839\u7684Module\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u662f\u4e00\u4e2a\u5165\u53e3\u6587\u4ef6</li> </ul>"},{"location":"07_project_management/01_package_crate_module/#23-package","title":"2.3 Package","text":"<ul> <li>\u5305\u542b\u4e00\u4e2a<code>Cargo.toml</code>\uff0c\u5b83\u63cf\u8ff0\u4e86\u5982\u4f55\u6784\u5efa\u8fd9\u4e9bCrates</li> <li>\u6700\u591a\u5305\u542b1\u4e2alibrary crate</li> <li>\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u6570\u91cf\u7684binary crate</li> <li>\u5fc5\u987b\u81f3\u5c11\u5305\u542b\u4e00\u4e2acrate\uff08library\u6216binary\uff09</li> </ul> <p>\u5f53\u6211\u4eec\u4f7f\u7528<code>cargo new</code>\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u9879\u76ee\u65f6\uff0c\u5bf9\u5e94\u7684\u9879\u76ee\u5c31\u662f\u4e00\u4e2abinary\u7c7b\u578b\u7684package\u3002</p> <p>cargo\u4f1a\u5c06<code>src/main.rs</code>\u6700\u4e3abinary crate\u7684\u6839\uff0ccrate\u7684\u540d\u4e0epackage\u7684\u540d\u662f\u76f8\u540c\u7684\uff1b\u5982\u679c\u6211\u4eec\u7684\u9879\u76ee\u4e0b\u5b58\u5728<code>src/lib.rs</code>\u6587\u4ef6\uff0c\u90a3\u4e48\u8be5package\u5c31\u662f\u5305\u542b\u4e00\u4e2alibrary crate\uff0c\u8be5crate\u662flibrary crate\u7684\u6839\uff0c\u8fd9\u4e2acrate\u7684\u540d\u4e0epackage\u7684\u540d\u4e5f\u662f\u76f8\u540c\u7684\u3002</p> <p>cargo\u4f1a\u628acrate root\u6587\u4ef6\u4ea4\u7ed9rustc\u6765\u6784\u5efalibrary\u6216binary\u3002</p>"},{"location":"07_project_management/01_package_crate_module/#23-cargo","title":"2.3 cargo\u7684\u60ef\u4f8b","text":"<p>\u4e00\u4e2apackage\u53ef\u4ee5\u540c\u65f6\u5305\u542b<code>src/mian.rs</code>\u548c<code>src/lib.rs</code>\uff0c\u4e00\u4e2a binary crate\uff0c\u4e00\u4e2a library crate\uff0c\u540d\u79f0\u4e0epackage\u76f8\u540c\u3002</p> <p>\u4e00\u4e2apackage\u53ef\u4ee5\u6709\u591a\u4e2abinary crate\uff0c\u6587\u4ef6\u653e\u5728<code>src/bin</code>\u4e0b\uff0c\u653e\u5728\u8be5\u76ee\u5f55\u4e0b\u7684\u54a9\u54e5\u6587\u4ef6\u90fd\u662f\u5355\u72ec\u7684binary crate\u3002</p>"},{"location":"07_project_management/01_package_crate_module/#24-crate","title":"2.4 crate\u7684\u4f5c\u7528","text":"<p>crate\u5c06\u76f8\u5173\u7684\u529f\u80fd\u7ec4\u5408\u5230\u4e00\u4e2a\u4f5c\u7528\u57df\u5185\uff0c\u4fbf\u4e8e\u5728\u9879\u76ee\u95f4\u8fdb\u884c\u5171\u4eab\uff0c\u9632\u6b62\u51b2\u7a81\u3002\u4f8b\u5982\u4f7f\u7528rand crate\uff0c\u8bbf\u95ee\u5b83\u7684\u529f\u80fd\u9700\u8981\u901a\u8fc7\u4ed6\u7684\u540d\u5b57\uff1arand\u3002</p>"},{"location":"07_project_management/01_package_crate_module/#module","title":"\u4e09\u3001\u5b9a\u4e49Module","text":"<p>\u5b9a\u4e49module\u6765\u63a7\u5236\u4f5c\u7528\u57df\u548c\u79c1\u6709\u6027\uff0cModule\u7684\u4f5c\u7528\u5982\u4e0b</p> <ul> <li>\u5728\u4e00\u4e2acrate\u5185\uff0c\u5c06\u4ee3\u7801\u8fdb\u884c\u5206\u7ec4</li> <li>\u589e\u52a0\u53ef\u8bfb\u6027\uff0c\u6613\u4e8e\u590d\u7528</li> <li>\u63a7\u5236\u9879\u76ee\uff08item\uff09\u7684\u8bbf\u95ee\u5c5e\u6027\u6027\uff0cpublic\u3001private</li> </ul> <p>\u901a\u8fc7<code>module</code>\u5173\u952e\u5b57\u6765\u5efa\u7acbmodule\uff0cmodule\u662f\u53ef\u5d4c\u5957\u7684\uff0c\u5728\u5b50module\u53ef\u5305\u542b\u5176\u4ed6\u9879\u76ee\uff08struct\u3001enum\u3001\u5e38\u91cf\u3001trait\u3001\u51fd\u6570\u7b49\uff09\u7684\u5b9a\u4e49\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>mod front_of_house {\nmod hosting {\nfn add_to_wailist() {}\nfn seat_at_table() {}\n}\nmod serving {\nfn take_order() {}\nfn serving() {}\nfn take_payment() {}\n}\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p> <p><code>src/main.rs</code>\u548c<code>src/lib.rs</code>\u53eb\u505acrate roots\u3002\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff08\u4efb\u610f\u4e00\u4e2a\uff09\u7684\u5185\u5bb9\u5f62\u6210\u4e86\u540d\u4e3a<code>crate</code>\u7684\u6a21\u5757\uff0c\u4f4d\u4e8e\u6574\u4e2a\u6a21\u5757\u6811\u7684\u6839\u90e8\u3002</p>"},{"location":"07_project_management/02_path/","title":"\u8def\u5f84","text":""},{"location":"07_project_management/02_path/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5728rust\u91cc\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u627e\u5230\u67d0\u4e2a\u6a21\u5757\uff0c\u6211\u4eec\u5fc5\u987b\u77e5\u9053\u5176\u8def\u5f84\uff0crust\u7684\u8def\u5f84\u6709\u4e24\u79cd\u5f62\u5f0f\u3002</p> <p>\u7edd\u5bf9\u8def\u5f84\uff1a\u4ececrate root\u5f00\u59cb\uff0c\u4f7f\u7528 crate \u540d\u6216\u5b57\u9762\u503c crate\u3002\u76f8\u5bf9\u8def\u5f84\uff1a\u4ece\u5f53\u524d\u6a21\u5757\u5f00\u59cb\uff0c\u4f7f\u7528self\u3001super\uff0c\u6216\u8005\u5f53\u524d\u6a21\u5757\u7684\u6807\u8bc6\u7b26\u3002\u4e0d\u5e72\u4e8b\u7edd\u5bf9\u8def\u5f84\u8fd8\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u53ea\u6709\u7531\u4e00\u4e2a\u8868\u793a\u7b26\u7ec4\u6210\uff0c\u5982\u679c\u5b58\u5728\u591a\u4e2a\u6807\u8bc6\u7b26\uff0c\u6807\u8bc6\u7b26\u4e4b\u95f4\u4f7f\u7528<code>::</code>\u8fdb\u884c\u5206\u5272\u3002</p> <p>\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b<code>src/lib.rs</code></p> <pre><code>mod front_of_house {\nmod hosting {\nfn add_to_waitlist() {}\n}\n}\npub fn eat_at_restaurant() {\n// \u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u8c03\u7528\u51fd\u6570\ncrate::front_of_house::hosting::add_to_waitlist();\n// \u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u8c03\u7528\u51fd\u6570\nfront_of_house::hosting::add_to_waitlist();\n}\n</code></pre> <p>\u4ee5\u4e0a\u7684\u4ee3\u7801\u5206\u522b\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u548c\u76f8\u5bf9\u8def\u5f84\u8c03\u7528\u51fd\u6570\uff0c<code>front_of_house</code>\u6a21\u5757\u76f8\u5bf9<code>eat_at_restaurant</code>\u51fd\u6570\u5728\u540c\u4e00\u4e2a\u7ea7\u522b\uff0c\u6240\u4ee5\u51fd\u6570\u91cc\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u3002\u4e0d\u8fc7\u4e0a\u9762\u7684\u4ee3\u7801\u770b\u4f3c\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u5f53\u6211\u4eec\u7f16\u8bd1\u7684\u65f6\u5019\u4f1a\u62a5\u9519\u3002\u6211\u4eec\u5c06\u5728\u4e0b\u6587\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"07_project_management/02_path/#privacy-boundary","title":"\u4e8c\u3001\u79c1\u6709\u8fb9\u754c\uff08privacy boundary\uff09","text":"<p>\u6a21\u5757\u4e0d\u4ec5\u53ef\u4ee5\u7ec4\u7ec7\u4ee3\u7801\uff0c\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u79c1\u6709\u8fb9\u754c\u3002\u5982\u679c\u60f3\u628a\u51fd\u6570\u6216\u8005struct\u7b49\u8bbe\u7f6e\u4e3a\u79c1\u6709\uff0c\u5c31\u53ef\u4ee5\u5c06\u5b83\u653e\u5230\u67d0\u4e2a\u6a21\u5757\u4e2d\u3002Rust\u4e2d\u6240\u6709\u6761\u76ee\uff08\u51fd\u6570\u3001\u65b9\u6cd5\u3001struct\u3001enum\u3001\u6a21\u5757\u3001\u5e38\u91cf\uff09\u9ed8\u8ba4\u662f\u79c1\u6709\u7684\u3002\u7236\u7ea7\u6a21\u5757\u65e0\u6cd5\u8bbf\u95ee\u5b50\u7ea7\u6a21\u5757\u4e2d\u7684\u79c1\u6709\u6761\u76ee\uff0c\u5728\u5b50\u6a21\u5757\u91cc\uff0c\u53ef\u4ee5\u4f7f\u7528\u6240\u6709\u7956\u5148\u6a21\u5757\u7684\u6761\u76ee\u3002</p>"},{"location":"07_project_management/02_path/#21-pub","title":"2.1 pub\u5173\u952e\u5b57","text":"<p>\u4f7f\u7528<code>pub</code>\u5173\u952e\u5b57\u53ef\u4ee5\u5c06\u67d0\u4e9b\u6761\u76ee\u6807\u8bb0\u4e3a\u516c\u5171\u7684\u3002\u6211\u4eec\u5c06\u201c\u4e00\u201d\u4e2d\u7684\u4ee3\u7801\u6539\u4e3a\u5982\u4e0b\uff0c\u5c06\u4e0d\u4f1a\u518d\u51fa\u73b0\u9519\u8bef</p> <pre><code>mod front_of_house {\npub mod hosting {\npub fn add_to_waitlist() {}\n}\n}\npub fn eat_at_restaurant() {\n// \u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u8c03\u7528\u51fd\u6570\ncrate::front_of_house::hosting::add_to_waitlist();\n// \u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u8c03\u7528\u51fd\u6570\nfront_of_house::hosting::add_to_waitlist();\n}\n</code></pre> <p><code>front_of_house</code>\u4e4b\u6240\u4ee5\u4e0d\u9700\u8981\u6dfb\u52a0<code>pub</code>\u5173\u952e\u5b57\uff0c\u56e0\u4e3a<code>front_of_house</code>\u548c<code>eat_at_restaurant</code>\u90fd\u5728\u6587\u4ef6\u6839\u7ea7\uff0c\u53ef\u4ee5\u4e92\u76f8\u8c03\u7528\u3002</p>"},{"location":"07_project_management/02_path/#22-super","title":"2.2 super\u5173\u952e\u5b57","text":"<p><code>super</code>\u5173\u952e\u5b57\u7528\u6765\u8bbf\u95ee\u7236\u7ea7\u6a21\u5757\u4e2d\u7684\u5185\u5bb9\uff0c\u7c7b\u578b\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684<code>..</code>\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn serve_order() {}\nmod back_of_house {\nfn fix_incorrect_order() {\ncook_order();\n// \u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8c03\u7528\nsuper::serve_order();\n// \u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8c03\u7528\ncrate::serve_order();\n}\nfn cook_order() {}\n}\n</code></pre>"},{"location":"07_project_management/02_path/#23-pub-struct","title":"2.3 pub struct","text":"<p>pub \u653e\u5728struct \u4e4b\u524d\uff0c\u4ee3\u8868\u516c\u5171\u7684\u7ed3\u6784\u4f53\uff0cstruct \u91cc\u9762\u7684\u5b57\u6bb5\u9ed8\u8ba4\u662f\u79c1\u6709\u7684\uff0c\u60f3\u628a\u54ea\u4e2a\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u516c\u6709\uff0c\u5c31\u5728\u5bf9\u5e94\u7684\u5b57\u6bb5\u524d\u9762\u52a0\u4e0apub\u5173\u952e\u5b57\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>mod back_of_house {\npub struct Breakfast {\npub toast: String,\nseasonal_fruit: String,\n}\nimpl Breakfast {\npub fn summer(toast: &amp;str) -&gt; Breakfast {\nBreakfast {\ntoast: String::from(toast),\nseasonal_fruit: String::from(\"peachers\"),\n}\n}\n}\n}\npub fn eat_at_restaurant() {\nlet mut meal = back_of_house::Breakfast::summer(\"Rye\");\nmeal.toast = String::from(\"Wheat\");\nprintln!(\"I'd like {} toast please\", meal.toast);\n}\n</code></pre>"},{"location":"07_project_management/02_path/#24-pub-enum","title":"2.4 pub enum","text":"<p>pub \u653e\u5728 enum \u524d\u9762\u662f\u5c06enum\u58f0\u660e\u4e3a\u516c\u5171\u3002\u679a\u4e3e\u4e2d\u7684\u53d8\u4f53\u90fd\u53d8\u6210\u516c\u5171\u7684\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>mod back_of_house {\npub enum Appetizer {\nSoup,\nSalad,\n}\n}\n</code></pre>"},{"location":"07_project_management/03_use/","title":"use","text":""},{"location":"07_project_management/03_use/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u53ef\u4ee5\u4f7f\u7528use\u5173\u952e\u5b57\u5c06\u8def\u5f84\u5bfc\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u5185\uff0c\u5f15\u5165\u7684\u5185\u5bb9\u4ecd\u7136\u9075\u5faa\u79c1\u6709\u6027\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ea\u6709\u516c\u5171\u7684\u6a21\u5757\u5f15\u5165\u8fdb\u6765\u624d\u53ef\u4ee5\u4f7f\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>mod front_of_house {\npub mod hosting {\npub fn add_to_waitlist() {}\nfn some_function();\n}\n}\nuse crate::front_of_house::hosting;\npub fn eat_at_restaurant() {\nhosting::add_to_waitlist();\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u867d\u7136\u6211\u4eec\u5f15\u5165\u4e86<code>hosting</code>\u6a21\u5757\uff0c\u4f46\u662f\u4ecd\u7136\u4e0d\u80fd\u8c03\u7528 <code>some_function</code> \u8fd9\u4e2a\u79c1\u6709\u51fd\u6570\u3002</p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u5f15\u5165\u6a21\u5757\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use front_of_house::hosting;\n</code></pre> <p>\u5728\u5f15\u5165\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u6211\u4eec\u901a\u5e38\u5f15\u7528\u5230\u7236\u7ea7\u6a21\u5757\u5373\u53ef\uff0c\u518d\u901a\u8fc7\u7236\u7ea7\u6a21\u5757\u8c03\u7528\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u5f15\u5165\u5230\u5177\u4f53\u7684\u51fd\u6570\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u5bb9\u6613\u7684\u533a\u5206\u51fd\u6570\u662f\u5916\u90e8\u5f15\u5165\u7684\uff0c\u8fd8\u662f\u672c\u6a21\u5757\u5c31\u5b58\u5728\u7684\u3002</p>"},{"location":"07_project_management/03_use/#use_1","title":"\u4e8c\u3001use\u7684\u7ba1\u7528\u505a\u6cd5","text":""},{"location":"07_project_management/03_use/#21","title":"2.1 \u51fd\u6570","text":"<p>\u5c06\u51fd\u6570\u7684\u7236\u7ea7\u6a21\u5757\u5f15\u5165\u4f5c\u7528\u57df\uff0c\u6307\u5b9a\u5230\u5176\u7236\u7ea7\u5373\u53ef\uff1b</p> <ul> <li>struct\u3001enum\u3001\u5176\u4ed6</li> </ul> <p>\u5bf9\u4e8e\u975e\u51fd\u6570\u6761\u76ee\uff0c\u5219\u6307\u5b9a\u5b8c\u6574\u8def\u5f84\uff0c\u5373\u6307\u5b9a\u5230\u5176\u672c\u8eab\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collection::HashMap;\nfn main() {\nlet mut map = HashMap::new();\nmap.insert(1, 2);\n}\n</code></pre>"},{"location":"07_project_management/03_use/#22","title":"2.2 \u540c\u540d\u6761\u76ee","text":"<p>\u5982\u679c\u5728\u4e0d\u540c\u7684\u6a21\u5757\u5b58\u5728\u4e24\u4e2a\u540c\u540d\u6761\u76ee\uff0c\u800c\u5728\u4e00\u4e2a\u6e90\u7801\u6587\u4ef6\u4e2d\u9700\u8981\u540c\u65f6\u4f7f\u7528\u8fd9\u4e24\u4e2a\u6a21\u5757\uff0c\u8fd9\u65f6\u5019use\u5f15\u7528\u6307\u5b9a\u5230\u7236\u7ea7\u5373\u53ef\u3002\u5982\u6211\u4eec\u9700\u8981<code>std::fmt::Result</code>\u548c<code>std::io::Result</code>\u8fd9\u4e24\u4e2aResult\uff0c\u5219\u9700\u8981\u5c06\u5176\u7236\u6a21\u5757\u540c\u65f6\u5f15\u5165\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fmt;\nuse std::io;\nfn f1() -&gt; fmt::Result {\n// \u51fd\u6570\u5185\u5bb9\uff0c\u6b64\u5904\u7701\u7565\n}\nfn f2() -&gt; io::Result {\n// \u51fd\u6570\u5185\u5bb9\uff0c\u6b64\u5904\u7701\u7565\n}\n</code></pre> <p>\u9664\u6b64\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\u89e3\u51b3\u8be5\u95ee\u9898\uff0cas \u5173\u952e\u5b57\u53ef\u4ee5\u4e3a\u5f15\u5165\u7684\u8def\u5f84\u6307\u5b9a\u672c\u5730\u7684\u522b\u540d\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fmt::Result;\nuse std::io::Result as IOResult;\nfn f1() -&gt; Result {\n// \u51fd\u6570\u5185\u5bb9\u7701\u7565\n}\nfn f2() -&gt; IOResult {\n// \u7701\u7565\u51fd\u6570\u4f53\n}\n</code></pre>"},{"location":"07_project_management/03_use/#23-pub-use","title":"2.3 \u4f7f\u7528pub use\u91cd\u65b0\u5bfc\u51fa\u540d\u79f0","text":"<p>\u4f7f\u7528use\u5c06\u8def\u5f84\uff08\u540d\u79f0\uff09\u5bfc\u5165\u5230\u4f5c\u7528\u57df\u540e\uff0c\u8be5\u540d\u79f0\u5728\u6b64\u4f5c\u7528\u57df\u662f\u79c1\u6709\u7684\u3002\u5982\u679c\u6211\u4eec\u4f7f\u7528<code>pub use</code>\u5173\u952e\u5b57\u8fdb\u884c\u5f15\u7528\uff0c\u90a3\u4e48\u5728\u5916\u90e8\u5c31\u53ef\u4ee5\u4f7f\u7528\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>mod front_of_house {\npub mod hosting {\npub fn add_to_waitlist() {}\nfn some_function();\n}\n}\npub use crate::front_of_house::hosting;\n</code></pre> <p><code>pub use</code>\u5c06\u6761\u76ee\u5f15\u5165\u5230\u4f5c\u7528\u57df\u5185\uff0c\u540c\u65f6\u8be5\u6761\u76ee\u53ef\u4ee5\u88ab\u5916\u90e8\u4ee3\u7801\u5f15\u5165\u5230\u5b83\u4eec\u7684\u4f5c\u7528\u57df\u5185\u3002</p>"},{"location":"07_project_management/03_use/#package","title":"\u4e09\u3001\u4f7f\u7528\u5916\u90e8\u5305\uff08package\uff09","text":"<p><code>Cargo.toml</code>\u6dfb\u52a0\u4f9d\u8d56\u7684\u5305\uff08package\uff09\u7684\u58f0\u660e\uff0c\u5f53\u6211\u4eec\u8fd0\u884c<code>cargo build</code>\u65f6\uff0ccargo\u5c06\u4ecehttps://crate.io\u6dfb\u52a0\u5bf9\u5e94\u5305\u5230\u672c\u5730\uff0c\u4e0b\u8f7d\u597d\u4e4b\u540e\uff0c\u4f7f\u7528<code>use</code>\u5173\u952e\u5b57\u5c06\u7279\u5b9a\u6761\u76ee\u5f15\u5165\u5230\u4f5c\u7528\u57df\u3002</p> <p>\u4e0d\u8fc7\u4f7f\u7528\u4f7f\u7528\u539f\u7f51\u7ad9\u4e0b\u8f7d\u4f9d\u8d56\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c\u56e0\u4e3ahttps://crate.io\u7684\u670d\u52a1\u5668\u5728\u56fd\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4fee\u6539\u6587\u4ef6\u6587\u4ef6\u5c06\u4e0b\u8f7d\u7684\u6e90\u6307\u5b9a\u6539\u4e3a\u56fd\u5185\u7684cargo\u955c\u50cf\u5730\u5740\uff0c\u4fee\u6539\u6587\u4ef6<code>~/.cargo/config</code>\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>[source.crates-io]\nreplace-with = 'tuna'\n[source.tuna]\nregistry = \"https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git\"\n</code></pre> <p>\u4ee5\u4e0a\u7684\u914d\u7f6e\u6307\u5b9a\u4e86\u5f53cargo\u53bb\u62c9\u53bb\u5305\u4f9d\u8d56\u7684\u65f6\u5019\uff0c\u5c06\u4f7f\u7528\u6e05\u534e\u955c\u50cf\u7ad9\u3002</p> <p>\u6807\u51c6\u5e93<code>std</code>\u4e5f\u88ab\u5f53\u4f5c\u5916\u90e8\u5305\uff0c\u4e0d\u9700\u8981\u4fee\u6539<code>Cargo.toml</code>\u6765\u5305\u542b<code>std</code>\u3002\u4e0d\u8fc7\u5728\u9700\u8981\u4f7f\u7528\u5177\u4f53\u6761\u76ee\u7684\u65f6\u5019\uff0c\u8fd8\u662f\u9700\u8981\u4f7f\u7528<code>use</code>\u5173\u952e\u5b57\u5c06<code>std</code>\u4e2d\u7279\u5b9a\u7684\u6761\u76ee\u5f15\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u3002</p>"},{"location":"07_project_management/03_use/#use_2","title":"\u56db\u3001\u4f7f\u7528\u5d4c\u5957\u8def\u5f84\u6e05\u7406\u5927\u91cf\u7684\u7684use\u8bed\u53e5","text":"<p>\u5982\u679c\u4f7f\u7528\u540c\u4e00\u4e2a\u5305\u6216\u8005\u6a21\u5757\u4e0b\u7684\u591a\u4e2a\u6761\u76ee\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u5d4c\u5957\u8def\u5f84\u5728\u540c\u4e00\u884c\u5185\u5c06\u4e0a\u8ff0\u6761\u76ee\u8fdb\u884c\u5f15\u5165\uff0c\u5f15\u5165\u683c\u5f0f\u5982\u4e0b</p> <pre><code>\u8def\u5f84\u76f8\u540c\u7684\u90e8\u5206::{\u8def\u5f84\u5dee\u5f02\u7684\u90e8\u5206}\n</code></pre> <p>\u5982</p> <pre><code>use std::cmp::Ordering;\nuse std::io;\n</code></pre> <p>\u53ef\u4ee5\u6539\u4e3a</p> <pre><code>std std::{\ncmp::Ordering,\nio\n}\n</code></pre> <p>\u5982</p> <pre><code>use std::io;\nuse std::io::Write;\n</code></pre> <p>\u53ef\u4ee5\u6539\u4e3a</p> <pre><code>use std::io::{\nself,\nWrite\n}\n</code></pre> <p><code>*</code>\u4ee3\u8868\u901a\u914d\u7b26\u53f7\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>*</code>\u628a\u8def\u5f84\u4e2d\u6240\u6709\u7684\u516c\u5171\u6761\u76ee\u90fd\u5f15\u5165\u5230\u5f53\u524d\u7684\u4f5c\u7528\u57df\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::*;\n</code></pre> <p>\u4f46\u8fd9\u79cd\u5f15\u5165\u65b9\u5f0f\u9700\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u9002\u5408\u4ee5\u4e0b\u5e94\u7528\u573a\u666f</p> <ul> <li>\u6d4b\u8bd5\u3002\u5c06\u6240\u6709\u88ab\u6d4b\u8bd5\u4ee3\u7801\u5f15\u5165\u5230tests\u6a21\u5757\u4e2d</li> <li>\u6709\u65f6\u88ab\u7528\u4e8e\u9884\u5bfc\u5165\uff08prelude\uff09\u6a21\u5757</li> </ul>"},{"location":"07_project_management/03_use/#_2","title":"\u4e94\u3001\u5c06\u6a21\u5757\u5185\u5bb9\u79fb\u52a8\u5230\u5176\u4ed6\u6587\u4ef6","text":"<p>\u5b9a\u4e49\u6a21\u5757\u65f6\uff0c\u5982\u679c\u6a21\u5757\u540e\u9762\u662f\u201c;\u201d\uff0c\u800c\u4e0d\u662f\u4ee3\u7801\u5757\uff0cRust\u4f1a\u4ece\u6a21\u5757\u540c\u540d\u7684\u6587\u4ef6\u4e2d\u52a0\u5728\u5185\u5bb9\uff0c\u6a21\u5757\u6811\u7684\u7ed3\u6784\u4e0d\u4f1a\u53d8\u5316\u3002\u968f\u7740\u6a21\u5757\u9010\u6e10\u53d8\u5927\uff0c\u8be5\u6280\u672f\u8ba9\u4f60\u53ef\u4ee5\u628a\u6a21\u5757\u7684\u5185\u5bb9\u79fb\u52a8\u5230\u5176\u4ed6\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"08_aggregate_types/01_vector/","title":"vector","text":""},{"location":"08_aggregate_types/01_vector/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>Vector\uff0c\u53eb\u505aVector\uff0c\u53c8\u4e00\u4e2a\u6807\u51c6\u5e93\u63d0\u4f9b\uff0c\u53ef\u5b58\u50a8\u591a\u4e2a\u503c\uff0c\u53ea\u80fd\u5b58\u50a8\u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8fd9\u4e9b\u503c\u5728\u5185\u5b58\u4e2d\u8fde\u7eed\u5b58\u653e\u3002 <p>\u4f7f\u7528<code>Vec::new</code>\u521b\u5efaVector\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v: Vec&lt;i32&gt; = Vec::new();\n}\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u521d\u59cb\u503c\u521b\u5efa<code>Vec&lt;T&gt;</code>\uff0c\u4f7f\u7528<code>vec!</code>\u5b8f\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v = vec![1, 2, 3];\n}\n</code></pre>"},{"location":"08_aggregate_types/01_vector/#vector_1","title":"\u4e8c\u3001\u66f4\u65b0vector","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>push</code>\u65b9\u6cd5\u6dfb\u52a0\u5143\u7d20\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut v = Vec::new();\nv.push(1);\nv.push(2);\nv.push(3);\n}\n</code></pre>"},{"location":"08_aggregate_types/01_vector/#vector_2","title":"\u4e09\u3001\u8bfb\u53d6vector\u7684\u5143\u7d20","text":"<p>\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5f15\u7528vector\u91cc\u7684\u503c\uff0c\u7d22\u5f15\u3001get\u65b9\u6cd5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v = vec![1, 2, 3, 4, 5];\nlet third: &amp;i32 = &amp;v[2];\nprintln!(\"The third element is {}\", third);\nmatch v.get(2) {\nSome(third) =&gt; println!(\"The third element id {}\", third);\nNone =&gt; println!(\"There is no third element\");\n}\n}\n</code></pre> <p>\u904d\u5386vector</p> <pre><code>fn main() {\nlet v = vec![100, 32, 57];\nfor i in &amp;v {\nprintln!(\"{}\", i);\n}\n}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u7f16\u8bd1\u7684\u8fc7\u7a0b\u4e2d\u4fee\u6539vector\u5143\u7d20\u7684\u503c</p> <pre><code>fn main() {\nlet mut v = vec![100, 32, 57];\nfor i in &amp;mut v {\n*i += 50;\n}\nfor i in v {\nprintln!(\"{}\", i);\n}\n}\n</code></pre>"},{"location":"08_aggregate_types/01_vector/#vector_3","title":"\u56db\u3001\u5220\u9664vector","text":"<p>\u4e0e\u5176\u4ed6\u5143\u7d20struct\u4e00\u6837\uff0c\u5f53vector\u79bb\u5f00\u4f5c\u7528\u57df\u540e\uff0c\u5b83\u5c31\u88ab\u6e05\u7406\u6389\uff0c\u5b83\u6240\u6709\u7684\u5143\u7d20\u4e5f\u88ab\u6e05\u7406\u6389\u3002</p>"},{"location":"08_aggregate_types/01_vector/#_2","title":"\u4e94\u3001\u6240\u6709\u6743\u548c\u501f\u7528\u89c4\u5219","text":"<p>\u4e0d\u80fd\u5728\u540c\u4e00\u4f5c\u7528\u57df\u5185\u540c\u65f6\u62e5\u6709\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\n// \u58f0\u660e\u4e86\u4e00\u4e2a\u53ef\u53d8\u7684vec\nlet mut v = vec![1, 2, 3, 4, 5];\n// \u5f15\u7528\u4e86\u4e00\u4e2a\u4e0d\u53ef\u53d8\u7684\u501f\u7528\nlet first = &amp;v[0];\n// \u53c8\u5411v\u4e2d\u6dfb\u52a0\u503c\uff0c\u8fd9\u91cc\u53d1\u751f\u4e86\u53ef\u53d8\u7684\u501f\u7528\uff0c\u5c06\u5bfc\u81f4\u62a5\u9519\nv.push(6);\nprintln!(\"The first element is {}\", first);\n}\n</code></pre>"},{"location":"08_aggregate_types/02_vector_and_enum/","title":"vector \u548c enum","text":"<p>\u5728vector\u91cc\u53ea\u80fd\u5b58\u653e\u76f8\u540c\u7684\u6570\u636e\uff0c\u5f53\u6211\u4eec\u9700\u8981\u5b58\u50a8\u4e0d\u540c\u7684\u6570\u636e\u65f6\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u4f7f\u7528\u4f7f\u7528enum\u52a0\u4e0avector\u6765\u5b58\u50a8\u6570\u636e\u3002enum\u7684\u53d8\u4f53\u53ef\u4ee5\u9644\u52a0\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0cenum\u7684\u53d8\u4f53\u5b9a\u4e49\u5728\u540c\u4e00\u4e2aenum\u7c7b\u578b\u4e0b\u3002\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>enum SpreadsheetCell {\nInt(i32),\nFloat(f64),\nText(String)\n}\nfn main() {\nlet row = vec![\nSpreadsheetCell::Int(3),\nSpreadsheetCell::Text(String::from(\"blue\")),\nSpreadsheetCell::Float(12.12),\n];\n}\n</code></pre>"},{"location":"08_aggregate_types/03_string/","title":"\u521b\u5efa\u548c\u4f7f\u7528\u5b57\u7b26\u4e32","text":""},{"location":"08_aggregate_types/03_string/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>Rust\u5f00\u53d1\u8005\u7279\u522b\u65f6\u65b0\u624b\u7ecf\u5e38\u88ab\u5b57\u7b26\u4e32\u6240\u56f0\u6270\uff0c\u4e8c\u56f0\u6270\u7684\u539f\u56e0\u4e3b\u8981\u6709\u4e09\u4e2a</p> <ul> <li>Rust\u503e\u5411\u4e8e\u5305\u55bd\u53ef\u80fd\u7684\u9519\u8bef</li> <li>\u5b57\u7b26\u4e32\u6570\u636e\u7ed3\u6784\u590d\u6742</li> <li>\u4f7f\u7528UTF8\u7f16\u7801</li> </ul>"},{"location":"08_aggregate_types/03_string/#11","title":"1.1 \u5b57\u7b26\u4e32\u662f\u4ec0\u4e48\uff1f","text":"<p>\u5b57\u7b26\u4e32\u662f Byte \u7684\u96c6\u5408\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e00\u4e9b\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u80fd\u591f\u5c06 byte \u89e3\u6790\u4e3a\u6587\u672c\u3002</p> <p>Rust\u7684\u6838\u5fc3\u8bed\u8a00\u5c42\u9762\uff0c\u53ea\u6709\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a\u5b57\u7b26\u4e32\u5207\u7247 str \uff08\u6216&amp;str\uff09\u3002</p> <p>\u5b57\u7b26\u4e32\u5207\u7247\u662f \u5b58\u50a8\u5728\u5176\u4ed6\u5730\u65b9\u3001\u5e76\u4e14\u4f7f\u7528UTF8\u7f16\u7801\u7684\u5b57\u7b26\u4e32\u7684\u5f15\u7528\u3002\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u5b58\u50a8\u5728\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\uff0c\u4e5f\u662f\u5b57\u7b26\u4e32\u5207\u7247\u3002</p>"},{"location":"08_aggregate_types/03_string/#12-string","title":"1.2 String\u7c7b\u578b","text":"<p>String\u7c7b\u578b\u6765\u81ea\u6807\u51c6\u5e93\u800c\u4e0d\u662f\u6838\u5fc3\u8bed\u8a00\uff0c\u5b83\u662f\u53ef\u589e\u957f\u3001\u53ef\u4fee\u6539\u3001\u53ef\u62e5\u6709\uff08\u53ef\u83b7\u5f97\u6240\u6709\u6743\uff09\u7684\u4e00\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u91c7\u7528UTF8\u7f16\u7801\u3002</p> <ul> <li>\u5728rust\u4e2d\u8bf4\u7684\u5b57\u7b26\u662f\u6307\uff1f</li> </ul> <p>\u901a\u5e38\u6307\u7684\u662f String \u6216\u8005 \u5b57\u7b26\u4e32\u5207\u7247\uff08&amp;str\uff09\u8fd9\u4e24\u79cd\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u5176\u4e2d\u7684\u4e00\u79cd\u3002</p> <p>Rust\u6807\u51c6\u5e93\u4e2d\u8fd8\u5305\u542b\u4e86\u5f88\u591a\u5176\u4ed6\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4f8b\u5982\uff1aOsString\u3001OsStr\u3001CString\u3001CStr\u3002\u4ee5<code>String</code>\u7ed3\u5c3e\u7684\u901a\u5e38\u4e0e<code>String</code>\u76f8\u5173\uff0c\u901a\u5e38\u62e5\u6709\u6240\u6709\u6743\uff0c\u4ee5<code>Str</code>\u7ed3\u5c3e\u901a\u5e38\u4e0e<code>str</code>\u76f8\u5173\uff0c\u901a\u5e38\u53ef\u4ee5\u501f\u7528\u6240\u6709\u6743\u3002\u5b83\u4eec\u53ef\u4ee5\u5b58\u50a8\u4e0d\u540c\u7f16\u7801\u7684\u6587\u672c\u6216\u5728\u5185\u5b58\u4e2d\u4ee5\u4e0d\u540c\u7684\u5f62\u5f0f\u5c55\u73b0\u3002</p>"},{"location":"08_aggregate_types/03_string/#string","title":"\u4e8c\u3001\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\uff08String\uff09","text":"<p>\u5f88\u591a<code>Vec&lt;T&gt;</code>\u7684\u64cd\u4f5c\u90fd\u53ef\u7528\u4e8eString\u3002\u4f7f\u7528<code>String::new()</code>\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u5b57\u7b26\u4e32\u3002\u4f46\u5f88\u591a\u65f6\u5019\u4f7f\u7528\u521d\u59cb\u503c\u521b\u5efaString\uff0c\u4ee5\u4e0b\u4ecb\u7ecd\u4e24\u79cd\u65b9\u6cd5</p>"},{"location":"08_aggregate_types/03_string/#21-to_string","title":"2.1 \u4f7f\u7528 to_string\u65b9\u6cd5","text":"<p><code>to_string</code>\u65b9\u6cd5\u53ef\u7528\u4e8e\u5b9e\u73b0\u4e86Display trait\u7684\u7c7b\u578b\uff0c\u5305\u62ec\u5b57\u7b26\u4e32\u5b57\u9762\u503c\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet data = \"initial contents\";\nlet s = data.to_string();\nlet s1 = \"initial contents\".to_string();\n}\n</code></pre>"},{"location":"08_aggregate_types/03_string/#22-stringfrom","title":"2.2 \u4f7f\u7528String::from\u51fd\u6570","text":"<p><code>String::from</code>\u51fd\u6570\u53ef\u4ee5\u4ece\u5b57\u9762\u503c\u6765\u521b\u5efa\u5b57\u7b26\u4e32\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s = String::from(\"initial contents\");\n}\n</code></pre>"},{"location":"08_aggregate_types/03_string/#string_1","title":"\u4e09\u3001\u5982\u4f55\u66f4\u65b0String","text":""},{"location":"08_aggregate_types/03_string/#31-push_str","title":"3.1 push_str","text":"<p><code>push_str()</code>\u65b9\u6cd5\uff0c\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\u9644\u52a0\u5230String\u4e0a\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut s = String::from(\"foo\");\ns.push_str(\"bar\");\nprintln!(\"{}\", s);\n}\n</code></pre>"},{"location":"08_aggregate_types/03_string/#32-push","title":"3.2 push","text":"<p><code>push()</code>\u65b9\u6cd5\uff0c\u628a\u5355\u4e2a\u5b57\u7b26\u6dfb\u52a0\u5230String\u4e0a\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut s = String::from(\"lo\");\ns.push('l');\n}\n</code></pre>"},{"location":"08_aggregate_types/03_string/#33","title":"3.3 +\u8fd0\u7b97\u7b26","text":"<p><code>+</code>\u8fd0\u7b97\u7b26\uff0c\u53ef\u4ee5\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u62fc\u63a5\uff0c<code>+</code>\u53f7\u524d\u9762\u7684\u53d8\u91cf\u662fString\u7c7b\u578b\uff0c<code>+</code>\u540e\u9762\u7684\u53d8\u91cf\u662f\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s1 = String::from(\"Hello, \");\nlet s2 = String::from(\"World\");\nlet s3 = s1 + &amp;s2;\nprintln!(\"{}\", s3);\n}\n</code></pre> <p><code>+</code>\u8fd0\u7b97\u7b26\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u8fd9\u4e2a\u7b7e\u540d\u7684\u65b9\u6cd5<code>fn add(self, s: &amp;str) -&gt; String {...}</code>\u3002\u4e0a\u9762\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c<code>s2</code>\u662f\u4e00\u4e2aString\u7c7b\u578b\uff0c\u5219<code>&amp;s2</code>\u662f\u4e00\u4e2aString\u7c7b\u578b\u7684\u5f15\u7528\u3002</p> <p><code>+</code>\u8fd0\u7b97\u7b26\u4e4b\u540e\u7684\u5e0c\u671b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\uff0c \u8fd9\u91cc\u4e4b\u6240\u4ee5\u80fd\u591f\u7f16\u8bd1\u901a\u8fc7\uff0c\u662f\u56e0\u4e3arust\u5728\u7f16\u8bd1\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u4e86\u4e00\u79cd\u201c\u89e3\u5f15\u7528\u5f3a\u5236\u8f6c\u6362\u201d\uff08deref coercion\uff09\u7684\u6280\u672f\u3002\u5b83\u628aString\u7684\u5f15\u7528\u8f6c\u4e3a\u4e86\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u6240\u4ee5\u7f16\u8bd1\u53ef\u4ee5\u987a\u5229\u901a\u8fc7\u3002</p> <p>\u5728\u6267\u884c\u62fc\u63a5\u4ee3\u7801\u4e4b\u540e\uff0c<code>s1</code>\u7684\u6240\u6709\u6743\u88ab\u79fb\u5230<code>add</code>\u51fd\u6570\uff0c\u5982\u679c\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\u7ee7\u7eed\u4f7f\u7528\u5c06\u4f1a\u62a5\u9519\uff1b\u800c<code>s2</code>\u4f7f\u7528\u4e86<code>&amp;</code>\u6765\u6807\u6ce8\uff0c<code>add</code>\u51fd\u6570\u53ea\u662f\u501f\u7528\u4e86<code>s2</code>\u7684\u6240\u6709\u6743\uff0c\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4ecd\u7136\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u3002</p>"},{"location":"08_aggregate_types/03_string/#34-format","title":"3.4 format!\u5b8f","text":"<p><code>format!</code>\u5b8f\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u5c06\u591a\u4e2a\u5355\u8bcd\u4f7f\u7528\u7279\u5b9a\u7b26\u53f7\u8fdb\u884c\u62fc\u63a5\uff0c\u4f7f\u7528<code>+</code>\u8fd0\u7b97\u7b26\u7684\u5b9e\u73b0\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s1 = String::from(\"tic\");\nlet s2 = String::from(\"tac\");\nlet s3 = String::from(\"toe\");\nlet s4 = s1 + \"-\" + &amp;s2 + \"-\" + &amp;s3;\nprintln!(\"{}\", s4);\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528<code>format!</code>\u5b8f\u5c06\u5b57\u7b26\u4e32\u62fc\u63a5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>let s = format!(\"{}-{}-{}\", s1, s2, s3);\nprintln!(\"{}\", s);\n</code></pre> <p><code>format!</code>\u4e0d\u4f1a\u53d6\u5f97\u4efb\u4f55\u53c2\u6570\u7684\u6240\u6709\u6743\uff0c\u800c\u662f\u5c06\u591a\u4e2a\u53c2\u6570\u683c\u5f0f\u4e4b\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\u3002</p>"},{"location":"08_aggregate_types/04_string_slice/","title":"\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u548c\u5207\u5272","text":""},{"location":"08_aggregate_types/04_string_slice/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5982\u679c\u6309\u7d22\u5f15\u8bed\u6cd5\u8bbf\u95eeString\u7684\u67d0\u4e2a\u90e8\u5206\uff0c\u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet s1 = String::from(\"hello\");\n// \u4ee5\u4e0b\u4ee3\u7801\u5c06\u4f1a\u62a5\u9519\nlet h = s1[0];\n}\n</code></pre> <p>Rust\u7684\u5b57\u7b26\u4e32\u4e0d\u652f\u6301\u7d22\u5f15\u8bed\u6cd5\u8bbf\u95ee</p>"},{"location":"08_aggregate_types/04_string_slice/#string","title":"\u4e8c\u3001String\u7c7b\u578b\u7684\u5185\u90e8\u8868\u793a","text":"<p>string\u662f<code>Vec&lt;u8&gt;</code>\u7684\u5305\u88c5\u3002Rust\u6709\u4e09\u79cd\u770b\u5f85\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\uff0c\u5206\u522b\u662f\uff1a\u5b57\u8282\uff08Bytes\uff09\u3001Scalar Values\uff08Unicode\u6807\u91cf\u503c\uff09\u3001Grapheme Cluster\uff08\u5b57\u5f62\u7c07\uff09\u3002</p> <p>Rust\u4e0d\u5141\u8bb8\u5bf9String\u8fdb\u884c\u7d22\u5f15\u7684\u6700\u540e\u4e00\u4e2a\u539f\u56e0\uff1a\u7d22\u5f15\u64cd\u4f5c\u5e94\u6d88\u8017\u4e00\u4e2a\u5e38\u91cf\u65f6\u95f4 O(1)\uff0c\u800cString\u65e0\u6cd5\u4fdd\u8bc1\u8be5\u65f6\u95f4\uff0c\u56e0\u4e3arust\u9700\u8981\u904d\u5386\u6240\u6709\u5185\u5bb9\uff0c\u6765\u786e\u5b9a\u6709\u591a\u5c11\u4e2a\u5408\u6cd5\u7684\u5b57\u7b26\u3002</p>"},{"location":"08_aggregate_types/04_string_slice/#string_1","title":"\u4e09\u3001\u5207\u5272string","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>[]</code>\u548c\u4e00\u4e2a\u8303\u56f4\u6765\u521b\u5efa\u5b57\u7b26\u4e32\u7684\u5207\u7247\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet hello = \"\u5c0f\u660e\u5728\u5b66\u4e60\";\nlet s = &amp;hello[0..6];\nprint!(\"{}\", s)\n}\n</code></pre> <p>\u6211\u4eec\u5207\u5272\u4e866\u4e2a\u5b57\u8282\uff0c\u6b64\u65f6\u8f93\u51fa\u7684\u4e2d\u6587\u5b57\u7b26\u4e32\u662f<code>\u5c0f\u660e</code>\uff0c\u4ee3\u8868\u4e00\u4e2a\u4e2d\u6587\u5b57\u7b26\u5360\u7528\u4e863\u4e2a\u5b57\u8282\u3002\u5728\u5b57\u7b26\u4e32\u5207\u5272\u65f6\uff0c\u5fc5\u987b\u8c28\u614e\uff0c\u6bd4\u5982\u67d0\u79cd\u8bed\u8a00\u7684\u6bcf\u4e2a\u5b57\u7b26\u5360\u75282\u4e2a\u5b57\u8282\uff0c\u90a3\u5207\u5272\u7684\u4f4d\u7f6e\u7d22\u5f15\u5fc5\u987b\u6574\u96642\u3002\u5982\u679c\u6211\u4eec\u5207\u5272\u7684\u4f4d\u7f6e\u4e0d\u5728\u5b57\u7b26\u7684\u8fb9\u754c\uff0c\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5c06\u4f1a\u4ea7\u751f<code>panic</code>\u3002\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u5728\u5207\u5272\u5b57\u7b26\u4e32\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u9a8c\u8bc1\u5b57\u7b26\u7684\u8fb9\u754c\u6765\u5207\u5272\u3002</p>"},{"location":"08_aggregate_types/04_string_slice/#_3","title":"\u56db\u3001\u904d\u5386\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5","text":""},{"location":"08_aggregate_types/04_string_slice/#41","title":"4.1 \u83b7\u5f97\u5b57\u8282","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>bytes()</code>\u65b9\u6cd5\u5c06\u5b57\u7b26\u4e32\u6309\u5355\u4e2a\u5b57\u8282\u7684\u65b9\u5f0f\u8fdb\u884c\u62c6\u5206\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet w = \"\u5c0f\u660e\u5728\u5b66\u4e60\";\nfor b in w.bytes() {\nprintln!(\"{}\", b)\n}\n}\n</code></pre>"},{"location":"08_aggregate_types/04_string_slice/#42","title":"4.2 \u83b7\u5f97\u6807\u91cf\u503c","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>chars()</code>\u65b9\u6cd5\u5c06\u5b57\u7b26\u4e32\u6309\u5355\u4e2a\u6807\u91cf\u503c\u7684\u65b9\u5f0f\u8fdb\u884c\u62c6\u5206\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet w = \"\u5c0f\u660e\u5728\u5b66\u4e60\";\nfor c in w.chars() {\nprintln!(\"{}\", c)\n}\n}\n</code></pre>"},{"location":"08_aggregate_types/04_string_slice/#43","title":"4.3 \u83b7\u53d6\u5b57\u5f62\u7c07","text":"<p>\u5bf9\u4e8e\u5b57\u5f62\u7c07\uff0c\u5f88\u590d\u6742\uff0c\u6807\u51c6\u5e93\u672a\u63d0\u4f9b\u76f8\u5173\u63a5\u53e3\uff0c\u5982\u679c\u60f3\u5feb\u901f\u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u5b57\u5f62\u7c07\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u4e09\u65b9crate\u6765\u5b9e\u73b0</p>"},{"location":"08_aggregate_types/05_hash_map/","title":"\u4f7f\u7528\u54c8\u5e0c\u6620\u5c04\u5b58\u50a8\u952e\u503c\u5bf9","text":""},{"location":"08_aggregate_types/05_hash_map/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>HashMap\u662f\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u5b58\u50a8\u6570\u636e\uff0c\u4e00\u4e2a\u952e\uff08key\uff09\u5bf9\u5e94\u4e00\u4e2a\u503c\uff08value\uff09\uff0cHashMap\u7684\u5185\u90e8\u5b9e\u73b0\u4f7f\u7528\u4e86Hash\u51fd\u6570\uff0cHash\u51fd\u6570\u51b3\u5b9a\u4e86\u5982\u4f55\u5728\u5185\u5b58\u4e2d\u5b58\u653ekey\u548cvalue\u3002HashMap\u9002\u7528\u573a\u666f\u4e3a\uff1a\u901a\u8fc7K\uff08\u4efb\u4f55\u7c7b\u578b\uff09\u6765\u5bfb\u627e\u6570\u636e\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u7d22\u5f15\u3002</p>"},{"location":"08_aggregate_types/05_hash_map/#hashmap","title":"\u4e8c\u3001\u521b\u5efaHashMap","text":"<p>\u4f7f\u7528<code>HashMap::new()</code>\u51fd\u6570\u6765\u521b\u5efa\u7a7a\u7684HashMap\uff0c\u518d\u901a\u8fc7<code>insert()</code>\u65b9\u6cd5\u6765\u6dfb\u52a0\u6570\u636e\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet mut scopes = HashMap::new();\nscopes.insert(String::from(\"Blue\"), 10);\nscopes.insert(String::from(\"Yellow\"), 50);\n}\n</code></pre> <p>HashMap\u4f7f\u7528\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u4e0d\u5728prelude\u4e2d\u3002\u5982\u9700\u8981\u4f7f\u7528HashMap\uff0c\u9700\u8981\u624b\u52a8\u5f15\u5165\u3002\u6807\u51c6\u5e93\u5bf9HashMap\u7684\u652f\u6301\u4e5f\u6bd4\u8f83\u5c11\uff0c\u6ca1\u6709\u5185\u7f6e\u7684\u5b8f\u6765\u521b\u5efa<code>HashMap</code>\u3002HashMap\u7684\u6570\u636e\u5b58\u653e\u5728heap\u5185\u5b58\u4e0a\u3002</p> <p>HashMap\u662f\u540c\u6784\u7684\uff0c\u5728\u4e00\u4e2aHashMap\u4e2d\uff0c\u6240\u6709\u7684 K \u5fc5\u987b\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\uff0c\u6240\u6709\u7684 V\u5fc5\u987b\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\u3002</p> <p>\u53e6\u4e00\u79cd\u521b\u5efaHashMap\u7684\u65b9\u5f0f\u662f\u901a\u8fc7<code>collect</code>\u65b9\u6cd5\u3002\u5728\u5143\u7d20\u7c7b\u578b\u4e3a<code>Tuple</code>\u7684Vector\u4e0a\u4f7f\u7528<code>collect</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7ec4\u5efa\u4e00\u4e2aHashMap\u3002\u8981\u6c42Tuple\u6709\u4e24\u4e2a\u503c\uff1a\u4e00\u4e2a\u4f5c\u4e3aK\uff0c\u4e00\u4e2a\u4f5c\u4e3aV\u3002<code>collect</code>\u65b9\u6cd5\u53ef\u4ee5\u628a\u6570\u636e\u6574\u5408\u6210\u5f88\u591a\u79cd\u96c6\u5408\u7c7b\u578b\uff0c\u5305\u62ecHashMap\uff0c\u8fd4\u56de\u503c\u9700\u8981\u663e\u5f0f\u6307\u660e\u7c7b\u578b\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet teams = vec![String::from(\"Blue\"), String::from(\"Yellow\")];\nlet intial_scores = vec![10, 50];\n// zip\u51fd\u6570\u6709\u62c9\u94fe\u7684\u610f\u601d\uff0c\u5c06\u4e24\u4e2a\u6570\u7ec4\u62c9\u5230\u4e00\u8d77\uff0c\u5728\u4f7f\u7528 collect \u65b9\u6cd5\u96c6\u5408\u6570\u636e\uff0c\u6700\u540e\u6307\u5b9a\u751f\u6210\u7684\u96c6\u5408\u6570\u636e\u4e3a HashMap\nlet scores: HashMap&lt;_, _&gt; = teams.iter().zip(intial_scores.iter()).collect();\n}\n</code></pre>"},{"location":"08_aggregate_types/05_hash_map/#hashmap_1","title":"\u4e09\u3001HashMap\u548c\u6240\u6709\u6743","text":"<p>\u5bf9\u4e8e\u5b9e\u73b0\u4e86<code>Copy trait</code>\u7684\u7c7b\u578b\uff08\u4f8b\u5982i32\uff09\uff0c\u503c\u4f1a\u4f1a\u88ab\u590d\u5236\u5230<code>HashMap</code>\u4e2d\u3002\u5bf9\u4e8e\u62e5\u6709\u6240\u6709\u6743\u7684\u503c\uff08\u4f8b\u5982String\uff09\uff0c\u503c\u4f1a\u88ab\u79fb\u52a8\uff0c\u6240\u6709\u6743\u4f1a\u8f6c\u7ed9HashMap\u3002</p> <p>\u5982\u679c\u5c06\u503c\u7684\u5f15\u7528\u63d2\u5165\u5230HashMap\uff0c\u503c\u672c\u8eab\u4e0d\u4f1a\u79fb\u52a8\uff0c\u5728HashMap\u6709\u6548\u7684\u671f\u95f4\uff0c\u88ab\u5f15\u7528\u7684\u503c\u5fc5\u987b\u4fdd\u6301\u6709\u6548\u3002</p>"},{"location":"08_aggregate_types/05_hash_map/#hashmap_2","title":"\u56db\u3001\u8bbf\u95eeHashMap\u4e2d\u7684\u503c","text":"<p>\u4f7f\u7528<code>get</code>\u65b9\u6cd5\u8bbf\u95eeHashMap\u7684\u503c\uff0c\u53c2\u6570\u4e3a<code>K</code>\uff0c\u8fd4\u56de<code>Option&lt;&amp;V&gt;</code>\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet mut scores = HashMap::new();\nscores.insert(String::from(\"Blue\"), 10);\nscores.insert(String::from(\"Yellow\"), 10);\nlet team_name = String::from(\"Blue\");\nlet scores = scores.get(&amp;team_name);\nmatch scores {\nSome(s) =&gt; println!(\"{}\", s),\nNone =&gt; println!(\"team not exits\"),\n}\n}\n</code></pre>"},{"location":"08_aggregate_types/05_hash_map/#hashmap_3","title":"\u4e94\u3001\u904d\u5386HashMap","text":"<p>\u901a\u5e38\u4f7f\u7528HashMap\u7684\u5f15\u7528\u8fdb\u884c\u904d\u5386\uff0c\u56e0\u4e3a\u5728\u904d\u5386\u4e4b\u540e\uff0c\u6211\u4eec\u901a\u5e38\u8fd8\u9700\u8981\u662f\u4f7f\u7528\u5230HashMap\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet mut scores = HashMap::new();\nscores.insert(String::from(\"Blue\"), 10);\nscores.insert(String::from(\"Yellow\"), 10);\nfor (k, v) in &amp;scopes {\nprintln!(\"{}: {}\", K, v);\n}\n}\n</code></pre>"},{"location":"08_aggregate_types/06_update_hash_map/","title":"\u66f4\u65b0\u54c8\u5e0c\u6620\u5c04","text":""},{"location":"08_aggregate_types/06_update_hash_map/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>HashMap\u7684\u5927\u5c0f\u662f\u53ef\u4ee5\u53d8\u5316\uff0c\u4e5f\u5c31\u662f\u8bf4\u952e\u503c\u5bf9\u7684\u6570\u91cf\u53ef\u4ee5\u53d8\u5316\uff0c\u4f46\u662f\u6bcf\u4e2aK\u540c\u65f6\u53ea\u80fd\u5bf9\u5e94\u4e00\u4e2aV\u3002\u66f4\u65b0HashMap\u4e2d\u7684\u6570\u636e\u6709\u4ee5\u4e0b\u51e0\u79cd\u9009\u62e9</p> <p>\u5f53K\u5b58\u5728\u65f6</p> <ul> <li>\u66ff\u6362\u73b0\u6709\u7684V</li> <li>\u4fdd\u7559\u73b0\u6709\u7684V\uff0c\u5ffd\u7565\u65b0\u7684V</li> <li>\u57fa\u4e8e\u73b0\u6709\u7684V\u6765\u66f4\u65b0V</li> </ul> <p>\u5f53K\u4e0d\u5b58\u5728\u65f6</p> <ul> <li>\u6dfb\u52a0\u4e00\u5bf9\u65b0\u7684K, V</li> </ul>"},{"location":"08_aggregate_types/06_update_hash_map/#_3","title":"\u4e8c\u3001\u66f4\u65b0\u64cd\u4f5c","text":""},{"location":"08_aggregate_types/06_update_hash_map/#21-v","title":"2.1 \u66ff\u6362\u73b0\u6709\u7684V","text":"<p>\u5982\u679c\u5411HashMap\u63d2\u5165\u4e00\u5bf9KV\uff0c\u7136\u540e\u518d\u63d2\u5165\u540c\u6837\u7684K\uff0c\u4f46\u662f\u4e0d\u540c\u7684V\uff0c\u90a3\u4e48\u539f\u6765\u7684V\u4f1a\u88ab\u66ff\u6362\u6389\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet mut scores = HashMap::new();\nscores.insert(String::from(\"Blue\", 10));\nscores.insert(String::from(\"Blue\", 25));\nprintln!(\"{:?}\", scores);\n}\n</code></pre>"},{"location":"08_aggregate_types/06_update_hash_map/#22-kv","title":"2.2 \u53ea\u5728K\u4e0d\u5b58\u5728\u4efb\u4f55\u503c\u7684\u60c5\u51b5\u4e0b\u624d\u63d2\u5165V","text":"<p><code>entry</code>\u65b9\u6cd5\uff0c\u4f1a\u68c0\u67e5\u6307\u5b9a\u7684K\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u5bf9\u5e94\u7684V\uff0c\u53c2\u6570\u4e3a<code>K</code>\uff0c\u8fd4\u56de\u503c\u4e3a <code>enum Enrty</code>\uff0c\u4ee3\u8868\u662f\u5426\u5b58\u5728\u3002Entry\u7684<code>or_insert()</code>\u65b9\u6cd5\uff0c\u5982\u679cK\u5b58\u5728\uff0c\u8fd4\u56de\u5bf9\u5e94\u7684V\u7684\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\uff1b\u5982\u679cK\u4e0d\u5b58\u5728\uff0c\u5c06\u65b9\u6cd5\u4f5c\u4e3aK\u7684\u65b0\u503c\u63d2\u8fdb\u53bb\uff0c\u8fd4\u56de\u5230\u8fd9\u4e2a\u503c\u7684\u53ef\u53d8\u5f15\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet mut scores = HashMap::new();\nscores.entry(String::from(\"Blue\")).or_insert(50);\nscores.entry(String::from(\"Blue\")).or_insert(50);\nprintln!(\"{:?}\", scores);\n}\n</code></pre>"},{"location":"08_aggregate_types/06_update_hash_map/#23-vv","title":"2.3 \u57fa\u4e8e\u73b0\u6709\u7684V\u6765\u66f4\u65b0V","text":"<p>\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::collections::HashMap;\nfn main() {\nlet text = \"hello world wonderful world\";\nlet mut map = HashMap::new();\nfor word in text.split_whitespace() {\nlet count = map.entry(word).or_insert(0);\n*count += 1;\n}\nprintln!(\"{:#?}\", map);\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32\u8c03\u7528<code>split_whitespace</code>\u65b9\u6cd5\u5b9e\u73b0\u6309\u7167\u7a7a\u683c\u5206\u5272\u6210\u53ef\u904d\u5386\u7684\u5355\u8bcd\u96c6\u5408\u6570\u636e\uff0c\u68c0\u6d4b<code>map</code>\u96c6\u5408\u8be5\u5355\u8bcd\u5bf9\u5e94\u7684K\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u8c03\u7528<code>or_insert</code>\u65b9\u6cd5\u63d2\u51650\u3002\u6700\u540e\u5c06\u8fd4\u56de\u7684\u503c\u7684\u5f15\u7528\u8fdb\u884c <code>+1</code>\uff0c\u5373\u53ef\u5b9e\u73b0\u5355\u8bcd\u8ba1\u6570\u7684\u6548\u679c\u3002</p>"},{"location":"08_aggregate_types/06_update_hash_map/#hash","title":"\u4e09\u3001Hash\u51fd\u6570","text":"<p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cHashMap\u4f7f\u7528\u4e86\u52a0\u5bc6\u529f\u80fd\u5f3a\u5927\u7684HashMap\u51fd\u6570\uff0cHash\u51fd\u6570\u53ef\u4ee5\u62b5\u6297\u62d2\u7edd\u670d\u52a1\uff08Dos\uff09\u653b\u51fb\u3002Hash\u51fd\u6570\u4e0d\u662f\u53ef\u7528\u7684\u6700\u5feb\u7684Hash\u7b97\u6cd5\uff0c\u4f46\u5177\u6709\u66f4\u597d\u7684\u5b89\u5168\u6027\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684<code>hasher</code>\u6765\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u91cc\u7684<code>hasher</code>\u6307\u7684\u662f\u5b9e\u73b0\u4e86<code>BuildHasher trait</code>\u7684\u7c7b\u578b\u3002</p>"},{"location":"09_error_handling/01_panic/","title":"\u4e0d\u53ef\u6062\u590d\u9519\u8bef\u4e0epanic","text":""},{"location":"09_error_handling/01_panic/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>Rust\u7684\u53ef\u9760\u6027\uff1a\u9519\u8bef\u5904\u7406\uff0c\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u7f16\u8bd1\u65f6\u63d0\u793a\u9519\u8bef\uff0c\u5e76\u5904\u7406\u3002</p> <p>Rust\u9519\u8bef\u7684\u5206\u7c7b\u5982\u4e0b\uff1a</p> <ul> <li>\u53ef\u6062\u590d\uff1a\u4f8b\u5982\u6587\u4ef6\u672a\u627e\u5230\uff0c\u53ef\u5728\u6b64\u5c1d\u8bd5</li> <li>\u4e0d\u53ef\u6062\u590d\uff1abug\u7684\u53e6\u5916\u6240\u8bf4\u6cd5\uff0c\u901a\u5e38\u662f\u903b\u8f91\u9519\u8bef\uff0c\u6bd4\u5982\u8bbf\u95ee\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4</li> </ul>"},{"location":"09_error_handling/01_panic/#rust","title":"\u4e8c\u3001Rust\u7684\u9519\u8bef\u5904\u7406","text":"<p>Rust\u6ca1\u6709\u7c7b\u4f3c\u5f02\u5e38\u7684\u673a\u5236\uff0c\u9488\u5bf9\u53ef\u6062\u590d\u7684\u9519\u8bef\uff0c\u4f7f\u7528 <code>Result&lt;T, E&gt;</code>\uff0c\u9488\u5bf9\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\uff0cRust\u63d0\u4f9b\u4e86<code>panic!</code>\u5b8f\uff0c\u5f53\u6267\u884c<code>panic!</code>\u5b8f\u65f6\uff0c\u7a0b\u5e8f\u4f1a\u6267\u884c\u4ee5\u4e0b\u903b\u8f91</p> <ul> <li>\u6253\u5370\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f</li> <li>\u5c55\u5f00\uff08unwind\uff09\u3001\u6e05\u7406\u8c03\u7528\u6808\uff08Stack\uff09</li> <li>\u9000\u51fa\u7a0b\u5e8f</li> </ul> <p>\u4e3a\u4e86\u5e94\u5bf9panic\uff0c\u5c55\u5f00\u6216\u7ec8\u6b62\uff08abort\uff09\u8c03\u7528\u6808\uff0c\u4e24\u79cd\u8fc7\u7a0b\u6709\u4ee5\u4e0b\u533a\u522b</p> <p>\u7a0b\u5e8f\u5c55\u5f00\u8c03\u7528\u6808\uff08\u5de5\u4f5c\u91cf\u5927\uff09\uff1aRust\u6cbf\u7740\u8c03\u7528\u6808\u5f80\u56de\u8d70\uff0c\u6e05\u7406\u6bcf\u4e2a\u9047\u5230\u7684\u51fd\u6570\u4e2d\u7684\u6570\u636e\uff1b\u7acb\u5373\u7ec8\u6b62\u8c03\u7528\u6808\uff1a\u4e0d\u8fdb\u884c\u6e05\u7406\uff0c\u76f4\u63a5\u505c\u6b62\u7a0b\u5e8f\uff0c\u5185\u5b58\u9700\u8981OS\u8fdb\u884c\u6e05\u7406\u3002\u5982\u679c\u60f3\u8ba9\u4e8c\u8fdb\u5236\u6587\u4ef6\u66f4\u5c0f\uff0c\u53ef\u4ee5\u628a\u8bbe\u7f6e\u4ece\u201c\u5c55\u5f00\u201d\u6539\u4e3a\u201c\u7ec8\u6b62\u201d\u3002\u4fee\u6539\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li>\u5728<code>cargo.toml</code>\u4e2d\u9002\u5f53\u7684<code>profile</code>\u90e8\u5206\u8bbe\u7f6e<code>panic='abort'</code>\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</li> </ul> <pre><code>[package]\nname = \"s27_string_cut\"\nversion = \"0.1.0\"\nedition = \"2021\"\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\n[profile.release]\npanic = 'abort'\n</code></pre>"},{"location":"09_error_handling/01_panic/#panic_1","title":"\u4e09\u3001\u4f7f\u7528panic!\u4ea7\u751f\u7684\u56de\u6eaf\u4fe1\u606f","text":"<p>panic!\u53ef\u80fd\u51fa\u73b0\u5728\u6211\u4eec\u5199\u7684\u4ee3\u7801\u4e2d\uff0c\u4e5f\u53ef\u80fd\u51fa\u73b0\u5728\u6211\u4eec\u4f9d\u8d56\u7684\u4ee3\u7801\u4e2d\u3002\u901a\u8fc7\u8c03\u7528panic!\u7684\u51fd\u6570\u56de\u6eaf\u4fe1\u606f\u6765\u5b9a\u4f4d\u5f15\u8d77\u95ee\u9898\u7684\u4ee3\u7801\u3002\u5177\u4f53\u7684\u505a\u6cd5\u662f\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf<code>RUST_BACKTRACE=full</code>\u53ef\u5f97\u5230\u56de\u6eaf\u4fe1\u606f\u3002\u4e3a\u4e86\u83b7\u53d6\u5e26\u6709\u8c03\u8bd5\u4fe1\u606f\u7684\u56de\u6eaf\uff0c\u5fc5\u987b\u542f\u7528\u8c03\u8bd5\u7b26\u53f7\uff08\u4e0d\u5e26 --release\uff09\u3002</p>"},{"location":"09_error_handling/02_result_enum_1/","title":"Result\u679a\u4e3e\u4e0e\u53ef\u6062\u590d\u9519\u8bef1","text":""},{"location":"09_error_handling/02_result_enum_1/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u9519\u8bef\u90fd\u6ca1\u6709\u4e25\u91cd\u5230\u8981\u505c\u6b62\u6574\u4e2a\u5e94\u7528\u7684\u5730\u6b65\u3002\u5f53\u67d0\u4e2a\u51fd\u6570\u8fd0\u884c\u5931\u8d25\uff0c\u4e00\u822c\u90fd\u6709\u4e00\u4e9b\u53ef\u4ee5\u7b80\u5355\u89e3\u91ca\u5e76\u505a\u51fa\u53ef\u4ee5\u505a\u54cd\u5e94\u7684\u539f\u56e0\u6240\u5f15\u8d77\u7684\uff0c\u6bd4\u5982\u8bf4\u6211\u4eec\u7a0b\u5e8f\u60f3\u6253\u5f00\u67d0\u4e2a\u6587\u4ef6\uff0c\u4f46\u8fd9\u4e2a\u6587\u4ef6\u5374\u4e0d\u5b58\u5728\uff0c\u8fd9\u4e2a\u65f6\u5019\u901a\u5e38\u662f\u8981\u521b\u5efa\u8be5\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u7ec8\u6b62\u7a0b\u5e8f\u3002\u5728Rust\u91cc\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>Result</code>\u679a\u4e3e\u7c7b\u578b\uff0c\u6765\u5904\u7406\u53ef\u80fd\u5931\u8d25\u7684\u60c5\u51b5\u3002\u8be5\u679a\u4e3e\u7c7b\u578b\u7684\u7ed3\u6784\u5982\u4e0b</p> <pre><code>enum Result&lt;T, E&gt; {\nOk(T),\nErr(E),\n}\n</code></pre> <p><code>T</code>\uff1a\u64cd\u4f5c\u6210\u529f\u60c5\u51b5\u4e0b\uff0cOk\u53d8\u4f53\u91cc\u8fd4\u56de\u7684\u6570\u636e\u7c7b\u578b <code>E</code>\uff1a\u64cd\u4f5c\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0cErr\u53d8\u4f53\u91cc\u8fd4\u56de\u7684\u9519\u8bef\u7684\u7c7b\u578b</p>"},{"location":"09_error_handling/02_result_enum_1/#_2","title":"\u4e8c\u3001\u9519\u8bef\u7684\u5904\u7406","text":""},{"location":"09_error_handling/02_result_enum_1/#21","title":"2.1 \u901a\u5e38\u7684\u5904\u7406\u65b9\u5f0f","text":"<p>\u5904\u7406Result\u7684\u4e00\u79cd\u65b9\u5f0f\uff1amatch\u8868\u8fbe\u5f0f\u3002\u548c<code>Option</code>\u679a\u4e3e\u4e00\u6837\uff0cResult\u53ca\u5176\u53d8\u4f53\u4e5f\u662f\u7531<code>prelude</code>\u4ee3\u7801\u4f5c\u7528\u57df\u3002\u9519\u8bef\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fs::File;\nfn main() {\nlet f = File::open(\"hello.txt\");\nlet f = match f {\nOk(file) =&gt; file,\nErr(error) =&gt; {\npanic!(\"Error opening file {:?}\", error)\n}\n};\n}\n</code></pre>"},{"location":"09_error_handling/02_result_enum_1/#22","title":"2.2 \u5339\u914d\u4e0d\u540c\u7684\u9519\u8bef","text":"<p>\u53ef\u4ee5\u5728<code>match</code>\u91cc\u5d4c\u5957<code>match</code>\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fs::File;\nfn main() {\nlet f = File::open(\"hello.txt\");\nlet f = match f {\nOk(file) =&gt; file,\nErr(error) =&gt; match error.kind() {\n// \u6587\u4ef6\u4e0d\u5b58\u5728\u521b\u5efa\u6587\u4ef6\nErrorKind::NotFound =&gt; macth File::create(\"hello.txt\") {\nOk(fc) =&gt; fc,\nErr(e) =&gt; panic!(\"Error creating file: {:?}\", e),\n},\n// \u5176\u4ed6\u7684\u9519\u8bef\u7c7b\u578b\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u53d8\u91cf\u540d\uff0c\u8fd9\u91cc\u53eb\u505a other_error\nother_error =&gt; panic!(\"Error opening the file: {:?}\", other_error),\n}\n};\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>unwrap_or_else</code>\u65b9\u5f0f\u5b9e\u73b0\u4ee5\u4e0a\u4ee3\u7801\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fs::File;\nfn main() {\nlet f = File::open(\"hello.txt\").unwrap_or_else(|error| {\nif error.kind() == ErrorKind::NotFound {\nFile::create(\"hello.txt\").unwrap_or_else(|error| {\npanic!(\"Error creating file: {:?}\", error);\n})\n} else {\npanic!(\"Error opening the file: {:?}\", error);\n}\n});\n}\n</code></pre>"},{"location":"09_error_handling/02_result_enum_1/#23-unwrapexpect","title":"2.3 unwrap\u548cexpect","text":"<p><code>unwrap</code>\u53ef\u4ee5\u88ab\u770b\u4f5c<code>match</code>\u8868\u8fbe\u5f0f\u7684\u4e00\u4e2a\u5feb\u6377\u65b9\u6cd5\u3002\u5982\u679c<code>Result</code>\u7684\u7ed3\u679c\u662f<code>OK</code>\uff0c\u5219\u8fd4\u56deOK\u7684\u503c\uff0c\u5982\u679c<code>Result</code>\u7684\u7ed3\u679c\u662f<code>Err</code>\uff0c\u5219\u8c03\u7528<code>panic!</code>\u5b8f\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fs::File;\nfn main() {\nlet f = File::open(\"hello.txt\").unwrap();\n}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>expect</code>\u65b9\u6cd5\uff0c\u6539\u65b9\u6cd5\u548c<code>unwrap</code>\u7c7b\u4f3c\uff0c\u4f46\u53ef\u6307\u5b9a\u9519\u8bef\u4fe1\u606f\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>let f = File::open(\"hello.txt\").expect(\"\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6\");\n</code></pre>"},{"location":"09_error_handling/03_result_enum_2/","title":"Result\u679a\u4e3e\u4e0e\u53ef\u6062\u590d\u9519\u8bef2","text":""},{"location":"09_error_handling/03_result_enum_2/#_1","title":"\u4e00\u3001\u4f20\u64ad\u9519\u8bef","text":"<p>\u6211\u4eec\u9664\u4e86\u5728\u51fd\u6570\u51fa\u5904\u5904\u7406\u9519\u8bef\uff1b\u8fd8\u53ef\u4ee5\u5c06\u9519\u8bef\u8fd4\u56de\u7ed9\u51fd\u6570\u7684\u8c03\u7528\u8005\uff0c\u8ba9\u8c03\u7528\u8005\u8fdb\u4e00\u6b65\u8fdb\u4e00\u6b65\u5904\u7406\u9519\u8bef\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u53eb\u505a\u4f20\u64ad\u9519\u8bef\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fs::File;\nuse std::io;\nuse std::io::Read;\nfn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {\nlet f = File::open(\"hello.txt\");\nlet mut f = match f {\nOk(file) =&gt; file,\nErr(e) =&gt; return Err(e)\n};\nlet mut s = String::new();\nmatch f.read_to_string(&amp;mut s) {\nOk(_) =&gt; Ok(s),\nErr(e) =&gt; Err(e)\n}\n}\nfn main() {\nlet result = read_username_from_file();\n}\n</code></pre>"},{"location":"09_error_handling/03_result_enum_2/#_2","title":"\u4e8c\u3001?\u8fd0\u7b97\u7b26","text":""},{"location":"09_error_handling/03_result_enum_2/#21","title":"2.1 ?\u8fd0\u7b97\u7b26\u7684\u4f7f\u7528","text":"<p>?\u8fd0\u7b97\u7b26\u662f\u4f20\u64ad\u9519\u8bef\u7684\u4e00\u79cd\u5feb\u6377\u65b9\u5f0f\u3002\u5982\u679c<code>Result</code>\u7684\u7ed3\u679c\u662f<code>OK</code>\uff0c<code>OK</code>\u4e2d\u7684\u503c\u5c31\u662f\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\uff0c\u7136\u540e\u7ee7\u7eed\u6267\u884c\u7a0b\u5e8f\uff1b\u5982\u679c<code>Result</code>\u662f<code>Err</code>\uff0c<code>Err</code>\u5c31\u662f\u6574\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5c31\u50cf\u4f7f\u7528\u4e86<code>return</code>\u3002</p> <p>\u90a3\u4e48\uff0c\u5728\u201c\u4e00\u201d\u4e2d\u7684\u51fd\u6570\u53ef\u4ee5\u7b80\u5199\u5982\u4e0b</p> <pre><code>fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {\nlet mut f = File::open(\"hello.txt\")?;\nlet mut s = String::new();\nf.read_to_string(&amp;mut s)?;\nOk(s)\n}\n</code></pre>"},{"location":"09_error_handling/03_result_enum_2/#22-from","title":"2.2 ?\u4e0efrom","text":"<p><code>Trait std::convert::From</code>\u4e0a\u7684<code>from</code>\u51fd\u6570\uff0c\u7528\u4e8e\u9519\u8bef\u4e4b\u95f4\u7684\u8f6c\u6362\u3002</p> <p>\u88ab<code>?</code>\u6240\u5e94\u7528\u7684\u9519\u8bef\uff0c\u4f1a\u9690\u5f0f\u7684\u88ab<code>from</code>\u51fd\u6570\u5904\u7406\uff0c\u5f53<code>?</code>\u8c03\u7528<code>from</code>\u51fd\u6570\u65f6\uff0c\u5b83\u6240\u63a5\u6536\u7684\u9519\u8bef\u7c7b\u578b\u4f1a\u88ab\u8f6c\u5316\u4e3a\u5f53\u524d\u51fd\u6570\u8fd4\u56de\u7c7b\u578b\u6240\u5b9a\u4e49\u7684\u9519\u8bef\u7c7b\u578b\u3002</p> <p>\u8fd9\u79cd\u60c5\u51b5\u7528\u4e8e\uff1a\u9488\u5bf9\u4e0d\u540c\u9519\u8bef\u7c7b\u578b\uff0c\u8fd4\u56de\u540c\u4e00\u79cd\u9519\u8bef\u7c7b\u578b\u3002\u53ea\u8981\u76f8\u5173\u7684\u9519\u8bef\u7c7b\u578b\u5b9e\u73b0\u4e86\u8f6c\u6362\u4e3a\u6240\u8fd4\u56de\u7684\u9519\u8bef\u7c7b\u578b\u7684<code>from</code>\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u88ab\u8f6c\u6362\u4e3a\u8fd4\u56de\u7684\u9519\u8bef\u7c7b\u578b\u3002\u5982\u540c\u201c\u4e8c\u201d\u4e2d\u7684\u793a\u4f8b\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u628a\u201c\u4e8c\u201d\u4e2d\u7684\u4ee3\u7801\u6539\u4e3a\u94fe\u5f0f\u8c03\u7528\uff0c\u5982\u4e0b\u5185\u5bb9</p> <pre><code>fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {\nlet mut s = String::new();\nFile::open(\"hello.txt\")?.read_to_string(&amp;mut s)?;\nOk(s)\n}\n</code></pre>"},{"location":"09_error_handling/03_result_enum_2/#23-result","title":"2.3 ?\u8fd0\u7b97\u7b26\u53ea\u80fd\u7528\u4e8e\u8fd4\u56deResult\u7684\u51fd\u6570","text":"<p>\u5982\u679c\u6211\u4eec\u76f4\u63a5\u5728<code>main</code>\u4f7f\u7528<code>?</code>\u8fd0\u7b97\u7b26\uff0c\u5982\u4e0b\u4ee3\u7801\uff0c\u5c06\u4f1a\u62a5\u9519</p> <pre><code>use std::fs::File;\nfn main() {\nlet f = File::open(\"hello.txt\")?;\n}\n</code></pre> <p>\u6b64\u65f6\u7684<code>main</code>\u51fd\u6570\u8fd4\u56de\u5355\u5143\u7c7b\u578b<code>()</code>\uff0c\u76f8\u5f53\u4e8e\u4ec0\u4e48\u90fd\u6ca1\u8fd4\u56de\uff0c\u56e0\u6b64\u4f1a\u62a5\u9519\u3002\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u51fd\u6570\u5982\u4e0b</p> <pre><code>use std::error::Error;\nuse std::fs::File;\nfn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt;{\nlet f = File::open(\"hello.txt\")?;\nOk(())\n}\n</code></pre> <p>\u6b64\u65f6<code>main</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a<code>Result</code>\u679a\u4e3e\uff0c\u7f16\u8f91\u5c06\u4e0d\u4f1a\u62a5\u9519\u3002\u679a\u4e3e\u7684\u53d8\u4f53\u4e3a\u5355\u5143\u7c7b\u578b<code>()</code>\u6216\u8005<code>Box&lt;dyn Error&gt;</code>\u3002<code>Box&lt;dyn Error&gt;</code>\u662f\u4e00\u4e2atrait\u5bf9\u8c61\uff0c\u6b64\u5904\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff1a\u201c\u4efb\u610f\u53ef\u80fd\u7684\u9519\u8bef\u7c7b\u578b\u201d\u3002</p>"},{"location":"09_error_handling/04_when_to_panic/","title":"\u4f55\u65f6\u4f7f\u7528panic","text":""},{"location":"09_error_handling/04_when_to_panic/#_1","title":"\u4e00\u3001\u603b\u4f53\u539f\u5219","text":"<p>\u5728rust\u91cc\u9519\u8bef\u91cd\u8981\u5206\u7c7b\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662f\u53ef\u6062\u590d\u7684\uff0c\u53e6\u4e00\u7c7b\u662f\u4e0d\u53ef\u6062\u590d\u7684\uff0c\u901a\u8fc7\u8c03\u7528<code>panic!</code>\u5b8f\u4ee3\u8868\u8be5\u9519\u8bef\u4e0d\u53ef\u6062\u590d\u3002\u901a\u8fc7\u8fd4\u56de<code>Result</code>\u5219\u76f8\u5f53\u4e8e\u9519\u8bef\u8fdb\u884c\u4e86\u4f20\u64ad\uff0c\u800c\u8fd9\u7c7b\u9519\u8bef\u662f\u53ef\u6062\u590d\u7684\u3002</p> <p>\u5f53\u6211\u4eec\u81ea\u5df1\u5199\u7684\u4ee3\u7801\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u51b3\u5b9a\u4e3a\u4e0d\u53ef\u6062\u590d\u9519\u8bef\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>panic!</code>\u3002\u5982\u679c\u6211\u4eec\u5199\u7684\u51fd\u6570\uff0c\u5982\u679c\u67d0\u4e9b\u60c5\u51b5\u51b3\u5b9a\u4e3a\u9519\u8bef\u53ef\u4ee5\u6062\u590d\uff0c\u53ef\u4ee5\u8fd4\u56de<code>Resul</code>\uff0c\u8fd9\u65f6\u5019\u5c06\u9519\u8bef\u7684\u5904\u7406\u6743\u4ea4\u7ed9\u4e86\u4ee3\u7801\u7684\u8c03\u7528\u8005\uff0c\u4ee3\u7801\u7684\u8c03\u7528\u8005\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u51b3\u5b9a\u662f\u5426\u6062\u590d\u6b64\u9519\u8bef\u3002\u603b\u7ed3\u6765\u8bf4\u5982\u4e0b\uff1a</p> <ul> <li>\u5728\u5b9a\u4e49\u4e00\u4e2a\u53ef\u80fd\u5931\u8d25\u7684\u51fd\u6570\u65f6\uff0c\u4f18\u5148\u8003\u8651\u8fd4\u56de<code>Result</code></li> <li>\u5982\u679c\u67d0\u79cd\u60c5\u51b5\u51fa\u73b0\u7684\u5931\u8d25\u5931\u8d25\u80af\u5b9a\u4e0d\u53ef\u6062\u590d\u7684\uff0c\u5c31\u4f7f\u7528<code>panic!</code></li> </ul>"},{"location":"09_error_handling/04_when_to_panic/#panic_1","title":"\u4e8c\u3001\u4f7f\u7528\u4f7f\u7528<code>panic!</code>\u7684\u573a\u666f\u5982\u4e0b","text":"<ul> <li>\u6f14\u793a\u67d0\u4e9b\u6982\u5ff5\uff1a\u4f7f\u7528unwrap\u51fd\u6570\uff0c\u53d1\u751f\u9519\u8bef\u5c06\u4f7f\u7528<code>panic!</code>\u6807\u8bb0\uff1b</li> <li>\u539f\u578b\u4ee3\u7801\uff1aunwrap\u3001expect\u51fd\u6570\uff0c\u5728\u539f\u578b\u4ee3\u7801\u91cc\u8fd8\u4e0d\u77e5\u9053\u5982\u4f55\u9519\u8bef\u9519\u8bef\uff0c\u4f7f\u7528unwrap\u3001expect\u8fd9\u7c7b\u65b9\u6cd5\u5c06\u4f7f\u7528<code>panic!</code>\u6807\u8bb0\u9519\u8bef\uff0c\u53d1\u751f\u9519\u8bef\u65f6\u4fbf\u4e8e\u8ddf\u8e2a\u95ee\u9898\uff1b</li> <li>\u6d4b\u8bd5\uff1a\u4f7f\u7528unwrap\u3001expect\u51fd\u6570\uff0c\u6d4b\u8bd5\u7684\u4ee3\u7801\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u4f1a\u88ab<code>panic!</code>\u7acb\u5373\u505c\u6b62\u3002</li> </ul>"},{"location":"09_error_handling/04_when_to_panic/#_2","title":"\u4e09\u3001\u9519\u8bef\u5904\u7406\u7684\u6307\u5bfc\u6027\u5efa\u8bae","text":"<p>\u5f53\u4ee3\u7801\u6700\u7ec8\u53ef\u80fd\u5904\u7406\u635f\u574f\u72b6\u6001\u65f6\uff0c\u6700\u597d\u4f7f\u7528<code>panic!</code>\u3002</p> <p>\u635f\u574f\u72b6\u6001\uff08bad state\uff09\u8868\u793a\u67d0\u4e9b\u5047\u8bbe\u3001\u4fdd\u8bc1\u3001\u7ea6\u5b9a\u6216\u4e0d\u53ef\u53d8\u6027\u88ab\u6253\u7834\uff0c\u5982\u4e0b\u5217\u60c5\u51b5\u90fd\u53ef\u4ee5\u88ab\u8ba4\u5b9a\u4e3a\u635f\u574f\u72b6\u6001\uff1a</p> <ul> <li>\u975e\u6cd5\u7684\u503c\u3001\u77db\u76fe\u7684\u503c\u3001\u6216\u8005\u7a7a\u7f3a\u7684\u503c\u88ab\u4f20\u5165\u4e86\u4ee3\u7801</li> <li>\u8fd9\u79cd\u72b6\u6001\u5e76\u4e0d\u80fd\u9884\u6d4b\uff0c\u800c\u662f\u5076\u5c14\u53d1\u751f</li> <li>\u5982\u679c\u4f60\u7684\u4ee3\u7801\u5904\u7406\u8fd9\u79cd\u72b6\u6001\u5c31\u65e0\u6cd5\u8fd0\u884c</li> <li>\u5728\u4f60\u4f7f\u7528\u7684\u6570\u636e\u7c7b\u578b\u4e2d\u6ca1\u6709\u4e00\u4e2a\u66f4\u597d\u7684\u65b9\u6cd5\u6765\u5c06\u8fd9\u4e9b\uff08\u5904\u4e8e\u635f\u574f\u72b6\u6001\uff09\u7684\u4fe1\u606f\u8fdb\u884c\u7f16\u7801</li> </ul> <p>\u5982\u679c\u4e0d\u7406\u89e3\u4ee5\u4e0a\u7684\u6982\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u51e0\u4e2a\u5efa\u8bae\u4f7f\u7528<code>panic!</code>\u6216\u8005\u8fd4\u56de<code>Resul</code>\u7684\u573a\u666f</p> <ul> <li>\u5f53\u4f60\u7684\u4ee3\u7801\u88ab\u8c03\u7528\u65f6\uff0c\u4f20\u5165\u4e86\u65e0\u610f\u4e49\u7684\u53c2\u6570\u503c\uff1a<code>panic!</code></li> <li>\u8c03\u7528\u5916\u90e8\u4e0d\u53ef\u63a7\u4ee3\u7801\uff0c\u8fd4\u56de\u975e\u6cd5\u72b6\u6001\uff0c\u4f60\u65e0\u6cd5\u4fee\u590d\uff1a<code>panic!</code></li> <li>\u5982\u679c\u5931\u8d25\u662f\u53ef\u4ee5\u9884\u671f\u7684\uff1a<code>Result</code>\uff0c\u6bd4\u5982\u6211\u4eec\u60f3\u628a\u4e00\u4e2a\u5b57\u7b26\u4e32\u89e3\u6790\u6210\u6570\u5b57\uff0c\u8fd9\u65f6\u5019\u53ef\u80fd\u6210\u529f\uff0c\u53ef\u80fd\u5931\u8d25\uff0c\u662f\u53ef\u9884\u671f\u7684</li> <li>\u5f53\u4f60\u7684\u4ee3\u7801\u5bf9\u67d0\u4e9b\u4e4b\u8fdb\u884c\u64cd\u4f5c\uff0c\u9996\u5148\u9a8c\u8bc1\u8fd9\u4e9b\u503c\u7684\u5408\u6cd5\u6027\uff0c\u5982\u679c\u4e0d\u5408\u6cd5\uff0c\u8fdb\u884c<code>panic!</code>\u3002\u5982\u679c\u8f93\u5165\u6570\u636e\u4e0d\u5408\u6cd5\uff0c\u5f80\u5f80\u662f\u56e0\u4e3a\u8c03\u7528\u8005\u903b\u8f91\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u4e5f\u4e0d\u5e94\u8be5\u7531\u8c03\u7528\u8005\u8fdb\u884c\u89e3\u51b3\uff0c\u5e94\u8be5\u5c31\u5730\u8fdb\u884c<code>panic!</code></li> </ul>"},{"location":"09_error_handling/04_when_to_panic/#_3","title":"\u56db\u3001\u6570\u636e\u9a8c\u8bc1\u903b\u8f91\u7684\u4f18\u5316","text":"<p>\u9488\u5bf9\u8c03\u7528\u8005\u53ef\u80fd\u4f20\u5165\u975e\u6cd5\u503c\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u903b\u8f91\u4f18\u5316\uff0c\u5728\u521b\u5efa\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\u7c7b\u578b\u65f6\uff0c\u6211\u4eec\u5728\u6784\u9020\u51fd\u6570\u91cc\u5b9e\u73b0\u9a8c\u8bc1\u903b\u8f91\uff0c\u6211\u4eec\u5219\u65e0\u9700\u62c5\u5fc3\u63a5\u6536\u7684\u503c\u7684\u6709\u6548\u6027\u3002\u5982\u5728\u8be5\u7cfb\u5217\u6587\u7ae0\u7684\u201c\u731c\u6570\u6e38\u620f\u201d\u4e2d\uff0c\u53ef\u4ee5\u6709\u4ee5\u4e0b\u903b\u8f91\uff0c\u9a8c\u8bc1\u903b\u8f91</p> <pre><code>// ... \u524d\u9762\u7684\u903b\u8f91\u5ffd\u7565\u6389\n// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: i32 = match guess.trim().parse() {\n// \u89e3\u6790\u6b63\u786e\u65f6\u5c06\u6570\u5b57\u8fd4\u56de\nOk(num) =&gt; num,\n// \u89e3\u6790\u9519\u8bef\u65f6\uff0c\u4f7f\u7528 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\nErr(_) =&gt; continue,\n};\n// \u9a8c\u8bc1\u4f20\u5165\u6570\u503c\u5fc5\u987b\u5927\u4e8e1\u3001\u5c0f\u4e8e100\nif guess &lt; 1 || guess &gt; 100 {\nprintln!(\"The secret number will be between 1 and 100\");\ncontinue;\n}\n// ... \u540e\u9762\u7684\u903b\u8f91\u5ffd\u7565\u6389\n</code></pre> <p>\u6211\u4eec\u6539\u4e3a\u4ee5\u4e0b\u903b\u8f91</p> <pre><code>pub struct Guess {\nvalue: i32,\n}\nimpl Guess {\n// \u5b9a\u4e49\u4e00\u4e2a\u5173\u8054\u51fd\u6570\uff0c\u76f8\u5f53\u4e8e\u6784\u9020\u51fd\u6570\npub fn new(value: i32) -&gt; Guess {\nif value &lt; 1 || value &gt; 100 {\npanic!(\"The secret number will be between 1 and 100\");\n}\nGuess { value }\n}\n// \u5b9a\u4e49\u83b7\u53d6\u503c\u7684\u65b9\u6cd5\npub fn value(&amp;self) -&gt; i32 {\nself.value\n}\n}\nfn main() {\nloop {\n// ...\u7701\u7565\u524d\u9762\u7684\u903b\u8f91\n// \u5148\u5c06guess\u53d8\u91cf\u8f6c\u6362\u4e3a\u6574\u6570\u7c7b\u578b\nlet guess: u32 = match guess.trim().parse() {\n// \u89e3\u6790\u6b63\u786e\u65f6\u5c06\u6570\u5b57\u8fd4\u56de\nOk(num) =&gt; num,\n// \u89e3\u6790\u9519\u8bef\u65f6\uff0c\u4f7f\u7528 continue \u8df3\u51fa\u672c\u6b21\u5faa\u73af\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\nErr(_) =&gt; continue,\n};\nlet guess = Guess::new(guess);\n// ...\u7701\u7565\u540e\u9762\u7684\u903b\u8f91\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5c06\u89e3\u6790\u7684\u6570\u636e\u4f20\u5982<code>Guess::new</code>\uff0c\u5982\u679c\u4e0d\u53d1\u751f<code>panic!</code>\uff0c\u4ee3\u7801\u6570\u636e\u5408\u6cd5\uff0c\u901a\u8fc7\u4e86\u9a8c\u8bc1\uff1b\u5982\u679c\u53d1\u751f\u4e86<code>panic!</code>\uff0c\u8bf4\u660e\u4f20\u5165\u6570\u636e\u6ca1\u6709\u901a\u8fc7\u9a8c\u8bc1\u3002\u4f7f\u7528\u6b64\u65b9\u5f0f\u8fdb\u884c\u6570\u636e\uff0c\u4f18\u5316\u4e86\u9a8c\u8bc1\u7684\u8fc7\u7a0b\uff0c\u65e0\u9700\u628a\u9a8c\u8bc1\u7684\u903b\u8f91\u5230\u5904\u5199\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3002</p> <p>\u8981\u6ce8\u610f\u7684\u662f\uff1a\u5728\u4e0a\u9762\u7684<code>Guess</code>\u7ed3\u6784\u4f53\u4e2d\uff0c\u5fc5\u987b\u628a<code>value</code>\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u79c1\u6709\uff0c\u518d\u901a\u8fc7\u7ed3\u6784\u4f53\u65b9\u6cd5\u83b7\u53d6\u5c5e\u6027\u7684\u6570\u636e\u3002\u6211\u4eec\u4e0d\u5141\u8bb8\u901a\u8fc7<code>Guess</code>\u7ed3\u6784\u4f53\u76f4\u63a5\u4fee\u6539<code>value</code>\u7684\u503c\uff0c\u5728\u6a21\u5757\u5916\u7684\u4ee3\u7801\u5fc5\u987b\u4f7f\u7528<code>Guess::new</code>\u51fd\u6570\u6765\u521b\u5efa<code>Guess</code>\u7684\u5b9e\u4f8b\u3002\u8fd9\u6837\u80fd\u786e\u4fdd<code>value</code>\u503c\u901a\u8fc7\u4e86\u6709\u6548\u6027\u7684\u68c0\u67e5\uff0c\u901a\u8fc7\u68c0\u67e5\u5219\u4ea7\u751f\u5b9e\u4f8b\uff0c\u5426\u5219\u5219\u53d1\u751f<code>panic!</code>\u3002</p>"},{"location":"10_generics_trait_lifetime/01_generics/","title":"\u6cdb\u578b","text":""},{"location":"10_generics_trait_lifetime/01_generics/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u6cdb\u578b\u662f\u5177\u4f53\u7c7b\u578b\u6216\u5176\u4ed6\u5c5e\u6027\u7684\u62bd\u8c61\u4ee3\u66ff\u3002\u80fd\u63d0\u9ad8\u4ee3\u7801\u590d\u7528\u7684\u80fd\u529b\uff0c\u7528\u4e8e\u5904\u7406\u91cd\u590d\u4ee3\u7801\u7684\u95ee\u9898\u3002\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u6211\u4eec\u7f16\u5199\u7684\u4ee3\u7801\u4e0d\u662f\u6700\u7ec8\u4ee3\u7801\uff0c\u800c\u662f\u4e00\u79cd\u6a21\u677f\uff0c\u91cc\u9762\u6709\u4e00\u4e9b\u201c\u5360\u4f4d\u7b26\u201d\u3002\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u7684\u65f6\u4f1a\u8bb2\u201c\u5360\u4f4d\u7b26\u201d\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u7c7b\u578b\u3002\u4f8b\u5982</p> <pre><code>fn lagest&lt;T&gt;(list: &amp;[T]) -&gt; T {}\n</code></pre> <p>\u6cdb\u578b\u7684\u7c7b\u578b\u53c2\u6570\u901a\u5e38\u5f88\u77ed\uff0c\u901a\u5e38\u662f\u4e00\u4e2a\u5b57\u6bcd\u3002\u540c\u65f6\u4f7f\u7528<code>CameCase</code>\u547d\u540d\u89c4\u8303\uff0c\u800c\u5b57\u6bcd<code>T</code>\u662f<code>type</code>\u7684\u7f29\u5199\uff0c\u6240\u4ee5\u901a\u5e38\u4f7f\u7528<code>T</code>\u4f5c\u4e3a\u6cdb\u578b\u53c2\u6570\u3002</p>"},{"location":"10_generics_trait_lifetime/01_generics/#_3","title":"\u6cdb\u578b\u7684\u4f7f\u7528","text":""},{"location":"10_generics_trait_lifetime/01_generics/#21","title":"2.1 \u51fd\u6570\u4e2d\u5b9a\u4e49\u7684\u6cdb\u578b","text":"<p>\u51fd\u6570\u4e2d\u4f7f\u7528\u6cdb\u578b\uff0c\u901a\u5e38\u662f\u53c2\u6570\u7c7b\u578b\u624b\u673a\u7528\u6cdb\u578b\u6216\u8005\u8fd4\u56de\u7c7b\u578b\u4f7f\u7528\u6cdb\u578b\uff0c\u901a\u5e38\u5728\u51fd\u6570\u540d\u7684\u540e\u9762\u5728<code>&lt;&gt;</code>\u91cc\u58f0\u660e\u6cdb\u578b\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn largest&lt;T&gt;(list: &amp;[T]) -&gt; {\n...\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/01_generics/#22","title":"2.2 \u5728\u7ed3\u6784\u4f53\u4e2d\u4f7f\u7528\u6cdb\u578b","text":"<p>\u5728\u7ed3\u6784\u4f53\u540d\u79f0\u540e\u9762\u4f7f\u7528<code>&lt;&gt;</code>\u7533\u660e\u6cdb\u578b\u7c7b\u578b\uff0c\u6cdb\u578b\u7c7b\u578b\u53ef\u4ee5\u7528\u4e8e\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5b57\u6bb5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct Point&lt;T&gt; {\nx: T,\ny: T,\n}\nfn main() {\nlet integer = Point { x: 5, y: 10 };\nlet float = Point { x: 1.0, y: 4.0 };\n}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u58f0\u660e\u591a\u4e2a\u6cdb\u578b\u6570\u636e\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct Point&lt;T, U&gt; {\nx: T,\ny: U,\n}\nfn main() {\nlet mix = Point { x: 5, y: 10.0 };\n}\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\uff0c\u4f46\u662f\u592a\u591a\u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u80fd\u56de\u5f71\u54cd\u4ee3\u7801\u7684\u9605\u8bfb\u3002</p>"},{"location":"10_generics_trait_lifetime/01_generics/#23-enum","title":"2.3 Enum\u5b9a\u4e49\u4e2d\u7684\u6cdb\u578b","text":"<p>\u53ef\u4ee5\u8ba9\u679a\u4e3e\u7684\u53d8\u4f53\u6301\u6709\u6cdb\u578b\u6570\u636e\u7c7b\u578b\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>enum Option&lt;T&gt; {\nSome(T),\nNone,\n}\nenum Result&lt;T, E&gt; {\nOk(T),\nErr(E),\n}\nfn main() {}\n</code></pre>"},{"location":"10_generics_trait_lifetime/01_generics/#24","title":"2.4 \u5728\u65b9\u6cd5\u5b9a\u4e49\u4e2d\u7684\u6cdb\u578b","text":"<p>\u4e3astruct\u6216enum\u5b9e\u73b0\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u53ef\u5728\u5b9a\u4e49\u4e2d\u4f7f\u7528\u6cdb\u578b\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct Point&lt;T&gt; {\nx: T,\ny: T,\n}\n// \u4f7f\u7528\u6cdb\u578b\u5b9e\u73b0struct\u7684\u65b9\u6cd5\uff0c\u5728\u6240\u6709\u7684Point&lt;T&gt;\u7c7b\u578b\u4e2d\u90fd\u5305\u542bx\u65b9\u6cd5\nimpl&lt;T&gt; Point&lt;T&gt; {\nfn x(&amp;self) -&gt; &amp;T {\n&amp;self.x\n}\n}\n// \u4f7f\u7528\u5177\u4f53\u7c7b\u578b\u5b9e\u73b0struct\u7684\u65b9\u6cd5\uff0c\u53ea\u6709\u5728Point&lt;i32&gt;\u4e2d\u624d\u6709x1\u65b9\u6cd5\uff0c\u5176\u4ed6\u7684Point&lt;T&gt;\u7c7b\u578b\u4e2d\u4e0d\u5305\u542bx1\u65b9\u6cd5\nimpl Point&lt;i32&gt; {\nfn x1(&amp;self) -&gt; &amp;i32 {\n&amp;self.x\n}\n}\n</code></pre> <p>\u628a<code>T</code>\u653e\u5728impl\u5173\u952e\u5b57\u540e\u9762\uff0c\u8868\u793a\u5728\u7c7b\u578b<code>T</code>\u4e0a\u5b9e\u73b0\u65b9\u6cd5\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct Point&lt;T&gt; {\nx: T,\ny: T,\n}\nimpl&lt;T, U&gt; Point&lt;T, U&gt; {\nfn mixup&lt;V, W&gt;(self, other: Point&lt;V, W&gt;) -&gt; Point&lt;T, W&gt; {\nPoint {\nx: self.x,\ny: other.y,\n}\n}\n}\nfn main() {\nlet p1 = Point { x: 5, y: 4 };\nlet p2 = Point { x: \"Hello\", y: \"c\" };\nlet p3 = p1.mixup(p2);\nprintln!(\"p3.x = {}, p3.y = {}\", p3.x, p3.y);\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/01_generics/#_4","title":"\u4e09\u3001\u6cdb\u578b\u4ee3\u7801\u7684\u6027\u80fd","text":"<p>\u4f7f\u7528\u6cdb\u578b\u7684\u4ee3\u7801\u548c\u4f7f\u7528\u5177\u4f53\u7c7b\u578b\u7684\u4ee3\u7801\u8fd0\u884c\u901f\u5ea6\u662f\u4e00\u6837\u7684\u3002\u56e0\u4e3arust\u5728\u7f16\u8bd1\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u6267\u884c\u4e00\u4e2a\u5355\u6001\u5316\uff08monomorphization\uff09\u7684\u8fc7\u7a0b\uff0c\u5373\u5728\u7f16\u8bd1\u65f6\u5c06\u6cdb\u578b\u66ff\u6362\u4e3a\u5177\u4f53\u7c7b\u578b\u7684\u8fc7\u7a0b\u3002\u4e0b\u9762\u662f\u4e00\u6bb5\u4f7f\u7528\u6cdb\u578b\u539f\u59cb\u4ee3\u7801</p> <pre><code>fn mian() {\nlet integer = Some(5);\nlet float = Some(5.0);\n}\n</code></pre> <p>\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u6cdb\u578b\u8fdb\u884c\u5355\u6001\u5316\uff0c\u53d8\u66f4\u4e3a\u7c7b\u4f3c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>enum Option_i32 {\nSome(i32),\nNone,\n}\nenum Option_f64 {\nSome(f64),\nNone,\n}\nfn mian() {\nlet integer = Option_i32::Some(5);\nlet float = Option_f64::Some(5.0);\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/","title":"trait","text":""},{"location":"10_generics_trait_lifetime/02_trait/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>Trait\u544a\u8bc9Rust\u7f16\u8bd1\u5668\uff0c\u67d0\u79cd\u7c7b\u578b\u5177\u6709\u54ea\u4e9b\u5e76\u4e14\u53ef\u4ee5\u4e0e\u5176\u4ed6\u7c7b\u578b\u5171\u4eab\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u62bd\u8c61\u7684\u65b9\u5f0f\u5b9a\u4e49\u5171\u4eab\u884c\u4e3a\u3002<code>Trait bounds</code>\uff08\u7ea6\u675f\uff09\u6307\u7684\u662f\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u6307\u5b9a\u5b9e\u73b0\u4e86\u7279\u5b9a\u884c\u4e3a\u7684\u7c7b\u578b\u3002</p> <p>Trait\u4e0e\u5176\u4ed6\u8bed\u8a00\u7684\u501f\u53e3\uff08interface\uff09\u7c7b\u4f3c\uff0c\u4f46\u662f\u6709\u533a\u522b\u3002</p>"},{"location":"10_generics_trait_lifetime/02_trait/#trait_1","title":"\u4e8c\u3001\u5b9a\u4e49Trait","text":"<p>\u5b9a\u4e49Trait\u7684\u76ee\u7684\u662f\u628a\u65b9\u6cd5\u7b7e\u540d\u653e\u5728\u4e00\u8d77\uff0c\u6765\u5b9e\u73b0\u67d0\u79cd\u76ee\u7684\u6240\u5fc5\u987b\u7684\u4e00\u7ec4\u884c\u4e3a\u3002\u5b9a\u4e49trait\u7684\u76f8\u5173\u89c4\u5219\u5982\u4e0b</p> <ul> <li>\u5173\u952e\u5b57\uff1atrait</li> <li>\u53ea\u6709\u65b9\u6cd5\u7b7e\u540d\uff0c\u6ca1\u6709\u5177\u4f53\u5b9e\u73b0</li> <li>trait\u53ef\u4ee5\u6709\u591a\u4e2a\u65b9\u6cd5\uff0c\u6bcf\u4e2a\u65b9\u6cd5\u5360\u4e00\u884c\uff0c\u4ee5<code>;</code>\u7ed3\u5c3e</li> <li>\u5b9e\u73b0\u8be5trait\u7684\u7c7b\u578b\u5fc5\u987b\u63d0\u4f9b\u5177\u4f53\u65b9\u6cd5\u7684\u5b9e\u73b0</li> </ul> <p>\u5982\u4e0b\u5b9a\u4e49trait\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub trait Summary {\nfn summarize(&amp;self) -&gt; String;\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#trait_2","title":"\u4e09\u3001\u5728\u7c7b\u578b\u4e0a\u5b9e\u73b0trait","text":"<p>\u4e0e\u7c7b\u578b\u7684\u5b9e\u73b0\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub trait Summary {\nfn summarize(&amp;self) -&gt; String;\n}\npub struct NewArticle {\npub headline: String,\npub location: String,\npub author: String,\npub content: String,\n}\nimpl Summary for NewArticle {\nfn summarize(&amp;self) -&gt; String {\nformat!(\"{}, by {} ({})\", self.headline, self.author, self.location)\n}\n}\npub struct Tweet {\npub username: String,\npub content: String,\npub reply: bool,\npub retweet: bool,\n}\nimpl Summary for Tweet {\nfn summarize(&amp;self) -&gt; String {\nformat!(\"{}: {}\", self.username, self.content)\n}\n}\nfn main() {\nlet tweet = Tweet {\nusername: String::from(\"horse_ebooks\"),\ncontent: String::from(\"of course, as you probably already know, people\"),\nreply: false,\nretweet: false\n};\nprintln!(\"1 new tweet: {}\", tweet.summarize());\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#trait_3","title":"\u56db\u3001\u5b9e\u73b0\u67d0\u4e2atrait\u7684\u7ea6\u675f","text":"<p>\u53ef\u4ee5\u5728\u67d0\u4e2a\u7c7b\u578b\u4e0a\u5b9e\u73b0\u67d0\u4e2atrait\u7684\u524d\u63d0\u6761\u4ef6\u4e3a\uff1a\u8fd9\u4e2a\u7c7b\u578b\u6216\u8fd9\u4e2atrait\u5728\u672c\u5730crate\u91cc\u5b9a\u4e49\u7684\u3002</p> <p>\u65e0\u6cd5\u4e3a\u5916\u90e8\u7c7b\u578b\u6765\u5b9e\u73b0\u5916\u90e8\u7684trait\uff0c\u8fd9\u4e2a\u9650\u5236\u662f\u7a0b\u5e8f\u5c5e\u6027\u7684\u4e00\u90e8\u5206\uff08\u4e5f\u5c31\u662f\u4e00\u81f4\u6027\uff09\uff0c\u66f4\u5177\u4f53\u5730\u8bf4\u662f**\u5b64\u513f\u539f\u5219**\uff0c\u4e4b\u6240\u4ee5\u8fd9\u6837\u547d\u540d\u662f\u56e0\u4e3a\u7236\u7c7b\u578b\u4e0d\u5b58\u5728\u3002\u6b64\u89c4\u5219\u786e\u4fdd\u4ed6\u4eba\u7684\u4ee3\u7801\u4e0d\u80fd\u7834\u574f\u4f60\u5199\u7684\u4ee3\u7801\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u89c4\u5219\uff0c\u4e24\u4e2acrate\u53ef\u4ee5\u4e3a\u540c\u4e00\u4e2a\u7c7b\u578b\u5b9e\u73b0\u540c\u4e00\u4e2atrait\uff0crust\u5c31\u4e0d\u77e5\u9053\u5e94\u8be5\u4f7f\u7528\u54ea\u4e2a\u5b9e\u73b0\u4e86\u3002</p>"},{"location":"10_generics_trait_lifetime/02_trait/#_2","title":"\u4e94\u3001\u9ed8\u8ba4\u5b9e\u73b0","text":"<p>trait\u53ef\u4ee5\u62e5\u6709\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u5f53\u6211\u4eec\u4e3a\u67d0\u4e2a\u7c7b\u578b\u5b9e\u73b0trait\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u91cd\u8f7d\u6216\u8005\u4fdd\u7559\u539f\u6709\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002\u9ed8\u8ba4\u5b9e\u73b0\u7684\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u8c03\u7528trait\u4e2d\u5176\u4ed6\u7684\u65b9\u6cd5\uff0c\u5373\u4f7f\u8fd9\u4e9b\u65b9\u6cd5\u6ca1\u6709\u9ed8\u8ba4\u5b9e\u73b0\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub trait Summary {\nfn summarize_author(&amp;self) -&gt; String;\nfn summarize(&amp;self) -&gt; String {\nformat!(\"(Read more from {}...)\", self.summarize_author())\n}\n}\npub struct NewArticle {\npub headline: String,\npub location: String,\npub author: String,\npub content: String,\n}\nimpl Summary for NewArticle {\nfn summarize_author(&amp;self) -&gt; String {\nformat!(\"@{} \", self.author)\n}\n}\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u65e0\u6cd5\u5728\u65b9\u6cd5\u7684\u91cd\u5199\u5b9e\u73b0\u91cc\u8c03\u7528\u9ed8\u8ba4\u7684\u5b9e\u73b0\u3002</p>"},{"location":"10_generics_trait_lifetime/02_trait/#trait_4","title":"\u516d\u3001\u4f7f\u7528trait\u4f5c\u4e3a\u53c2\u6570","text":""},{"location":"10_generics_trait_lifetime/02_trait/#61-impl-trait","title":"6.1 impl Trait","text":"<p>\u4f7f\u7528<code>impl Trait</code>\u7684\u8bed\u6cd5\uff0c\u53ef\u4ee5\u9002\u7528\u4e8e\u7b80\u5355\u7684\u51fd\u6570\u4f20\u53c2\u60c5\u51b5\u3002\u52a0\u5165\u6211\u4eec\u5e0c\u671b\u4f20\u5165\u7684\u53c2\u6570\u5b9e\u73b0\u4e86\u4e00\u4e2a<code>Summary</code>\u8fd9\u4e2atrait\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684\u53c2\u6570\u58f0\u660e\u65b9\u5f0f</p> <pre><code>pub fn notify(item: impl Summary) {\nprintln(\"breaking news! {}\", item.summarize());\n}\n</code></pre> <p>\u90a3\u4e48\u6211\u4eec\u5728\u8c03\u7528\u6b64\u51fd\u6570\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f20\u5165<code>Tweet</code>\uff0c\u4e5f\u53ef\u4ee5\u4f20\u5165<code>NewArticle</code>\u3002</p>"},{"location":"10_generics_trait_lifetime/02_trait/#62-trait-bound","title":"6.2 Trait bound","text":"<p>\u4f7f\u7528<code>Trait bound</code>\u53ef\u4ee5\u4e0e\u590d\u6742\u7684\u60c5\u51b5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn notify&lt;T: Summary&gt;(item: T) {\nprintln(\"breaking news! {}\", item.summarize());\n}\n</code></pre> <p>\u5982\u679c\u5b9d\u822a\u4e24\u4e2a\u53c2\u6570\uff0c\u4f7f\u7528<code>Trait bound</code>\u7684\u5199\u6cd5\u5982\u4e0b</p> <pre><code>pub fn notify&lt;T: Summary&gt;(itema: T, item2: T) {\nprintln(\"breaking news! {}\", item1.summarize());\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a<code>impl Trait</code>\u662f<code>Trait bound</code>\u7684\u8bed\u6cd5\u7cd6\u3002</p>"},{"location":"10_generics_trait_lifetime/02_trait/#63-trait-bound","title":"6.3 \u4f7f\u7528+\u6307\u5b9a\u591a\u4e2atrait bound","text":"<p>\u5982\u679c\u4f7f\u7528<code>impl Trait</code>\u7684\u65b9\u5f0f\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use std::fmt::Display;\npub fn notify(item: impl Summary + Display) {\nprintln(\"breaking news! {}\", item.summarize());\n}\n</code></pre> <p>\u4f7f\u7528<code>Trait bound</code>\u7684\u5199\u6cd5\u5982\u4e0b</p> <pre><code>use std::fmt::Display;\npub fn notify&lt;T: Summary + Display&gt;(item: T) {\nprintln(\"breaking news! {}\", item.summarize());\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#64-where","title":"6.4 \u5728\u65b9\u6cd5\u7b7e\u540d\u540e\u9762\u4f7f\u7528where\u5b50\u53e5","text":"<p>\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u8981\u6c42\u7684\u53d8\u91cf\u9700\u8981\u5b9e\u73b0\u8fc7\u591a\u7684Trait\uff0c\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u4f1a\u53d8\u4f4e\uff0c\u5f88\u4e0d\u76f4\u89c2\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn notify&lt;T: Summary + Display, U: Clone + Debug&gt;(a: T, b: U) -&gt; String {\nformat!(\"breaking news! {}\", a.summarize());\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528where\u5b50\u53e5\u8fd8\u7b80\u5316Trait\u7684\u7ea6\u675f\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn notify&lt;T, U&gt;(a: T, b: U) -&gt; String\nwhere T: Summary + Display,\nU: Clone + Debug,\n{\nformat!(\"breaking news! {}\", a.summarize());\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#trait_5","title":"\u4e03\u3001\u4f7f\u7528trait\u4f5c\u4e3a\u8fd4\u56de\u503c\u7c7b\u578b","text":"<p>\u4f7f\u7528<code>impl Trait</code>\u58f0\u660e\u8fd4\u56de\u7684\u7c7b\u578b\u4e3aTrait\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn notify(flag: bool) -&gt; impl Summary {\n// ......\n}\n</code></pre> <p>\u4f7f\u7528<code>imple Trait</code>\u53ea\u80fd\u8fd4\u56de\u786e\u5b9a\u7684\u540c\u4e00\u79cd\u7c7b\u578b\uff0c\u8fd4\u56de\u53ef\u80fd\u4e0d\u540c\u7c7b\u578b\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\u4ee3\u7801\u5c06\u62a5\u9519</p> <pre><code>pub fn notify(flag: bool) -&gt; impl Summary {\nif flag {\nNewArticle {\n// ......\n}\n} else {\nTweet {\n// ......\n}\n}\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#partialord","title":"\u516b\u3001\u4f7f\u7528PartialOrd\u5b9e\u73b0\u6570\u636e\u6bd4\u8f83","text":"<p>\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::result;\nfn largest&lt;T: PartialOrd +Clone&gt;(list: &amp;[T]) -&gt; &amp;T {\nlet mut largest = &amp;list[0];\nfor item in list.iter() {\nif item &gt; &amp;largest {\nlargest = item;\n}\n}\nlargest\n}\nfn main() {\nlet str_list = vec![String::from(\"hello\"), String::from(\"world\")];\nlet result = largest(&amp;str_list);\nprintln!(\"The largest word id {}\", result);\n}\n</code></pre>"},{"location":"10_generics_trait_lifetime/02_trait/#trait-bound","title":"\u4e5d\u3001\u4f7f\u7528Trait Bound\u6709\u6761\u4ef6\u7684\u5b9e\u73b0\u65b9\u6cd5","text":"<p>\u5728\u4f7f\u7528\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u7684 impl \u5757\u4e0a\u4f7f\u7528Trait bound\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u6761\u4ef6\u7684\u80c3\u4e86\u5b9e\u73b0\u7279\u5b9a trait \u7684\u7c7b\u578b\u6765\u5b9e\u73b0\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fmt::Display;\nstruct Pair&lt;T&gt; {\nx: T,\ny: T,\n}\n// \u6240\u6709Pair&lt;T&gt; \u90fd\u62e5\u6709new\u51fd\u6570\nimpl &lt;T&gt; Pair&lt;T&gt;{\nfn new(x: T, y: T) -&gt; Self {\nSelf { x, y }\n}\n}\n// \u5b9e\u73b0\u4e86Display \u548c PartialOrd \u7684Pair&lt;T&gt; \u731c\u62e5\u6709com_display\u51fd\u6570\nimpl &lt;T: Display + PartialOrd&gt; Pair&lt;T&gt; {\nfn cmp_display(&amp;self) {\nif self.x &gt;= self.y {\nprintln!(\"the largest member is x = {}\", self.x);\n} else {\nprintln!(\"the largest member is y = {}\", self.y);\n}\n}\n}\nfn main(){\n}\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u4e3a\u5b9e\u73b0\u5176\u4ed6Trait\u7684\u7c7b\u578b\u6709\u6761\u4ef6\u7684\u5b9e\u73b0\u67d0\u4e2aTrait\u3002\u4e3a\u6ee1\u8db3Trait Bound\u7684\u6240\u6709\u7c7b\u578b\u4e0a\u5b9e\u73b0Trait\u53eb\u505a\u8986\u76d6\u5b9e\u73b0\uff08Blanket implementations\uff09\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/","title":"\u751f\u547d\u5468\u671f","text":""},{"location":"10_generics_trait_lifetime/03_lifetime/#_2","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u751f\u547d\u5468\u671f\uff1f","text":"<p>Rust\u7684\u6bcf\u4e2a\u5f15\u7528\u90fd\u6709\u751f\u547d\u5468\u671f\uff0c\u751f\u547d\u5468\u671f\u662f\u53ef\u4ee5\u7406\u89e3\u662f\u5f15\u7528\u4fdd\u6301\u6709\u6548\u7684\u4f5c\u7528\u57df\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u751f\u547d\u5468\u671f\u662f\u9690\u5f0f\u7684\u3001\u53ef\u88ab\u63a8\u65ad\u7684\u3002\u5f53\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u76f8\u4e92\u5173\u8054\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u624b\u52a8\u6807\u6ce8\u751f\u547d\u5468\u671f\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_3","title":"\u4e8c\u3001\u501f\u7528\u68c0\u67e5\u5668","text":"<p>\u751f\u547d\u5468\u671f\u7684\u4e3b\u8981\u76ee\u6807\u662f\u907f\u514d\u5782\u60ac\u5f15\u7528\uff08dangling reference\uff09\uff0c\u5982\u4e0b\u793a\u4f8b\u7684\u9519\u8bef\u4ee3\u7801</p> <pre><code>fn main() {\n{\nlet r;\n{\nlet x = 5;\nr = &amp;x;\n}\nprintln!(\"r: {}\", r);\n}\n}\n</code></pre> <p>\u5728\u6700\u91cc\u5c42\u7684\u5927\u62ec\u53f7\u4e2d\uff0c<code>r</code>\u6307\u5411\u4e86<code>x</code>\uff0c\u4f46\u662f\u5728\u6700\u91cc\u5c42\u62ec\u53f7\u7684\u5916\u9762\uff0c\u8c03\u7528\u4e86<code>println!</code>\uff0c\u7f16\u8bd1\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5728\u6700\u91cc\u5c42\u62ec\u53f7\u5916\u9762\uff0c<code>x</code>\u5df2\u7ecf\u88ab\u91ca\u653e\u4e86\u3002rust\u4e3a\u4e86\u4fdd\u8bc1\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff0c\u4efb\u4f55\u57fa\u4e8e<code>r</code>\u7684\u64cd\u4f5c\u65e0\u6cd5\u6b63\u5e38\u8fd0\u884c\u3002</p> <p>Rust\u7f16\u8bd1\u5668\u7684\u501f\u7528\u68c0\u67e5\u5668\uff0c\u7528\u6765\u6bd4\u8f83\u5f15\u7528\u7684\u4f5c\u7528\u57df\u4ece\u800c\u5224\u65ad\u6240\u6709\u7684\u501f\u7528\u662f\u5426\u5408\u6cd5\u3002\u5982\u4e0b\u52a0\u4e0a\u6ce8\u91ca\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\n{\nlet r;                  // ------+-- 'a\n{                       //\nlet x = 5;          // ------+- 'b\nr = &amp;x;             // \n}                       // ------+- 'b\nprintln!(\"r: {}\", r);   //\n}                           // ------+-- 'a\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230<code>x</code>\u7684\u751f\u547d\u5468\u671f\u6bd4\u5b83\u7684\u5f15\u7528\u8005<code>r</code>\u8981\u77ed\uff0c\u6240\u4ee5rust\u4e0d\u5141\u8bb8\u7f16\u8bd1\u901a\u8fc7\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5fc5\u987b\u8ba9<code>x</code>\u7684\u751f\u547d\u5468\u671f\u4e0d\u5c0f\u4e8e<code>r</code>\u7684\u751f\u547d\u5468\u671f\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = 5;\nlet r = &amp;x;\nprintln!(\"r: {}\", r);\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u7684\u751f\u547d\u5468\u671f\u5b8c\u5168\u8986\u76d6\u4e86\u5b83\u7684\u8c03\u7528\u8005<code>r</code>\u7684\u751f\u547d\u5468\u671f\uff0c\u6240\u4ee5\u80fd\u987a\u5229\u901a\u8fc7\u7f16\u8bd1\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_4","title":"\u4e09\u3001\u51fd\u6570\u4e2d\u7684\u6cdb\u578b\u751f\u547d\u5468\u671f","text":"<p>\u6211\u4eec\u5148\u770b\u4e0b\u9762\u4e00\u6bb5\u9519\u8bef\u7684\u4ee3\u7801</p> <pre><code>fn main() {\nlet string1 = String::from(\"abcd\");\nlet string2 = \"xyz\";\nlet result = longest(string1.as_string(), string2);\nprintln!(\"The longest string is {}\", result);\n}\nfn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {\nif x.len() &gt; y.len() {\nx\n} else {\ny\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c<code>longest</code>\u51fd\u6570\u7684\u76ee\u7684\u662f\u8fd4\u56de\u4e24\u4e2a\u5b57\u7b26\u4e32\u4e2d\u6bd4\u8f83\u957f\u7684\u503c\uff0c\u5e76\u5728<code>main</code>\u51fd\u6570\u4e2d\u6253\u5370\u51fa\u6765\u3002\u4f20\u5165\u53c2\u6570\u4e3a<code>x</code>\u548c<code>y</code>\u4e24\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u8fd4\u56de\u503c\u4e5f\u662f\u5b57\u7b26\u4e32\u5207\u7247\u3002<code>x</code>\u548c<code>y</code>\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u4e0d\u4e00\u6837\uff0c\u800c\u8fd4\u56de\u7684\u503c\u751f\u547d\u5468\u671f\u5e94\u5f53\u662f\u786e\u5b9a\u7684\uff0c\u4f46\u662f\u51fd\u6570\u7b7e\u540d\u91cc\u8fd4\u56de\u7684\u503c\u4e0d\u77e5\u9053\u501f\u7528\u81ea<code>x</code>\u8fd8\u662f<code>y</code>\uff0c\u6240\u4ee5\u4ee3\u7801\u7f16\u8bd1\u65f6\u4f1a\u4ea7\u751f\u9519\u8bef\u3002</p> <p>\u6211\u4eec\u5148\u7ed9\u51fa\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {\nif x.len() &gt; y.len() {\nx\n} else {\ny\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d<code>'a</code>\u4ee3\u8868\u751f\u547d\u5468\u671f\u6cdb\u578b\uff0c\u540c\u65f6\u6307\u5b9a\u4e86<code>x</code>\u548c<code>y</code>\u7684\u751f\u547d\u5468\u671f\u4e3a<code>'a</code>\uff0c\u540c\u65f6\u8fd4\u56de\u7684\u503c\u751f\u547d\u5468\u671f\u4e5f\u4e3a<code>'a</code>\uff0c\u6b64\u65f6\u4ee3\u7801\u6b63\u5e38\u901a\u8fc7\u7f16\u8bd1\u3002\u4e0d\u8fc7\uff0c\u5982\u679c\u6211\u4eec\u5728\u8fd9\u91cc\u8bf4<code>x</code>\u3001<code>y</code>\u548c\u8fd4\u56de\u7684\u503c\u7684\u751f\u547d\u5468\u671f\u662f\u4e00\u6837\u7684\uff0c\u8fd9\u79cd\u8bf4\u6cd5\u662f\u4e0d\u592a\u51c6\u786e\u7684\u3002\u5728\u8fd9\u91cc\uff0c<code>'a</code>\u88ab\u53eb\u505a\u751f\u547d\u5468\u671f\u6807\u6ce8\uff0c\u5728\u4e0b\u6587\u6211\u4eec\u8fdb\u4e00\u6b65\u63a2\u8ba8\u6b64\u6982\u5ff5\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_5","title":"\u56db\u3001\u751f\u547d\u5468\u671f\u6807\u6ce8\u8bed\u6cd5","text":"<p>\u751f\u547d\u5468\u671f\u7684\u6807\u6ce8\u4e0d\u4f1a\u6539\u53d8\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u957f\u5ea6\uff0c\u5f53\u67d0\u4e2a\u51fd\u6570\u6307\u5b9a\u4e86\u6cdb\u578b\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u5e26\u6709\u751f\u547d\u5468\u671f\u7684\u5f15\u7528\u3002\u751f\u547d\u5468\u671f\u7684\u6807\u6ce8\u63cf\u8ff0\u4e86\u591a\u4e2a\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u7684\u5173\u7cfb\uff0c\u4f46\u4e0d\u5f71\u54cd\u751f\u547d\u5468\u671f\u3002</p> <p>\u53c2\u6570\u5468\u671f\u6807\u6ce8\uff0c\u9075\u5faa\u4ee5\u4e0b\u8bed\u6cd5\u89c4\u5219</p> <ul> <li> <p>\u53c2\u6570\u540d\uff1a\u4ee5<code>'</code>\u5f00\u5934\uff1b\u4f7f\u7528\u5168\u5c0f\u5199\u4e14\u975e\u5e38\u77ed\uff0c\u5f88\u591a\u4eba\u4f7f\u7528<code>'a</code></p> </li> <li> <p>\u6807\u6ce8\u7684\u4f4d\u7f6e\uff1a\u5728\u5f15\u7528\u7684<code>&amp;</code>\u7b26\u53f7\u540e\uff1b\u4f7f\u7528\u7a7a\u683c\u5c06\u6807\u6ce8\u548c\u5f15\u7528\u7c7b\u578b\u5206\u5f00</p> </li> </ul> <p>\u751f\u547d\u5468\u671f\u6807\u6ce8\u4f8b\u5b50\u5982\u4e0b</p> <ul> <li><code>&amp;i32</code>\uff1a\u4e00\u4e2a\u666e\u901a\u5f15\u7528</li> <li><code>&amp;'a i32</code>\uff1a\u5e26\u6709\u663e\u5f0f\u751f\u547d\u5468\u671f\u7684\u5f15\u7528</li> <li><code>&amp;'a mut i32</code>\uff1a\u5e26\u6709\u663e\u5f0f\u751f\u547d\u5468\u671f\u7684\u53ef\u53d8\u5f15\u7528</li> </ul> <p>\u5355\u4e2a\u751f\u547d\u5468\u671f\u6807\u6ce8\u672c\u7701\u6ca1\u6709\u610f\u4e49\uff0c\u5f53\u591a\u4e2a\u53c2\u6570\u4f7f\u7528\u540c\u4e00\u7684\u6807\u6ce8\u65f6\uff0c\u4ee3\u8868\u591a\u4e2a\u53c2\u6570\u5fc5\u987b\u62e5\u6709\u4e00\u6837\u7684\u751f\u547d\u5468\u671f\u3002\u6cdb\u578b\u751f\u547d\u5468\u671f\u53c2\u6570\u58f0\u660e\u5728\u51fd\u6570\u540d\u548c\u53c2\u6570\u5217\u8868\u4e4b\u95f4\u7684<code>&lt;&gt;</code>\u91cc\u3002\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u5728\u56de\u987e*\u4e09*\u4e2d\u7684\u4ee3\u7801</p> <pre><code>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {\nif x.len() &gt; y.len() {\nx\n} else {\ny\n}\n}\n</code></pre> <p>\u4ee3\u7801\u89e3\u8bfb\u5982\u4e0b</p> <ul> <li>longest\u51fd\u6570\u58f0\u660e\u4e86\u4e00\u4e2a<code>'a</code>\u751f\u547d\u5468\u671f</li> <li><code>x</code>\u548c<code>x</code>\u7684\u751f\u547d\u5468\u671f\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e<code>'a</code></li> <li>\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\u4e5f\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e<code>'a</code></li> </ul> <p>\u5f53\u6211\u4eec\u5728\u51fd\u6570\u4f53\u91cc\u9762\u6307\u660e\u751f\u547d\u5468\u671f\u53c2\u6570\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u6539\u53d8\u4f20\u5165\u7684\u503c\u548c\u8fd4\u56de\u7684\u503c\u7684\u751f\u547d\u5468\u671f\uff0c\u6211\u4eec\u53ea\u662f\u5411*\u501f\u7528\u68c0\u67e5\u5668*\u6307\u51fa\u4e86\u4e00\u4e9b\u7528\u4e8e\u68c0\u67e5\u975e\u6cd5\u8c03\u7528\u7684\u4e00\u4e9b=\u7ea6\u675f\u800c\u5df2\u3002\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code>longest</code>\u51fd\u6570\u672c\u8eab\u5e76\u4e0d\u9700\u8981\u77e5\u9053<code>x</code>\u548c<code>y</code>\u5177\u4f53\u7684\u751f\u547d\u5468\u671f\uff0c\u800c\u53ea\u9700\u8981\u67d0\u4e2a\u4f5c\u7528\u57df\u53ef\u4ee5\u88ab\u7528\u6765\u4ee3\u66ff<code>'a</code>\uff0c\u540c\u65f6\u6ee1\u8db3\u51fd\u6570\u7684\u7b7e\u540d\u7ea6\u675f\u5373\u53ef\u3002</p> <p>\u5982\u679c\u51fd\u6570\u5f15\u7528\u5916\u90e8\u7684\u4ee3\u7801\u6216\u8005\u88ab\u5916\u90e8\u4ee3\u7801\u5f15\u7528\u7684\u65f6\u5019\uff0c\u60f3\u5355\u9760rust\u672c\u8eab\u6765\u786e\u5b9a\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u751f\u547d\u5468\u671f\u51e0\u4e4e\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u8fd9\u6837\u7684\u8bdd\u51fd\u6570\u6240\u4f7f\u7528\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u5728\u6bcf\u6b21\u8c03\u7528\u4e2d\u90fd\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u6b63\u5f0f\u56e0\u6b64\u6211\u4eec\u624d\u9700\u8981\u624b\u52a8\u5bf9\u751f\u547d\u5468\u671f\u8fdb\u884c\u6807\u6ce8\u3002</p> <p>\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684<code>'a</code>\u5b9e\u9645\u4e0a\u4ee3\u8868<code>x</code>\u548c<code>y</code>\u91cd\u53e0\u7684\u90a3\u90e8\u5206\u751f\u547d\u5468\u671f\uff08\u4e5f\u5c31\u662f<code>x</code>\u548c<code>y</code>\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u8f83\u5c0f\u7684\u751f\u547d\u5468\u671f\uff09\uff0c\u800c\u8fd4\u56de\u7684\u503c\u5219\u5728<code>x</code>\u548c<code>y</code>\u91cd\u53e0\u7684\u90a3\u90e8\u5206\u751f\u547d\u5468\u671f\u662f\u6709\u6548\u7684\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_6","title":"\u4e94\u3001\u6df1\u5165\u7406\u89e3\u751f\u547d\u5468\u671f","text":"<p>\u6307\u5b9a\u751f\u547d\u5468\u671f\u53c2\u6570\u7684\u65b9\u5f0f\u4f9d\u8d56\u4e8e\u51fd\u6570\u6240\u505a\u7684\u4e8b\u60c5\u3002\u5f53\u51fd\u6570\u8fd4\u56de\u5f15\u7528\u65f6\uff0c\u8fd4\u56de\u7c7b\u578b\u7684\u751f\u547d\u5468\u671f\u53c2\u6570\u9700\u8981\u4e0e\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u7684\u751f\u547d\u5468\u671f\u5339\u914d\u3002</p> <p>\u5982\u679c\u8fd4\u56de\u7684\u5f15\u7528\u6ca1\u6709\u6307\u5411\u4efb\u4f55\u53c2\u6570\uff0c\u90a3\u4e48\u5b83\u53ea\u80fd\u5f15\u7528\u51fd\u6570\u5185\u521b\u5efa\u7684\u503c\uff0c\u8be5\u503c\u5728\u51fd\u6570\u7ed3\u675f\u65f6\u5c31\u8d70\u51fa\u4e86\u4f5c\u7528\u57df\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801\u7684\u9519\u8bef\u4ee3\u7801</p> <pre><code>fn main() {\nlet string1 = String::from(\"abcd\");\nlet string2 = \"xyz\";\nlet result = longest(string1.as_string(), string2);\nprintln!(\"The longest string is {}\", result);\n}\nfn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {\nlet result = String::from(\"abc\");\nresult.as_str()\n}\n</code></pre> <p>\u5728<code>longest</code>\u51fd\u6570\u4e2d\uff0c<code>result.as_str()</code>\u7684\u7ed3\u679c\u662f\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u5f15\u7528\u3002\u6b64\u65f6\u7f16\u8bd1\u5c06\u4f1a\u51fa\u9519\uff0c\u56e0\u4e3a<code>result.as_str()</code>\u8fd4\u56de\u7684\u503c\u662f\u5f15\u7528<code>longest</code>\u51fd\u6570\u5185\u90e8\u6240\u6301\u6709\u7684\u6570\u636e\u3002\u5f53\u5185\u90e8\u6570\u636e\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\uff0c\u51fd\u6570\u8fd4\u56de\u7684\u5f15\u7528\u4ecd\u7136\u6307\u5411\u6570\u636e\u5b58\u50a8\u7684\u5185\u5b58\uff0c\u8fd4\u56de\u7684\u5f15\u7528\u7ed9<code>main</code>\u51fd\u6570\u4e2d\u7684<code>result</code>\uff0c\u5e76\u5728<code>main</code>\u51fd\u6570\u4e2d\u8fdb\u884c\u4f7f\u7528\uff0c\u800c\u8be5\u5f15\u7528\u6307\u5411\u7684\u5185\u5b58\uff0c\u5728<code>longest</code>\u4e4b\u884c\u7ed3\u675f\u7684\u65f6\u5019\u5df2\u7ecf\u88ab\u91ca\u653e\u4e86\uff0c\u8fd9\u5c31\u53d1\u751f\u4e86\u60ac\u5782\u5f15\u7528\u3002rust\u4e0d\u4f1a\u5141\u8bb8\u6b64\u7c7b\u4e0d\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u6240\u4ee5\u7f16\u8bd1\u4e0d\u901a\u8fc7\u3002</p> <p>\u5982\u679c\u6211\u4eec\u60f3\u628a\u51fd\u6570\u5185\u90e8\u7684\u503c\u76f4\u63a5\u8fd4\u56de\u51fa\u53bb\uff0c\u53ef\u4ee5\u6539\u6210\u76f4\u63a5\u8fd4\u56de\u503c\uff0c\u800c\u4e0d\u662f\u8fd4\u56de\u5f15\u5165\uff0c\u4fee\u6539\u5982\u4e0b</p> <pre><code>fn longest&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; String {\nlet result = String::from(\"abc\");\nresult\n}\n</code></pre> <p>\u6b64\u65f6\u76f8\u5f53\u4e8e\u628a\u6240\u6709\u6743\u79fb\u4ea4\u7ed9\u51fd\u6570\u7684\u8c03\u7528\u8005\uff0c\u5982\u679c\u60f3\u6e05\u7406\u5185\u5b58\uff0c\u7531\u51fd\u6570\u7684\u8c03\u7528\u8005\u6765\u6e05\u7406\u5373\u53ef\u3002</p> <p>\u4ece\u6839\u672c\u4e0a\u8bb2\uff0c\u751f\u547d\u5468\u671f\u8bed\u6cd5\u662f\u7528\u6765\u5173\u8054\u51fd\u6570\u7684\u4e0d\u540c\u53c2\u6570\u4ee5\u53ca\u8fd4\u56de\u503c\u4e4b\u95f4\u7684\u751f\u547d\u5468\u671f\uff0c\u4e00\u65e6\u5b83\u4eec\u4e4b\u95f4\u53d6\u5f97\u4e86\u67d0\u79cd\u8054\u7cfb\uff0crust\u5c06\u83b7\u5f97\u8db3\u591f\u7684\u4fe1\u606f\u6765\u652f\u6301\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u5e76\u4e14\u963b\u6b62\u90a3\u4e9b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5782\u60ac\u6307\u9488\u6216\u8005\u5176\u4ed6\u8fdd\u53cd\u5185\u5b58\u5b89\u5168\u7684\u884c\u4e3a\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#struct","title":"\u516d\u3001Struct\u5b9a\u4e49\u4e2d\u7684\u751f\u547d\u5468\u671f\u6807\u6ce8","text":"<p>Struct\u91cc\u53ef\u4ee5\u5305\u62ec\u81ea\u6301\u6709\u7c7b\u578b\uff08\u5982i32\u7b49\uff09\u548c\u5f15\u7528\u7c7b\u578b\uff0c\u5982\u679c\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u9700\u8981\u5728\u6bcf\u4e2a\u5f15\u7528\u4e0a\u6dfb\u52a0\u751f\u547d\u5468\u671f\u6807\u6ce8\u3002\u7ed3\u6784\u4f53\u7684\u5f15\u7528\u5b57\u6bb5\uff0c\u751f\u547d\u5468\u671f\u5fc5\u987b\u6bd4\u7ed3\u6784\u4f53\u672c\u8eab\u957f\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct ImportantExcerpt&lt;'a&gt; {\npart: &amp;'a str,\n}\nfn main() {\nlet novel String::from(\"Call me Ishmael. Some years ago...\");\n// \u4e0b\u9762\u4e00\u884cfirst_sentence\u7684\u751f\u547d\u5468\u671f\u5f00\u59cb\nlet first_sentence = novel.split('.').next().expect(\"Could not found a '.'\");\n// \u4e0b\u9762\u4e00\u884ci\u7684\u751f\u547d\u5468\u671f\u5f00\u59cb\nlet i = ImportantExcerpt {\npart: first_sentence\n};\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u5b57\u7b26\u5207\u7247\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u6bd4<code>struct ImportantExcerpt</code>\u7684\u751f\u547d\u5468\u671f\u957f\uff0c\u6240\u4ee5\u7f16\u8bd1\u901a\u8fc7\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_7","title":"\u4e03\u3001\u751f\u547d\u5468\u671f\u7684\u7701\u7565","text":""},{"location":"10_generics_trait_lifetime/03_lifetime/#71","title":"7.1 \u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c\u6bcf\u4e2a\u5f15\u7528\u90fd\u6709\u751f\u547d\u5468\u671f\uff0c\u9700\u8981\u4e3a\u4f7f\u7528\u751f\u547d\u5468\u671f\u7684\u51fd\u6570\u6216struct\u6307\u5b9a\u751f\u547d\u5468\u671f\u53c2\u6570\u3002\u6211\u4eec\u5148\u6765\u770b\u4e00\u6bb5\u5728\u672c\u7cfb\u5217\u5207\u7247\u4ee3\u7801</p> <pre><code>fn first_world(s: &amp;str) -&gt; &amp;str {\nlet bytes = s.as_bytes();\nfor (i, &amp;item) in bytes.iter().enumerate() {\nif item == b' ' {\nreturn &amp;s[..i];\n}\n}\n&amp;s[..]\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u51fd\u6570\u4e2d\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u4f46\u662f\u6ca1\u6709\u6807\u6ce8\u4efb\u4f55\u751f\u547d\u5468\u671f\uff0c\u800c\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1\u3002\u8fd9\u5c31\u6d89\u53ca\u5230rust\u8bed\u8a00\u53d1\u5c55\u7684\u5386\u53f2\u4e86\uff0c\u5728rust\u7684\u65e9\u671f\u7248\u672c\uff0c\u8fd9\u6bb5\u4ee3\u7801\u662f\u65e0\u6cd5\u7f16\u8bd1\u901a\u8fc7\u7684\uff0c\u56e0\u4e3a\u5f53\u65f6\u8981\u6c42\u6bcf\u4e2a\u5f15\u7528\u90fd\u5fc5\u987b\u6709\u4e00\u4e2a\u663e\u5f0f\u7684\u751f\u547d\u5468\u671f\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn first_world&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;'a str {\nlet bytes = s.as_bytes();\nfor (i, &amp;item) in bytes.iter().enumerate() {\nif item == b' ' {\nreturn &amp;s[..i];\n}\n}\n&amp;s[..]\n}\n</code></pre> <p>\u5728\u7f16\u5199\u5f88\u591a\u4ee3\u7801\u4e4b\u540e\uff0crust\u56e2\u961f\u53d1\u73b0\uff0c\u5728\u67d0\u4e9b\u7279\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0crust\u7a0b\u5e8f\u5458\u603b\u662f\u4e00\u904d\u53c8\u4e00\u904d\u5730\u7f16\u8bd1\u540c\u6837\u7684\u751f\u547d\u5468\u671f\u6807\u8bc6\uff0c\u800c\u4e14\u8fd9\u4e9b\u573a\u666f\u662f\u53ef\u4ee5\u9884\u6d4b\u7684\uff0c\u800c\u4e14\u6709\u4e00\u4e9b\u660e\u786e\u7684\u6a21\u5f0f\uff0c\u4e8e\u662frust\u56e2\u961f\u76f4\u63a5\u5c06\u8fd9\u4e9b\u6a21\u5f0f\u5199\u5165\u4e86\u7f16\u8bd1\u5668\u4ee3\u7801\uff0c\u4f7f\u5f97\u501f\u7528\u68c0\u67e5\u5668\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u81ea\u52a8\u5730\u5bf9\u751f\u547d\u5468\u671f\u8fdb\u884c\u63a8\u5012\u800c\u65e0\u9700\u663e\u5f0f\u5730\u6807\u6ce8\u3002\u4e86\u89e3\u8fd9\u6bb5\u5386\u53f2\u5f88\u6709\u5fc5\u8981\uff0c\u56e0\u4e3a\u5728\u672a\u6765\u53ef\u80fd\u6709\u66f4\u591a\u7684\u6a21\u5f0f\u6dfb\u52a0\u5230\u7f16\u8bd1\u5668\u4e2d\uff0c\u4e5f\u5c31\u662f\u8bf4\u5728\u672a\u6765\u624b\u52a8\u6807\u6ce8\u751f\u547d\u5468\u671f\u7684\u60c5\u51b5\u53ef\u80fd\u4f1a\u8d8a\u6765\u8d8a\u5c11\u3002</p> <p>\u5728Rust\u5f15\u7528\u5206\u6790\u4e2d\u6240\u7f16\u5165\u7684\u6a21\u5f0f\u6210\u4e3a**\u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219**\uff0c\u8fd9\u4e9b\u89c4\u5219\u65e0\u9700\u5f00\u53d1\u8005\u6765\u9075\u5faa\uff0c\u5b83\u4eec\u662f\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\uff0c\u7531\u7f16\u8bd1\u5668\u6765\u8003\u8651\uff0c\u5982\u679c\u4f60\u7684\u4ee3\u7801\u7b26\u5408\u8fd9\u4e9b\u60c5\u51b5\uff0c\u90a3\u4e48\u5c31\u65e0\u9700\u663e\u5f0f\u6807\u6ce8\u751f\u547d\u5468\u671f\u3002</p> <p>**\u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219**\u4e0d\u4f1a\u63d0\u4f9b\u5b8c\u6574\u7684\u63a8\u65ad\uff0c\u5982\u679c\u5e94\u7528\u89c4\u5219\u540e\uff0c\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4ecd\u7136\u6a21\u7cca\u4e0d\u6e05\uff0c\u90a3\u8fb9\u7f16\u8bd1\u4e0d\u4f1a\u7ee7\u7eed\u63a8\u65ad\uff0c\u5c06\u4f1a\u4ea7\u751f\u9519\u8bef\u3002\u8fd9\u65f6\u5019\u7684\u89e3\u51b3\u529e\u6cd5\u662f\uff1a\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u751f\u547d\u5468\u671f\u6807\u6ce8\uff0c\u8868\u660e\u5f15\u7528\u95f4\u7684\u76f8\u4e92\u5173\u7cfb\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#72","title":"7.2 \u8f93\u5165\u3001\u8f93\u51fa\u751f\u547d\u5468\u671f","text":"<p>\u5982\u679c\u751f\u547d\u5468\u671f\u51fa\u73b0\u5728\u51fd\u6570/\u65b9\u6cd5\u7684**\u53c2\u6570**\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u5c31\u53eb\u8f93\u5165\u751f\u547d\u5468\u671f\uff1b\u5982\u679c\u751f\u547d\u5468\u671f\u51fa\u73b0\u5728\u51fd\u6570/\u65b9\u6cd5\u7684**\u8fd4\u56de\u503c**\u4e2d\uff0c\u5c31\u53eb\u8f93\u51fa\u751f\u547d\u5468\u671f\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#73","title":"7.3 \u751f\u547d\u5468\u671f\u7701\u7565\u7684\u4e09\u4e2a\u89c4\u5219","text":""},{"location":"10_generics_trait_lifetime/03_lifetime/#731","title":"7.3.1 \u89c4\u5219\u5b9a\u4e49","text":"<p>\u7f16\u8bd1\u5668\u4f7f\u75283\u4e2a\u89c4\u5219\u5728\u6ca1\u6709\u663e\u793a\u6807\u6ce8\u751f\u547d\u5468\u671f\u7684\u60c5\u51b5\u4e0b\uff0c\u6765\u786e\u5b9a\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u3002\u89c4\u52191\u5e94\u7528\u4e8e\u8f93\u5165\u751f\u547d\u5468\u671f\uff0c\u89c4\u52192\u30013\u5e94\u7528\u4e8e\u8f93\u51fa\u751f\u547d\u5468\u671f\u3002\u5982\u679c\u7f16\u8bd1\u5668\u5e94\u7528\u5b8c3\u4e2a\u89c4\u5219\u540e\uff0c\u4ecd\u7136\u65e0\u6cd5\u786e\u5b9a\u751f\u547d\u5468\u671f\u7684\u5f15\u7528\uff0c\u5219\u7f16\u8bd1\u5668\u4f1a\u62a5\u9519\u3002\u8fd9\u4e9b\u89c4\u5219\u9002\u7528\u4e8efn\u5b9a\u4e49\u548cimpl\u5757\u3002</p> <ul> <li> <p>\u89c4\u52191: \u6bcf\u4e2a\u5e94\u7528\u7c7b\u578b\u7684\u53c2\u6570\u90fd\u6709\u81ea\u5df1\u7684\u751f\u547d\u5468\u671f\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5355\u53c2\u6570\u7684\u51fd\u6570\u5b83\u62e5\u6709\u4e00\u4e2a\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u62e5\u6709\u4e24\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u5c31\u62e5\u6709\u4e24\u4e2a\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff1b</p> </li> <li> <p>\u89c4\u52192: \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u8f93\u5165\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u90a3\u4e48\u8be5\u751f\u547d\u5468\u671f\u88ab\u8d4b\u7ed9\u6240\u6709\u7684\u751f\u547d\u5468\u671f\u53c2\u6570\uff1b</p> </li> <li> <p>\u89c4\u52193: \u5982\u679c\u6709\u591a\u4e2a\u8f93\u5165\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u4f46\u5176\u4e2d\u4e00\u4e2a\u662f<code>&amp;self</code>\u6216<code>&amp;mut self</code>\uff08\u662f\u65b9\u6cd5\uff09\uff0c\u90a3\u4e48<code>self</code>\u7684\u751f\u547d\u5468\u671f\u4f1a\u88ab\u8d4b\u4e88\u7ed9\u6240\u6709\u7684\u8f93\u51fa\u751f\u547d\u5468\u671f\u53c2\u6570\u3002</p> </li> </ul>"},{"location":"10_generics_trait_lifetime/03_lifetime/#732-1","title":"7.3.2 \u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219\u793a\u4f8b1","text":"<p>\u4e0b\u9762\u662f\u7b2c\u4e00\u4e2a\u793a\u4f8b\u51fd\u6570</p> <pre><code>fn first_world(s: &amp;str) -&gt; &amp;str {\n// .....\n}\n</code></pre> <p>\u6839\u636e\u7b2c\u4e00\u4e2a\u89c4\u5219\uff0crust\u7f16\u8bd1\u5668\u4f1a\u4e3a\u6bcf\u4e2a\u8f93\u5165\u53c2\u6570\u589e\u52a0\u4e00\u4e2a\u751f\u547d\u5468\u671f\uff0c\u6b64\u65f6\u53d8\u6210\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn first_world&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;str {\n// .....\n}\n</code></pre> <p>\u56e0\u4e3a\u8be5\u51fd\u6570\u53ea\u6709\u4e00\u4e2a\u8f93\u5165\u751f\u547d\u5468\u671f\u53c2\u6570\u65f6\uff0c\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u88ab\u4f1a\u8d4b\u7ed9\u6240\u6709\u8f93\u51fa\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u6b64\u65f6\u53d8\u6210\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn first_world&lt;'a&gt;(s: &amp;'a str) -&gt; &amp;'a str {\n// .....\n}\n</code></pre> <p>\u73b0\u5728\u6240\u6709\u7684\u5f15\u7528\u90fd\u6709\u4e86\u751f\u547d\u5468\u671f\uff0c\u6240\u4ee5\u7f16\u8bd1\u5668\u53ef\u4ee5\u7ee7\u7eed\u5206\u6790\u4ee3\u7801\uff0c\u800c\u65e0\u9700\u7a0b\u5e8f\u5458\u624b\u52a8\u6807\u6ce8\u8fd9\u4e2a\u51fd\u6570\u7b7e\u540d\u91cc\u7684\u751f\u547d\u5468\u671f\u4e86\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#733-2","title":"7.3.3 \u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219\u793a\u4f8b2","text":"<p>\u9996\u5148\u770b\u4e0b\u9762\u7684\u51fd\u6570\u7b7e\u540d</p> <pre><code>fn longest(x: &amp;str, y: &amp;str) -&gt; str {\n// ......\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u4e2d\uff0c\u9002\u7528\u7b2c1\u4e2a\u89c4\u5219\uff0c\u6bcf\u4e2a\u53c2\u6570\u90fd\u6709\u81ea\u5df1\u7684\u751f\u547d\u5468\u671f\uff0c\u6b64\u65f6\u53d8\u6210\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn longest(x: &amp;'a str, y: &amp;'b str) -&gt; str {\n// ......\n}\n</code></pre> <p>\u7531\u4e8e\u73b0\u5728\u8fd9\u4e2a\u51fd\u6570\u62e5\u6709\u4e24\u4e2a\u8f93\u5165\u751f\u547d\u5468\u671f\uff0c\u6240\u4ee5\u7b2c2\u6761\u89c4\u5219\u4e0d\u9002\u7528\uff1b\u800c\u4e14\u7531\u4e8e<code>longest</code>\u662f\u4e2a\u51fd\u6570\u4e0d\u662f\u65b9\u6cd5\uff0c\u6ca1\u6709<code>self</code>\u53c2\u6570\uff0c\u6240\u4ee5\u7b2c3\u6761\u89c4\u5219\u4e5f\u4e0d\u9002\u7528\u3002\u6240\u4ee5\u5e94\u7528\u5b8c\u8fd9\u4e09\u6761\u89c4\u5219\u4e4b\u540e\uff0c\u6211\u4eec\u4ecd\u7136\u65e0\u6cd5\u8ba1\u7b97\u8fd4\u56de\u7c7b\u578b\u7684\u751f\u547d\u5468\u671f\uff0c\u6240\u4ee5\u7f16\u8bd1\u5668\u4f1a\u62a5\u9519\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u7f16\u8bd1\u5668\u4f7f\u7528\u4e86\u5168\u90e8\u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219\u4e4b\u540e\uff0c\u5374\u65e0\u6cd5\u8ba1\u7b97\u51fa\u51fd\u6570\u7b7e\u540d\u4e2d\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\uff0c\u7f16\u8bd1\u5668\u5c31\u4f1a\u62a5\u9519\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_8","title":"\u516b\u3001\u65b9\u6cd5\u4e2d\u7684\u751f\u547d\u5468\u671f\u6807\u6ce8","text":"<p>\u5728<code>struct</code>\u4e0a\u4f7f\u7528\u751f\u547d\u5468\u671f\u5b9e\u73b0\u65b9\u6cd5\uff0c\u8bed\u6cd5\u548c\u6cdb\u578b\u8bed\u6cd5\u4e00\u6837\u3002\u5728\u54ea\u91cc\u58f0\u660e\u548c\u4f7f\u7528\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u4f9d\u8d56\u4e8e\u751f\u547d\u5468\u671f\u53c2\u6570\u662f\u5426\u548c\u5b57\u6bb5\u3001\u65b9\u6cd5\u7684\u53c2\u6570\u6216\u8fd4\u56de\u503c\u6709\u5173\u3002\u5728<code>struct</code>\u5b57\u6bb5\u7684\u751f\u547d\u5468\u671f\u540d\u9700\u8981\u5728<code>impl</code>\u540e\u58f0\u660e\uff0c\u5728<code>struct</code>\u540d\u540e\u4f7f\u7528\uff0c\u8fd9\u4e9b\u751f\u547d\u5468\u671f\u662f<code>struct</code>\u7c7b\u578b\u7684\u4e00\u90e8\u5206\u3002</p> <p><code>impl</code>\u5757\u5185\u7684\u65b9\u6cd5\u7b7e\u540d\u4e2d\uff0c\u5f15\u7528\u5fc5\u987b\u7ed1\u5b9a\u4e8e<code>struct</code>\u5b57\u6bb5\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\uff0c\u6216\u8005\u5f15\u7528\u662f\u72ec\u7acb\u7684\u4e5f\u53ef\u4ee5\u3002\u751f\u547d\u5468\u671f\u7701\u7565\u89c4\u5219\u7ecf\u5e38\u4f7f\u5f97\u65b9\u6cd5\u4e2d\u7684\u751f\u547d\u5468\u671f\u6807\u6ce8\u4e0d\u662f\u5fc5\u987b\u7684\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct ImportantExcerpt&lt;'a&gt; {\npart: &amp;'a str,\n}\nimpl&lt;'a&gt; ImportantExcerpt&lt;'a&gt; {\nfn level(&amp;self) -&gt; i32 {\n3\n}\nfn announce_and_return_part(&amp;self, announcement: &amp;str) -&gt; &amp;str {\nprintln!(\"Attention please: {}\", announcement);\nself.part\n}\n}\n</code></pre> <p>\u7ed3\u6784\u4f53\u5b57\u6bb5\u751f\u547d\u5468\u671f\u7684\u540d\u603b\u662f\u88ab\u58f0\u660e\u5728<code>impl</code>\u4e4b\u540e\uff0c\u5e94\u7528\u4e8e\u7ed3\u6784\u4f53\u540d<code>ImportantExcerpt</code>\u4e4b\u540e\uff0c\u4e0d\u80fd\u5ffd\u7565\u3002</p> <p><code>level</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662fi32\u7c7b\u578b\uff0c\u4e0d\u4f1a\u5f15\u7528\u4efb\u4f55\u6570\u636e\uff0c\u6839\u636e\u7b2c1\u4e2a\u7701\u7565\u89c4\u5219\uff0c\u53ef\u4ee5\u4e0d\u4e3a<code>&amp;self</code>\u6807\u6ce8\u751f\u547d\u5468\u671f\u3002</p> <p><code>announce_and_return_part</code>\u8fd9\u4e2a\u65b9\u6cd5\u62e5\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u90fd\u662f\u5f15\u7528\uff0c\u8fd4\u56de\u7c7b\u578b\u4e5f\u662f\u4e00\u4e2a\u5f15\u7528\u3002\u6839\u636e\u7b2c1\u6761\u7701\u7565\u89c4\u5219\uff0c\u5c31\u4f1a\u4e3a\u8fd9\u4e24\u4e2a\u53c2\u6570\u6dfb\u52a0\u5404\u81ea\u7684\u751f\u547d\u5468\u671f\uff0c\u7531\u4e8e\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u662f<code>&amp;self</code>\uff0c\u6839\u636e\u7b2c3\u6761\u7701\u7565\u89c4\u5219\uff0c\u5b83\u7684\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u5c31\u662f<code>self</code>\u7684\u751f\u547d\u5468\u671f\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#_9","title":"\u4e5d\u3001\u9759\u6001\u751f\u547d\u5468\u671f","text":"<p><code>'static</code>\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u751f\u547d\u5468\u671f\uff0c\u5b83\u8868\u793a\u6574\u4e2a\u7a0b\u5e8f\u7684\u751f\u547d\u5468\u671f\u3002\u4f8b\u5982\uff1a\u6240\u6709\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u90fd\u62e5\u6709<code>'static</code>\u751f\u547d\u5468\u671f\uff0c\u5982\u4e0b</p> <pre><code>let s:&amp;'static str = \"I have a static lifetime.\";\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u6240\u6709\u5b57\u7b26\u4e32\u5b57\u9762\u503c\u7684\u751f\u547d\u5468\u671f\u90fd\u662f<code>'static</code>\uff0c\u5373\u6574\u4e2a\u7a0b\u5e8f\u7684\u751f\u547d\u5468\u671f\u3002\u4f46\u6211\u4eec\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u4e3a\u5f15\u7528\u6307\u5b9a<code>'static</code>\u751f\u547d\u5468\u671f\u4e4b\u524d\u8981\u8003\u8651\uff1a\u662f\u5426\u9700\u8981\u5f15\u7528\u5728\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u90fd\u5b58\u6d3b\u3002\u56e0\u4e3a\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u9519\u8bef\u7684\u539f\u56e0\u90fd\u5728\u4e8e\u5c1d\u8bd5\u521b\u5efa\u4e00\u4e2a\u60ac\u5782\u5f15\u7528\uff0c\u6216\u8005\u662f\u53ef\u7528\u751f\u547d\u5468\u671f\u4e0d\u5339\u914d\u3002\u8fd9\u4e2a\u65f6\u5019\u5e94\u8be5\u5c1d\u8bd5\u53bb\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u6765\u6307\u5b9a<code>'static</code>\u751f\u547d\u5468\u671f\u3002</p>"},{"location":"10_generics_trait_lifetime/03_lifetime/#trait-bound","title":"\u5341\u3001\u6cdb\u578b\u53c2\u6570\u7c7b\u578b\u3001Trait Bound\u3001\u751f\u547d\u5468\u671f","text":"<p>\u4e0b\u9762\u662f\u4e00\u4e2a\u540c\u65f6\u4f7f\u7528\u4e86\u6cdb\u578b\u7c7b\u578b\u3001Trait Bound\u3001\u751f\u547d\u5468\u671f\u7684\u7efc\u5408\u793a\u4f8b</p> <pre><code>use std::fmt::Display;\nfn longest_with_an_announcement&lt;'a, T&gt;\n(x: &amp;'a str, y: &amp;'a str, ann: T) -&gt; &amp;'a str where T:Display {\nprintln!(\"Announcement! {}\", ann);\nif x.len() &gt; y.len() {\nx\n} else {\ny\n}\n}\nfn main() {\nlet str1 = \"abc\";\nlet str2 = \"abcde\";\nlet data = \"initial contents\";\nlet ann = data.to_string();\nlet longest_str = longest_with_an_announcement(str1, str2, ann);\nprintln!(\"The longest str is {}\", longest_str);\n}\n</code></pre>"},{"location":"11_testing/01_how_to_test/","title":"\u5982\u4f55\u7f16\u5199\u6d4b\u8bd5","text":""},{"location":"11_testing/01_how_to_test/#_2","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u6d4b\u8bd5","text":"<p>\u5728rust\u91cc\uff0c\u4e00\u4e2a\u6d4b\u8bd5\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4ed6\u88ab\u7528\u4e8e\u6d4b\u8bd5\u5176\u4ed6\u7684\u975e\u6d4b\u8bd5\u4ee3\u7801\u7684\u529f\u80fd\u662f\u5426\u548c\u9884\u671f\u4e00\u81f4\u3002\u6240\u4ee5\u5728\u6d4b\u8bd5\u7684\u51fd\u6570\u4f53\u91cc\uff0c\u901a\u5e38\u4f1a\u6267\u884c3\u4e2a\u64cd\u4f5c\uff0c\u5982\u4e0b</p> <ul> <li>\u51c6\u5907\u6570\u636e/\u72b6\u6001</li> <li>\u8fd0\u884c\u88ab\u6d4b\u8bd5\u7684\u4ee3\u7801</li> <li>\u65ad\u8a00\uff08Assert\uff09\u7ed3\u6784</li> </ul>"},{"location":"11_testing/01_how_to_test/#_3","title":"\u4e8c\u3001\u89e3\u5256\u6d4b\u8bd5\u51fd\u6570","text":"<p>\u6d4b\u8bd5\u51fd\u6570\u9700\u8981\u4f7f\u7528test\u5c5e\u6027\uff08attribute\uff09\u8fdb\u884c\u6807\u6ce8\uff0c<code>Attribute</code>\u5c31\u662f\u4e00\u6bb5Rust\u4ee3\u7801\u7684\u5143\u6570\u636e\uff0c\u5b83\u53ea\u662f\u5bf9\u4ee3\u7801\u8fdb\u884c\u4fee\u9970\uff0c\u4e0d\u4f1a\u5bf9\u4ee3\u7801\u539f\u6709\u7684\u903b\u8f91\u8fdb\u884c\u4fee\u6539\u3002\u5728\u51fd\u6570\u4e0a\u52a0<code>#[test]</code>\uff0c\u53ef\u4ee5\u628a\u51fd\u6570\u53d8\u6210\u6d4b\u8bd5\u51fd\u6570\u3002</p> <p>\u5f53\u6211\u4eec\u7f16\u5199\u5b8c\u6210\u6d4b\u8bd5\u51fd\u6570\u4e4b\u540e\uff0c\u4f7f\u7528<code>cargo test</code>\u547d\u4ee4\u8fd0\u884c\u6240\u6709\u7684\u6d4b\u8bd5\u3002\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0cRust\u4f1a\u6784\u5efa\u4e00\u4e2aTest Runner\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4ed6\u4f1a\u9010\u4e2a\u8fd0\u884c\u6807\u6ce8\u4e86 test \u7684\u51fd\u6570\uff0c\u5e76\u62a5\u544a\u5176\u8fd0\u884c\u662f\u5426\u6210\u529f\u3002</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528cargo\u521b\u5efalibrary\u9879\u76ee\u7684\u65f6\u5019\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a test module\uff0c\u91cc\u9762\u6709\u4e00\u4e2a test \u51fd\u6570\u3002\u6211\u4eec\u53ef\u4ee5\u53c2\u7167\u5b83\u6765\u7f16\u5199\u5176\u4ed6\u7684\u6d4b\u8bd5\u51fd\u6570\uff0c\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u6dfb\u52a0\u4efb\u610f\u6570\u91cf\u7684test module\u6216test\u51fd\u6570\u3002</p>"},{"location":"11_testing/01_how_to_test/#_4","title":"\u4e09\u3001\u6d4b\u8bd5\u793a\u4f8b","text":"<p>\u6211\u4eec\u4f7f\u7528<code>cargo new adder --lib</code>\u5373\u521b\u5efa\u4e86\u4e00\u4e2a\u5e93\u9879\u76ee\uff0c\u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u751f\u6210\u7684\u4ee3\u7801<code>lib.rs</code>\u5982\u4e0b</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn it_works() {\nlet result = 2 + 2;\nassert_eq!(result, 4);\n}\n}\n</code></pre> <p><code>it_works</code>\u8fd9\u4e2a\u51fd\u6570\u662f\u6d4b\u8bd5\u51fd\u6570\uff0c\u662f\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0a\u9762\u52a0\u4e86<code>#[test]</code>\u6ce8\u91ca\uff0c\u5e76\u4e0d\u662f\u56e0\u4e3a\u5b83\u5728test\u6a21\u5757\u4e2d\uff0ctest\u6a21\u5757\u4e2d\u8fd8\u53ef\u4ee5\u62e5\u6709\u666e\u901a\u7684\uff08\u975e\u6d4b\u8bd5\uff09\u51fd\u6570\u3002<code>assert_eq!</code>\u662f\u4e00\u4e2a\u65ad\u8a00\u5b8f\u3002\u4f7f\u7528<code>cargo test</code>\u6267\u884c\u6d4b\u8bd5\u8fc7\u7a0b\u3002</p>"},{"location":"11_testing/01_how_to_test/#_5","title":"\u56db\u3001\u6d4b\u8bd5\u5931\u8d25","text":"<p>\u7b26\u5408\u6d4b\u8bd5\u5931\u8d25\u627d\u6761\u4ef6\u5982\u4e0b</p> <ul> <li>\u6d4b\u8bd5\u51fd\u6570\u51fa\u73b0panic\u5c31\u8868\u793a\u6d4b\u8bd5\u5931\u8d25</li> <li>\u6bcf\u4e2a\u6d4b\u8bd5\u8fd0\u884c\u5728\u4e00\u4e2a\u65b0\u7ebf\u7a0b\uff0c\u5f53\u4e3b\u7ebf\u7a0b\u770b\u5230\u67d0\u7ebf\u7a0b\u6302\u6389\uff0c\u90a3\u4e2a\u6d4b\u8bd5\u5219\u6807\u8bb0\u4e3a\u5931\u8d25</li> </ul>"},{"location":"11_testing/01_how_to_test/#asert","title":"\u4e94\u3001\u65ad\u8a00\uff08Asert\uff09","text":""},{"location":"11_testing/01_how_to_test/#51-assert","title":"5.1 \u4f7f\u7528<code>assert!</code>\u5b8f\u68c0\u67e5\u6d4b\u8bd5\u7ed3\u679c","text":"<p><code>assert!</code>\u5b8f\uff0c\u6765\u81ea\u6807\u51c6\u5e93\uff0c\u7528\u6765\u786e\u5b9a\u67d0\u4e2a\u72b6\u6001\u662f\u5426\u4e3a<code>true</code>\u3002<code>assert!</code>\u5b8f\u63a5\u53d7\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5f53\u53c2\u6570\u4e3atrue\u65f6\uff0c\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5f53\u53c2\u6570\u4e3afalse\u65f6\uff0c\u5219\u8c03\u7528panic\uff0c\u6d4b\u8bd5\u5931\u8d25\u3002\u4e0b\u9762\u6211\u4eec\u7f16\u5199\u4e00\u4e2a\u4f8b\u5b50</p> <p>\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u77e9\u5f62\uff0c\u5982\u4e0b</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u77e9\u5f62\n#[derive(Debug)]\npub struct Rectangle {\nlength: u32,\nwidth: u32,\n}\n// \u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u5224\u65ad\u8be5\u77e9\u5f62\u662f\u5426\u80fd\u5bb9\u7eb3\u53e6\u4e00\u4e2a\u77e9\u5f62\nimpl Rectangle {\npub fn can_hold(&amp;self, other: &amp;Rectangle) -&gt; bool {\nself.length &gt; other.length &amp;&amp; self.width &gt; other.width\n}\n}\n</code></pre> <p>\u6211\u4eec\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u5185\u6dfb\u52a0\u6d4b\u8bd5\u6a21\u5757\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod test {\n// \u4ee5\u4e0b\u4ee3\u7801\u8868\u793a\u5bfc\u5165\u5916\u90e8\u6a21\u5757\u6240\u6709\u5185\u5bb9\nuse super::*;\n#[test]\nfn larger_can_hold_smaller() {\n// \u51c6\u5907\u6570\u636e\uff1a\u58f0\u660e\u4e24\u4e2a\u77e9\u5f62\nlet larger = Rectangle {\nlength: 8,\nwidth:7 ,\n};\nlet smaller = Rectangle {\nlength: 5,\nwidth: 1,\n};\n// \u6267\u884c\u88ab\u6d4b\u8bd5\u4ee3\u7801\nassert!(larger.can_hold(&amp;smaller));\n}\n}\n</code></pre>"},{"location":"11_testing/01_how_to_test/#52-assert_eqassert_ne","title":"5.2 \u4f7f\u7528assert_eq!\u548cassert_ne!\u6d4b\u8bd5\u76f8\u7b49\u6027","text":"<p>\u8fd9\u4e24\u4e2a\u5b8f\u90fd\u6765\u81ea\u6807\u51c6\u5e93\uff0c\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u53c2\u6570\u662f\u5426\u76f8\u7b49\u6216\u4e0d\u7b49\u3002\u5b9e\u9645\u4e0a\uff0c\u4ed6\u4eec\u4f7f\u7528\u7684\u5c31\u662f<code>==</code>\u548c<code>!=</code>\u8fd0\u7b97\u7b26\u3002</p> <p>\u5982\u679c\u65ad\u8a00\u5931\u8d25\uff0c\u5c06\u81ea\u52a8\u6253\u5370\u51fa\u4e24\u4e2a\u53c2\u6570\u7684\u503c\u3002\u4f7f\u7528debug\u683c\u5f0f\u6253\u5370\u53c2\u6570\uff0c\u8981\u6c42\u53c2\u6570\u5b9e\u73b0\u4e86<code>PartialEq</code>\u548c<code>Debug</code> Traits\uff08\u6240\u6709\u7684\u57fa\u672c\u7c7b\u578b\u548c\u6807\u51c6\u5e93\u91cc\u5927\u90e8\u5206\u7c7b\u578b\u5df2\u5b9e\u73b0\u4e86\u8fd9\u4e24\u4e2aTrait\uff09\u3002\u5bf9\u4e8e\u81ea\u5b9a\u7684\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u6765\u8bf4\uff0c\u9700\u8981\u81ea\u884c\u5b9e\u73b0\u8fd9\u4e24\u4e2aTrait\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u5199\u4e00\u4e2a\u52a02\u7684\u51fd\u6570\uff0c\u5e76\u4f7f\u7528\u6d4b\u8bd5\u4ee3\u7801\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5982\u4e0b</p> <pre><code>pub fn add_two(a: i32) -&gt; i32 {\na + 2\n}\n#[cfg(test)]\nmod tests {\nuse super::*;\n#[test]\nfn it_adds_two() {\nassert_eq!(4, add_two(2));\n}\n}\n</code></pre> <p>\u5728rust\u91cc\uff0c\u7528\u4e8e\u65ad\u8a00\u662f\u5426\u76f8\u7b49\u7684\u5b8f\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u671f\u5f85\u7684\u503c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u8ba1\u7b97\u7684\u503c\u3002\u4ed6\u4eec\u53ef\u4ee5\u5bf9\u6362\u8fc7\u6765\uff0c\u5373\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8ba1\u7b97\u7684\u503c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u671f\u5f85\u7684\u503c\u3002\u6240\u4ee5\u6211\u4eec\u628arust\u65ad\u8a00\u662f\u5426\u76f8\u7b49\u7684\u5b8f\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u53eb\u505a<code>\u5750\u503c</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53eb\u505a<code>\u53f3\u503c</code>\u3002</p>"},{"location":"11_testing/01_how_to_test/#_6","title":"\u516d\u3001\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u4fe1\u606f","text":"<p>\u53ef\u4ee5\u5411<code>assert!</code>\u3001<code>assert_eq!</code>\u3001<code>assert_ne!</code>\u6dfb\u52a0\u53ef\u9009\u7684\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\u3002\u5982\u679c\u6dfb\u52a0\u4e86\u81ea\u5b9a\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u8fd9\u4e9b\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u4fe1\u606f\u548c\u5931\u8d25\u6d88\u606f\u90fd\u4f1a\u6253\u5370\u51fa\u6765\u3002</p> <p><code>assert!</code>: \u7b2c1\u4e2a\u53c2\u6570\u5fc5\u586b\uff0c\u81ea\u5b9a\u4e49\u6d88\u606f\u4f5c\u4e3a\u7b2c2\u4e2a\u53c2\u6570\u3002</p> <p><code>assert_eq!</code>\u548c<code>assert_ne!</code>: \u524d2\u4e2a\u53c2\u6570\u5fc5\u586b\uff0c\u81ea\u5b9a\u4e49\u6d88\u606f\u4f5c\u4e3a\u7b2c3\u4e2a\u53c2\u6570\u3002</p> <p>\u81ea\u5b9a\u4e49\u6d88\u606f\u53c2\u6570\u4f1a\u88ab\u4f20\u9012\u7ed9<code>format!</code>\u5b8f\uff0c\u53ef\u4ee5\u4f7f\u7528<code>{}</code>\u5360\u4f4d\u7b26\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>pub fn greeting(name: &amp;str) -&gt; String {\nformat!(\"Hello!\")\n}\n#[cfg(test)]\nmod tests {\nuse super::*;\n#[test]\nfn greeting_contains_name() {\nlet  result = greeting(\"Carol\");\nassert!(result.contains(\"Carol\"), \"Greeting didn't contain name, value was '{}'\", result);\n}\n}\n</code></pre> <p>\u4ee5\u4e0a\u7684\u6d4b\u8bd5\u5c06\u4f1a\u5931\u8d25\uff0c\u5e76\u4e14\u63d0\u793a\u51fa\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"11_testing/01_how_to_test/#_7","title":"\u4e03\u3001\u9a8c\u8bc1\u9519\u8bef\u5904\u7406\u7684\u60c5\u51b5","text":""},{"location":"11_testing/01_how_to_test/#71-should_panic","title":"7.1 \u4f7f\u7528should_panic\u66f4\u7cbe\u786e","text":"<p>\u6d4b\u8bd5\u51fa\u4e86\u9a8c\u8bc1\u4ee3\u7801\u7684\u8fd4\u56de\u503c\u662f\u5426\u6b63\u786e\uff0c\u8fd8\u9700\u9a8c\u8bc1\u4ee3\u7801\u662f\u5426\u5982\u9884\u671f\u7684\u5904\u7406\u4e86\u53d1\u751f\u9519\u8bef\u7684\u60c5\u51b5\u3002\u5982\u6211\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u4ee3\u7801\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u662f\u5426\u53d1\u751f\u4e86<code>panic</code>\u3002\u6b64\u65f6\u6211\u4eec\u9700\u8981\u4f7f\u7528<code>should_panic</code>\u5c5e\u6027\uff0c\u5982\u679c\u4f7f\u7528\u4e86\u8be5\u5c5e\u6027\uff0c\u90a3\u4e48\u51fd\u6570\u5982\u679c\u53d1\u751fpanic\u5219\u6d4b\u8bd5\u901a\u8fc7\uff0c\u51fd\u6570\u5982\u679c\u6ca1\u6709panic\u5219\u6d4b\u8bd5\u5931\u8d25\u3002\u5982\u679c\u793a\u4f8b</p> <pre><code>impl Guess {\npub fn new(value: u32) -&gt; Guess {\nif value &lt; 1 || value &gt; 100 {\npanic(\"Guess value must be between 1 and 100, got {}.\", value);\n}\nGuess { value }\n}\n}\n#[cfg(test)]\nmod test {\nuse super::*;\n#[test]\n#[should_panic]\nfn greater_than_100() {\nGuess::new(200);\n}\n}\n</code></pre> <p>\u4f7f\u7528<code>should_panic</code>\u6807\u6ce8\u4e86\u6d4b\u8bd5\u51fd\u6570\u5e94\u8be5\u51fa\u73b0panic\uff0c\u5b9e\u9645\u4e0a\u51fd\u6570\u4e5f\u51fa\u73b0\u4e86panic\uff0c\u6240\u4ee5\u6d4b\u8bd5\u901a\u8fc7\u3002</p>"},{"location":"11_testing/01_how_to_test/#72-should_panic","title":"7.2 \u8ba9should_panic\u66f4\u7cbe\u786e","text":"<p>\u4e3ashould_panic\u5c5e\u6027\u6dfb\u52a0\u4e00\u4e2a\u53ef\u9009\u7684<code>expected</code>\u53c2\u6570\uff0c\u8fd9\u6837\u7684\u8bdd\u6d4b\u8bd5\u8fc7\u7a0b\u5c06\u4f1a\u68c0\u67e5\u5931\u8d25\u7684\u6d88\u606f\u4e2d\u662f\u5426\u5305\u542b\u6240\u6307\u5b9a\u7684\u6587\u5b57\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>impl Guess {\npub fn new(value: u32) -&gt; Guess {\nif value &lt; 1 {\npanic(\"Guess value must be between 1 and 100, got {}.\", value);\n} else if value &gt; 100 {\npanic(\"Guess value must be less than or equal to 100, got {}\", value);\n}\nGuess { value }\n}\n}\n#[cfg(test)]\nmod test {\nuse super::*;\n#[test]\n#[should_panic(expected = \"Guess value must be less than or equal to 100\")]\nfn greater_than_100() {\nGuess::new(200);\n}\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5c06\u4f1a\u6267\u884c\u5230<code>value &gt; 100</code>\u7684\u903b\u8f91\u4ea7\u751fpanic\uff0c\u5e76\u4e14panic\u7684\u9519\u8bef\u4fe1\u606f\u5b8c\u5168\u5305\u542b\u4e86<code>expected</code>\u53c2\u6570\uff0c\u6240\u4ee5\u6d4b\u8bd5\u901a\u8fc7\u3002</p>"},{"location":"11_testing/01_how_to_test/#result","title":"\u516b\u3001\u5728\u6d4b\u8bd5\u4e2d\u4f7f\u7528Result <p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6d4b\u8bd5\u8fd0\u884c\u5931\u8d25\uff0c\u90fd\u662f\u56e0\u4e3apanic\uff0c\u4f46\u5bfc\u81f4\u6d4b\u8bd5\u5931\u8d25\uff0c\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3apanic\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>Result&lt;T, E&gt;</code>\u679a\u4e3e\u6765\u8fbe\u5230\u540c\u6837\u76ee\u7684\u3002\u5373\u5728\u7f16\u5199\u6d4b\u8bd5\u7684\u65f6\u5019\u65e0\u9700panic\uff0c\u53ef\u4ee5\u4f7f\u7528<code>Result &lt;T, E&gt;</code>\u4f5c\u4e3a\u8fd4\u56de\u7c7b\u578b\u7f16\u5199\u6d4b\u8bd5\u3002\u5982\u679c\u8fd4\u56de<code>OK</code>\uff0c\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5982\u679c\u8fd4\u56de<code>Err</code>\u5219\u6d4b\u8bd5\u5931\u8d25\u3002\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>#[cfg(test)]\nmod tests {\n    #[test]\n\n    fn it_works -&gt; Result&lt;(), String&gt; {\n        if 2 + 2 == 4 {\n            Ok(())\n        } else {\n            Err(String::from(\"two plus two does not equal four\"))\n        }\n    }\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u5c06\u4f1a\u6267\u884c<code>2 + 2 == 4</code>\u7684\u903b\u8f91\uff0c\u6240\u4ee5\u6d4b\u8bd5\u901a\u8fc7\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u8981\u5728<code>Result&lt;T, E&gt;</code>\u7f16\u5199\u7684\u6d4b\u8bd5\u4e0a\u6807\u6ce8<code>#[should_panic]</code>\u3002\u56e0\u4e3a\u5728\u8fd0\u884c\u5931\u8d25\u7684\u65f6\u5019\uff0c\u4f1a\u6267\u884c\u8fd4\u56de<code>Err</code>\uff0c\u4e0d\u56de\u53d1\u751fpanic\u3002</p>","text":""},{"location":"11_testing/02_control_test_running/","title":"\u63a7\u5236\u6d4b\u8bd5\u8fd0\u884c","text":""},{"location":"11_testing/02_control_test_running/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p><code>cargo test</code>\u548c<code>cargo run</code>\u547d\u4ee4\u7c7b\u578b\uff0c<code>cargo test</code>\u4f1a\u5728\u6d4b\u8bd5\u6a21\u5f0f\u4e0b\u7f16\u8bd1\u4ee3\u7801\uff0c\u5e76\u751f\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u8be5\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u7528\u4e8e\u6d4b\u8bd5\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u53c2\u6570\u6765\u6539\u53d8<code>cargo test</code>\u7684\u884c\u4e3a\uff0c\u5982\u679c\u4e0d\u6dfb\u52a0\u4efb\u52a1\u53c2\u6570\uff0crust\u5c06\u4f1a\u6267\u884c\u9ed8\u8ba4\u7684\u6d4b\u8bd5\u884c\u4e3a\u3002\u9ed8\u8ba4\u884c\u4e3a\u5982\u4e0b</p> <ul> <li>\u5e76\u884c\u6d4b\u8bd5</li> <li>\u6267\u884c\u6240\u6709\u6d4b\u8bd5</li> <li>\u6355\u83b7\uff08\u4e0d\u663e\u793a\uff09\u6240\u6709\u8f93\u51fa\uff0c\u53ea\u4f1a\u8f93\u51fa\u6d4b\u8bd5\u5931\u8d25\u7684\u76f8\u5173\u8f93\u51fa\uff0c\u4f7f\u8bfb\u53d6\u4e0e\u6d4b\u8bd5\u7ed3\u679c\u76f8\u5173\u7684\u8f93\u51fa\u66f4\u5bb9\u6613</li> </ul> <p>\u547d\u4ee4\u884c\u53c2\u6570\u5982\u4e0b</p> <ul> <li>\u9488\u5bf9<code>cargo test</code>\u7684\u53c2\u6570\uff1a\u7d27\u8ddf\u5728 cargo test \u4e4b\u540e\uff0c\u4f7f\u7528<code>cargo test --help</code>\u67e5\u770b\u6240\u6709\u53c2\u6570\u5217\u8868</li> <li>\u9488\u5bf9\u6d4b\u8bd5\u53ef\u6267\u884c\u7a0b\u5e8f\uff1a\u653e\u5728 -- \u4e4b\u540e\uff0c\u4f7f\u7528<code>cargo test -- --help</code>\u67e5\u770b\u6240\u6709\u53c2\u6570\u5217\u8868</li> </ul>"},{"location":"11_testing/02_control_test_running/#_3","title":"\u4e8c\u3001\u5e76\u884c\u8fd0\u884c\u6d4b\u8bd5","text":"<p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u591a\u7ebf\u7a0b\u5e76\u884c\u8fd0\u884c\u591a\u4e2a\u6d4b\u8bd5\u3002\u8fd9\u6837\u8fd0\u884c\u66f4\u5feb\uff0c\u6211\u4eec\u66f4\u65e9\u5f97\u7684\u5230\u53cd\u9988\u3002\u4f46\u7531\u4e8e\u662f\u5e76\u884c\u8fd0\u884c\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u786e\u4fdd\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u56de\u76f8\u4e92\u4f9d\u8d56\uff0c\u800c\u4e14\u4e0d\u4f9d\u8d56\u67d0\u4e2a\u5171\u4eab\u7684\u72b6\u6001\uff08\u73af\u5883\u3001\u5de5\u4f5c\u76ee\u5f55\u3001\u73af\u5883\u53d8\u91cf\u7b49\u7b49\uff09\u3002\u56e0\u4e3a\u5982\u679c\u4e24\u6d4b\u8bd5\u5982\u679c\u5171\u4eab\u4e00\u4e2a\u72b6\u6001\uff0c\u5176\u4e2d\u4e00\u4e2a\u6d4b\u8bd5\u8fd0\u884c\u5b8c\u6210\u7684\u4e4b\u540e\u628a\u67d0\u4e2a\u72b6\u6001\u4fee\u6539\u4e86\uff0c\u5c06\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u6d4b\u8bd5\u3002</p> <p>\u5982\u679c\u6211\u4eec\u4e0d\u60f3\u5e76\u884c\u8fd0\u884c\u6d4b\u8bd5\uff0c\u6216\u8005\u5e0c\u671b\u7cbe\u786e\u63a7\u5236\u6d4b\u8bd5\u65f6\uff0c\u6240\u542f\u7528\u7684\u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f20\u9012\u8be5\u53c2\u6570\u3002\u8be5\u53c2\u6570\u4f20\u9012\u7ed9\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528<code>--test-threads</code>\u53c2\u6570\uff0c\u540e\u9762\u8ddf\u7740\u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u4f8b\u5982\uff1a<code>cargo test -- --test-threads=1</code>\u3002</p> <p>\u8fd9\u6837\u7684\u8bdd\uff0c\u5982\u679c\u6267\u884c\u591a\u4e2a\u6d4b\u8bd5\uff0c\u76f8\u6bd4\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b83\u4f1a\u8017\u8d39\u66f4\u591a\u7684\u65f6\u95f4\uff0c\u4f46\u662f\u5b83\u8bd5\u987a\u5e8f\u6267\u884c\u7684\u3002\u5982\u679c\u591a\u4e2a\u6d4b\u8bd5\u4f7f\u7528\u5171\u4eab\u72b6\u6001\uff0c\u5728\u8be5\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff0c\u51fa\u73b0\u72b6\u6001\u5e72\u6270\u7684\u60c5\u51b5\u5c06\u88ab\u51cf\u5c11\u3002</p>"},{"location":"11_testing/02_control_test_running/#_4","title":"\u4e09\u3001\u663e\u5f0f\u51fd\u6570\u7684\u8f93\u51fa","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u6d4b\u8bd5\u901a\u8fc7\uff0cRust\u7684test\u5e93\u4f1a\u6355\u83b7\u6240\u6709\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u7684\u5185\u5bb9\uff0c\u5373\u6240\u6709\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u7684\u5185\u5bb9\u4e0d\u4f1a\u663e\u793a\u4e86\u3002\u4f8b\u5982\uff1a\u5982\u679c\u88ab\u6d4b\u8bd5\u7684\u4ee3\u7801\u4e2d\u7528\u5230\u4e86<code>println!</code>\u3002\u5982\u679c\u6d4b\u8bd5\u901a\u8fc7\uff0c\u5c06\u4e0d\u4f1a\u5728\u7ec8\u7aef\u770b\u5230<code>println!</code>\u6253\u5370\u7684\u5185\u5bb9\u3002\u5982\u679c\u6d4b\u8bd5\u5931\u8d25\uff0c\u5c06\u4f1a\u770b\u5230<code>println!</code>\u6253\u5370\u7684\u5185\u5bb9\u548c\u5931\u8d25\u4fe1\u606f\u3002</p> <p>\u5982\u679c\u6211\u4eec\u60f3\u8ba9\u6d4b\u8bd5\u901a\u8fc7\u7684\u65f6\u5019\u4e5f\u628a<code>println!</code>\u7684\u8f93\u51fa\u5185\u5bb9\u4e5f\u6253\u5370\u51fa\u6765\uff0c\u5c31\u9700\u8981\u52a0\u4e00\u4e2a\u53c2\u6570<code>--shou-output</code>\uff0c\u6700\u7ec8\u6267\u884c\u547d\u4ee4\u4e3a<code>cargo test -- --show-output</code>\u3002</p>"},{"location":"11_testing/02_control_test_running/#_5","title":"\u56db\u3001\u6309\u540d\u79f0\u8fd0\u884c\u6d4b\u8bd5\u7684\u5b50\u96c6","text":"<p>\u9009\u62e9\u8fd0\u884c\u6d4b\u8bd5\u662f\u5c06\u6d4b\u8bd5\u7684\u540d\u79f0\uff08\u4e00\u4e2a\u6216\u591a\u4e2a\uff09\u4f5c\u4e3a<code>cargo test</code>\u7684\u53c2\u6570\u3002\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>pub fn add_two(a: i32) -&gt; i32 {\na + 2\n}\n#[cfg(test)]\nmod tests {\nuse super::*;\n#[test]\nfn add_two_and_two() {\nassert_eq!(4, add_two(2));\n}\n#[test]\nfn add_three_and_two() {\nassert_eq!(5, add_two(3));\n}\n#[test]\nfn one_hundred() {\nassert_eq!(102, add_two(100));\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u4e00\u5171\u5305\u542b\u4e86\u4e09\u4e2a\u6d4b\u8bd5\uff0c\u5982\u679c\u6211\u4eec\u76f4\u63a5\u4f7f\u7528<code>cargo test</code>\u547d\u4ee4\uff0c\u5c06\u4f1a\u8fd0\u884c\u6240\u6709\u7684\u6d4b\u8bd5\u3002\u5982\u679c\u53ea\u60f3\u8fd0\u884c\u4e00\u4e2a\u6d4b\u8bd5\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u6d4b\u8bd5\u7684\u540d\u79f0\u4f5c\u4e3a<code>cargo test</code>\u7684\u53c2\u6570\u5373\u53ef\u3002\u5982<code>cargo test one_hundred</code>\u3002</p> <p>\u4f46\u662f\uff0c\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u8fd0\u884c\u591a\u4e2a\u6d4b\u8bd5\uff0c\u5219\u9700\u8981\u6307\u5b9a\u6d4b\u8bd5\u540d\uff08\u6a21\u5757\u540d\u4e5f\u53ef\u4ee5\uff09\u7684\u4e00\u90e8\u5206\uff0c\u8fd9\u6837\u4efb\u4f55\u5339\u914d\u8fd9\u4e2a\u540d\u79f0\u90fd\u4f1a\u88ab\u6267\u884c\u3002\u5982\u5728\u4e0a\u5217\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528<code>cargo test add</code>\u547d\u4ee4\u5c06\u4f1a\u6267\u884c\u524d\u4e24\u4e2a\u6d4b\u8bd5\u51fd\u6570\uff0c\u6211\u4eec\u4f7f\u7528<code>cargo test tests</code>\u547d\u4ee4\u5c06\u4f1a\u6267\u884ctests\u6a21\u5757\u4e2d\u6240\u6709\u7684\u6d4b\u8bd5\u51fd\u6570\u3002</p>"},{"location":"11_testing/02_control_test_running/#_6","title":"\u4e94\u3001\u5ffd\u7565\u6d4b\u8bd5","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570\u5b9e\u73b0\u5ffd\u7565\u67d0\u4e9b\u6d4b\u8bd5\uff0c\u8fd0\u884c\u5269\u4f59\u7684\u6d4b\u8bd5\u3002\u6709\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u5e0c\u671b\u8fd0\u884c\u4e00\u4e9b\u8017\u65f6\u7684\u6d4b\u8bd5\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7<code>ignore</code>\u5c5e\u6027\u6765\u5bf9\u8981\u5ffd\u7565\u7684\u6d4b\u8bd5\u51fd\u6570\u8fdb\u884c\u6807\u8bb0\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn it_works() {\nassert_eq!(4, 2 + 2);\n}\n#[test]\n#[ignore]\nfn expensive_test() {\nassert_eq!(5, 1 + 1 + 1 + 1 + 1);\n}\n}\n</code></pre> <p>\u901a\u8fc7\u9ed8\u8ba4\u7684\u6d4b\u8bd5\u547d\u4ee4\uff0crust\u5c06\u4f1a\u5ffd\u7565\u6709<code>ignore</code>\u6807\u8bb0\u7684\u6d4b\u8bd5\u51fd\u6570\uff0c\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5355\u72ec\u8fd0\u884c<code>ignore</code>\u6807\u8bb0\u7684\u6d4b\u8bd5\u51fd\u6570\uff0c\u5219\u9700\u6dfb\u52a0<code>--ignored</code>\u53c2\u6570\uff0c\u6700\u7ec8\u6267\u884c\u547d\u4ee4\u4e3a<code>cargo test -- --ignored</code>\u3002</p>"},{"location":"11_testing/03_test_structure/","title":"\u6d4b\u8bd5\u7684\u7ec4\u7ec7\u7ed3\u6784","text":""},{"location":"11_testing/03_test_structure/#_2","title":"\u4e00\u3001\u6d4b\u8bd5\u7684\u5206\u7c7b","text":"<p>Rust\u5bf9\u6d4b\u8bd5\u7684\u5206\u7c7b\uff1a</p>"},{"location":"11_testing/03_test_structure/#11","title":"1.1 \u5355\u5143\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u8303\u56f4\u6bd4\u8f83\u5c0f\uff0c\u540c\u65f6\u6bd4\u8f83\u4e13\u6ce8\uff1b\u4e00\u6b21\u5bf9\u4e00\u4e2a\u6a21\u5757\u8fdb\u884c\u9694\u79bb\u7684\u6d4b\u8bd5\uff1b\u53ef\u4ee5\u6d4b\u8bd5private\u63a5\u53e3\u3002</p>"},{"location":"11_testing/03_test_structure/#12","title":"1.2 \u96c6\u6210\u6d4b\u8bd5","text":"<p>\u5b8c\u5168\u4f4d\u4e8e\u4ee3\u7801\u5e93\u4e4b\u5916\uff0c\u548c\u5176\u4ed6\u5916\u90e8\u4ee3\u7801\u4e00\u6837\u4f7f\u7528\u4f60\u7684\u4ee3\u7801\uff1b\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u8bbf\u95eepublic\u63a5\u53e3\uff1b\u53ef\u80fd\u5728\u6bcf\u4e2a\u6d4b\u8bd5\u4e2d\u4f7f\u7528\u5230\u591a\u4e2a\u6a21\u5757\u3002</p>"},{"location":"11_testing/03_test_structure/#_3","title":"\u4e8c\u3001\u5355\u5143\u6d4b\u8bd5\u4e0e\u96c6\u6210\u6d4b\u8bd5\u7684\u533a\u522b","text":"<p>\u5355\u5143\u6d4b\u8bd5\u7684\u76ee\u7684\u662f\u5c06\u4e00\u5c0f\u6bb5\u4ee3\u7801\u5355\u72ec\u9694\u79bb\u51fa\u6765\uff0c\u4ece\u800c\u8fc5\u901f\u5730\u786e\u5b9a\u8fd9\u6bb5\u4ee3\u7801\u7684\u529f\u80fd\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u6211\u4eec\u901a\u5e38\u628a\u5355\u5143\u6d4b\u8bd5\u548c\u88ab\u6d4b\u8bd5\u4ee3\u7801\u90fd\u653e\u5728<code>src</code>\u76ee\u5f55\u4e0b\u7684\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u540c\u65f6\u7ea6\u5b9a\u6bcf\u4e2a\u6e90\u4ee3\u7801\u6587\u4ef6\u90fd\u8981\u5efa\u7acb\u4e00\u4e2a<code>test</code>\u6a21\u5757\u653e\u653e\u6d4b\u8bd5\u51fd\u6570\uff0c\u5e76\u4f7f\u7528<code>#[cfg(test)]</code>\u6765\u6807\u6ce8\u6d4b\u8bd5\u6a21\u5757\u3002\u4f7f\u7528<code>#[cfg(test)]</code>\u6807\u6ce8\u4e4b\u540e\uff0c\u90a3\u4e48\u53ea\u6709\u5728\u8fd0\u884c<code>cargo test</code>\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u6d4b\u8bd5\u6a21\u5757\u7684\u5185\u5bb9\u624d\u4f1a\u88ab\u7f16\u8bd1\u5e76\u4e14\u8fd0\u884c\uff0c\u8fd0\u884c<code>cargo build</code>\u5219\u4e0d\u4f1a\u3002</p> <p>\u96c6\u6210\u6d4b\u8bd5\u5728\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\uff0c\u5b83\u4e0d\u9700\u8981\u4f7f\u7528<code>#[cfg(test)]</code>\u8fdb\u884c\u6807\u6ce8\u3002</p> <p>\u8bf4\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u8bf4\u4e00\u4e0b<code>cfg</code>\uff0c\u5b9e\u9645\u4e0a\u662f\u914d\u7f6e\u7684\u82f1\u6587\u5355\u8bcdconfiguration\u7684\u7f29\u5199\uff0c\u4f7f\u7528<code>cfg</code>\u6807\u6ce8\u7684\u542b\u4e49\u662f\uff1a\u544a\u8bc9rust\u4e0b\u9762\u6761\u76ee\u53ea\u6709\u5728\u6307\u5b9a\u914d\u7f6e\u9009\u9879\u4e0b\u624d\u88ab\u5305\u542b\u3002\u5982\uff1a\u914d\u7f6e\u9009\u9879<code>test</code>\uff0c\u7531rust\u63d0\u4f9b\uff0c\u7528\u6765\u7f16\u8bd1\u548c\u8fd0\u884c\u6d4b\u8bd5\uff0c\u53ea\u6709\u4f7f\u7528<code>cargo test</code>\u624d\u4f1a\u7f16\u8bd1\u4ee3\u7801\uff0c\u5305\u62ec\u6a21\u5757\u4e2d\u7684helper\u51fd\u6570\u548c<code>#[test]</code>\u6807\u6ce8\u7684\u51fd\u6570\u3002</p>"},{"location":"11_testing/03_test_structure/#_4","title":"\u4e09\u3001\u6d4b\u8bd5\u79c1\u6709\u51fd\u6570","text":"<p>Rust\u5141\u8bb8\u6d4b\u8bd5\u79c1\u6709\u51fd\u6570\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn add_two(a: i32) -&gt; i32 {\ninternal_adder(a, 2)\n}\nfn internal_adder(a: i32, b: i32) -&gt; i32 {\na + b\n}\n#[cfg(test)]\nmod tests {\nuse super::*;\n#[test]\nfn it_works() {\nassert_eq(4, internal_adder(2, 2));\n}\n}\n</code></pre>"},{"location":"11_testing/03_test_structure/#_5","title":"\u56db\u3001\u96c6\u6210\u6d4b\u8bd5","text":""},{"location":"11_testing/03_test_structure/#41","title":"4.1 \u96c6\u6210\u6d4b\u8bd5\u6982\u8ff0","text":"<p>\u5728rust\u91cc\uff0c\u96c6\u6210\u6d4b\u8bd5\u5b8c\u5168\u4f4d\u4e8e\u88ab\u6d4b\u8bd5\u5e93\u7684\u5916\u90e8\u3002\u96c6\u6210\u6d4b\u8bd5\u8c03\u7528\u5e93\u7684\u65b9\u5f0f\uff0c\u548c\u5176\u4ed6\u4ee3\u7801\u8c03\u7528\u5e93\u7684\u65b9\u5f0f\u662f\u4e00\u6837\u7684\u3002\u540c\u65f6\u4e5f\u610f\u5473\u7740\uff0c\u96c6\u6210\u6d4b\u8bd5\u7eb8\u80fd\u8c03\u7528\u88ab\u6d4b\u8bd5\u5e93\u5bf9\u5916\u5f00\u653e\u7684API\u3002\u96c6\u6210\u6d4b\u8bd5\u7684\u76ee\u7684\u662f\uff1a\u6d4b\u8bd5\u88ab\u6d4b\u8bd5\u5e93\u7684\u591a\u4e2a\u90e8\u5206\u662f\u5426\u80fd\u6b63\u786e\u7684\u4e00\u8d77\u5de5\u4f5c\u3002</p> <p>\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u4ee3\u7801\u4ee3\u7801\uff0c\u4ed6\u4eec\u96c6\u6210\u5728\u4e00\u8d77\u8fd0\u884c\u65f6\uff0c\u4e5f\u53ef\u80fd\u4f1a\u53d1\u751f\u5404\u79cd\u95ee\u9898\uff0c\u6240\u4ee5\u96c6\u6210\u6d4b\u8bd5\u7684\u8986\u76d6\u7387\u5f88\u91cd\u8981\u7684\u6307\u6807\u3002</p>"},{"location":"11_testing/03_test_structure/#42","title":"4.2 \u6d4b\u8bd5\u8fc7\u7a0b","text":"<p>\u4e3a\u4e86\u521b\u5efa\u96c6\u6210\u6d4b\u8bd5\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a<code>tests</code>\u76ee\u5f55\uff0c\u8fd9\u4e2a\u76ee\u5f55\u548c<code>src</code>\u76ee\u5f55\u65f6\u5e76\u5217\u7684\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e5f\u6bd4\u8f83\u7279\u6b8a\uff0c<code>cargo</code>\u4f1a\u81ea\u52a8\u5728\u8fd9\u91cc\u76ee\u5f55\u4e0b\u5bfb\u627e\u6d4b\u8bd5\u6587\u4ef6\u3002\u6211\u4eec\u53ef\u4ee5\u5728<code>tests</code>\u76ee\u5f55\u4e0b\u521b\u5efa\u4efb\u610f\u591a\u7684\u6d4b\u8bd5\u6587\u4ef6\uff0c\u800c\u8be5\u76ee\u5f55\u4e0b\u7684\u6bcf\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u90fd\u662f\u5355\u72ec\u7684\u4e00\u4e2a<code>crate</code>\u3002</p> <p>\u5728\u6267\u884c\u6d4b\u8bd5\u540e\u7684\u8f93\u51fa\u7ed3\u679c\u4e2d\uff0c\u6bcf\u4e2a\u96c6\u6210\u6d4b\u8bd5\u6587\u4ef6\u90fd\u4f1a\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u533a\u57df\uff0c\u540c\u65f6\u6bcf\u4e2a\u6d4b\u8bd5\u51fd\u6570\u90fd\u4f1a\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u884c\u3002\u901a\u5e38\u5728\u6267\u884c\u96c6\u6210\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u90fd\u4f1a\u6709\u9009\u62e9\u5730\u6267\u884c\u3002</p> <p>\u5728\u6d4b\u8bd5\u6587\u4ef6\u4e2d\uff0c\u9700\u8981\u5c06\u88ab\u6d4b\u8bd5\u6d4b\u8bd5\u5e93\u5bfc\u5165\uff0c\u6bcf\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u65e0\u9700\u6807\u6ce8<code>#[cfg(test)]</code>\uff0c\u56e0\u4e3a<code>tests</code>\u76ee\u5f55\u4f1a\u88abcargo\u7279\u6b8a\u5bf9\u5f85\u3002\u5728\u6267\u884c<code>cargo test</code>\u65f6\uff0c<code>tests</code>\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u7f16\u8bd1\u3002</p>"},{"location":"11_testing/03_test_structure/#43","title":"4.3 \u8fd0\u884c\u6307\u5b9a\u7684\u96c6\u6210\u6d4b\u8bd5","text":"<p>\u8fd0\u884c\u4e00\u4e2a\u7279\u5b9a\u7684\u96c6\u6210\u6d4b\u8bd5\uff1a<code>cargo test \u51fd\u6570\u540d</code></p> <p>\u8fd0\u884c\u67d0\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u5185\u7684\u6240\u6709\u6d4b\u8bd5\uff1a<code>cargo test --test \u6587\u4ef6\u540d</code></p>"},{"location":"11_testing/03_test_structure/#44","title":"4.4 \u96c6\u6210\u6d4b\u8bd5\u4e2d\u7684\u81ea\u6a21\u5757","text":"<p>tests\u76ee\u5f55\u4e0b\u6bcf\u4e2a\u6587\u4ef6\u4f1a\u88ab\u7f16\u8bd1\u6210\u5355\u72ec\u7684<code>crate</code>\uff0c\u8fd9\u4e9b\u6587\u4ef6\u4e0d\u4f1a\u5171\u4eab\u884c\u4e3a\uff08\u4e0esrc\u4e0b\u7684\u6587\u4ef6\u89c4\u5219\u4e0d\u540c\uff09\u3002\u5982\u679c\u6211\u4eec\u60f3\u521b\u5efa\u4e00\u4e2ahelper\u51fd\u6570\uff0c\u5e76\u4e14\u5728\u591a\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u4e2d\u4f7f\u7528\u5b83\uff0c\u6211\u4eec\u53ef\u4ee5\u5728<code>tests</code>\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u7a7a\u76ee\u5f55\uff0c\u76ee\u5f55\u540d\u53ef\u4ee5\u53eb<code>common</code>\uff0c\u5e76\u628ahelper\u51fd\u6570\u6240\u5728\u7684\u6587\u4ef6\u653e\u5728\u8be5\u76ee\u5f55\u4e2d\u3002</p> <p>rust\u5728\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u628a<code>tests</code>\u76ee\u5f55\u4e0b\u7684\u5b50\u76ee\u5f55\u7684\u6587\u4ef6\u5f53\u4f5c\u6d4b\u8bd5\u6587\u4ef6\uff0c\u8be5\u76ee\u5f55\u53ea\u662f\u4e00\u4e2a\u666e\u901a\u7684\u6a21\u5757\u800c\u5df2\uff0c\u73b0\u5728\u91cc\u9762\u7684\u51fd\u6570\u5c06\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e0d\u540c\u7684\u96c6\u6210\u6d4b\u8bd5\u6587\u4ef6\u4e2d\u3002\u5982\u4e0b\u793a\u4f8b\u7684\u96c6\u6210\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>// adder\u4e3a\u9879\u76ee\u540d\uff0c\u4ee3\u8868\u628a\u9879\u76ee\u4e2d\u7684\u6240\u6709\u6a21\u5757\u5bfc\u5165\u5230\u6d4b\u8bd5\u6587\u4ef6\u4e2d\nuse adder;\n// \u4f7f\u7528tests\u76ee\u5f55\u4e0b\u7684common\u6a21\u5757\uff0ccommon\u6a21\u5757\u5bf9\u5e94common\u76ee\u5f55\nmod common;\n#[test]\nfn it_adds_two() {\n// \u8c03\u7528common\u6a21\u5757\u4e0b\u7684\u51fd\u6570\ncommon::setup();\n// \u8c03\u7528\u9879\u76ee\u4e2d\u7684\u51fd\u6570\nassert_eq!(4, adder::add_two(2));\n}\n</code></pre>"},{"location":"11_testing/03_test_structure/#45-binary-crate","title":"4.5 \u9488\u5bf9binary crate\u7684\u96c6\u6210\u6d4b\u8bd5","text":"<p>\u5982\u679c\u9879\u76ee\u65f6binary crate\uff0c\u53ea\u542b\u6709<code>src/main.rs</code>\u6ca1\u6709<code>src/lib.rs</code>\uff0c\u8fd9\u65f6\u5019\u4e0d\u80fd\u5728<code>tests</code>\u76ee\u5f55\u4e0b\u521b\u5efa\u96c6\u6210\u6d4b\u8bd5\uff0c\u96c6\u6210\u6d4b\u8bd5\u4e5f\u65e0\u6cd5\u628a<code>main.rs</code>\u7684\u51fd\u6570\u5bfc\u5165\u5230\u4f5c\u7528\u57df\u3002\u56e0\u4e3a\u53ea\u6709library crate\u624d\u80fd\u66b4\u9732\u51fd\u6570\u7ed9\u5176\u4ed6crate\u4f7f\u7528\uff0c\u800cbinary crate\u610f\u5473\u7740\u8981\u72ec\u7acb\u8fd0\u884c\u3002</p> <p>rust\u9879\u76ee\u901a\u5e38\u628a\u903b\u8f91\u90fd\u653e\u5728<code>src/lib.rs</code>\u91cc\uff0c\u800c\u5728<code>src/main.rs</code>\u53ea\u6709\u7b80\u5355\u7684\u8c03\u7528\uff0c\u5305\u542b\u5c11\u91cf\u7684\u80f6\u6c34\u4ee3\u7801\u3002\u8fd9\u6837\u5728\u96c6\u6210\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u628a\u9879\u76ee\u89c6\u4e3alibrary\uff0c\u901a\u8fc7\u4f7f\u7528<code>use</code>\u5173\u952e\u5b57\u6765\u8bbf\u95ee\u9879\u76ee\u4e2d\u6838\u5fc3\u7684\u903b\u8f91\u4ee3\u7801\u3002\u5f53\u6838\u5fc3\u7684\u903b\u8f91\u4ee3\u7801\u6ca1\u95ee\u9898\u4e86\uff0c\u901a\u5e38\u6838\u5fc3\u529f\u80fd\u4e5f\u6ca1\u6709\u95ee\u9898\u3002</p>"},{"location":"12_cli/01_io_example_project/","title":"IO\u793a\u4f8b\u9879\u76ee","text":""},{"location":"12_cli/01_io_example_project/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u672c\u8282\u7f16\u5199\u4e00\u4e2a\u547d\u4ee4\u884c\u7a0b\u5e8f\u7684\u9879\u76ee\u5b9e\u4f8b\uff0c\u9879\u76ee\u6e90\u4ee3\u7801\u5728\u6587\u6863\u76ee\u5f55\u4e0b\u7684<code>src/minigrep</code>\u76ee\u5f55\u3002\u5f00\u53d1\u987a\u5e8f\u5982\u4e0b</p> <ul> <li>\u63a5\u6536\u547d\u4ee4\u884c\u53c2\u6570</li> <li>\u8bfb\u53d6\u6587\u4ef6</li> <li>\u91cd\u6784\uff1a\u6539\u8fdb\u6a21\u5757\u548c\u9519\u8bef\u5904\u7406</li> <li>\u4f7f\u7528TDD\uff08\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff09\u5f00\u53d1\u5e93\u529f\u80fd</li> <li>\u4f7f\u7528\u73af\u5883\u53d8\u91cf</li> <li>\u5c06\u9519\u8bef\u6d88\u606f\u5199\u5165\u6807\u51c6\u9519\u8bef\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u51fa</li> </ul>"},{"location":"12_cli/01_io_example_project/#_2","title":"\u4e8c\u3001\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1","text":"<p>TDD\uff08Test-Driven Development\uff09\uff0c\u5373\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff0c\u4e00\u822c\u9075\u5faa\u4ee5\u4e0b\u5f00\u53d1\u6b65\u9aa4</p> <ul> <li>\u7f16\u5199\u4e00\u4e2a\u4f1a\u5931\u8d25\u7684\u6d4b\u8bd5\uff0c\u8fd0\u884c\u8be5\u6d4b\u8bd5\uff0c\u786e\u4fdd\u5b83\u662f\u6309\u7167\u9884\u671f\u7684\u539f\u56e0\u5bfc\u81f4\u5931\u8d25</li> <li>\u7f16\u5199\u6216\u4fee\u6539\u8db3\u591f\u7684\u4ee3\u7801\uff0c\u8ba9\u6d4b\u8bd5\u901a\u8fc7</li> <li>\u91cd\u6784\u521a\u521a\u6dfb\u52a0\u6216\u4fee\u6539\u7684\u4ee3\u7801\uff0c\u5728\u91cd\u6784\u671f\u95f4\uff0c\u786e\u4fdd\u6d4b\u8bd5\u59cb\u7ec8\u4f1a\u901a\u8fc7</li> <li>\u8fd4\u56de\u6700\u5f00\u59cb\u7684\u6b65\u9aa4\uff0c\u7ee7\u7eed\u4e0b\u4e00\u8f6e\uff08\u4e0b\u4e00\u4e2a\u529f\u80fd\uff09\u7684\u5f00\u53d1</li> </ul> <p>\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff0c\u53ea\u662f\u4f17\u591a\u8f6f\u4ef6\u5f00\u53d1\u65b9\u5f0f\u4e2d\u7684\u4e00\u79cd\uff0c\u4f46\u4ed6\u5bf9\u4ee3\u7801\u7684\u8bbe\u8ba1\u5de5\u4f5c\u8d77\u5230\u6307\u5bfc\u548c\u5e2e\u52a9\u7684\u4f5c\u7528\u3002\u5148\u7f16\u5199\u6d4b\u8bd5\uff0c\u7136\u540e\u518d\u7f16\u5199\u80fd\u591f\u901a\u8fc7\u6d4b\u8bd5\u7684\u4ee3\u7801\uff0c\u4e5f\u6709\u52a9\u4e8e\u4fdd\u8bc1\u8f83\u9ad8\u7684\u6d4b\u8bd5\u8986\u76d6\u7387\u3002</p>"},{"location":"12_cli/01_io_example_project/#vs","title":"\u4e09\u3001\u6807\u51c6\u8f93\u51fa VS \u6807\u51c6\u9519\u8bef","text":"<p>\u5927\u591a\u6570\u7ec8\u7aef\u63d0\u4f9b\u4e24\u79cd\u8f93\u51fa\uff0c\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u6807\u51c6\u8f93\u51fa\uff1astdout\uff0crust\u53ef\u4ee5\u901a\u8fc7<code>println!</code>\u8fdb\u884c\u7ec8\u7aef\u8f93\u51fa\uff0c\u4e00\u822c\u7684\u4fe1\u606f\u5e94\u8be5\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u4e2d</p> </li> <li> <p>\u6807\u51c6\u9519\u8bef\uff1astderr\uff0crust\u53ef\u4ee5\u901a\u8fc7<code>eprintln!</code>\u8fdb\u884c\u7ec8\u7aef\u8f93\u51fa\uff0c\u9519\u8bef\u7684\u4fe1\u606f\u5e94\u8be5\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\u91cc</p> </li> </ul> <p>\u8fd9\u79cd\u533a\u5206\u6709\u597d\u5904\uff0c\u5982\uff1a\u6211\u4eec\u53ef\u4ee5\u662f\u6b63\u5e38\u7684\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u4e00\u4e2a\u8f93\u51fa\u6587\u4ef6\u91cc\uff0c\u800c\u9519\u8bef\u4fe1\u606f\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\uff0c\u8fbe\u5230\u8fc7\u6ee4\u8f93\u51fa\u5185\u5bb9\u7684\u6548\u679c\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p>"},{"location":"13_functional_programming/01_closure/","title":"\u95ed\u5305","text":""},{"location":"13_functional_programming/01_closure/#_2","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u95ed\u5305","text":""},{"location":"13_functional_programming/01_closure/#11","title":"1.1 \u95ed\u5305\u7684\u7279\u6027","text":"<p>\u95ed\u5305\uff1a\u53ef\u4ee5\u6355\u83b7\u5176\u6240\u5728\u73af\u5883\u7684\u533f\u540d\u51fd\u6570\u3002\u95ed\u5305\u5177\u4f53\u4ee5\u4e0b\u7279\u6027</p> <ul> <li>\u95ed\u5305\u662f\u4e2a\u533f\u540d\u51fd\u6570</li> <li>\u53ef\u4ee5\u4fdd\u5b58\u4e3a\u53d8\u91cf\uff0c\u6216\u8005\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\uff0c\u6216\u8005\u4f5c\u4e3a\u53e6\u5916\u4e00\u4e2a\u7684\u8fd4\u56de\u503c</li> <li>\u53ef\u4ee5\u5728\u67d0\u4e2a\u5730\u65b9\u521b\u5efa\u95ed\u5305\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2a\u4e0a\u4e0b\u6587\u8c03\u7528\u95ed\u5305\u6765\u5b8c\u6210\u8fd0\u7b97</li> <li>\u53ef\u4ece\u5176\u5b9a\u4e49\u7684\u4f5c\u7528\u57df\u6355\u83b7\u503c</li> </ul>"},{"location":"13_functional_programming/01_closure/#12","title":"1.2 \u751f\u6210\u81ea\u5b9a\u4e49\u8fd0\u52a8\u8ba1\u5212\u7a0b\u5e8f","text":"<p>\u4e0b\u9762\u6709\u4e00\u4e2a\u7a0b\u5e8f\u793a\u4f8b\uff0c\u8be5\u7a0b\u5e8f\u7684\u7b97\u6cd5\u903b\u8f91\u6211\u4eec\u4e0d\u5173\u5fc3\uff0c\u91cd\u70b9\u662f\u7b97\u6cd5\u4e2d\u7684\u8ba1\u7b97\u8fc7\u7a0b\u9700\u8981\u51e0\u79d2\u949f\u7684\u65f6\u95f4\u3002\u800c\u6211\u4eec\u4f18\u5316\u7684\u76ee\u6807\u662f\u4e0d\u8ba9\u7528\u6237\u53d1\u751f\u4e0d\u5fc5\u8981\u7684\u7b49\u5f85\uff0c\u4ec5\u5728\u5fc5\u8981\u65f6\u8c03\u7528\u8be5\u7b97\u6cd5\uff0c\u53ea\u8c03\u7528\u4e00\u6b21\u3002\u7a0b\u5e8f\u5982\u4e0b</p> <pre><code>use std::thread;\nuse std::time::Duration;\nfn main() {\nlet simulated_user_specified_value = 10;\nlet simulated_random_number = 7;\ngenerate_workout(simulated_user_specified_value, simulated_random_number);\n}\n// \u751f\u6210\u8fd0\u52a8\u8ba1\u5212\nfn simulated_expensive_calculation(intensive: u32) -&gt; u32 {\nprintln!(\"calculating slowly ...\");\nthread::sleep(Duration::from_secs(2));\nintensive\n}\n/**\n * \u53c2\u65701:\u5f3a\u5ea6\n * \u53c2\u65702:\u968f\u673a\u6570\n */\nfn generate_workout(intensity: u32, random_number: u32) {\nif intensity &lt; 25 {\n// \u5728\u4ee5\u4e0b\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528\u4e86\u4e24\u6b21\u8017\u65f6\u51fd\u6570\uff0c\u53ef\u4ee5\u4f18\u5316\nprintln!(\n\"Today, do {} pushups\",\nsimulated_expensive_calculation(intensity)\n);\nprintln!(\n\"Next, do {} situps!\",\nsimulated_expensive_calculation(intensity)\n);\n} else {\nif random_number == 3 {\nprintln!(\"Take a break today! Remember to stay hydrated\")\n} else {\nprintln!(\n\"Today, run for {} minutes!\",\nsimulated_expensive_calculation(intensity)\n);\n}\n}\n}\n</code></pre> <p>\u6211\u4eec\u5148\u8fdb\u884c\u7b2c\u4e00\u6d4b\u4f18\u5316\uff0c\u4f18\u5316\u540e\u7684<code>generate_workout</code>\u51fd\u6570\u5982\u4e0b</p> <pre><code>fn generate_workout(intensity: u32, random_number: u32) {\nlet expensive_result = simulated_expensive_calculation(intensity);\nif intensity &lt; 25 {\nprintln!(\n\"Today, do {} pushups\",\nexpensive_result\n);\nprintln!(\n\"Next, do {} situps!\",\nexpensive_result\n);\n} else {\nif random_number == 3 {\nprintln!(\"Take a break today! Remember to stay hydrated\")\n} else {\nprintln!(\n\"Today, run for {} minutes!\",\nexpensive_result\n);\n}\n}\n}\n</code></pre> <p>\u6b64\u65f6\uff0c\u9488\u5bf9<code>intensity &lt; 25</code>\u7684\u60c5\u51b5\uff0c\u8017\u65f6\u7684\u51fd\u6570\u4e0d\u518d\u9700\u8981\u8c03\u7528\u4e24\u6b21\uff0c\u8c03\u7528\u662f\u5728<code>if</code>\u5224\u65ad\u4e4b\u524d\u6267\u884c\u7684\u3002\u4f46\u662f\u6b64\u65f6\u4e5f\u5f15\u5165\u4e86\u4e00\u4e2a\u5176\u4ed6\u7684\u95ee\u9898\uff0c\u5728<code>else</code>\u7684\u903b\u8f91\u91cc\uff0c\u5f53\u968f\u673a\u6570\u7b49\u4e8e3\u65f6\uff0c\u662f\u4e0d\u9700\u8981\u8c03\u7528\u8017\u65f6\u51fd\u6570\u7684\u3002\u800c\u73b0\u5728\u7684\u5199\u6cd5\u662f\u65e0\u8bba\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4f1a\u8c03\u7528\u51fd\u6570\uff0c\u8fd9\u663e\u5f97\u6709\u70b9\u6d6a\u8d39\u4e86\u3002</p>"},{"location":"13_functional_programming/01_closure/#13","title":"1.3 \u4f7f\u7528\u95ed\u5305","text":"<p>\u800c\u6211\u4eec\u771f\u6b63\u5e0c\u671b\u7684\u662f\u51fd\u6570\u5b9a\u4e49\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u5728\u9700\u8981\u7ed3\u679c\u7684\u65f6\u5019\u624d\u6267\u884c\u76f8\u5173\u4ee3\u7801\uff0c\u8fd9\u6b63\u662f\u95ed\u5305\u7684\u7528\u6b66\u4e4b\u5730\u3002\u4e0b\u9762\u6211\u4eec\u4f7f\u7528\u95ed\u5305\u6765\u89e3\u51b3\u8be5\u95ee\u9898\u3002\u4f7f\u7528\u95ed\u5305\u4f18\u5316\u4e4b\u540e\u7684<code>generate_workout</code>\u51fd\u6570\u5982\u4e0b</p> <pre><code>fn generate_workout(intensity: u32, random_number: u32) {\n// \u5b9a\u4e49\u4e00\u4e2a\u95ed\u5305\uff0c\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u63a5\u6536\nlet expensitive_closure = |num| {\nprintln!(\"calculating slowly ...\");\nthread::sleep(Duration::from_secs(2));\nnum\n};\nif intensity &lt; 25 {\nprintln!(\"Today, do {} pushups\", expensitive_closure(intensity));\nprintln!(\"Next, do {} situps!\", expensitive_closure(intensity));\n} else {\nif random_number == 3 {\nprintln!(\"Take a break today! Remember to stay hydrated\")\n} else {\nprintln!(\"Today, run for {} minutes!\", expensitive_closure(intensity));\n}\n}\n}\n</code></pre>"},{"location":"13_functional_programming/01_closure/#_3","title":"\u4e8c\u3001\u95ed\u5305\u7684\u7c7b\u578b\u63a8\u65ad\u548c\u6807\u6ce8","text":""},{"location":"13_functional_programming/01_closure/#21","title":"2.1 \u95ed\u5305\u7684\u7c7b\u578b\u63a8\u65ad","text":"<p>\u95ed\u5305\u4e0d\u5f3a\u5236\u8981\u6c42\u6807\u6ce8\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7c7b\u578b\u3002\u800c\u51fd\u6570\u5f3a\u5236\u6807\u6ce8\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u56e0\u4e3a\u51fd\u6570\u662f\u66b4\u9732\u7ed9\u7528\u6237\u7684\u63a5\u53e3\u7684\u4e00\u90e8\u5206\uff0c\u4e25\u683c\u5b9a\u4e49\u63a5\u53e3\u6709\u52a9\u4e8e\u6240\u6709\u4eba\u5bf9\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u53d6\u5f97\u5171\u8bc6\u3002\u4f46\u662f\u95ed\u5305\u5e76\u4e0d\u4f1a\u88ab\u7528\u4e8e\u8fd9\u6837\u7684\u66b4\u9732\u63a5\u53e3\uff0c\u95ed\u5305\u4f1a\u88ab\u5b58\u5728\u53d8\u91cf\u91cc\uff0c\u5728\u4f7f\u7528\u7684\u65f6\u5019\u4e0d\u9700\u8981\u547d\u540d\uff0c\u4e5f\u4e0d\u4f1a\u66b4\u9732\u7ed9\u4ee3\u7801\u5e93\u7684\u7528\u6237\uff0c\u6240\u4ee5\u95ed\u5305\u5e76\u4e0d\u5f3a\u5236\u8981\u6c42\u6807\u6ce8\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7c7b\u578b\u3002</p> <p>\u95ed\u5305\u901a\u5e38\u5f88\u77ed\u5c0f\uff0c\u53ea\u5728\u72ed\u5c0f\u7684\u4e0a\u4e0b\u6587\u4e2d\u5de5\u4f5c\uff0c\u7f16\u8bd1\u5668\u901a\u5e38\u80fd\u53ef\u9760\u5730\u63a8\u65ad\u51fa\u7c7b\u578b\u3002\u5982\u679c\u6211\u4eec\u660e\u786e\u6807\u6ce8\u51fa\u53c2\u6570\u7c7b\u578b\u4e5f\u4e0d\u662f\u4e0d\u53ef\u4ee5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>let expensitive_closure = |num: u32| {\nprintln!(\"calculating slowly ...\");\nthread::sleep(Duration::from_secs(2));\nnum\n};\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u95ed\u5305\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u624b\u52a8\u6dfb\u52a0\u4e86\u53c2\u6570\u7c7b\u578b\u6807\u6ce8\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u6dfb\u52a0\u4e5f\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\uff0c\u56e0\u4e3arust\u80fd\u81ea\u52a8\u63a8\u65ad\u51fa\u7c7b\u578b\u3002</p>"},{"location":"13_functional_programming/01_closure/#22","title":"2.2 \u51fd\u6570\u548c\u95ed\u5305\u7684\u5b9a\u4e49\u8bed\u6cd5","text":"<p>\u9996\u5148\u6211\u4eec\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u793a\u4f8b</p> <pre><code>fn add_one_v1 (x: u32) -&gt; u32 { x + 1 }\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u95ed\u5305\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u51fd\u6570\u7684\u529f\u80fd\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>let add_one_v2 = |x: u32| -&gt; u32 { x + 1 };\n</code></pre> <p>\u7531\u4e8e\u95ed\u5305\u53ef\u4ee5\u7701\u7565\u53c2\u6570\u7c7b\u578b\u6807\u6ce8\uff0c\u53ef\u4ee5\u4f18\u5316\u6210\u4ee5\u4e0b\u7684\u95ed\u5305\u4ee3\u7801</p> <pre><code>let add_one_v2 = |x| { x + 1 };\n</code></pre> <p>\u53c8\u7531\u4e8e\u95ed\u5305\u4e2d\u53ea\u6709\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u7701\u7565\u5927\u62ec\u53f7\uff0c\u6700\u7ec8\u4f18\u5316\u6210\u4ee5\u4e0b\u4ee3\u7801</p> <pre><code>let add_one_v2 = |x|  x + 1;\n</code></pre>"},{"location":"13_functional_programming/01_closure/#23","title":"2.3 \u6ce8\u610f","text":"<p>\u95ed\u5305\u7684\u5b9a\u4e49\u6700\u7ec8\u53ea\u4f1a\u4e3a\u53c2\u6570/\u8fd4\u56de\u503c\u63a8\u65ad\u51fa\u552f\u4e00\u5177\u4f53\u7c7b\u578b\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet example_closure = |x| x;\n// \u6267\u884c\u5230\u4ee5\u4e0b\u7684\u4e00\u884c\u4ee3\u7801\uff0c\u5c06\u95ed\u5305\u53c2\u6570\u7ed1\u5b9a\u4e3aString\u7c7b\u578b\nlet s = example_closure(String::from(\"hello\"));\n// \u5728\u4e0b\u9762\u4e00\u884c\uff0c\u4f20\u4e86int\u7c7b\u578b\uff0c\u5c06\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u62a5\u9519\uff0c\u56e0\u4e3arust\u5df2\u5c06\u95ed\u5305\u53c2\u6570\u63a8\u65ad\u5176\u4e3aString\u7c7b\u578b\nlet n = example_closure(5);\n}\n</code></pre>"},{"location":"13_functional_programming/01_closure/#fn-trait","title":"\u4e09\u3001\u4f7f\u7528\u6cdb\u578b\u53c2\u6570\u548cFn Trait\u6765\u5b58\u50a8\u95ed\u5305","text":"<p>\u5728\u201c\u4e00\u201d\u4e2d\u7684\u4ee3\u7801\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53\u6267\u884c<code>intensity &lt; 25</code>\u7684\u903b\u8f91\u7684\u65f6\u5019\uff0c\u4f1a\u6267\u884c\u4e24\u6b21\u8017\u65f6\u51fd\u6570\u3002\u6211\u4eec\u7ee7\u7eed\u6765\u4f18\u5316\u201c\u4e00\u201d\u4e2d\u7684\u4ee3\u7801\u3002\u6211\u4eec\u521b\u5efa\u4e00\u4e2astruct\uff0c\u628a\u95ed\u5305\u548c\u8c03\u7528\u7ed3\u679c\u5b58\u5230\u7ed3\u6784\u4f53\u4e2d\u3002\u5219\u505a\u5230\uff1a\u53ea\u4f1a\u5728\u9700\u8981\u7ed3\u679c\u65f6\u624d\u6267\u884c\u95ed\u5305\uff0c\u5e76\u4e14\u53ef\u4ee5\u7f13\u5b58\u7ed3\u679c\u3002\u8fd9\u79cd\u6a21\u5f0f\u901a\u5e38\u53eb\u505a\u8bb0\u5fc6\u8bdd\uff08memozation\uff09\u6216\u5ef6\u8fdf\u8ba1\u7b97\uff08lazy evaluation\uff09\u3002\u9700\u8981\u6ce8\u610f\u7684\u6761\u76ee\u5982\u4e0b</p> <ul> <li>struct\u7684\u5b9a\u4e49\u9700\u8981\u77e5\u9053\u6240\u6709\u5b57\u6bb5\u7684\u7c7b\u578b\uff0c\u5219\u9700\u6307\u660e\u95ed\u5305\u7684\u7c7b\u578b</li> <li>\u6bcf\u4e2a\u95ed\u5305\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u552f\u4e00\u7684\u533f\u540d\u7c7b\u578b\uff0c\u5373\u4f7f\u4e24\u4e2a\u95ed\u5305\u7b7e\u540d\u5b8c\u5168\u4e00\u6837</li> </ul> <p>\u4e3a\u4e86\u5728\u7ed3\u6784\u4f53\u91cc\u4f7f\u7528\u95ed\u5305\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u6cdb\u578b\u548cTrait Bound\u7ea6\u675f\u3002\u5728\u6807\u51c6\u5e93\u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684Fn Trait\uff0c\u6240\u6709\u7684\u95ed\u5305\u90fd\u81f3\u5c11\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7684Trait\u4e4b\u4e00</p> <ul> <li>Fn</li> <li>FnMut</li> <li>FnOnce</li> </ul> <p>\u4e0b\u9762\u6211\u4eec\u6765\u4f18\u5316\u201c\u4e00\u201d\u4e2d\u7684\u4ee3\u7801\uff0c\u4e0b\u9762\u662f\u4f18\u5316\u7684\u8fc7\u7a0b</p> <p>\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53</p> <pre><code>struct Cacher&lt;T&gt; where T: Fn(u32) -&gt; u32\n{\ncalculation: T,\nvalue: Option&lt;u32&gt;\n}\n</code></pre> <p>\u6211\u4eec\u628a\u95ed\u5305\u53eb\u505a<code>calculation</code>\uff0c\u5176\u6b21\u628a\u8981\u7f13\u5b58\u7684\u503c\u53eb\u505a<code>value</code>\uff0c\u5728\u8fd0\u884c\u95ed\u5305\u4e4b\u524d\uff0cvalue\u7684\u503c\u662fnull\uff0c\u5f53\u8fd0\u884c\u95ed\u5305\u4e4b\u540e\uff0c\u5c31\u4f1a\u628a\u95ed\u5305\u7684\u7ed3\u679c\u5b58\u653e\u5230value\u7684\u5b57\u6bb5\u4e2d\uff0c\u8fd9\u5c31\u662f\u7f13\u5b58\u4e86\u3002\u5982\u679c\u4ee5\u540e\u518d\u6b21\u8bf7\u6c42\u8fd9\u4e2a\u95ed\u5305\u7684\u7ed3\u679c\uff0c\u6709\u503c\u5219\u76f4\u63a5\u53d6\u5373\u53ef\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u4e3a\u7ed3\u6784\u4f53\u6dfb\u52a0\u4e00\u4e2a\u5173\u8054\u51fd\u6570\uff0c\u518d\u5b9e\u73b0\u53d6\u503c\u7684\u65b9\u6cd5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>impl&lt;T&gt; Cacher&lt;T&gt;\nwhere\nT: Fn(u32) -&gt; u32,\n{\nfn new(calculation: T) -&gt; Cacher&lt;T&gt; {\nCacher {\ncalculation,\nvalue: None,\n}\n}\nfn value(&amp;mut self, arg: u32) -&gt; u32 {\nmatch self.value {\nSome(v) =&gt; v,\nNone =&gt; {\nlet v = (self.calculation)(arg);\nself.value = Some(v);\nv\n}\n}\n}\n}\n</code></pre> <p>\u6700\u540e\u4fee\u6539<code>generate_workout</code>\u51fd\u6570\u5982\u4e0b</p> <pre><code>fn generate_workout(intensity: u32, random_number: u32) {\n// \u5b9a\u4e49\u4e00\u4e2a\u95ed\u5305\uff0c\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u63a5\u6536\nlet mut expensitive_closure = Cacher::new(|num| {\nprintln!(\"calculating slowly ...\");\nthread::sleep(Duration::from_secs(2));\nnum\n});\nif intensity &lt; 25 {\nprintln!(\"Today, do {} pushups\", expensitive_closure.value(intensity));\nprintln!(\"Next, do {} situps!\", expensitive_closure.value(intensity));\n} else {\nif random_number == 3 {\nprintln!(\"Take a break today! Remember to stay hydrated\")\n} else {\nprintln!(\"Today, run for {} minutes!\", expensitive_closure.value(intensity));\n}\n}\n}\n</code></pre>"},{"location":"13_functional_programming/01_closure/#cacher","title":"\u56db\u3001\u4f7f\u7528\u7f13\u5b58\u5668\uff08Cacher\uff09\u5b9e\u73b0\u7684\u9650\u5236","text":"<p>\u5728\u201c\u4e09\u201d\u7684\u793a\u4f8b\u4e2d\uff0c\u7f13\u5b58\u5668\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u4e0b\u9762\u6211\u4eec\u5c06\u63a2\u8ba8\u89e3\u51b3\u65b9\u6848</p> <ul> <li> <p>Cacher\u5b9e\u4f8b\u5047\u5b9a\u9488\u5bf9\u4e0d\u540c\u7684\u53c2\u6570arg\uff0cvalue\u65b9\u6cd5\u603b\u6c47\u5f97\u5230\u540c\u6837\u7684\u503c\uff1a\u53ef\u4ee5\u4f7f\u7528HashMap\u4ee3\u66ff\u5355\u4e2a\u503c\uff0ckey\u4e3aarg\u53c2\u6570\uff0cvalue\u4e3a\u6267\u884c\u95ed\u5305\u7684\u7ed3\u679c\u3002</p> </li> <li> <p>\u53ea\u80fd\u63a5\u6536\u4e00\u4e2au32\u7c7b\u578b\u7684\u53c2\u6570\u548cu32\u7c7b\u578b\u7684\u8fd4\u56de\u503c\uff1a\u5f15\u5165\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u6cdb\u578b\u53c2\u6570\u5373\u53ef\u3002</p> </li> </ul>"},{"location":"13_functional_programming/01_closure/#_4","title":"\u4e94\u3001\u4f7f\u7528\u95ed\u5305\u6355\u83b7\u73af\u5883","text":""},{"location":"13_functional_programming/01_closure/#51","title":"5.1 \u4f7f\u7528\u95ed\u5305\u80fd\u6355\u83b7\u73af\u5883","text":"<p>\u95ed\u5305\u53ef\u4ee5\u6355\u83b7\u4ed6\u4eec\u6240\u5728\u7684\u73af\u5883\uff0c\u5728\u4e0a\u9762\u7684\u95ed\u5305\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u5185\u90e8\u7684\u533f\u540d\u51fd\u6570\u6765\u4f7f\u7528\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u95ed\u5305\u8fd8\u6709\u51fd\u6570\u6240\u4e0d\u5177\u5907\u7684\u529f\u80fd\uff0c\u95ed\u5305\u53ef\u4ee5\u8bbf\u95ee\u5b9a\u4e49\u5b83\u7684\u4f5c\u7528\u57df\u5185\u7684\u53d8\u91cf\uff0c\u800c\u666e\u901a\u51fd\u6570\u5219\u4e0d\u80fd\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = 4;\nlet euqal_to_x = |z| z == x;\nlet y = 4;\nassert!(equal_to_x(y));\n}\n</code></pre> <p>\u4f46\u662f\u6355\u83b7\u4ed6\u4eec\u6240\u5728\u7684\u73af\u5883\u662f\u9700\u8981\u5185\u5b58\u5f00\u9500\u7684\uff0c\u800c\u5927\u90e8\u5206\u8bf7\u6c42\u6211\u4eec\u4e0d\u9700\u8981\u6355\u83b7\u73af\u5883\uff0c\u4e5f\u4e0d\u60f3\u4e3a\u5b83\u4ea7\u751f\u989d\u5916\u7684\u5185\u5b58\u5f00\u9500\u3002\u6240\u4ee5\u51fd\u6570\u5c31\u6c38\u8fdc\u4e0d\u4f1a\u4ea7\u751f\u8fd9\u7c7b\u7684\u5f00\u9500\u3002</p>"},{"location":"13_functional_programming/01_closure/#52","title":"5.2 \u95ed\u5305\u4ece\u6240\u5728\u73af\u5883\u6355\u83b7\u503c\u7684\u65b9\u5f0f","text":"<p>\u4e0e\u51fd\u6570\u83b7\u53d6\u53c2\u6570\u7684\u4e09\u79cd\u65b9\u5f0f\u4e00\u6837\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <ul> <li>\u53d6\u5f97\u6240\u6709\u6743\uff1aFnOnce</li> <li>\u53ef\u53d8\u501f\u7528\uff1aFnMut</li> <li>\u4e0d\u53ef\u53d8\u501f\u7528\uff1aFn</li> </ul> <p>\u5f53\u6211\u4eec\u521b\u5efa\u95ed\u5305\u65f6\uff0c\u901a\u8fc7\u95ed\u5305\u5bf9\u73af\u5883\u7684\u4f7f\u7528\uff0cRust\u53ef\u4ee5\u63a8\u65ad\u51fa\u5177\u4f53\u4f7f\u7528\u54ea\u4e2aTrait\u3002\u6240\u6709\u7684\u95ed\u5305\u90fd\u5b9e\u73b0\u4e86FnOnce\uff1b\u90a3\u4e9b\u6ca1\u6709\u79fb\u52a8\u6355\u83b7\u53d8\u91cf\u7684\u95ed\u5305\u5b9e\u73b0\u4e86FnMut\uff1b\u90a3\u4e9b\u65e0\u9700\u53ef\u53d8\u8bbf\u95ee\u6355\u83b7\u53d8\u91cf\u7684\u95ed\u5305\u5b9e\u73b0\u4e86Fn\u3002\u5b9e\u9645\u4e0a\u8ffd\u8e2a\u5176\u5e95\u5c42\u539f\u7406\u8fd8\u662f\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\u5373\u53ef\uff1a\u6240\u6709\u5b9e\u73b0\u4e86FnMut\u7684\u95ed\u5305\u90fd\u5b9e\u73b0\u4e86Fn\uff0c\u6240\u6709\u7684\u95ed\u5305\u90fd\u5b9e\u73b0\u4e86FnOnce\u3002</p>"},{"location":"13_functional_programming/01_closure/#53-move","title":"5.3 move\u5173\u952e\u5b57","text":"<p>\u5728\u53c2\u6570\u5217\u8868\u524d\u4f7f\u7528<code>move</code>\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u5f3a\u5236\u95ed\u5305\u53d6\u5f97\u5b83\u6240\u4f7f\u7528\u7684\u73af\u5883\u503c\u7684\u6240\u6709\u6743\u3002\u7528\u4e8e\uff1a\u5f53\u95ed\u5305\u4f20\u9012\u7ed9\u65b0\u7ebf\u7a0b\u4ee5\u79fb\u52a8\u6570\u636e\u4f7f\u5176\u5f52\u65b0\u7ebf\u7a0b\u6240\u6709\u65f6\u3002\u5982\u4e0b\u793a\u4f8b\u7684\u9519\u8bef\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = vec![1, 2, 3];\nlet equal_to_x = move |z| z == x;\n// \u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0cx \u7684\u6240\u6709\u6743\u5df2\u7ecf\u88ab\u79fb\u52a8\u5230\u4e86\u95ed\u5305\u91cc\uff0c\u4e0b\u9762\u8fd9\u884c\u4ee3\u7801\u7ee7\u7eed\u501f\u7528\uff0c\u5c06\u4f1a\u53d1\u751f\u9519\u8bef\nprintln!(\"can't use x here: {:?}\", x);\n}\n</code></pre> <p>\u5f53\u6307\u5b9aFn Trait bound\u4e4b\u4e00\u65f6\uff0c\u9996\u5148\u7528Fn\uff0c\u57fa\u4e8e\u95ed\u5305\u91cc\u7684\u60c5\u51b5\uff0c\u5982\u679c\u9700\u8981FnOnce\u6216FnMut\uff0c\u7f16\u8bd1\u5668\u4f1a\u518d\u544a\u8bc9\u4f60\u3002</p>"},{"location":"13_functional_programming/02_iterator/","title":"\u8fed\u4ee3\u5668","text":""},{"location":"13_functional_programming/02_iterator/#_2","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u8fed\u4ee3\u5668\uff1f","text":"<p>\u8fed\u4ee3\u5668\u6a21\u5f0f\u662f\u5bf9\u4e00\u7cfb\u5217\u9879\u6267\u884c\u67d0\u4e9b\u4efb\u52a1\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u8fed\u4ee3\u5668\u8d1f\u8d23\u904d\u5386\u6bcf\u4e2a\u9879\u76ee\uff0c\u5e76\u786e\u5b9a\u5e8f\u5217\uff08\u904d\u5386\uff09\u4f55\u65f6\u5b8c\u6210\u3002</p> <p>Rust\u91cc\u7684\u8fed\u4ee3\u5668\u662f\u60f0\u6027\u7684\uff0c\u9664\u975e\u8c03\u7528\u6d88\u8d39\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5\uff0c\u5426\u5219\u8fed\u4ee3\u5668\u672c\u8eab\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u3002\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff1a\u8fed\u4ee3\u5668\u5728\u4e0d\u4f7f\u7528\u5b83\u7684\u65f6\u5019\uff0c\u5b83\u4ec0\u4e48\u90fd\u4e0d\u505a\u3002\u5f53\u6211\u4eec\u4f7f\u7528\u4e86\u67d0\u4e9b\u53ef\u4ee5\u6d88\u8017\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u8fd9\u65f6\u5019\u8fed\u4ee3\u5668\u624d\u771f\u6b63\u8d77\u5230\u4e86\u8fed\u4ee3\u5668\u7684\u4f5c\u7528\u3002\u6211\u4eec\u5148\u6765\u770b\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\nlet v1 = vec![1, 2, 3];\nlet v1_iter = v1.iter();\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0cv1\u4f7f\u7528\u8c03\u7528iter\u65b9\u6cd5\u5f97\u5230\u4e86\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u4f46\u662f\u8fed\u4ee3\u5668\u6ca1\u6709\u4f7f\u7528\uff0c\u90a3\u4e48\u8fed\u4ee3\u5668\u4e0d\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002\u6211\u4eec\u53ef\u4ee5\u5bf9\u8fed\u4ee3\u5668\u8fdb\u884c\u904d\u5386\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>for val in v1_iter {\nprintln!(\"Got: {}\", val);\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u76f8\u5f53\u4e8e\u8fed\u4ee3\u5668\u91cc\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u7528\u5728\u4e86\u5faa\u73af\u91cc\uff0c\u5177\u4f53\u7684\u7528\u6237\u5c31\u662f\u628a\u5b83\u6253\u5370\u51fa\u6765\u3002</p>"},{"location":"13_functional_programming/02_iterator/#iterator-traitnext","title":"\u4e8c\u3001Iterator trait\u548cnext\u65b9\u6cd5","text":"<p>\u6240\u6709\u7684\u8fed\u4ee3\u5668\u90fd\u5b9e\u73b0\u4e86 Iterator trait\uff0c\u5176\u5b9a\u4e49\u4e8e\u6807\u51c6\u5e93\uff0c\u5927\u81f4\u5982\u4e0b</p> <pre><code>pub trait Iterator {\ntype Item;\nfn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;\n// methods with default implementations elided\n}\n</code></pre> <p>type Item\u548cSelf::Item\u5b9a\u4e49\u4e86\u4e0e\u6b64trait\u7684\u5173\u8054\u7c7b\u578b\uff08\u524d\u9762\u8fd8\u6ca1\u63d0\u5230\u5173\u8054\u7c7b\u578b\uff09\u3002\u73b0\u5728\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\uff1a\u5b9e\u73b0Iterator trait\u9700\u8981\u4f60\u5b9a\u4e49\u4e00\u4e2aItem\u7c7b\u578b\uff0c\u5b83\u7528\u4e8enext\u65b9\u6cd5\u7684\u8fd4\u56de\u7c7b\u578b\uff08\u8fed\u4ee3\u5668\u7684\u8fd4\u56de\u7c7b\u578b\uff09\u3002</p> <p>\u6240\u4ee5Iterator Trait\u4ec5\u8981\u6c42\u5b9e\u73b0\u4e00\u4e2a\u65b9\u6cd5\uff1anext\u3002next\u65b9\u6cd5\u6bcf\u6b21\u8fd4\u56de\u8fed\u4ee3\u5668\u4e2d\u7684\u4e00\u9879\uff0c\u5373\u8fed\u4ee3\u5668\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u5305\u88f9\u5728<code>Some</code>\u91cc\uff0c\u8fed\u4ee3\u7ed3\u675f\u7684\u65f6\u5019\uff0c\u8fd4\u56de<code>None</code>\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528next\u65b9\u6cd5\u3002\u5982\u4e0b\u793a\u4f8b\u7684\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn iterator_demonstration() {\nlet v1 = vec![1, 2, 3];\nlet mut v1_iter = v1.iter();\nassert_eq!(v1_iter.next(), Some(&amp;1));\nassert_eq!(v1_iter.next(), Some(&amp;2));\nassert_eq!(v1_iter.next(), Some(&amp;3));\n}\n}\n</code></pre>"},{"location":"13_functional_programming/02_iterator/#_3","title":"\u4e09\u3001\u51e0\u4e2a\u8fed\u4ee3\u65b9\u6cd5","text":"<p>\u8fed\u4ee3\u5668\u5b58\u5728\u51e0\u4e2a\u8fed\u4ee3\u65b9\u6cd5\uff0c\u5206\u522b\u5982\u4e0b</p> <ul> <li> <p>iter\u65b9\u6cd5\uff1a\u5728\u4e0d\u53ef\u53d8\u5f15\u7528\uff08\u6307\u7684\u662f\u5143\u7d20\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u5e76\u4e0d\u662f\u8fed\u4ee3\u5668\u672c\u8eab\uff09\u4e0a\u521b\u5efa\u8fed\u4ee3\u5668\u3002</p> </li> <li> <p>into_iter\u65b9\u6cd5\uff1a\u521b\u5efa\u8fed\u4ee3\u5668\u4f1a\u83b7\u5f97\u6240\u6709\u6743\u3002</p> </li> <li> <p>iter_mut\u65b9\u6cd5\uff1a\u8fed\u4ee3\u53ef\u53d8\u5f15\u7528\u3002</p> </li> </ul>"},{"location":"13_functional_programming/02_iterator/#_4","title":"\u56db\u3001\u6d88\u8017\u548c\u4ea7\u751f\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5","text":""},{"location":"13_functional_programming/02_iterator/#41","title":"4.1 \u6d88\u8017\u578b\u8fed\u4ee3\u5668","text":"<p>\u5728\u6807\u51c6\u5e93\u4e2d\uff0cIterator trait\u6709\u4e00\u4e9b\u9ed8\u8ba4\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u5176\u4e2d\u6709\u4e00\u90e8\u5206\u65b9\u6cd5\u4f1a\u8c03\u7528next\u65b9\u6cd5\u3002\u6240\u4ee5\u5982\u679c\u6211\u4eec\u60f3\u5b9e\u73b0 Iterator trait\u65f6\u5c31\u5fc5\u987b\u5b9e\u73b0next\u65b9\u6cd5\u3002\u6211\u4eec\u628a\u8c03\u7528next\u7684\u65b9\u6cd5\u53eb\u505a\u201c\u6d88\u8017\u578b\u9002\u914d\u5668\u201d\uff0c\u6700\u7ec8\u8c03\u7528next\u65b9\u6cd5\u7684\u8fc7\u7a0b\u4f1a\u628a\u8fed\u4ee3\u5668\u8017\u5c3d\u3002</p> <p>\u4f8b\u5982\uff1asum\u65b9\u6cd5\u4f1a\u6d88\u8017\u8fed\u4ee3\u5668\uff0c\u5e76\u4e14\u53d6\u5f97\u8fed\u4ee3\u5668\u7684\u6240\u6709\u6743\uff0csum\u65b9\u6cd5\u5c31\u662f\u53cd\u590d\u8c03\u7528next\u6765\u7f16\u8bd1\u5143\u7d20\uff0c\u6bcf\u6b21\u8fed\u4ee3\uff0c\u628a\u5f53\u524d\u5143\u7d20\u6dfb\u52a0\u5230\u4e00\u4e2a\u603b\u548c\u91cc\uff0c\u8fed\u4ee3\u7ed3\u675f\uff0c\u8fd4\u56de\u603b\u548c\u3002\u5982\u4e0b\u793a\u4f8b\u7684\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn iterator_sum() {\nlet v1 = vec![1, 2, 3];\nlet v1_iter = v1.iter();\nlet total: i32 = v1_iter.sum();\nassert_eq!(total, 6);\n}\n}\n</code></pre>"},{"location":"13_functional_programming/02_iterator/#42","title":"4.2 \u4ea7\u751f\u5176\u4ed6\u8fed\u4ee3\u5668\u7684\u65b9\u6cd5","text":"<p>\u5b9a\u4e49\u5728 Iterator trait \u4e0a\u7684\u53e6\u4e00\u4e2a\u65b9\u6cd5\u53eb\u505a\u201c\u8fed\u4ee3\u5668\u9002\u914d\u5668\u201d\uff0c\u5b83\u4eec\u7684\u4f5c\u7528\u662f\u628a\u8fed\u4ee3\u5668\u8f6c\u6362\u4e3a\u4e0d\u540c\u7c7b\u578b\u7684\u8fed\u4ee3\u5668\u3002\u53ef\u4ee5\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528\u4f7f\u7528\u591a\u4e2a\u8fed\u4ee3\u5668\u6765\u6267\u884c\u590d\u6742\u7684\u64cd\u4f5c\uff0c\u8fd9\u79cd\u8c03\u7528\u53ef\u8bfb\u6027\u9ad8\u3002</p> <p>\u4f8b\u5982\uff1amap\u65b9\u6cd5\uff0c\u63a5\u6536\u4e00\u4e2a\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u4e2a\u95ed\u5305\u4f5c\u7528\u57df\u8fed\u4ee3\u5668\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u4ed6\u628a\u5f53\u524d\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u8f6c\u5316\u4e3a\u53e6\u5916\u4e00\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u8fd9\u4e9b\u53e6\u5916\u7684\u5143\u7d20\u5c31\u7ec4\u6210\u4e86\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668\u3002\u4f46\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fed\u4ee3\u5668\u662f\u60f0\u6027\u7684\uff0c\u5982\u679c\u4e0d\u6d88\u8017\u5b83\u4eec\uff0c\u4ed6\u4eec\u5c06\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u64cd\u4f5c\uff0c\u5982\u4e0b\u793a\u4f8b\u7684\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn iterator_sum() {\nlet v1 = vec![1, 2, 3];\nv1.iter().map(|x| x+1);\n}\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5e76\u4e0d\u4f1a\u5bf9v1\u4e2d\u76843\u4e2a\u5143\u7d20\u8fdb\u884c\u52a01\u64cd\u4f5c\u3002\u5982\u679c\u6211\u4eec\u6b64\u65f6\u8c03\u7528\u4e00\u4e2a\u6d88\u8017\u578b\u7684<code>collect</code>\u65b9\u6cd5\uff0c\u5b83\u4f1a\u628a\u6240\u6709\u7684\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u67d0\u4e2a\u6570\u636e\u7c7b\u578b\u7684\u96c6\u5408\u91cc\u3002\u81f3\u4e8e\u662f\u6536\u96c6\u7684\u96c6\u5408\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u6211\u4eec\u4f7f\u7528<code>&lt;_&gt;</code>\u6807\u6ce8\u8ba9rust\u63a8\u65ad\u5373\u53ef\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod tests {\n#[test]\nfn iterator_sum() {\nlet v1 = vec![1, 2, 3];\nlet v2: Vec&lt;_&gt; = v1.iter().map(|x| x+1).collect();\nassert_eq!(v2, vec![2, 3, 4]);\n}\n}\n</code></pre>"},{"location":"13_functional_programming/02_iterator/#43","title":"4.3 \u603b\u7ed3","text":"<p>\u901a\u8fc7\u201c4.1\u201d\u3001\u201c4.2\u201d\u4e2d\u7684\u793a\u4f8b\uff0c\u603b\u7ed3\u5982\u4e0b</p> <ul> <li>\u201c\u6d88\u8017\u578b\u9002\u914d\u5668\u201d\u65b9\u6cd5\uff1asum\u3001collect</li> <li>\u201c\u8fed\u4ee3\u5668\u9002\u914d\u5668\u201d\u65b9\u6cd5\uff1amap</li> </ul>"},{"location":"13_functional_programming/02_iterator/#_5","title":"\u4e94\u3001\u4f7f\u7528\u95ed\u5305\u6355\u83b7\u73af\u5883","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>filter</code>\u65b9\u6cd5\u6765\u6355\u83b7\u73af\u5883\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u4e2a\u95ed\u5305\u5728\u904d\u5386\u8fed\u4ee3\u5668\u7684\u6bcf\u4e2a\u5143\u7d20\u65f6\uff0c\u90fd\u4f1a\u8fd4\u56debool\u7c7b\u578b\u3002\u5982\u679c\u95ed\u5305\u8fd4\u56detrue\uff0c\u5219\u5f53\u524d\u5143\u7d20\u5c06\u4f1a\u5305\u542b\u5728filter\u4ea7\u751f\u7684\u8fed\u4ee3\u5668\u4e2d\uff1b\u5982\u679c\u95ed\u5305\u8fd4\u56defalse\uff0c\u5f53\u524d\u5143\u7d20\u5c06\u4e0d\u4f1a\u5305\u542b\u5728filter\u4ea7\u751f\u7684\u8fed\u4ee3\u5668\u4e2d\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>#[derive(PartialEq, Debug)]\nstruct Shoe {\nsize: u32,\nstyle: String,\n}\nfn shoes_in_my_size(shoes: Vec&lt;Shoe&gt;, shoe_size: u32) -&gt; Vec&lt;Shoe&gt; {\nshoes.into_iter().filter(|x| x.size == shoe_size).collect()\n}\n#[test]\nfn filter_bu_size() {\nlet shoes = vec![\nShoe {\nsize: 10,\nstyle: String::from(\"sneaker\"),\n},\nShoe {\nsize: 13,\nstyle: String::from(\"sandal\"),\n},\nShoe {\nsize: 10,\nstyle: String::from(\"hoot\"),\n},\n];\nlet in_my_size = shoes_in_my_size(shoes, 10);\nassert_eq!(\nin_my_size,\nvec![\nShoe {\nsize: 10,\nstyle: String::from(\"sneaker\"),\n},\nShoe {\nsize: 10,\nstyle: String::from(\"hoot\"),\n},\n]    );\n}\n</code></pre>"},{"location":"13_functional_programming/02_iterator/#_6","title":"\u516d\u3001\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u8fed\u4ee3\u5668","text":"<p>\u4f7f\u7528Iterator trait\u6765\u521b\u5efa\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6267\u884c\u4e00\u6b65\u64cd\u4f5c\uff0c\u5b9e\u73b0next\u65b9\u6cd5\u5373\u53ef\u3002\u6211\u4eec\u4e0b\u9762\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8be5\u8fed\u4ee3\u5668\u80fd\u4ece1\u904d\u5386\u52305\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct Counter {\ncounter: u32,\n}\nimpl Counter {\nfn new() -&gt; Counter {\nCounter { counter: 0 }\n}\n}\nimpl Iterator for Counter {\ntype Item = u32;\nfn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\nif self.counter &lt; 5 {\nself.counter += 1;\nSome(self.counter)\n} else {\nNone\n}\n}\n}\n#[test]\nfn calling_next_directly() {\nlet mut counter = Counter::new();\nassert_eq!(counter.next(), Some(1));\nassert_eq!(counter.next(), Some(2));\nassert_eq!(counter.next(), Some(3));\nassert_eq!(counter.next(), Some(4));\nassert_eq!(counter.next(), Some(5));\nassert_eq!(counter.next(), None);\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u6269\u5c55\u4e00\u4e0b\uff0c\u4f7f\u7528\u5176\u4ed6\u7684Iterator\u7684\u65b9\u6cd5\u3002\u4e0a\u9762\u7684\u8fed\u4ee3\u5668\uff0c\u4ece1\u8fed\u4ee3\u52305\uff0c\u6211\u4eec\u60f3\u8ba9\u8fd9\u6837\u7684\u4e24\u4e2a\u8fed\u4ee3\u5668\uff0c\u4ed6\u4eec\u7684\u6bcf\u961f\u5143\u7d20\u8fdb\u884c\u76f8\u4e58\u3002\u7b2c\u4e00\u4e2a\u8fed\u4ee3\u5668\u5143\u7d20\u4ece1\u52305\uff0c\u7b2c\u4e8c\u4e2a\u8fed\u4ee3\u5668\u4ece2\u5f00\u59cb\uff0c\u52305\u7ed3\u675f\u3002\u4ea7\u751f\u65b0\u7684\u8fed\u4ee3\u5668\u5fc5\u987b\u80fd\u591f\u88ab3\u6574\u9664\uff0c\u6240\u4ee5\u9700\u8981\u8dd1\u8fc7\u6ee4\uff0c\u8fc7\u6ee4\u4e4b\u540e\uff0c\u6211\u4eec\u628a\u5269\u4f59\u7684\u5143\u7d20\u6c42\u548c\u5e76\u8fd4\u56de\u3002\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b\u4ee3\u7801</p> <pre><code>#[test]\nfn using_other_iterator_trait_methods() {\nlet sum: u32 = Counter::new()\n.zip(Counter::new().skip(1))\n.map(|(a, b)| a * b)\n.filter(|x| x % 3 == 0)\n.sum();\nassert_eq!(18, sum);\n}\n</code></pre>"},{"location":"13_functional_programming/03_io_with_iterator/","title":"\u4f7f\u7528\u8fed\u4ee3\u5668\u4f18\u5316IO\u9879\u76ee","text":"<p>\u5728\u524d\u9762\u4e24\u8282\uff0c\u6211\u4eec\u5f00\u53d1\u4e86\u4e00\u4e0b\u7ed9\u4e88IO\u64cd\u4f5c\u7684\u793a\u4f8b\u9879\u76ee\uff0c\u6211\u4eec\u73b0\u5728\u6765\u4f18\u5316\u4e4b\u524d\u7684\u9879\u76ee\u3002\u672c\u8282\u5bf9\u5e94\u7684\u4ee3\u7801\u76ee\u5f55<code>src/s43_minigrep_optmize</code>\u3002</p>"},{"location":"13_functional_programming/03_io_with_iterator/#config","title":"\u4e00\u3001\u4f7f\u7528\u8fed\u4ee3\u5668\u4f18\u5316Config\u7ed3\u6784\u4f53\u65b9\u6cd5","text":"<p>\u56de\u987e\u4e4b\u524d\u7684\u4e00\u4e2a\u4ee3\u7801\u7247\u6bb5\uff0c\u5728Config\u7684new\u51fd\u6570\u4e2d\u5305\u542b\u5982\u4e0b\u4ee3\u7801</p> <pre><code>impl Config {\npub fn new(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt; {\nif args.len() &lt; 3 {\nreturn Err(\"not enought arguments\");\n}\nlet query = args[1].clone();\nlet filename = args[2].clone();\n// CASE_SENSITIVE \u73af\u5883\u53d8\u91cf\u51fa\u73b0\u5219\u4ee3\u8868\u533a\u5206\u5927\u5c0f\u5199\uff0c\u800c\u5e76\u4e0d\u5173\u5fc3\u8d77\u5177\u4f53\u503c\nlet case_sensitive = env::var(\"CASE_SENSITIVE\").is_err();\nOk(Config { query, filename, case_sensitive })\n}\n}\n</code></pre> <p>\u5728\u53bb\u53c2\u6570\u7684\u65f6\u5019\uff0c\u4e4b\u6240\u4ee5\u4f7f\u7528<code>clone</code>\u65b9\u6cd5\uff0c\u662f\u56e0\u4e3anew\u51fd\u6570\u5e76\u4e0d\u62e5\u6709<code>args</code>\u53c2\u6570\u7684\u6240\u6709\u6743\uff0c\u4f20\u8fdb\u6765\u4ec5\u4ec5\u53ea\u5b57\u7b26\u4e32\u5207\u7247\uff0c\u800c\u8fd4\u56de\u7684Config\u9700\u8981\u62e5\u6709\u5b57\u7b26\u4e32\u7684\u6240\u6709\u6743\u3002\u9488\u5bf9<code>query</code>\u548c<code>filename</code>\u4e24\u4e2a\u5b57\u6bb5\uff0c\u5fc5\u987b\u514b\u9686\u51fa\u4e00\u4efd\uff0c\u8fd9\u6837Config\u624d\u62e5\u6709\u5b83\u4e24\u7684\u6240\u6709\u6743\u3002</p> <p>\u800c\u8fed\u4ee3\u5668\u6709\u7528\u6570\u636e\u7684\u6240\u6709\u6743\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u5207\u7247\u4e86\uff0c\u6211\u95e8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5668\u81ea\u5e26\u7684\u529f\u80fd\u8fdb\u884c\u957f\u5ea6\u68c0\u67e5\u548c\u7d22\u5f15\u3002\u5728<code>main</code>\u51fd\u6570\u4e2d\uff0c<code>env::args()</code>\u4ea7\u751f\u4e86\u4e2a\u8fed\u4ee3\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5c06\u8fed\u4ee3\u5668\u4f20\u7ed9new\u51fd\u6570\u3002\u6539\u9020\u5982\u4e0b</p> <pre><code>impl Config {\npub fn new(mut args: std::env::Args) -&gt; Result&lt;Config, &amp;'static str&gt; {\nif args.len() &lt; 3 {\nreturn Err(\"not enought arguments\");\n}\nargs.next(); // \u653e\u51fa\u7b2c\u4e00\u4e2a\u5143\u7d20\n// \u53d6\u7b2c\u4e8c\u4e2a\u5143\u7d20\nlet query = match args.next() {\nSome(arg) =&gt; arg,\nNone =&gt; return Err(\"Didn't get a query string\"),\n};\n// \u53d6\u7b2c\u4e09\u4e2a\u5143\u7d20\nlet filename = match args.next() {\nSome(arg) =&gt; arg,\nNone =&gt; return Err(\"Didn't get a query string\"),\n};\n// CASE_SENSITIVE \u73af\u5883\u53d8\u91cf\u51fa\u73b0\u5219\u4ee3\u8868\u533a\u5206\u5927\u5c0f\u5199\uff0c\u800c\u5e76\u4e0d\u5173\u5fc3\u8d77\u5177\u4f53\u503c\nlet case_sensitive = env::var(\"CASE_SENSITIVE\").is_err();\nOk(Config {\nquery,\nfilename,\ncase_sensitive,\n})\n}\n}\n</code></pre>"},{"location":"13_functional_programming/03_io_with_iterator/#_1","title":"\u4e8c\u3001\u4f7f\u7528\u8fed\u4ee3\u5668\u4f18\u5316\u641c\u7d22\u51fd\u6570","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f18\u5316<code>search</code>\u65b9\u6cd5\uff0c\u4f7f\u7528\u8fed\u4ee3\u5668\u66ff\u6362\u539f\u6765\u7684\u903b\u8f91\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn search&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {\n// let mut results = Vec::new();\n// for line in contents.lines() {\n//     if line.contains(query) {\n//         results.push(line);\n//     }\n// }\n// results\ncontents\n.lines()\n.filter(|line| line.contains(query))\n.collect()\n}\n</code></pre> <p>\u4f7f\u7528\u8fed\u4ee3\u5668\u7684\u597d\u5904\u662f\u8ba9\u5f00\u53d1\u8005\u80fd\u4e13\u6ce8\u4e8e\u9ad8\u5c42\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u800c\u4e0d\u5fc5\u9677\u5165\u5199\u5faa\u73af\u3001\u7ef4\u62a4\u4e34\u65f6\u53d8\u91cf\u7684\u7ec6\u8282\u5de5\u4f5c\u91cc\u3002</p> <p><code>search_case_insensitive</code>\u51fd\u6570\u4e5f\u53ef\u4ee5\u4f18\u5316\u6210\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>pub fn search_case_insensitive&lt;'a&gt;(query: &amp;str, contents: &amp;'a str) -&gt; Vec&lt;&amp;'a str&gt; {\nlet query = query.to_lowercase();\n// let mut results = Vec::new();\n// for line in contents.lines() {\n//     if line.to_lowercase().contains(&amp;query) {\n//         results.push(line);\n//     }\n// }\n// results\ncontents\n.lines()\n.filter(|line| line.contains(&amp;query))\n.collect()\n}\n</code></pre>"},{"location":"13_functional_programming/03_io_with_iterator/#_2","title":"\u4e09\u3001\u96f6\u5f00\u9500\u62bd\u8c61","text":"<p>\u5728\u4e0a\u9762\u7684\u201c\u4e8c\u201d\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u628a\u4e00\u672c\u5c0f\u8bf4\u7684\u5185\u5bb9\u653e\u5230\u4e00\u4e2aString\u91cc\u9762\uff0c\u641c\u7d22\u201cthe\u201d\u3002\u5b9e\u9645\u4e0a\u6d4b\u8bd5\u7684\u7ed3\u679c\u662f\uff0c\u4f7f\u7528\u8fed\u4ee3\u5668\u6bd4\u624b\u5199\u5faa\u73af\u8fd8\u8981\u5feb\u3002</p> <p>\u4e0d\u8fc7\u91cd\u70b9\u4e0d\u5728\u8fd9\uff0c\u800c\u6211\u4eec\u8981\u77e5\u9053\u7684\u662f\uff1a\u8fed\u4ee3\u5668\u5728rust\u91cc\u662f\u4e00\u79cd\u9ad8\u5c42\u6b21\u7684\u62bd\u8c61\uff0c\u4f46\u662f\u5b83\u5728\u7f16\u8bd1\u540e\uff0c\u751f\u6210\u7684\u903b\u8f91\u548c\u6211\u4eec\u624b\u5199\u5e95\u5c42\u4ee3\u7801\u51e0\u4e4e\u4e00\u6837\u7684\u3002\u8fd9\u5957\u673a\u5236\u5728rust\u91cc\u53eb\u505a**\u96f6\u5f00\u9500\u62bd\u8c61**\uff08Zero-Cost Abstraction\uff09\uff0c\u610f\u5473\u7740\u4f7f\u7528\u62bd\u8c61\u65f6\u4e0d\u4f1a\u5f15\u5165\u989d\u5916\u7684\u8fd0\u884c\u65f6\u5f00\u9500\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c3d\u60c5\u4f7f\u7528\u7c7b\u4f3c\u8fed\u4ee3\u5668\u8fd9\u6837\u9ad8\u5c42\u6b21\u7684\u62bd\u8c61\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0crust\u4f7f\u7528\u4e86\u5f88\u591a\u4f18\u5316\uff0c\u4f7f\u5f97\u4ea7\u51fa\u7684\u4ee3\u7801\u975e\u5e38\u5730\u9ad8\u6548\uff0c\u6211\u95e8\u53ef\u4ee5\u65e0\u6240\u754f\u60e7\u5730\u4f7f\u7528\u95ed\u5305\u6216\u8005\u8fed\u4ee3\u5668\uff0c\u5b83\u4eec\u65e2\u80fd\u8ba9\u4ee3\u7801\u5728\u611f\u89c2\u4e0a\u4fdd\u6301\u9ad8\u5c42\u6b21\u7684\u62bd\u8c61\uff0c\u53c8\u4e0d\u4f1a\u56e0\u6b64\u5e26\u6765\u4efb\u4f55\u7684\u8fd0\u884c\u65f6\u6027\u80fd\u7684\u635f\u5931\u3002</p>"},{"location":"14_cargo_and_crates.io/01_cargo/","title":"Cargo","text":""},{"location":"14_cargo_and_crates.io/01_cargo/#release-profile","title":"\u4e00\u3001\u901a\u8fc7release profile\u6765\u81ea\u5b9a\u4e49\u6784\u5efa","text":"<p>release profile\u662f\u9884\u5b9a\u4e49\u7684\uff0c\u4e5f\u662f\u53ef\u5b9a\u4e49\u7684\uff0c\u53ef\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u5bf9\u7f16\u8bd1\u4ee3\u7801\u62e5\u6709\u66f4\u591a\u7684\u63a7\u5236\u3002\u6bcf\u4e2aprofile\u7684\u914d\u7f6e\u90fd\u72ec\u7acb\u4e8e\u5176\u4ed6\u7684profile\u3002\u5728cargo\u91cc\u4e3b\u8981\u6709\u4e24\u79cdprofile\uff0c\u5982\u4e0b</p> <ul> <li>dev profile\uff1a\u9002\u7528\u4e8e\u5f00\u53d1\uff0ccargo build</li> <li>release profile\uff1a\u9002\u7528\u4e8e\u53d1\u5e03\uff0ccargo build --release</li> </ul> <p>\u6211\u4eec\u5728\u7f16\u8bd1\u7684\u65f6\u5019\uff0c\u5982\u679c\u6267\u884c\u7684\u662f<code>cargo build</code>\u547d\u4ee4\uff0c\u90a3\u4e48\u5c06\u4f7f\u7528dev profile\uff1b\u5982\u679c\u4f7f\u7528<code>cargo build --release</code>\u547d\u4ee4\uff0c\u5c06\u4f7f\u7528release profile\u3002</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#profile","title":"\u4e8c\u3001\u81ea\u5b9a\u4e49profile","text":"<p>\u9488\u5bf9\u6bcf\u4e2aprofile\uff0ccargo\u90fd\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684\u914d\u7f6e\uff0c\u5982\u679c\u60f3\u81ea\u5b9a\u4e49\u67d0\u4e2axxx profie\uff0c\u6211\u95e8\u53ef\u4ee5\u5728<code>Cargo.toml</code>\u91cc\u6dfb\u52a0<code>[profile.xxx]</code>\u533a\u57df\uff0c\u5728\u91cc\u9762\u8986\u76d6\u9ed8\u8ba4\u7684\u5b50\u96c6\u3002\u901a\u5e38\u6211\u95e8\u4e0d\u4f1a\u8986\u76d6\u6240\u6709\u7684\u914d\u7f6e\uff0c\u53ea\u9700\u8981\u8986\u76d6\u60f3\u4fee\u6539\u7684\u914d\u7f6e\u5373\u53ef\u3002\u5982\u679c\u6211\u95e8\u60f3\u9488\u5bf9<code>dev</code>\u548c<code>release</code>\u7684 profle\u8fdb\u884c\u4fee\u6539\uff0c<code>Cargo.toml</code>\u6587\u4ef6\u793a\u4f8b\u5185\u5bb9\u5982\u4e0b</p> <pre><code>[package]\nname = \"s43_minigrep_optmize\"\nversion = \"0.1.0\"\nedition = \"2021\"\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\n[profile.dev]\nopt-level = 0\n[profile.release]\nopt-level = 3\n</code></pre> <p><code>opt-level</code>\u53c2\u6570\u51b3\u5b9a\u662f\u5426\u5bf9\u7f16\u8bd1\u8fdb\u884c\u4f18\u5316\uff0c\u4f1a\u5f71\u54cd\u7f16\u8bd1\u65f6\u95f4\u3002dev profile\u7684\u9ed8\u8ba4\u503c\u662f0\uff0c\u7f16\u8bd1\u6ca1\u6709\u4f18\u5316\uff0c\u8fd9\u6837\u7f16\u8bd1\u901f\u5ea6\u66f4\u5feb\uff0c\u4f46\u7f16\u8bd1\u4ea7\u7269\u6548\u7387\u8f83\u4f4e\uff1brelease profile\u7684\u9ed8\u8ba4\u503c\u662f3\uff0c\u8fd9\u6837\u7f16\u8bd1\u65f6\u95f4\u66f4\u957f\uff0c\u4f46\u662f\u5f97\u5230\u7684\u4ea7\u7269\u8fd0\u884c\u6548\u7387\u66f4\u9ad8\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u914d\u7f6e\u7684\u9ed8\u8ba4\u503c\u548c\u5b8c\u6574\u9009\u9879\uff0c\u53ef\u4ee5\u53c2\u8003https://doc.rust-lang.org/stable/cargo/</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#cratecrateio","title":"\u4e09\u3001\u53d1\u5e03crate\u5230crate.io","text":"<p>\u4e4b\u524d\u6211\u95e8\u901a\u8fc7crates.io\u4e0b\u8f7d\u4e86\u7b2c\u4e09\u65b9\u5e93\uff0c\u6211\u95e8\u4e5f\u53ef\u4ee5\u901a\u8fc7crates.io\u53d1\u5e03\u5305\u6765\u5171\u4eab\u6211\u4eec\u7684\u4ee3\u7801\u3002crate\u7684\u6ce8\u518c\u8868\u5728https://crates.io\uff0c\u5b83\u4f1a\u5206\u53d1\u5df2\u6ce8\u518c\u7684\u5305\u7684\u6e90\u4ee3\u7801\uff0c\u4e3b\u8981\u6258\u7ba1\u5f00\u6e90\u7684\u4ee3\u7801\u3002</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#_1","title":"\u56db\u3001\u6587\u6863\u6ce8\u91ca","text":""},{"location":"14_cargo_and_crates.io/01_cargo/#41","title":"4.1 \u751f\u6210\u6587\u6863\u6ce8\u91ca","text":"<p>rust\u4f7f\u7528\u4e00\u79cd\u7279\u6b8a\u7684\u6587\u6863\u6ce8\u91ca\uff0c\u7528\u4e8e\u751f\u6210\u6587\u6863\uff0c\u53ef\u4ee5\u751f\u6210\u9879\u76ee\u7684HTML\u6587\u6863\uff0c\u5c06\u663e\u793a\u516c\u5171API\u7684\u6587\u6863\u6ce8\u91ca\uff0c\u8868\u660e\u5982\u4f55\u4f7f\u7528API\u3002\u4f7f\u7528<code>///</code>\uff0c\u800c\u4e14\u5728\u6587\u6863\u4e2d\u53ef\u4ee5\u4f7f\u7528Markdown\u8bed\u6cd5\uff0c\u6587\u6863\u6ce8\u91ca\u653e\u5728\u88ab\u8bf4\u660e\u6761\u76ee\u4e4b\u524d\u3002</p> <p>\u4f7f\u7528<code>cargo doc</code>\u751f\u6210html\u6587\u6863\uff0c\u5b83\u4f1a\u8fd0\u884crustdoc\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u5728\u5b89\u88c5rust\u7684\u65f6\u5019\u5c31\u81ea\u5e26\u4e86\u3002\u751f\u6210\u7684html\u6587\u6863\u653e\u5728<code>target/doc</code>\u76ee\u5f55\u4e0b\u3002\u751f\u6210\u6587\u6863\u4e4b\u540e\uff0c\u6211\u95e8\u53ef\u4ee5\u4f7f\u7528<code>cargo doc --open</code>\u547d\u4ee4\u4f1a\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u6587\u6863\u3002</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#42","title":"4.2 \u5e38\u7528\u7ae0\u8282","text":"<p>\u5728\u6587\u6863\u6ce8\u91ca\u4e2d\uff0c\u4f1a\u7ecf\u5e38\u4f7f\u7528\u4e00\u4e9b\u7ae0\u8282\u6807\u6ce8\uff0c\u5e38\u7528\u7ae0\u8282\u5982\u4e0b</p> <p><code>Example</code>: \u793a\u4f8b\u4ee3\u7801 <code>panics</code>: \u51fd\u6570\u53ef\u80fd\u53d1\u751fpanic\u7684\u573a\u666f <code>Errors</code>: \u5982\u679c\u51fd\u6570\u8fd4\u56deResult\uff0c\u63cf\u8ff0\u53ef\u80fd\u7684\u9519\u8bef\u79cd\u7c7b\uff0c\u4ee5\u53ca\u53ef\u5bfc\u81f4\u9519\u8bef\u7684\u6761\u4ef6 <code>Safety</code>: \u5982\u679c\u51fd\u6570\u5904\u4e8eunsafe\u8c03\u7528\uff0c\u5c31\u5e94\u8be5\u89e3\u91ca\u51fd\u6570unsafe\u7684\u539f\u56e0\uff0c\u4ee5\u53ca\u8c03\u7528\u8005\u5e94\u5f53\u786e\u4fdd\u4f7f\u7528\u7684\u524d\u63d0</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#43","title":"4.3 \u6587\u6863\u6ce8\u91ca\u4f5c\u4e3a\u6d4b\u8bd5","text":"<p>\u5b9e\u9645\u4e0a\uff0c\u8fd0\u884c<code>cargo test</code>\u65f6\uff0c\u4f1a\u628a\u6587\u6863\u6ce8\u91ca\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u4f5c\u4e3a\u6d4b\u8bd5\u6765\u8fd0\u884c\uff0c\u5982\u4e0b\u662f\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>/// Adds one to the number given.\n/// \n/// # Examples\n///\n/// ```\n/// let args = 5;\n/// let answer = my_crate::add_one(args);\n/// \n/// assert_eq!(6, anwser);\n/// ```dotnetcli\npub fn add_one(x: i32) -&gt; i32 {\nx + 1\n}\n</code></pre> <p>\u8fd0\u884c<code>cargo test</code>\u4e4b\u540e\uff0c\u6587\u6863\u6ce8\u91ca\u4e2d\u7684\u793a\u4f8b\u6d4b\u8bd5\u4ee3\u7801\u5c06\u4f1a\u88ab\u6267\u884c\u3002</p>"},{"location":"14_cargo_and_crates.io/01_cargo/#44","title":"4.4 \u4e3a\u5305\u542b\u6ce8\u91ca\u7684\u9879\u6dfb\u52a0\u6587\u6863\u6ce8\u91ca","text":"<p>\u7b26\u53f7: <code>//!</code>\uff0c\u8fd9\u7c7b\u6ce8\u91ca\u901a\u5e38\u7528\u4e8e\u63cf\u8ff0crate\u548c\u6a21\u5757\uff0c\u5982\u4e00\u4e2acrate root\uff08\u901a\u5e38\u662fsrc/lib.rs\uff09\uff0c\u53e6\u5916\u662f\u5728\u4e00\u4e2a\u6a21\u5757\u5185\uff0c\u5c06crate \u6216\u6a21\u5757\u4f5c\u4e3a\u6574\u4f53\u8fdb\u884c\u8bb0\u5f55\u3002\u5982\u4e0b\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>//! # My Crate\n//! \n//! `my_crate` is a collection of utilities to make performing certain calculations more convenient\n/// Adds one to the number given.\n/// \n/// # Examples\n///\n/// ```\n/// let args = 5;\n/// let answer = my_crate::add_one(args);\n/// \n/// assert_eq!(6, anwser);\n/// ```dotnetcli\npub fn add_one(x: i32) -&gt; i32 {\nx + 1\n}\n</code></pre>"},{"location":"14_cargo_and_crates.io/01_cargo/#pub-use","title":"\u4e94\u3001pub use","text":"<p>\u4f7f\u7528use\u53ef\u4ee5\u5230\u5904\u65b9\u4fbf\u4f7f\u7528\u7684\u516c\u5171API\uff0c\u4e0d\u8fc7\u95ee\u9898\u7684\u5728\u4e8e\uff0ccrate\u7684\u7a0b\u5e8f\u7ed3\u6784\u5728\u5f00\u53d1\u65f6\u5bf9\u5f00\u53d1\u8005\u5f88\u5408\u7406\uff0c\u4f46\u5bf9\u4e8e\u5b83\u7684\u4f7f\u7528\u548c\u4e0d\u65b9\u4fbf\u3002\u5f00\u53d1\u8005\u901a\u5e38\u4f1a\u628a\u7a0b\u5e8f\u7ed3\u6784\u5206\u4e3a\u5f88\u591a\u5c42\uff0c\u4f7f\u7528\u8005\u60f3\u627e\u5230\u8fd9\u79cd\u6df1\u5c42\u7ed3\u6784\u4e2d\u7684\u67d0\u4e2a\u7c7b\u578b\u5f88\u8d39\u52b2\u3002\u5982\u4e0b\u7684\u793a\u4f8b</p> <pre><code>my_crate::some_module::another_module::UsefulType;\n</code></pre> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\u5b58\u5728\u591a\u4e2a\u5c42\u7ea7\uff0c\u4f7f\u7528\u8005\u5f88\u4e0d\u65b9\u4fbf\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4\uff0c\u66f4\u4e3a\u65b9\u4fbf\u7684\u5e94\u8be5\u662f<code>my_crate::UsefulType</code>\uff0c\u4f46\u4e5f\u6709\u89e3\u51b3\u529e\u6cd5\u3002\u6211\u95e8\u4e0d\u5e0c\u8981\u91cd\u65b0\u7ec4\u7ec7\u5185\u90e8\u7684\u4ee3\u7801\u7ed3\u6784\uff0c\u800c\u662f\u4f7f\u7528<code>pub use</code>\uff0c\u53ef\u4ee5\u91cd\u65b0\u5bfc\u51fa\uff0c\u521b\u5efa\u4e0e\u5185\u90e8\u79c1\u6709\u7ed3\u6784\u4e0d\u540c\u7684\u5bf9\u5916\u516c\u5171\u7ed3\u6784\u3002</p> <p>\u4e0b\u9762\u6211\u95e8\u770b\u4e2a\u793a\u4f8b\uff0c\u5148\u521b\u5efa<code>src/lib.rs</code>\u6587\u4ef6\uff0c\u5199\u5165\u5982\u4e0b\u7684\u5185\u5bb9</p> <pre><code>//! # Art\n//! \n//! A library for modeling artistic concept.\npub mod kinds {\n/// The primary colors according to the RYB color model.\npub enum PrimaryColor {\nRed,\nYellow,\nBlue,\n}\n/// The second colors according to RYB color model.\npub enum SecondaryColor {\nOrange,\nGreen,\nPurple,\n}\n}\npub mod utils {\nuse crate::kinds::*;\n/// Combines two primary colors in equal amounts to crate\n/// a secondary color.\npub fn mix(c1: PrimaryColor, c2: PrimaryColor) -&gt;SecondaryColor {\nSecondaryColor::Green\n}\n}\n</code></pre> <p>\u7136\u540e\u5728<code>src/main.rs</code>\u8c03\u7528\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>use s44_cargo::kinds::PrimaryColor;\nuse s44_cargo::utils::mix;\nfn main() {\nlet red = PrimaryColor::Red;\nlet yellow = PrimaryColor::Yellow;\nmix(red, yellow);\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u5728\u5f15\u5165\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5c42\u7ea7\u7ed3\u6784\u6bd4\u8f83\u6df1\u3002\u6211\u95e8\u4e0b\u9762\u505a\u4e00\u4e2a\u4f18\u5316\uff0c\u4f7f\u7528<code>pub use</code>\u5173\u952e\u5b57\u5728<code>src/lib.rs</code>\u91cc\u91cd\u65b0\u5bfc\u51fa\u9700\u8981\u4f7f\u7528\u7684\u5185\u5bb9\u5230\u9876\u5c42\u7ed3\u6784\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>//! # Art\n//! \n//! A library for modeling artistic concept.\npub use self::kinds::PrimaryColor;\npub use self::kinds::SecondaryColor;\npub use self::utils::mix;\n</code></pre> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u4f7f\u7528<code>cargo doc --open</code>\u751f\u6210\u5e76\u67e5\u770b\u6587\u6863\uff0c\u8fd9\u65f6\u5019\u6587\u6863\u5df2\u7ecf\u8868\u660e\u4e86\u5bfc\u51fa\u7684\u90e8\u5206\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>\u8fd9\u5bf9\u4e8ecrate\u7684\u7528\u6237\u6765\u8bf4\uff0c\u67e5\u627e\u5bf9\u5e94\u7684\u7c7b\u578b\u548c\u51fd\u6570\u5c31\u975e\u5e38\u65b9\u4fbf\u4e86\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u5728\u4f7f\u7528\u7684\u5730\u65b9\u76f4\u63a5\u7b80\u5316\u5bfc\u5165\u7684\u5c42\u7ea7\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// use s44_cargo::kinds::PrimaryColor;\n// use s44_cargo::utils::mix;\nuse s44_cargo::PrimaryColor;\nuse s44_cargo::mix;\n</code></pre>"},{"location":"14_cargo_and_crates.io/02_publish_crate/","title":"\u53d1\u5e03crate","text":""},{"location":"14_cargo_and_crates.io/02_publish_crate/#_1","title":"\u4e00\u3001\u521b\u5efa\u8d26\u53f7","text":"<p>\u53d1\u5e03crate.io\u524d\uff0c\u9700\u8981\u5728\u521b\u5efa\u8d26\u53f7\u5e76\u83b7\u5f97API Token\u3002\u8fd0\u884c\u547d\u4ee4<code>cargo login $API_TOKEN</code>\uff0c\u5c06\u4f1a\u901a\u77e5cargo\uff0c\u628a\u4f60\u7684API token\u5b58\u50a8\u5728\u672c\u5730<code>~/.cargo/credentials</code>\u3002API Token\u53ef\u4ee5\u5728\u4e0a\u8fdb\u884c\u64a4\u9500\u3002"},{"location":"14_cargo_and_crates.io/02_publish_crate/#crate_1","title":"\u4e8c\u3001\u4e3a\u65b0\u7684crate\u6dfb\u52a0\u5143\u6570\u636e","text":"<p>\u5728\u53d1\u5e03crate\u4e4b\u524d\uff0c\u9700\u8981\u5728<code>Cargo.toml</code>\u7684<code>[package]</code>\u533a\u57df\u4e3acrate\u6dfb\u52a0\u4e00\u4e9b\u5143\u6570\u636e\uff1a</p> <ul> <li>name: crate\u9700\u8981\u6307\u5b9a\u4f4d\u4e8e\u7684\u540d\u79f0</li> <li>description: \u4e00\u4e24\u53e5\u8bdd\u5373\u53ef\uff0c\u4f1a\u51fa\u73b0\u5728crate\u641c\u7d22\u7684\u7ed3\u679c\u91cc</li> <li>license: \u9700\u8981\u63d0\u4f9b\u8bb8\u53ef\u8bc1\u7684\u8868\u793a\u503c\uff0c\u53ef\u4ee5\u5230http://spdx.org/licenses/\u67e5\u627e\uff0c\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u8bb8\u53ef\uff0c\u4f7f\u7528<code>OR</code>\u9694\u5f00</li> <li>version: \u7248\u672c\u53f7</li> <li>author: \u4f5c\u8005</li> </ul> <p>\u66f4\u591a\u7684\u539f\u6570\u636e\u53ef\u4ee5\u53c2\u8003https://doc.rust-lang.org/cargo/reference/manifest.html\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\u7684\u539f\u6570\u636e</p> <pre><code>[package]\nname = \"s44_cargo\"\nversion = \"0.1.0\"\nauthor = [\"kotlindev\"]\nedition = \"2021\"\ndescription = \"A Rust tutorials\"\nlicense = \"MIT\"\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n[dependencies]\n</code></pre>"},{"location":"14_cargo_and_crates.io/02_publish_crate/#crate_2","title":"\u4e09\u3001\u53d1\u5e03crate","text":"<p>\u6700\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528<code>cargo pushlish</code>\u8fdb\u884c\u53d1\u5e03\u3002\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u53d1\u5e03\u5931\u8d25\uff0c\u539f\u56e0\u53ef\u80fd\u662f\u56e0\u4e3a\u4f60\u7684\u7684\u8d26\u53f7\u8fd8\u6ca1\u7ed1\u5b9a\u9a8c\u8bc1\u7684\u90ae\u7bb1\uff0c\u6216\u8005\u4f60\u7684crate\u7684\u5143\u4fe1\u606f\u7f3a\u5931\uff0c\u9700\u8981\u6839\u636e\u9519\u8bef\u63d0\u793a\u8865\u5145\u5373\u53ef\u3002 <p>crate\u4e00\u65e6\u53d1\u5e03\uff0c\u5c31\u662f\u6c38\u4e45\u6027\u7684\uff1a\u8be5\u7248\u672c\u65e0\u6cd5\u8986\u76d6\uff0c\u4ee3\u7801\u65e0\u6cd5\u5220\u9664\u3002\u56e0\u4e3a\u5e0c\u671b\u6210\u4e3a\u6c38\u4e45\u7684\u4ee3\u7801\u6258\u7ba1\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8e\u8be5\u7248\u672c\u7684\u9879\u76ee\u53ef\u4ee5\u7ee7\u7eed\u6b63\u5e38\u5de5\u4f5c\u3002\u5982\u679c\u5141\u8bb8\u5f00\u53d1\u8005\u5220\u9664\u5df2\u7ecf\u53d1\u5e03\u7684\u4ee3\u7801\uff0c\u90a3\u4e48\u5c06\u65e0\u6cd5\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002"},{"location":"14_cargo_and_crates.io/02_publish_crate/#crate_3","title":"\u56db\u3001\u53d1\u5e03\u5df2\u5b58\u5728\u7684crate\u65b0\u7248\u672c","text":"<p>\u5728\u4fee\u6539crate\u7684\u4ee3\u7801\u4e4b\u540e\uff0c\u5f53\u6211\u4eec\u9700\u8981\u53d1\u5e03\u65b0\u7248\u672c\u65f6\uff0c\u9700\u8981\u5148\u4fee\u6539<code>Cargo.toml</code>\u91cc\u9762\u7684<code>version</code>\u503c\u3002\u53ef\u4ee5\u53c2\u8003\u8bed\u4e49\u5316\u7248\u672c\u63a7\u5236\u89c4\u8303http://semver.org\u6765\u5b9a\u4e49\u4f60\u7684\u8bed\u610f\u7248\u672c\u3002\u6700\u540e\u6267\u884c<code>cargo publish</code>\u8fdb\u884c\u53d1\u5e03\u3002</p>"},{"location":"14_cargo_and_crates.io/02_publish_crate/#cargo-yankcratesio","title":"\u4e94\u3001\u4f7f\u7528cargo yank\u4ececrates.io\u64a4\u56de\u7248\u672c","text":"<p>\u6211\u4eec\u4e0d\u53ef\u4ee5\u5220\u9664\u4e4b\u524d\u7684\u7248\u672c\uff0c\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u4ee3\u7801\uff0c\u4f46\u53ef\u4ee5\u9632\u6b62\u5176\u4ed6\u9879\u76ee\u628a\u67d0\u4e2a\u7248\u672c\u6700\u4e3a\u65b0\u7684\u4f9d\u8d56\uff0c\u4f7f\u7528yank\u53ef\u64a4\u56de\u4e00\u4e2acrate\u7248\u672c\u5373\u53ef\u3002\u8be5\u64cd\u4f5c\u9632\u6b62\u65b0\u9879\u76ee\u4f9d\u8d56\u4e8e\u8be5\u7248\u672c\uff0c\u4f46\u5df2\u7ecf\u5b58\u5728\u7684\u9879\u76ee\u53ef\u4ee5\u7ee7\u7eed\u5c06\u5176\u4f5c\u4e3a\u4f9d\u8d56\u5e76\u53ef\u4ee5\u4e0b\u8f7d\u3002</p> <p>yank\u610f\u5473\u7740\uff1a\u6240\u6709\u5df2\u7ecf\u4ea7\u751f<code>Cargo.lock</code>\u7684\u9879\u76ee\u4e0d\u4f1a\u4e2d\u65ad\uff0c\u540c\u65f6\u4efb\u4f55\u5c06\u6765\u65b0\u751f\u6210\u7684<code>Cargo.lock</code>\u6587\u4ef6\u90fd\u4e0d\u4f1a\u4f7f\u7528\u88abyank\u7684\u7248\u672c\u3002\u64a4\u56de\u547d\u4ee4\u5982\u4e0b\u793a\u4f8b</p> <pre><code>cargo yank --version 1.0.1\n</code></pre> <p>\u53d6\u6d88\u64a4\u56de\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo yank --version 1.0.1 --undo\n</code></pre>"},{"location":"14_cargo_and_crates.io/03_cargo_workspace/","title":"Cargo\u5de5\u4f5c\u7a7a\u95f4","text":""},{"location":"14_cargo_and_crates.io/03_cargo_workspace/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>cargo\u5de5\u4f5c\u7a7a\u95f4\u53ef\u4ee5\u5e2e\u52a9\u7ba1\u7406\u591a\u4e2a\u76f8\u4e92\u5173\u8054\u4e14\u9700\u8981\u534f\u540c\u5f00\u53d1\u7684crate\u3002\u5b9e\u9645\u4e0a\uff0ccargo\u5de5\u4f5c\u7a7a\u95f4\u662f\u4e00\u5957\u5171\u4eab\u540c\u4e00\u4e2aCargo.lock\u548c\u8f93\u51fa\u6587\u4ef6\u5939\u7684\u5305\u3002</p>"},{"location":"14_cargo_and_crates.io/03_cargo_workspace/#_2","title":"\u4e8c\u3001\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4","text":"<p>\u6709\u591a\u79cd\u65b9\u5f0f\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6211\u4eec\u4e0b\u9762\u5148\u521b\u5efa\u4e00\u4e2a\u4e8c\u8fdb\u5236crate\uff0c\u518d\u521b\u5efa2\u4e2a\u5e93crate\u3002\u4e8c\u8fdb\u5236crate\u5305\u542bmain\u51fd\u6570\uff0c\u4f9d\u8d56\u4e8e\u5176\u4ed62\u4e2a\u5e93crate\uff0c\u5176\u4e2d1\u4e2a\u5e93crate\u63d0\u4f9badd_one\u51fd\u6570\uff0c\u53e6\u4e00\u4e2a\u5e93crate\u63d0\u4f9badd_two\u51fd\u6570\u3002\u4e0b\u9762\u662f\u5177\u4f53\u7684\u6b65\u9aa4</p> <p>\u5148\u521b\u5efa\u4e00\u4e2a<code>add</code>\u76ee\u5f55\uff0c\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a<code>Cargo.toml</code>\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u7528\u4e8e\u914d\u7f6e\u6574\u4e2a\u5305\u5de5\u4f5c\u7a7a\u95f4\uff0c\u5982\u4e0b\u5185\u5bb9</p> <pre><code>[workspace]\nmembers = [\n\"adder\"\n]\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5305\u542b<code>wokspace</code>\u8282\u70b9\uff0c\u5728\u8be5\u8282\u70b9\u4e0b\u7684<code>members</code>\u5b57\u6bb5\u8868\u793a\u5de5\u4f5c\u7a7a\u95f4\u7684\u6210\u5458\u3002\u73b0\u5728\u6211\u4eec\u4f7f\u7528<code>cargo new adder</code>\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u521b\u5efa\u51fa<code>adder</code> crate\u3002</p> <p>\u73b0\u5728\u5c31\u521b\u5efa\u51fa\u4e86\u4e00\u4e2a\u5de5\u4f5c\u7a7a\u95f4\uff0c\u5e76\u4e14\u8be5\u7a7a\u95f4\u5185\u5305\u542b\u4e00\u4e2acrate\u3002\u5728\u5de5\u4f5c\u7a7a\u95f4\u91cc\u4f7f\u7528<code>cargo build</code>\u547d\u4ee4\u5c06\u4f1a\u5bf9\u6574\u4e2a\u5de5\u4f5c\u7a7a\u95f4\u8fdb\u884c\u7f16\u8bd1\uff0c\u7f16\u8bd1\u540e\u5728<code>target</code>\u4ea7\u751f\u7f16\u8bd1\u4ea7\u7269\u3002\u5373\u4f7f\u6211\u4eec\u5207\u6362\u5230\u5177\u4f53\u7684crate\u76ee\u5f55\u6267\u884c<code>cargo build</code>\uff0c\u7f16\u8bd1\u4ea7\u7269\u4e5f\u4f9d\u7136\u4f1a\u751f\u6210\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684<code>target</code>\u76ee\u5f55\u3002\u901a\u8fc7\u5171\u4eab\u4e00\u4e2atarget\u76ee\u5f55\uff0c\u4e0d\u540c\u7684\u9879\u76ee\u5c31\u53ef\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u590d\u7f16\u8bd1\u8fc7\u7a0b\u3002</p>"},{"location":"14_cargo_and_crates.io/03_cargo_workspace/#cratecrate","title":"\u4e09\u3001\u5de5\u4f5c\u7a7a\u95f4\u5185\u7684\u4e8c\u8fdb\u5236crate\u4f9d\u8d56\u5e93crate","text":"<p>\u73b0\u5728\u6211\u4eec\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e0b\u7684<code>Cargo.toml</code>\u6587\u4ef6\u6dfb\u52a0<code>add-one</code>\u9879\u76ee\uff0c\u8be5\u9879\u76ee\u662f\u4e2a\u5e93crate\uff0c\u6240\u4ee5\u4f7f\u7528<code>cargo new add-one --lib</code>\u521b\u5efa\u51fa\u6765\u3002\u6211\u95e8\u4fee\u6539<code>add-one</code>\u9879\u76ee\u7684<code>src/lib.rs</code>\u4ee3\u7801\uff0c\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9</p> <pre><code>pub fn add_one(x: i32) -&gt; i32 {\nx + 1\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8ba9<code>adder</code>\u9879\u76ee\u4f9d\u8d56<code>add-one</code>\u8fd9\u4e2a\u9879\u76ee\uff0c\u5728<code>adder</code>\u9879\u76ee\u4e2d\u4fee\u6539<code>Cargo.toml</code>\u6587\u4ef6\uff0c\u8ffd\u52a0\u4ee5\u4e0b\u5185\u5bb9\u5373\u53ef</p> <pre><code>add-one = { path = \"../add-one\" }\n</code></pre> <p>\u6700\u540e\u4fee\u6539<code>adder</code>\u9879\u76ee\u7684<code>src/main.rs</code>\u6e90\u4ee3\u7801\uff0c\u5982\u4e0b</p> <pre><code>use add_one;\nfn main() {\nlet num = 10;\nprintln!(\n\"Hello, world! {} plus one is {}!\",\nnum,\nadd_one::add_one(num)\n)\n}\n</code></pre> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u8981\u8fd0\u884c<code>adder</code>\u8fd9\u4e2a\u9879\u76ee\uff0c\u9700\u8981\u5728\u5de5\u4f5c\u7a7a\u95f4\u5185\u4f7f\u7528<code>-p</code>\u53c2\u6570\u6307\u5b9a\u9879\u76ee\u540d\u5373\u53ef\uff0c\u5982\u4e0b\u547d\u4ee4</p> <pre><code>cargo run -p adder\n</code></pre>"},{"location":"14_cargo_and_crates.io/03_cargo_workspace/#crate","title":"\u56db\u3001\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u4f9d\u8d56\u5916\u90e8\u7684crate","text":"<p>\u5de5\u4f5c\u7a7a\u95f4\u53ea\u6709\u4e00\u4e2aCargo.lock\u6587\u4ef6\uff0c\u5728\u5de5\u4f5c\u7a7a\u95f4\u7684\u9876\u5c42\u76ee\u5f55\u3002\u8fd9\u4e2a\u6587\u4ef6\u7684\u914d\u7f6e\u5185\u5bb9\u4fdd\u8bc1\u91cc\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u7684crate\u4f7f\u7528\u7684\u4f9d\u8d56\u7684\u7248\u672c\u90fd\u76f8\u540c\u3002\u4e0b\u9762\u6211\u4eec\u505a\u4e00\u4e2a\u6d4b\u8bd5</p> <p>\u6211\u4eec\u5148\u5728<code>add-one</code>\u9879\u76ee\u7684<code>Cargo.toml</code>\u6dfb\u52a0\u4ee5\u4e0b\u5b9a\u4e49</p> <pre><code>rand = \"0.3.14\"\n</code></pre> <p>\u6211\u4eec\u5728<code>adder</code>\u9879\u76ee\u7684<code>Cargo.toml</code>\u6dfb\u52a0\u4ee5\u4e0b\u5b9a\u4e49</p> <pre><code>rand = \"0.3.15\"\n</code></pre> <p>\u4f46\u662f\u6211\u4eec\u5728\u5de5\u4f5c\u7a7a\u95f4\u6267\u884c<code>cargo build</code>\u4e4b\u540e\uff0c\u901a\u8fc7\u5206\u6790<code>Cargo.lock</code>\u6587\u4ef6\uff0c\u53d1\u73b0\u4e24\u4e2acrate\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a\u7248\u672c\uff0c\u5e76\u8986\u76d6\u4e86<code>Cargo.toml</code>\u4e2d\u5b9a\u4e49\u7684\u7248\u672c\u3002\u8fd9\u6837\u5de5\u4f5c\u7a7a\u95f4\u5185\u6240\u6709\u7684crate\u76f8\u4e92\u517c\u5bb9\u3002</p> <p>\u6211\u4eec\u518d\u901a\u8fc7<code>cargo new add-two --lib</code>\u521b\u5efaadd-two\u9879\u76ee\uff0c\u5e76\u5728\u5de5\u4f5c\u7a7a\u95f4\u91cc\u5f15\u5165\uff0c\u5982\u679c\u8fd9\u65f6\u5019\u6211\u95e8\u76f4\u63a5\u5728add-two\u9879\u76ee\u91cc\u4f7f\u7528<code>rand</code> crate\u662f\u4e0d\u884c\u7684\uff0c\u7f16\u8bd1\u4f1a\u62a5\u9519\uff0c\u9700\u8981\u5728\u5176<code>Cargo.toml</code>\u5148\u58f0\u660e\u624d\u53ef\u4ee5\u3002</p>"},{"location":"14_cargo_and_crates.io/03_cargo_workspace/#_3","title":"\u4e94\u3001\u4e3a\u5de5\u4f5c\u7a7a\u95f4\u6dfb\u52a0\u6d4b\u8bd5","text":"<p>\u5f53\u6211\u4eec\u5728\u5de5\u4f5c\u7a7a\u95f4\u8fd0\u884c<code>cargo test</code>\u65f6\uff0ccargo\u4f1a\u4e00\u6b21\u6027\u8fd0\u884c\u5de5\u4f5c\u7a7a\u95f4\u91cc\u7684\u6240\u6709crate\u7684\u6d4b\u8bd5\u4ee3\u7801\uff0c\u5305\u62ec\u6587\u6863\u6ce8\u91ca\u7684\u6d4b\u8bd5\u3002\u5982\u679c\u53ea\u9700\u8981\u6d4b\u8bd5\u67d0\u4e2acrate\uff0c\u4f7f\u7528<code>-p</code>\u53c2\u6570\u6307\u5b9a\u5177\u4f53crate\u5373\u53ef\uff0c\u5982\u4e0b\u793a\u4f8b\u547d\u4ee4</p> <pre><code>cargo test -p add-one\n</code></pre> <p>\u5bf9\u4e8e\u53d1\u5e03\uff0c\u6ca1\u6709\u63d0\u4f9b\u4e00\u6b21\u6027\u53d1\u5e03\u5de5\u4f5c\u7a7a\u95f4\u6240\u6709crate\u7684\u529f\u80fd\uff0c\u5982\u679c\u9700\u8981\u53d1\u5e03\uff0c\u6211\u95e8\u5fc5\u987b\u624b\u52a8\u5207\u6362\u5230\u5177\u4f53\u7684crate\u76ee\u5f55\uff0c\u518d\u6267\u884c<code>cargo publish</code>\u3002</p>"},{"location":"14_cargo_and_crates.io/04_install_binary_crate/","title":"\u5b89\u88c5\u4e8c\u8fdb\u5236Crate","text":""},{"location":"14_cargo_and_crates.io/04_install_binary_crate/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u4f7f\u7528<code>cargo install</code>\u6765\u5b89\u88c5\u4e8c\u8fdb\u5236crate\uff0c\u5b89\u88c5\u6765\u6e90\u6765\u81eahttps://crates.io</p> <p>\u53ea\u80fd\u5b89\u88c5\u5177\u6709\u4e8c\u8fdb\u5236\u76ee\u6807\uff08binary target\uff09\u7684crate\uff0c\u4e8c\u8fdb\u5236\u76ee\u6807binary target\u662f\u4e00\u4e2a\u53ef\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u7531<code>src/main.rs</code>\u6216\u5176\u4ed6\u88ab\u6307\u5b9a\u4e3a\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684crate\u751f\u6210\u3002</p> <p>\u901a\u5e38\u5728\u5bf9\u5e94\u7684crate\u4ed3\u5e93\u4e2d\uff0cREADME\u6587\u4ef6\u91cc\u91cc\u6709\u5173\u4e8ecrate\u7684\u63cf\u8ff0\u3002</p>"},{"location":"14_cargo_and_crates.io/04_install_binary_crate/#cargo-install","title":"\u4e8c\u3001cargo install","text":"<p>cargo install\u5b89\u88c5\u7684\u4e8c\u8fdb\u5236\u5b58\u653e\u5728\u6839\u76ee\u5f55\u7684bin\u6587\u4ef6\u5939\u3002</p> <p>\u5982\u679c\u4f7f\u7528<code>rustup</code>\u5b89\u88c5\u7684rust\uff0c\u6ca1\u6709\u8fdb\u884c\u4efb\u4f55\u914d\u7f6e\uff0c\u90a3\u4e48\u4e8c\u8fdb\u5236\u5b58\u653e\u76ee\u5f55\u662f<code>$HOME/.cargo/bin</code>\u3002\u4e3a\u4e86\u786e\u4fddrust\u5b89\u88c5\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u80fd\u591f\u8fd0\u884c\uff0c\u6211\u95e8\u8981\u786e\u4fdd\u8be5\u76ee\u5f55\u5728<code>PATH</code>\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u6211\u95e8\u624d\u80fd\u5728\u7ec8\u7aef\u4e0a\u6267\u884c\u5b89\u88c5\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p>"},{"location":"14_cargo_and_crates.io/04_install_binary_crate/#cargo","title":"\u4e09\u3001\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u6269\u5c55cargo","text":"<p>cargo\u88ab\u8bbe\u8ba1\u6210\u53ef\u4ee5\u4f7f\u7528\u5b50\u547d\u4ee4\u6765\u6269\u5c55\u3002\u4f8b\u5982\uff1a\u5982\u679c\u5728PATH\u4e2d\u7684\u67d0\u4e2a\u4e8c\u8fdb\u5236\u662f<code>cargo-something</code>\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u50cf\u81ea\u547d\u4ee4\u4e00\u6837\u8fd0\u884c\uff0c\u5982\u4e0b</p> <pre><code>cargo something\n</code></pre> <p>\u7c7b\u4f3c\u8fd9\u6837\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\u53ef\u4ee5\u901a\u8fc7<code>cargo list</code>\u547d\u4ee4\u5217\u51fa\u6765\u3002\u8fd9\u79cd\u8bbe\u8ba1\u7684\u6709\u70b9\u5728\u4e8e\uff0c\u6211\u95e8\u53ef\u4ee5\u4f7f\u7528<code>cargo install</code>\u6765\u5b89\u88c5\u6269\u5c55\uff0c\u5e76\u60f3\u5185\u7f6e\u5de5\u5177\u4e00\u6837\u8fd0\u884c\u3002</p>"},{"location":"15_smart_pointer/01_smart_pointer/","title":"\u667a\u80fd\u6307\u9488\u6982\u8ff0","text":""},{"location":"15_smart_pointer/01_smart_pointer/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u6307\u9488\uff1a\u4e00\u4e2a\u53d8\u91cf\u5728\u5185\u5b58\u4e2d\u5305\u542b\u7684\u662f\u4e00\u4e2a\u5730\u5740\uff08\u6307\u5411\u5176\u4ed6\u6570\u636e\uff09\uff0c\u8be5\u53d8\u91cf\u5c31\u662f\u4e00\u4e2a\u6307\u9488\u3002\u5728Rust\u4e2d\u6700\u5e38\u89c1\u7684\u6307\u9488\u5c31\u662f\u201c\u5f15\u7528\u201d\u3002\u5f15\u7528\u4f7f\u7528<code>&amp;</code>\u6807\u6ce8\uff0c\u5b83\u4f1a\u501f\u7528\u5b83\u6307\u5411\u7684\u503c\uff0c\u800c\u4e14\u6ca1\u6709\u5176\u4f59\u7684\u5f00\u9500\uff0c\u5b83\u4e5f\u662f\u6700\u5e38\u89c1\u7684\u6307\u9488\u7c7b\u578b\u3002</p> <p>\u667a\u80fd\u6307\u9488\u662f\u8fd9\u6837\u7684\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\uff1a\u884c\u4e3a\u548c\u6307\u9488\u76f8\u4f3c\uff0c\u4f46\u6709\u989d\u5916\u7684\u5143\u6570\u636e\u548c\u529f\u80fd\u3002</p>"},{"location":"15_smart_pointer/01_smart_pointer/#reference-counting","title":"\u4e8c\u3001\u5f15\u7528\u8ba1\u6570\uff08reference counting\uff09\u667a\u80fd\u6307\u9488\u7c7b\u578b","text":"<p>\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\u662f\u901a\u8fc7\u8bb0\u5f55\u6240\u6709\u8005\u7684\u6570\u91cf\uff0c\u4f7f\u4e00\u4efd\u6570\u636e\u88ab\u591a\u4e2a\u6240\u6709\u8005\u540c\u65f6\u6301\u6709\uff0c\u5e76\u5728\u6ca1\u6709\u4efb\u4f55\u6240\u6709\u8005\u65f6\u81ea\u52a8\u6e05\u7406\u6570\u636e\u3002\u901a\u8fc7\u8fd9\u4e2a\u6982\u5ff5\u6211\u4eec\u5f97\u77e5\u5f15\u7528\u548c\u667a\u80fd\u6307\u9488\u6709\u6240\u4e0d\u540c\uff0c\u5f15\u7528\u662f\u501f\u7528\u6570\u636e\uff0c\u800c\u667a\u80fd\u6307\u9488\u5f88\u591a\u65f6\u5019\u90fd\u62e5\u6709\u5b83\u6240\u6307\u5411\u7684\u6570\u636e\u3002\u4ee5\u4e0b\u662f\u667a\u80fd\u6307\u9488\u7684\u4f8b\u5b50</p> <ul> <li><code>String</code></li> <li><code>Vec&lt;T&gt;</code></li> </ul> <p>\u5b83\u4eec\u90fd\u62e5\u6709\u4e00\u7247\u5185\u5b58\u533a\u57df\uff0c\u5e76\u4e14\u5141\u8bb8\u7528\u6237\u5bf9\u5176\u64cd\u4f5c\u3002\u800c\u4e14\u5b83\u4eec\u8fd8\u6709\u5143\u6570\u636e\uff0c\u4f8b\u5982\u5bb9\u91cf\u7b49\u3002\u6b64\u5916\u4ed6\u4eec\u8fd8\u63d0\u4f9b\u989d\u5916\u7684\u529f\u80fd\u6216\u4fdd\u969c\uff0c\u5982String\u4fdd\u969c\u5176\u6570\u636e\u90fd\u662f\u5408\u6cd5\u7684UTF8\u7f16\u7801\u3002</p>"},{"location":"15_smart_pointer/01_smart_pointer/#_3","title":"\u4e09\u3001\u667a\u80fd\u6307\u9488\u7684\u5b9e\u73b0","text":"<p>\u667a\u80fd\u6307\u9488\u901a\u5e38\u4f7f\u7528struct\u5b9e\u73b0\uff0c\u548c\u4e00\u822c\u7ed3\u6784\u4f53\u4e0d\u540c\u7684\u662f\uff0c\u667a\u80fd\u6307\u9488\u7684\u7ed3\u6784\u4f53\u901a\u5e38\u4f1a\u5b9e\u73b0<code>Deref</code>\u548c<code>Drop</code>\u8fd9\u4e24\u4e2aTrait\u3002Deref trait\u5141\u8bb8\u667a\u80fd\u6307\u9488struct\u7684\u5b9e\u4f8b\u50cf\u5f15\u7528\u4e00\u6837\u4f7f\u7528\uff0cDrop trait\u5141\u8bb8\u4f60\u81ea\u5b9a\u4e49\u5f53\u667a\u80fd\u6307\u9488\u5b9e\u4f8b\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u8fd0\u884c\u7684\u4ee3\u7801\u3002</p>"},{"location":"15_smart_pointer/01_smart_pointer/#_4","title":"\u56db\u3001\u667a\u80fd\u667a\u80fd\u7684\u5185\u5bb9","text":"<p>\u5728\u4e0b\u9762\u51e0\u8282\u4e2d\uff0c\u5c06\u4ecb\u7ecd\u6807\u51c6\u5e93\u4e2d\u5e38\u89c1\u7684\u667a\u80fd\u6307\u9488</p> <ul> <li><code>Box&lt;T&gt;</code>\uff1a\u5728heap\u5185\u5b58\u4e0a\u5206\u914d</li> <li><code>Rc&lt;T&gt;</code>\uff1a\u542f\u7528\u591a\u91cd\u6240\u6709\u6743\u7684\u5f15\u7528\u8ba1\u6570\u7c7b\u578b</li> <li><code>Ref&lt;T&gt;</code>\u548c<code>RefMut&lt;T&gt;</code>\uff0c\u901a\u8fc7<code>RefCell&lt;T&gt;</code>\u8bbf\u95ee\uff1a\u5728\u8fd0\u884c\u65f6\u800c\u4e0d\u662f\u7f16\u8bd1\u65f6\u5f3a\u5236\u501f\u7528\u89c4\u5219\u7684\u7c7b\u578b</li> </ul> <p>\u6b64\u5916\u8fd8\u5c06\u4ecb\u7ecd\u4ee5\u4e0b\u4e24\u4e2a\u77e5\u8bc6\u70b9</p> <ul> <li>\u5185\u90e8\u53ef\u53d8\u6a21\u5f0f\uff08interior mutability pattern\uff09\uff1a\u4e0d\u53ef\u53d8\u7c7b\u578b\u66b4\u9732\u51fa\u53ef\u4fee\u6539\u5176\u5185\u90e8\u503c\u7684API</li> <li>\u5f15\u7528\u5faa\u73af\uff08reference cycles\uff09\uff1a\u5b83\u4eec\u5982\u4f55\u6cc4\u9732\u5185\u5b58\uff0c\u4ee5\u53ca\u5982\u4f55\u9632\u6b62\u5176\u53d1\u751f</li> </ul>"},{"location":"15_smart_pointer/02_box_point_heap/","title":"\u4f7f\u7528Box\u6765\u6307\u5411Heap\u7684\u6570\u636e","text":""},{"location":"15_smart_pointer/02_box_point_heap/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p><code>Box&lt;T&gt;</code>\u662f\u4e00\u79cd\u6700\u7b80\u5355\u7684\u667a\u80fd\u6307\u9488\uff0c\u5b83\u5b9e\u73b0\u4e86Deref trait\u548cDrop trait\u3002\u5b83\u5141\u8bb8\u4f60\u5728heap\u4e0a\u5b58\u50a8\u6570\u636e\uff08\u800c\u4e0d\u662fstack\uff09\uff0cBox\u5728stack\u4e0a\u6709\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411heap\u4e0a\u7684\u771f\u6b63\u6570\u636e\uff0c\u5982\u4e0b\u56fe</p> <p>49-01</p> <p>\u51fa\u4e86\u628a\u6570\u636e\u5b58\u50a8\u5728heap\u4e0a\u4e4b\u5916\uff0c<code>Box&lt;T&gt;</code>\u6ca1\u6709\u5176\u4ed6\u7684\u6027\u80fd\u5f00\u9500\u4e86\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u5176\u4ed6\u989d\u5916\u7684\u529f\u80fd\uff0c\u9002\u7528\u4e8e\u201c\u95f4\u63a5\u201d\u5b58\u50a8\u7684\u573a\u666f\uff0c\u4f8b\u5982Cons List\u3002</p>"},{"location":"15_smart_pointer/02_box_point_heap/#box","title":"\u4e8c\u3001Box\u7684\u5e38\u7528\u573a\u666f <p><code>Box&lt;T&gt;</code>\u4e3b\u8981\u67093\u4e2a\u4f7f\u7528\u573a\u666f\uff0c\u5982\u4e0b</p> <ul> <li>\u5728\u7f16\u8bd1\u65f6\uff0c\u67d0\u7c7b\u578b\u7684\u5927\u5c0f\u65e0\u6cd5\u786e\u5b9a\u3002\u4f46\u4f7f\u7528\u8be5\u7c7b\u578b\u65f6\uff0c\u4e0a\u4e0b\u6587\u5374\u9700\u8981\u77e5\u9053\u5b83\u7684\u786e\u5207\u5927\u5c0f\u3002</li> <li>\u5f53\u4f60\u6709\u5927\u91cf\u6570\u636e\uff0c\u60f3\u79fb\u4ea4\u6240\u6709\u6743\uff0c\u4f46\u786e\u4fdd\u8fd9\u4e9b\u7231\u64cd\u4f5c\u65f6\u6570\u636e\u4e0d\u4f1a\u88ab\u590d\u5236\u3002</li> <li>\u4f7f\u7528\u67d0\u503c\u65f6\uff0c\u4f60\u53ea\u5173\u5fc3\u662f\u5426\u5b9e\u73b0\u4e86\u7279\u5b9a\u7684trait\uff0c\u5c14\u4e0d\u5173\u5fc3\u5b83\u7684\u5177\u4f53\u7c7b\u578b\u3002</li> </ul>","text":""},{"location":"15_smart_pointer/02_box_point_heap/#heap","title":"\u4e09\u3001\u5982\u4f55\u5728heap\u4e0a\u5b58\u50a8\u6570\u636e <p>\u6211\u4eec\u5148\u6765\u770b\u4e2a\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\n    let b = Box::new(5);\n    println!(\"b = {}\", b);\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u53d8\u91cf<code>b</code>\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528\u5176\u4ed6\u6570\u636e\u7c7b\u578b\uff0c\u90a3\u4e48\u6570\u636e\u5c06\u5b58\u5728stack\u4e0a\uff0c\u800c\u663e\u793a\u7528\u4e86<code>Box</code>\u7684<code>new</code>\u5173\u8054\u51fd\u6570\uff0c5\u5c31\u5b58\u5728heap\u4e0a\u4e86\u3002\u548c\u5176\u4ed6\u4efb\u4f55\u62e5\u6709\u6240\u6709\u6743\u7684\u503c\u4e00\u6837\uff0c<code>b</code>\u5728\u79bb\u5f00\u81ea\u5df1\u4f5c\u7528\u57df\u7684\u65f6\u5019\uff0c\u4f1a\u88ab\u81ea\u52a8\u91ca\u653e\u5b58\u5728statck\u4e0a\u9762\u7684\u6307\u9488\uff0c\u5df2\u7ecf\u5b58\u5728heap\u4e0a\u7684\u6570\u636e\u3002</p>","text":""},{"location":"15_smart_pointer/02_box_point_heap/#box_1","title":"\u56db\u3001\u4f7f\u7528Box\u8d4b\u80fd\u9012\u5f52\u7c7b\u578b","text":""},{"location":"15_smart_pointer/02_box_point_heap/#41","title":"4.1 \u9012\u5f52\u6570\u636e\u7ed3\u6784","text":"<p>\u5728\u7f16\u8bd1\u65f6\uff0cRust\u9700\u8981\u77e5\u9053\u6bcf\u4e00\u4e2a\u7c7b\u578b\u6240\u5360\u7684\u7a7a\u95f4\u5927\u5c0f\uff0c\u9012\u5f52\u7c7b\u578b\u7684\u6570\u636e\u7ed3\u6784\u5982\u4e0b\u56fe</p> <p></p> <p>\u800c\u9012\u5f52\u7c7b\u578b\u7684\u5927\u5c0f\u65e0\u6cd5\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\uff0c\u4f46\u5728\u9012\u5f52\u7c7b\u578b\u4e2d\u4f7f\u7528Box\u5c31\u80fd\u89e3\u51b3\u4e0a\u8bc9\u95ee\u9898\u3002</p> <p>Cons List\u662f\u6765\u81eaLisp\u8bed\u8a00\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0cCons List\u91cc\u7684\u6bcf\u4e2a\u6210\u5458\u7531\u4e24\u4e2a\u5143\u7d20\u7ec4\u6210\uff0c\u4e00\u4e2a\u5b57\u6bb5\u662f\u5f53\u524d\u9879\u7684\u503c\uff0c\u53e6\u5916\u4e00\u4e2a\u5b57\u6bb5\u662f\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002\u800c\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u6570\u636e\u7c7b\u578b\u4e5f\u662f\u5f53\u524d\u5143\u7d20\u7684\u6570\u636e\u7c7b\u578b\u3002Cons List \u91cc\u7684\u6700\u540e\u4e00\u4e2a\u6210\u5458\u53ea\u5305\u542b\u4e00\u4e2aNil\u503c\uff0c\u6ca1\u6709\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u5176\u5b9eCons List\u5c31\u662f\u5176\u4e2d\u94fe\u8868\uff0c\u5728Rust\u8bed\u8a00\u91cc\u9762\uff0c\u50cfCons List\u7684\u7ed3\u6784\u5e76\u4e0d\u662f\u5e38\u7528\u7684\u96c6\u5408\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c<code>Vec&lt;T&gt;</code>\u662f\u66f4\u9ad8\u7684\u9009\u62e9\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u5c1d\u8bd5\u5728Rust\u4e2d\u5b9a\u4e49\u5982Cons List \u8fd9\u6837\u7684\u9012\u5f52\u6570\u636e\u7ed3\u6784\uff0c\u5982\u4e0b\u9519\u8bef\u7684\u4ee3\u7801</p> <pre><code>use crate::List::{Cons, Nil};\nenum List {\nCons(i32, List),\nNil,\n}\nfn main() {\nlet list = Cons(1, Cons(2, Cons(3, Nil)));\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u7f16\u8bd1\u4e4b\u540e\uff0c\u5c06\u4f1a\u51fa\u73b0\u62a5\u9519\uff0c\u56e0\u4e3a\u4e0a\u9762\u7684<code>list</code>\u662f\u9012\u5f52\u7684\u6570\u636e\u7c7b\u578b\uff0c\u62e5\u6709\u662f\u65e0\u9650\u5236\u7684\u5927\u5c0f\uff0crust\u65e0\u6cd5\u8ba1\u7b97\u51fa\u5b58\u50a8list\u9700\u8981\u591a\u5927\u7684\u7a7a\u95f4\u3002</p>"},{"location":"15_smart_pointer/02_box_point_heap/#42","title":"4.2 \u89e3\u51b3\u5b58\u50a8\u9012\u5f52\u6570\u636e\u7ed3\u6784\u7684\u95ee\u9898","text":"<p>\u6211\u4eec\u7ee7\u7eed\u770b\u4e00\u4e2a\u679a\u4e3e\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5206\u6790Rust\u5982\u4f55\u786e\u5b9a\u679a\u4e3e\u5206\u914d\u7684\u7a7a\u95f4\u5927\u5c0f</p> <pre><code>enum Message {\nQuit,\nMove { x: i32, y:i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\n</code></pre> <p>rust\u4f1a\ud83c\udfea\u679a\u4e3e\u7684\u6240\u6709\u53d8\u4f53\uff0c\u800c\u4e00\u4e2a\u679a\u4e3e\u503c\u53ea\u4f1a\u6709\u4e00\u4e2a\u53d8\u4f53\u5b58\u5728\uff0c\u6240\u4ee5Message\u679a\u4e3e\u6240\u9700\u8981\u7684\u7a7a\u95f4\u5927\u5c0f\u4e5f\u5c31\u662f\u80fd\u591f\u5b58\u50a8\u5f97\u4e0b\u6700\u5927\u53d8\u4f53\u7684\u7a7a\u95f4\u5927\u5c0f\u3002</p> <p><code>Box&lt;T&gt;</code>\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u9488\u7684\u5927\u5c0f\u4e0d\u4f1a\u56e0\u4e3a\u5b83\u6307\u5411\u7684\u6570\u636e\u7684\u5927\u5c0f\u53d8\u5316\u800c\u53d8\u5316\uff0cRust\u77e5\u9053\u5b83\u9700\u8981\u591a\u5c11\u7a7a\u95f4\u3002\u6240\u4ee5\u8981\u5728Rust\u4e2d\u4f7f\u7528Cons\uff0c\u4f7f\u7528Box\u95f4\u63a5\u5b58\u50a8Cons\u4e2d\u4e0b\u4e00\u4e2a\u6570\u636e\u5373\u53ef\uff0c\u5982\u4e0b\u6570\u636e\u7ed3\u6784</p> <p></p> <p>\u4fee\u6539\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use crate::List::{Cons, Nil};\nenum List {\nCons(i32, Box&lt;List&gt;),\nNil,\n}\nfn main() {\nlet list = Cons(1, Box::new(Cons(2,\nBox::new(Cons(3,\nBox::new(Nil))))));\n}\n</code></pre> <p>\u73b0\u5728\u4f7f\u7528\u65b0\u7684Cons\u6570\u636e\u7ed3\u6784\u540e\uff0crust\u4fbf\u77e5\u9053\u4f7f\u7528\u4e00\u90e8\u5206\u7a7a\u95f4\u5b58\u50a8i32\u6570\u636e\u7c7b\u578b\uff0c\u610f\u5916\u4e00\u90e8\u5206\u7a7a\u95f4\u5b58\u50a8Box\uff08\u76f8\u5f53\u4e8e\u4e00\u4e2a\u6307\u9488\u7684\u5927\u5c0f\uff09\u3002\u4f18\u5316\u4e4b\u540e\u6570\u636e\u7ed3\u6784\u4ecd\u7136\u662f\u4e00\u4e2a\u9012\u5f52\uff0c\u800c\u6570\u636e\u4e0d\u662f\u76f4\u63a5\u5b58\u50a8\u4e86\uff0c\u4f7f\u7528\u4e00\u79cd\u95f4\u63a5\u7684\u65b9\u5f0f\u6765\u6307\u5411\u548c\u5b58\u50a8\u6570\u636e\u3002</p>"},{"location":"15_smart_pointer/03_deref_trait/","title":"Deref Trait","text":""},{"location":"15_smart_pointer/03_deref_trait/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5982\u679c\u4e00\u4e2a\u7c7b\u578b\u5b9e\u73b0\u4e86<code>Deref Trait</code>\u4f7f\u6211\u95e8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u89e3\u5f15\u7528<code>*</code>\u7684\u884c\u4e3a\u3002\u901a\u8fc7\u4f7f\u7528Deref\uff0c\u667a\u80fd\u6307\u9488\u53ef\u4ee5\u50cf\u5e38\u89c4\u5f15\u7528\u4e00\u6837\u6765\u5904\u7406\u3002</p>"},{"location":"15_smart_pointer/03_deref_trait/#_2","title":"\u4e8c\u3001\u89e3\u5f15\u7528\u8fd0\u7b97\u7b26","text":"<p>\u5e38\u89c4\u7684\u5f15\u7528\u4e5f\u662f\u4e00\u79cd\u6307\u9488\uff0c\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>fn main() {\nlet x = 5;\nlet y = &amp;x;\nassert_eq!(5, x);\nassert_eq!(5, *y);\n}\n</code></pre> <p>x\u5b58\u4e00\u4e2ai32\u7c7b\u578b\u7684\u6574\u6570\uff0cy\u662fx\u7684\u5f15\u7528\uff0c\u6240\u4ee5y\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u6307\u9488\u3002\u7b2c\u4e00\u4e2a\u65ad\u8a00\u4e2d<code>5</code>\u548c<code>x</code>\u662f\u76f8\u7b49\u7684\uff0c\u6ca1\u6709\u95ee\u9898\u3002y\u662f\u4e2a\u6307\u9488\uff0c\u8fd9\u91cc\u662f\u6b63\u6570<code>5</code>\u7684\u5f15\u7528\uff0c\u5b83\u6307\u5411\u4e00\u4e2a\u503c: <code>5</code>\u3002\u5982\u679c\u60f3\u628a\u5b83\u6307\u5411\u7684\u503c\u53d6\u51fa\u6765\uff0c\u90a3\u5c31\u662f\u5728\u524d\u9762\u52a0\u4e00\u4e2a\u89e3\u5f15\u7528\u7b26\u53f7<code>*</code>\uff0c\u6240\u4ee5<code>*y</code>\u548c<code>5</code>\u4e5f\u662f\u76f8\u7b49\u7684\u3002</p>"},{"location":"15_smart_pointer/03_deref_trait/#box","title":"\u4e09\u3001\u4f7f\u7528Box\u4ee3\u66ff\u4e0a\u4f8b\u4e2d\u7684\u5f15\u7528 <p>\u6211\u95e8\u53ef\u4ee5\u539f\u56e0\u7684\u5f15\u7528\u6362\u6210<code>Box&lt;T&gt;</code>\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\n    let x = 5;\n    let y = Box::new(x);\n\n    assert_eq!(5, x);\n    assert_eq!(5, *y);\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e5f\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6240\u4ee5\u8bf4<code>Box&lt;T&gt;</code>\u53ef\u4ee5\u50cf\u5f15\u7528\u4e00\u6837\u6765\u5904\u7406\u3002</p>","text":""},{"location":"15_smart_pointer/03_deref_trait/#_3","title":"\u56db\u3001\u5b9a\u4e49\u81ea\u5df1\u7684\u667a\u80fd\u6307\u9488 <p><code>Box&lt;T&gt;</code>\u88ab\u5b9a\u4e49\u6210\u4e00\u4e2a\u62e5\u6709\u5143\u7d20\u7684tuple struct\uff0c\u4e0b\u9762\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a<code>MyBox&lt;T&gt;</code>\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2atuple struct\uff0c\u5373\u5143\u7ec4\u7ed3\u6784\u4f53\u3002\u5982\u4e0b\u4ee3\u7801</p> <pre><code>struct MyBox&lt;T&gt;(T);\n\nimpl&lt;T&gt; MyBox&lt;T&gt; {\n    fn new(x:T) -&gt; MyBox&lt;T&gt; {\n        MyBox(x)\n    }\n}\n</code></pre> <p><code>MyBox</code>\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6709\u540d\u79f0\u7684\u5143\u7ec4\uff0c\u8be5\u5143\u7ec4\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u3002\u4e0d\u8fc7\u5982\u679c\u6211\u4eec\u7528\u4e8e\u66ff\u4ee3<code>Box</code>\uff0c\u662f\u4e0d\u80fd\u5b9e\u73b0\u7684\uff0c\u5b83\u5c06\u4e0d\u80fd\u4e3a\u89e3\u5f15\u7528\u3002\u5982\u679c\u9700\u8981\u80fd\u591f\u89e3\u5f15\u7528\uff0c\u6211\u95e8\u9700\u8981\u5b9e\u73b0Deref Trait\u3002</p>","text":""},{"location":"15_smart_pointer/03_deref_trait/#deref-trait_1","title":"\u4e94\u3001\u5b9e\u73b0Deref Trait <p>\u6807\u51c6\u5e93\u4e2d\u7684Deref trait\u8981\u6c42\u6211\u4eec\u5b9e\u73b0\u4e00\u4e2aderef\u7684\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4f1a\u501f\u7528self\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u6307\u5411\u5185\u90e8\u6570\u636e\u7684\u5f15\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::ops::Deref;\n\nstruct MyBox&lt;T&gt;(T);\n\nimpl&lt;T&gt; MyBox&lt;T&gt; {\n    fn new(x:T) -&gt; MyBox&lt;T&gt; {\n        MyBox(x)\n    }\n}\n\nimpl&lt;T&gt; Deref for MyBox&lt;T&gt; {\n    type Target = T;\n\n    fn deref(&amp;self) -&gt; &amp;T {\n        &amp;self.0\n    }\n}\n\nfn main() {\n    let x = 5;\n    let y = MyBox::new(x);\n\n    assert_eq!(5, x);\n    assert_eq!(5, *(y.d));\n}\n</code></pre> <p>\u56e0\u4e3a<code>MyBox&lt;T&gt;</code>\u5b9e\u73b0\u4e86<code>Deref</code> trait\uff0c\u6240\u4ee5\u4f7f\u7528<code>*</code>\u53ef\u4ee5\u8fdb\u884c\u89e3\u5f15\u7528\u3002\u5b9e\u9645\u4e0a\uff0c<code>*y</code>\u5c31\u7b49\u540c\u4e8e<code>*(y.deref())</code>\uff0c\u56e0\u4e3arust\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u65f6\u4f1a\u5c06<code>*y</code>\u4f1a\u9690\u5f0f\u5730\u5c55\u5f00\u6210<code>*(y.deref())</code>\u3002</p>","text":""},{"location":"15_smart_pointer/03_deref_trait/#deref-coerion","title":"\u516d\u3001\u51fd\u6570\u548c\u65b9\u6cd5\u7684\u9690\u5f0f\u89e3\u5f15\u7528\u8f6c\u5316\uff08Deref Coerion\uff09 <p>\u9690\u5f0f\u89e3\u5f15\u7528\u8f6c\u5316\uff08Deref Coercion\uff09\u662f\u4e3a\u51fd\u6570\u548c\u65b9\u6cd5\u63d0\u4f9b\u7684\u4e00\u79cd\u4fbf\u6377\u7279\u6027\u3002\u5047\u8bbe<code>T</code>\u5b9e\u73b0\u4e86<code>Deref</code> trait\uff0cDeref Coerion\u53ef\u4ee5\u628a<code>T</code>\u7684\u5f15\u7528\u8f6c\u5316\u4e3a<code>T</code>\u7ecf\u8fc7<code>Deref</code>\u64cd\u4f5c\u540e\u7684\u751f\u6210\u5f15\u7528\u3002</p> <p>\u5f53\u628a\u67d0\u7c7b\u578b\u7684\u5f15\u7528\u4f20\u9012\u7ed9\u51fd\u6570\u6216\u65b9\u6cd5\u65f6\uff0c\u4f46\u5b83\u7684\u7c7b\u578b\u4e8e\u5b9a\u4e49\u7684\u53c2\u6570\u4e0d\u5339\u914d\uff0cDeref Coerion\u5c31\u4f1a\u81ea\u52a8\u53d1\u751f\u3002\u7f16\u8bd1\u5668\u4f1a\u5bf9deref\u8fdb\u884c\u4e00\u7cfb\u5217\u8c03\u7528\uff0c\u6765\u628a\u5b83\u8f6c\u4e3a\u6240\u9700\u7684\u53c2\u6570\u7c7b\u578b\u3002\u8fd9\u4e2a\u64cd\u4f5c\u5728\u7f16\u8bd1\u65f6\u5b8c\u6210\uff0c\u6ca1\u6709\u989d\u5916\u7684\u6027\u80fd\u5f00\u9500\u3002\u6211\u4eec\u5728\u4e94\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\u8ffd\u52a0\u4e00\u4e2a\u51fd\u6570\uff0c\u5982\u4e0b</p> <pre><code>fn hello(name: &amp;str) {\n    println!(\"Hello, {}\", name);\n}\n</code></pre> <p>\u63a5\u7740\u5728<code>main</code>\u51fd\u6570\u4e2d\u8c03\u7528</p> <pre><code>fn main() {\n    let m = MyBox::new(String::from(\"Rust\"));\n\n    hello(\"Rust\");\n    hello(&amp;m);\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>hello</code>\u65b9\u6cd5\u9700\u8981\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\u3002<code>m</code>\u662f<code>MyBox&lt;String&gt;</code>\u7684\u4e00\u4e2a\u5f15\u7528\uff0c\u7531\u4e8e<code>MyBox&lt;T&gt;</code>\u5b9e\u73b0\u4e86<code>deref</code> trait\uff0c\u6240\u4ee5rust\u53ef\u4ee5\u8c03\u7528<code>deref</code>\u65b9\u6cd5\u628a<code>MyBox&lt;String&gt;</code>\u7684\u5f15\u7528\u8f6c\u5316\u4e3a<code>String</code>\u7684\u5f15\u7528\u3002\u800c<code>String</code>\u4e5f\u5b9e\u73b0\u4e86<code>deref</code> trait\uff0c\u5b83\u7684\u5b9e\u73b0\u662f\u8fd4\u56de\u5b57\u7b26\u4e32\u5207\u7247\u3002\u6240\u4ee5\u4e0a\u9762<code>hello</code>\u65b9\u6cd5\u4f20\u5165\u7684<code>&amp;m</code>\u7ecf\u8fc7\u9690\u5f0f\u89e3\u5f15\u7528\u8f6c\u5316\u4e4b\u540e\uff0c\u7c7b\u578b\u5c31\u5339\u914d\u4e86\u3002</p> <p>\u5982\u679crust\u6ca1\u6709\u5b9e\u73b0\u9690\u5f0f\u89e3\u5f15\u7528\uff0c\u6211\u4eec\u7684\u8c03\u7528\u65b9\u6cd5\u5982\u4e0b</p> <pre><code>hello(&amp;(*m)[..]);\n</code></pre> <p>\u5145\u6ee1\u4e86\u5404\u79cd\u7b26\u53f7\uff0c\u96be\u4ee5\u9605\u8bfb\u3002 \u6240\u4ee5\u8bf4\u53ea\u8981\u8fd9\u4e2a\u7c7b\u578b\u5b9e\u73b0\u4e86<code>Deref</code> trait\uff0crust\u5c31\u4f1a\u81ea\u52a8\u5206\u6790\u7c7b\u578b\uff0c\u5e76\u4e0d\u65ad\u5c1d\u8bd5\u8c03\u7528<code>deref</code>\u65b9\u6cd5\uff0c\u6765\u8ba9\u5b83\u4e0e\u51fd\u6570\u6216\u662f\u65b9\u6cd5\u5b9a\u4e49\u7684\u53c2\u6570\u7c7b\u578b\u5339\u914d\u3002\u800c\u4e14\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u5b8c\u6210\u7684\uff0c\u5bf9\u7a0b\u5e8f\u7684\u8fd0\u884c\u65f6\u4e0d\u4f1a\u989d\u5916\u7684\u6027\u80fd\u5f00\u9500\u3002</p>","text":""},{"location":"15_smart_pointer/03_deref_trait/#_4","title":"\u4e03\u3001\u89e3\u5f15\u7528\u4e0e\u53ef\u53d8\u6027 <p>\u53ef\u4f7f\u7528DerefMut trait\u91cd\u8f7d\u53ef\u53d8\u5f15\u7528<code>*</code>\u8fd0\u7b97\u7b26\u3002\u5728\u7c7b\u578b\u548ctrait\u5728\u4e0b\u5217\u4e09\u79cd\u60c5\u51b5\u53d1\u751f\u65f6\uff0crust\u4f1a\u6267\u884cdefref coercion</p> <ul> <li>\u5f53<code>T</code>\u5b9e\u73b0\u4e86<code>Deref&lt;target=U&gt;</code>\uff0c\u5141\u8bb8<code>&amp;T</code>\u8f6c\u4e3a<code>&amp;U</code></li> <li>\u5f53<code>T</code>\u5b9e\u73b0\u4e86<code>DerefMut&lt;target=U&gt;</code>\uff0c\u5141\u8bb8<code>&amp;mut T</code>\u8f6c\u4e3a<code>&amp;mut U</code></li> <li>\u5f53<code>T</code>\u5b9e\u73b0\u4e86<code>Deref&lt;target=U&gt;</code>\uff0c\u5141\u8bb8<code>&amp;mut T</code>\u8f6c\u4e3a<code>&amp;U</code></li> </ul> <p>rust\u53ef\u4ee5\u628a\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\u8f6c\u4e3a\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u4f46\u662f\u53cd\u8fc7\u6765\u4e0d\u884c\u3002\u56e0\u4e3a\u5c06\u4e0d\u53ef\u53d8\u5f15\u7528\u8f6c\u4e3a\u53ef\u53d8\u5f15\u7528\uff0c\u501f\u7528\u89c4\u5219\u8981\u6c42\u8fd9\u4e2a\u5f15\u7528\u5fc5\u987b\u65f6\u552f\u4e00\u7684\uff0c\u4f46\u8fd9\u70b9\u65e0\u6cd5\u4fdd\u8bc1\u3002\u4e0a\u9762\u5217\u51fa\u7684\u60c5\u51b5\u7a0d\u5fae\u8bb0\u4e00\u4e0b\u5c31\u884c\uff0c\u8fd9\u91cc\u8fd8\u6709\u4e9b\u77e5\u8bc6\u4e3a\u6d89\u53ca\u5230\u3002</p>","text":""},{"location":"15_smart_pointer/04_drop_trait/","title":"Drop Trait","text":""},{"location":"15_smart_pointer/04_drop_trait/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5f53\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u5b9e\u73b0Drop Trait\u4e4b\u540e\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u81ea\u5b9a\u4e49\u5f53\u503c\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u53d1\u751f\u7684\u52a8\u4f5c\u3002\u901a\u5e38\u53d1\u751f\u7684\u52a8\u4f5c\u5305\u62ec\uff1a\u6587\u4ef6\u3001\u7f51\u7edc\u8d44\u6e90\u7684\u91ca\u653e\u7b49\u3002\u4efb\u4f55\u7c7b\u578b\u90fd\u53ef\u4ee5\u5b9e\u73b0Drop trait\uff0cDrop Trait\u53ea\u8981\u6c42\u5b9e\u73b0<code>drop</code>\u65b9\u6cd5\uff0c<code>drop</code>\u7684\u53c2\u6570\u662f\u5bf9self\u7684\u53ef\u53d8\u5f15\u7528\u3002Drop trait\u5728\u9884\u5bfc\u5165\u6a21\u5757\uff08prelude\uff09\u91cc\u3002\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801</p> <pre><code>struct CustomartPointer {\ndata: String,\n}\nimpl Drop for CustomartPointer {\nfn drop(&amp;mut self) {\nprintln!(\"Dropping CustomSmartPointer with data `{}` !\", self.data)\n}\n}\nfn main() {\nlet c = CustomartPointer { data: String::from(\"my  stuff\") };\nlet d = CustomartPointer { data: String::from(\"other  stuff\") };\nprintln!(\"CusomSmartPointers created\")\n}\n</code></pre> <p>\u6267\u884c\u7a0b\u5e8f\u4e4b\u540e\uff0c\u8f93\u51fa\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>CusomSmartPointers created\nDropping CustomSmartPointer with data `other  stuff` !\nDropping CustomSmartPointer with data `my  stuff` !\n</code></pre> <p>\u8fd9\u8868\u660e\uff0c\u4e24\u4e2a\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\u8c03\u7528\u4e86<code>drop</code>\u65b9\u6cd5\u3002</p>"},{"location":"15_smart_pointer/04_drop_trait/#stdmemdropdrop","title":"\u4e8c\u3001\u4f7f\u7528std::mem::drop\u6765\u63d0\u524ddrop\u503c","text":"<p>\u6211\u4eec\u5f88\u96be\u76f4\u63a5\u81ea\u52a8\u8c03\u7528drop\u529f\u80fd\uff0c\u5176\u5b9e\u4e5f\u6ca1\u6709\u5fc5\u8981\uff0c\u56e0\u4e3aDrop trait\u7684\u76ee\u7684\u5c31\u662f\u8fdb\u884c\u81ea\u52a8\u7684\u91ca\u653e\u903b\u8f91\u5904\u7406\u3002\u6b64\u5916\uff0crust\u4e5f\u4e0d\u5141\u8bb8\u624b\u52a8\u8c03\u7528Drop trait\u7684<code>drop</code>\u65b9\u6cd5\uff0c\u4f46\u53ef\u4ee5\u8c03\u7528\u6807\u51c6\u5e93\u7684<code>std::mem::drop</code>\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u4e5f\u5728\u9884\u5bfc\u5165\u6a21\u5757\u4e2d\uff0c\u6765\u63d0\u524ddrop\u503c\uff0c\u76f8\u5f53\u4e8e\u63d0\u524d\u8c03\u7528\u4e86Drop trait\u7684<code>drop</code>\u65b9\u6cd5\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>let c = CustomartPointer { data: String::from(\"my  stuff\") };\ndrop(c);\nlet d = CustomartPointer { data: String::from(\"other  stuff\") };\nprintln!(\"CusomSmartPointers created\")\n</code></pre> <p>\u8fd9\u65f6\u5019\uff0c\u8f93\u5165\u5185\u5bb9\u5982\u4e0b</p> <pre><code>Dropping CustomSmartPointer with data `my  stuff` !\nCusomSmartPointers created\nDropping CustomSmartPointer with data `other  stuff` !\n</code></pre> <p>\u8fd9\u65f6\u5019\uff0c\u4f60\u53ef\u80fd\u4f1a\u6709\u7591\u95ee\uff1a\u63d0\u524d\u8c03\u7528<code>drop</code>\u51fd\u6570\uff0c\u90a3\u4e48\u4f1a\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u91ca\u653e\uff08double free\uff09\u7684\u9519\u8bef\u5462\uff1f\u7b54\u6848\u662f\u4e0d\u4f1a\u7684\uff0crust\u7684\u8bbe\u8ba1\u5f88\u5b89\u5168\uff0c\u5b83\u7684\u6240\u6709\u6743\u7cfb\u7edf\u4f1a\u4fdd\u8bc1\u5f15\u7528\u7684\u6709\u6548\uff0c\u800c<code>drop</code>\u65b9\u6cd5\u4e5f\u53ea\u4f1a\u5728\u4e0d\u518d\u4f7f\u7528\u8be5\u503c\u7684\u65f6\u5019\u53ea\u8c03\u7528\u4e00\u6b21\u3002</p>"},{"location":"15_smart_pointer/05_rc/","title":"Rc","text":""},{"location":"15_smart_pointer/05_rc/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p><code>Rc&lt;T&gt;</code>\u662f\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\u3002</p> <p>\u6240\u6709\u6743\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u6bd4\u8f83\u6e05\u6670\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u503c\uff0c\u6211\u4eec\u4e00\u822c\u80fd\u51c6\u786e\u5224\u5b9a\u54ea\u4e2a\u53d8\u91cf\u62e5\u6709\u5b83\uff0c\u4f46\u5728\u67d0\u4e9b\u573a\u666f\u4e2d\uff0c\u5355\u4e2a\u503c\u6709\u53ef\u80fd\u88ab\u591a\u4e2a\u6240\u6709\u8005\u6240\u6301\u6709\u3002\u6211\u4eec\u770b\u4e00\u4e2a\u56fe</p> <p></p> <p>\u56fe\u4e2d\u662f\u4e00\u4e2a\u56fe\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8282\u70b96\u88ab\u591a\u4e2a\u6570\u636e\u8282\u7535\u5f15\u7528\uff0c\u5c31\u53ef\u4ee5\u8bf4\u8282\u70b96\u540c\u65f6\u88ab\u591a\u4e2a\u6570\u636e\u62e5\u6709\u3002\u4e3a\u4e86\u652f\u6301\u591a\u91cd\u5f15\u7528\uff0crust\u63d0\u4f9b\u4e86\u4e00\u79cd\u53eb<code>Rc&lt;T&gt;</code>\u7684\u6570\u636e\u7c7b\u578b\u3002\u5373<code>reference counting</code>\uff08\u5f15\u7528\u8ba1\u6570\uff09\u3002\u8fd9\u4e2a\u6570\u636e\u7c7b\u578b\u4f1a\u5728\u5b9e\u4f8b\u7684\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a\u7528\u4e8e\u8bb0\u5f55\u503c\u7684\u5f15\u7528\u6b21\u6570\u7684\u8ba1\u6570\u5668\u3002\u4ece\u800c\u5224\u65ad\u8be5\u503c\u662f\u5426\u4ecd\u7136\u5728\u4f7f\u7528\uff0c\u5f97\u4ee5\u8ffd\u8e2a\u5230\u6240\u6709\u503c\u7684\u5f15\u7528\u3002\u5982\u679c\u8bb0\u5f55\u5230\u67d0\u4e2a\u503c\u7684\u5f15\u7528\u4e2a\u6570\u4e3a0\uff0c\u90a3\u4e48\u53ef\u4ee5\u610f\u5473\u8be5\u503c\u53ef\u4ee5\u88ab\u6e05\u7406\u6389\uff0c\u800c\u4e14\u4e0d\u7528\u51fa\u53d1\u5f15\u7528\u5931\u6548\u7684\u95ee\u9898\u3002</p>"},{"location":"15_smart_pointer/05_rc/#rc_1","title":"\u4e8c\u3001Rc\u4f7f\u7528\u573a\u666f <p>\u9700\u8981\u5728heap\u4e0a\u5206\u914d\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u88ab\u7a0b\u5e8f\u5458\u7684\u591a\u4e2a\u90e8\u5206\u8bfb\u53d6\uff08\u53ea\u8bfb\uff09\uff0c\u4f46\u5728\u7f16\u8bd1\u65f6\u65e0\u6cd5\u786e\u5b9a\u54ea\u4e2a\u90e8\u5206\u6700\u540e\u4f7f\u7528\u5b8c\u8fd9\u4e9b\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>Rc&lt;T&gt;</code>\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>Rc&lt;T&gt;</code>\u53ea\u80fd\u7528\u4e8e\u4f46\u7ebf\u7a0b\u573a\u666f\u3002</p> <p><code>Rc&lt;T&gt;</code>\u4e0d\u5728\u57df\u5bfc\u5165\u6a21\u5757\uff08prelude\uff09\u4e2d\uff0c<code>Rc::clone(&amp;a)</code>\u51fd\u6570\u7528\u4e8e\u589e\u52a0\u5f15\u7528\u8ba1\u6570\uff0c\u800c<code>Rc::strong_count(&amp;a)</code>\u7528\u4e8e\u83b7\u5f97\u5f15\u7528\u8ba1\u6570\uff0c\u800c<code>Rc::weak_count</code>\u51fd\u6570\u7528\u4e8e\u5f31\u5f15\u7528\u8ba1\u6570\u3002\u4e0b\u9762\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u793a\u4f8b</p> <p>\u4e24\u4e2aList\u5171\u4eab\u53e6\u4e00\u4e2aList\u7684\u6240\u6709\u6743\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4e0a\u9762\u7684\u529f\u80fd\uff0c\u6211\u4eec\u7f16\u5199\u5982\u4e0b\u4ee3\u7801</p> <pre><code>enum List {\n    Cons(i32, Box&lt;List&gt;),\n    Nil\n}\n\nuse crate::List:: {Cons, Nil};\n\nfn main() {\n    let a = Cons(5,\n        Box::new(Cons(10,\n           Box::new(Nil))));\n\n    // \u5f00\u5934\u5143\u7d20\u662f3\uff0c\u518d\u63a5\u4e0aa\n    let b = Cons(3, Box::new(a));\n    // \u5f00\u5934\u5143\u7d20\u662f4\uff0c\u518d\u63a5\u4e0aa\n    let c = Cons(4, Box::new(a));\n}\n</code></pre> <p>\u4e0d\u8fc7\u4ee5\u4e0a\u7684\u4ee3\u7801\u7f16\u8bd1\u65f6\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u56e0\u4e3a<code>a</code>\u7684\u5df2\u7ecf\u5c06\u503c\u79fb\u52a8\u5230\u4e86<code>b</code>\u5373\u5c06\u6240\u6709\u6743\u8f6c\u79fb\u5230\u4e86<code>b</code>\uff0c\u5982\u679c\u518d\u79fb\u52a8\u5230<code>c</code>\u5c06\u4f1a\u53d1\u751f\u62a5\u9519\u3002\u5982\u679c\u6211\u95e8\u4f7f\u7528<code>Rc&lt;T&gt;</code>\uff0c\u5c06\u89e3\u51b3\u8be5\u95ee\u9898\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use crate::List::{Cons, Nil};\nuse std::rc::Rc;\n\nenum List {\n    Cons(i32, Rc&lt;List&gt;),\n    Nil,\n}\n\nfn main() {\n    let a = Rc::new(Cons(5, Rc::new(Cons(10,Rc::new(Nil)))));\n    let b = Cons(3, Rc::clone(&amp;a));\n    let c = Cons(3, Rc::clone(&amp;a));\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5f53\u521b\u5efa\u4e86<code>b</code>\u5bf9<code>a</code>\u7684\u5f15\u7528\u65f6\uff0cRc\u8ba1\u6570\u5668\u53d8\u62102\uff0c\u5f53\u521b\u5efa<code>c</code>\u5bf9<code>a</code>\u7684\u5f15\u7528\u65f6\uff0cRc\u8ba1\u6570\u5668\u53d8\u62103\uff0c<code>a</code>\u3001<code>b</code>\u3001<code>c</code>\u8fd93\u4e2a\u5e94\u7528\u5171\u4eab\u7684\u65f6\u4e00\u4efd\u6570\u636e\u3002\u6bcf\u6b21\u8c03\u7528<code>Rc::clone</code>\u65b9\u6cd5\uff0cRc\u7684\u8ba1\u6570\u5668\u90fd\u4f1a\u589e\u52a01\u3002<code>Rc&lt;T&gt;</code>\u8fd9\u79cd\u6570\u636e\u7c7b\u578b\u7684\u5f15\u7528\u8ba1\u6570\u5668\u51cf\u5c11\u52300\u7684\u65f6\u5019\uff0c\u5bf9\u5e94\u7684\u6570\u636e\u624d\u4f1a\u88ab\u6e05\u7406\u6389\u3002</p> <p>\u5176\u5b9e\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u6211\u60f3\u62f7\u8d1d<code>a</code>\u5bf9\u5e94\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5<code>a.clone()</code>\u65b9\u6cd5\uff0c\u4f46\u662f\u8be5\u65b9\u6cd5\u4f1a\u6267\u884c\u6df1\u5ea6\u62f7\u8d1d\uff0c\u5728heap\u4e0a\u521b\u5efa\u51fa\u53e6\u5916\u4e00\u4efd\u6570\u636e\u3002\u800c<code>Rc::clone</code>\u53ea\u4f1a\u8fdb\u884c\u6d45\u62f7\u8d1d\uff0c\u5728stack\u4e0a\u521b\u5efa\u6570\u636e\u7684\u5f15\u7528\u3002\u6211\u4eec\u901a\u5e38\u60ef\u4f8b\u8c03\u7528<code>Rc::clone</code>\u800c\u4e0d\u662f\u8c03\u7528\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u7684<code>clone</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u4fee\u6539\u4e00\u4e0b<code>main</code>\u51fd\u6570</p> <pre><code>let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));\nprintln!(\"counter after creating a = {}\", Rc::strong_count(&amp;a));\n\nlet b = Cons(3, Rc::clone(&amp;a));\nprintln!(\"counter after creating b = {}\", Rc::strong_count(&amp;a));\n\n{\n    let c = Cons(3, Rc::clone(&amp;a));\n    println!(\"counter after creating c = {}\", Rc::strong_count(&amp;a));\n}\n\nprintln!(\n    \"counter after c goes out of scopes = {}\",\n    Rc::strong_count(&amp;a)\n);\n</code></pre> <p>\u6211\u4eec\u4f7f\u7528<code>Rc::strong_count</code>\u51fd\u6570\u6253\u5370\u51fa\u5f3a\u5f15\u7528\u7684\u8ba1\u6570\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>counter after creating a = 1\ncounter after creating b = 2\ncounter after creating c = 3\ncounter after c goes out of scopes = 2\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u53d8\u91cf\u79bb\u5f00\u4f5c\u7528\u57df\u7684\u65f6\u5019\uff0c\u8ba1\u6570\u5f15\u7528\u4e5f\u4f1a\u81ea\u52a8\u51cf\u5c11\u3002</p>","text":""},{"location":"15_smart_pointer/05_rc/#rccloneclone","title":"\u4e09\u3001Rc::clone()\u548c\u7c7b\u578b\u7684clone()\u65b9\u6cd5 <p><code>Rc::clone()</code>: \u589e\u52a0\u5f15\u7528\uff0c\u4e0d\u4f1a\u6267\u884c\u6570\u636e\u7684\u6df1\u5ea6\u62f7\u8d1d\u64cd\u4f5c \u7c7b\u578b\u7684<code>clone()</code>: \u5927\u591a\u60c5\u51b5\u4f1a\u6267\u884c\u6570\u636e\u7684\u6df1\u5ea6\u62f7\u8d1d\u64cd\u4f5c</p> <p><code>Rc&lt;T&gt;</code>\u901a\u8fc7\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5728\u7a0b\u5e8f\u4e0d\u540c\u90e8\u5206\u4e4b\u95f4\u5171\u4eab\u53ea\u8bfb\u6570\u636e\u3002\u4f46\u662f\uff0c\u5728\u5f00\u53d1\u4e2d\u5f88\u591a\u65f6\u5019\u9700\u8981\u6570\u636e\u53ef\u53d8\uff0c\u5982\u4f55\u5141\u8bb8\u6570\u636e\u53d8\u5316\u5462\uff1f\u6211\u4eec\u5c06\u5728\u540e\u7eed\u7684\u7ae0\u8282\u4e2d\u4ecb\u7ecd\u3002</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/","title":"RefCell\u548c\u5185\u90e8\u53ef\u53d8\u6027","text":""},{"location":"15_smart_pointer/06_ref_cell/#_1","title":"\u4e00\u3001\u5185\u90e8\u53ef\u53d8\u6027","text":"<p>\u5185\u90e8\u53ef\u53d8\u6027\u662fRust\u7684\u8bbe\u8ba1\u6a21\u5f0f\u4e4b\u4e00\uff0c\u5b83\u5141\u8bb8\u4f60\u5728\u53ea\u6301\u6709\u4e0d\u53ef\u53d8\u5f15\u7528\u7684\u524d\u63d0\u4e0b\u8fdb\u884c\u4fee\u6539\u3002\u6570\u636e\u7ed3\u6784\u4e2d\u4f7f\u7528\u4e86unsafe\u4ee3\u7801\u7ed5\u8fc7rust\u6b63\u5e38\u7684\u53ef\u53d8\u6027\u548c\u501f\u7528\u89c4\u5219\u3002</p>"},{"location":"15_smart_pointer/06_ref_cell/#refcell_1","title":"\u4e8c\u3001RefCell","text":""},{"location":"15_smart_pointer/06_ref_cell/#21-rcrefcell","title":"2.1 Rc\u548cRefCell <p>\u4e0e<code>Rc&lt;T&gt;</code>\u4e0d\u540c\uff0c<code>RefCell&lt;T&gt;</code>\u7c7b\u578b\u4ee3\u8868\u4e86\u5176\u6301\u6709\u6570\u636e\u7684\u552f\u4e00\u6240\u6709\u6743\u3002</p> <p>\u6211\u4eec\u5148\u56de\u5fc6\u4e00\u4e0b\u501f\u7528\u89c4\u5219</p> <ul> <li>\u5728\u4efb\u4f55\u7ed9\u5b9a\u7684\u65f6\u95f4\u91cc\uff0c\u4f60\u8981\u4e48\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\uff0c\u8981\u4e48\u53ea\u80fd\u62e5\u6709\u4efb\u610f\u6570\u91cf\u7684\u4e0d\u53ef\u53d8\u5f15\u7528</li> <li>\u5f15\u7528\u603b\u662f\u6709\u6548\u7684</li> </ul> <p><code>RefCell&lt;T&gt;</code>\u4e0e<code>Box&lt;T&gt;</code>\u7684\u533a\u522b\u5982\u4e0b</p>    Box RefCell     \u7f16\u8bd1\u9636\u6bb5\u5f3a\u5236\u4ee3\u7801\u9075\u5faa\u501f\u7528\u89c4\u5219\uff0c\u5426\u5219\u51fa\u73b0\u9519\u8bef \u53ea\u4f1a\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u501f\u7528\u89c4\u5219\uff0c\u6ca1\u6709\u6ee1\u8db3\u501f\u7528\u89c4\u5219\u5219\u89e6\u53d1panic","text":""},{"location":"15_smart_pointer/06_ref_cell/#22","title":"2.2 \u501f\u7528\u89c4\u5219\u5728\u4e0d\u540c\u9636\u6bb5\u8fdb\u884c\u68c0\u67e5\u6bd4\u8f83 <p>\u5728\u7f16\u8bd1\u9636\u6bb5\u68c0\u67e5\uff0c\u5c3d\u65e9\u66b4\u9732\u95ee\u9898\uff0c\u6ca1\u6709\u8fd0\u884c\u65f6\u5f00\u9500\uff0c\u5bf9\u5927\u591a\u6570\u573a\u666f\u662f\u6700\u4f73\u9009\u62e9\uff0c\u4e5f\u662frust\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u5728\u8fd0\u884c\u65f6\u9636\u6bb5\u68c0\u67e5\uff0c\u95ee\u9898\u66b4\u9732\u5ef6\u540e\uff0c\u751a\u81f3\u5f71\u54cd\u5230\u751f\u4ea7\u73af\u5883\uff0c\u56e0\u501f\u7528\u8ba1\u6570\u5668\u4ea7\u751f\u4e9b\u8bb8\u6027\u80fd\u635f\u5931\uff0c\u4f46\u5b9e\u73b0\u4e86\u67d0\u4e9b\u7279\u5b9a\u7684\u5185\u5b58\u5b89\u5168\u573a\u666f\uff08\u4e0d\u53ef\u53d8\u73af\u5883\u4e2d\u4fee\u6539\u81ea\u8eab\u6570\u636e\uff09\u3002</p> <p>\u9488\u5bf9\u7f16\u8bd1\u5668\u65e0\u6cd5\u7406\u89e3\u7684\u4ee3\u7801\uff0crust\u76f4\u63a5\u62d2\u7edd\u7f16\u8bd1\u901a\u8fc7\uff0c\u907f\u514d\u4ea7\u751f\u95ee\u9898\u3002\u4f46\u5982\u679c\u5f00\u53d1\u8005\u80fd\u591f\u4fdd\u8bc1\u501f\u7528\u89c4\u5219\u80fd\u6ee1\u8db3\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019<code>RefCell&lt;T&gt;</code>\u5c31\u6709\u5b83\u7684\u52c7\u6b66\u4e4b\u5904\u4e86\u3002</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/#23-refcell","title":"2.3 RefCell <p>\u4e0e<code>Rc&lt;T&gt;</code>\u76f8\u4f3c\uff0c\u53ea\u80fd\u7528\u4e8e\u4f46\u7ebf\u7a0b\u573a\u666f\u3002</p> <p>\u9009\u62e9<code>Box&lt;T&gt;</code>\u3001<code>Rc&lt;T&gt;</code>\u3001<code>RefCell&lt;T&gt;</code>\u7684\u4f9d\u636e</p> <ul> <li>Box: \u540c\u4e00\u4e2a\u6570\u636e\u62e5\u6709\u4e00\u4e2a\u6240\u6709\u8005\uff0c\u53ef\u53d8\u3001\u4e0d\u53ef\u53d8\u501f\u7528\u5728\u7f16\u8bd1\u65f6\u68c0\u67e5 <li>Rc: \u540c\u4e00\u4e2a\u6570\u636e\u62e5\u6709\u591a\u4e2a\u6240\u6709\u8005\uff0c\u4e0d\u53ef\u53d8\u5f15\u7528\u5728\u7f16\u8bd1\u65f6\u68c0\u67e5 <li>RefCell: \u540c\u4e00\u6570\u636e\u62e5\u6709\u8fc7\u4e00\u4e2a\u6240\u6709\u8005\uff0c\u53ef\u53d8\u3001\u4e0d\u53ef\u53d8\u501f\u7528\u5728\u8fd0\u884c\u65f6\u68c0\u67e5  <p>\u5176\u4e2d\uff0c\u5373\u4fbf<code>RefCell&lt;T&gt;</code>\u672c\u8eab\u4e0d\u53ef\u53d8\uff0c\u4f46\u4ecd\u80fd\u4fee\u6539\u5176\u4e2d\u5b58\u50a8\u7684\u503c</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/#24","title":"2.4 \u5185\u90e8\u53ef\u53d8\u6027\uff0c\u53ef\u53d8\u7684\u501f\u7528\u4e00\u4e2a\u4e0d\u53ef\u53d8\u7684\u503c <p>\u501f\u7528\u89c4\u5219\u6709\u4e00\u4e2a\u8fd9\u6837\u7684\u63a8\u8bba\uff0c\u6211\u4eec\u65e0\u6cd5\u501f\u7528\u4e00\u4e2a\u4e0d\u53ef\u53d8\u7684\u503c\u3002\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>fn main() {\n    let x = 5;\n    let y = &amp;mut x;\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u8ba9<code>y</code>\u501f\u7528\u4e00\u4e2a<code>x</code>\u7684\u53ef\u53d8\u5f15\u7528\uff0c\u8fd9\u6837\u662f\u4e0d\u8fd0\u884c\u7684\uff0c\u7f16\u8bd1\u4f1a\u53d1\u751f\u62a5\u9519\u3002\u7136\u800c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u8fd9\u6837\u4e00\u4e2a\u503c\uff0c\u5b83\u5bf9\u5916\u90e8\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u4f46\u5b83\u540c\u65f6\u80fd\u591f\u5728\u65b9\u6cd5\u5185\u90e8\u4fee\u6539\u81ea\u8eab\u7684\u503c\u3002\u9664\u4e86\u8fd9\u4e2a\u6570\u636e\u7684\u672c\u8eab\u65b9\u6cd5\uff0c\u5176\u4f59\u7684\u4ee3\u7801\u90fd\u4e0d\u80fd\u4fee\u6539\u8fd9\u4e2a\u503c\u3002</p> <p>\u4f7f\u7528<code>RefCell&lt;T&gt;</code>\u5c31\u662f\u83b7\u5f97\u8fd9\u79cd\u5185\u90e8\u53ef\u53d8\u6027\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u4e0d\u8fc7<code>RefCell&lt;T&gt;</code>\u5e76\u6ca1\u6709\u5b8c\u5168\u5b8c\u5168\u7ed5\u5f00\u501f\u7528\u89c4\u5219\uff0c\u6211\u4eec\u867d\u7136\u4f7f\u7528\u5185\u90e8\u53ef\u53d8\u6027\u901a\u8fc7\u4e86\u7f16\u8bd1\u9636\u6bb5\u7684\u501f\u7528\u68c0\u67e5\uff0c\u4f46\u501f\u7528\u68c0\u67e5\u4ec5\u4ec5\u662f\u5ef6\u540e\u5230\u4e86\u8fd0\u884c\u9636\u6bb5\u800c\u5df2\uff0c\u5982\u679c\u8fdd\u53cd\u4e86\u501f\u7528\u89c4\u5219\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u4f1a\u51fa\u73b0panic\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>pub trait Messenger {\n    fn send(&amp;self, msg: &amp;str);\n}\n\npub struct LimitTracker&lt;'a, T: 'a + Messenger&gt; {\n    messenger: &amp;'a T,\n    value: usize,\n    max: usize,\n}\n\nimpl&lt;'a, T&gt; LimitTracker&lt;'a, T&gt;\nwhere\n    T: Messenger,\n{\n    pub fn new(messenger: &amp;T, max: usize) -&gt; LimitTracker&lt;T&gt; {\n        LimitTracker {\n            messenger,\n            value: 0,\n            max,\n        }\n    }\n\n    pub fn set_value(&amp;mut self, value: usize) {\n        self.value = value;\n\n        let percentage_of_max = self.value as f64 / self.max as f64;\n        if percentage_of_max &gt;= 1.0 {\n            self.messenger.send(\"Error: You are over your quota!\");\n        } else if percentage_of_max &gt;= 0.9 {\n            self.messenger\n                .send(\"Urgent warning: You've used up over 90% of your quota!\");\n        } else if percentage_of_max &gt;= 0.75 {\n            self.messenger\n                .send(\"Warning: You've used up over 75% of your quota!\");\n        }\n    }\n}\n</code></pre> <p>\u6211\u4eec\u8981\u6d4b\u8bd5\u5b9e\u73b0\u4e86<code>Messenger</code>\u8fd9\u4e2atrait\u7684\u503c\u548c\u4e00\u4e2a<code>max</code>\u503c\u6765\u521b\u5efa<code>LimitTracker</code>\u7684\u65f6\u5019\uff0c\u4f20\u5165\u4e0d\u540c\u7684value\u5c31\u80fd\u591f\u89e6\u53d1<code>Messenger</code>\u53d1\u9001\u4e0d\u540c\u7684\u6d88\u606f\u3002\u800c\u6211\u4eec\u4f7f\u7528\"mock object\"\u6a21\u62df\u5bf9\u8c61\u6765\u521b\u5efa<code>LimitTracker</code>\u5b9e\u4f8b\u4e4b\u540e\uff0c\u6211\u95e8\u4fbf\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u6a21\u62df\u5bf9\u8c61\u7684<code>set_value</code>\u65b9\u6cd5\u6765\u68c0\u67e5\u6a21\u62df\u5bf9\u8c61\u4e2d\u662f\u5426\u5b58\u50a8\u4e86\u6211\u4eec\u5e0c\u671b\u770b\u5230\u7684\u6d88\u606f\u3002\u6309\u7167\u8fd9\u4e2a\u601d\u8def\uff0c\u6211\u95e8\u5b9e\u73b0\u4e00\u4e0b\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>#[cfg(test)]\nmod tests {\n    use super::*;\n\n    struct MockMessenger {\n        sent_messenger: Vec&lt;String&gt;,\n    }\n\n    impl MockMessenger {\n        fn new() -&gt; MockMessenger {\n            MockMessenger {\n                sent_messenger: vec![],\n            }\n        }\n    }\n\n    impl Messenger for MockMessenger {\n        fn send(&amp;mut self, message: &amp;str) {\n            self.sent_messenger.push(String::from(message))\n        }\n    }\n\n    #[test]\n    fn it_sends_an_over_75_percent_warning_message() {\n        // \u6d4b\u8bd5\u8d85\u8fc770%\u7684\u60c5\u51b5\n        let mock_messenger = MockMessenger::new();\n        let mut limit_tracker = LimitTracker::new(&amp;mock_messenger, 100);\n\n        limit_tracker.set_value(80);\n        assert_eq!(mock_messenger.sent_messenger.len(), 1);\n    }\n}\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u7f16\u8bd1\u4e0a\u9762\u7684\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u9519\u8bef\u5728\u4e8e<code>Messenger</code> trait\u7684<code>send</code>\u65b9\u6cd5\u751f\u547d\u7684\u65f6\u5019<code>self</code>\u53c2\u6570\u662f\u4e0d\u53ef\u53d8\uff0c\u4f46\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u662f\u53ef\u53d8\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u4fee\u6539\u91cc\u9762\u7684\u503c\u3002</p> <p>\u8fd9\u662f\u65f6\u5019\u8fd9\u5c31\u662f\u5185\u90e8\u53ef\u53d8\u6027\u53ef\u4ee5\u4f7f\u7528\u7684\u573a\u666f\uff0c\u8fd9\u65f6\u5019\u4f7f\u7528<code>RefCell</code>\uff0c\u6700\u7ec8\u4fee\u6539\u7684\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b</p> <pre><code>#[cfg(test)]\nmod tests {\n    use super::*;\n    use std::cell::RefCell;\n\n    struct MockMessenger {\n        sent_messenger: RefCell&lt;Vec&lt;String&gt;&gt;,\n    }\n\n    impl MockMessenger {\n        fn new() -&gt; MockMessenger {\n            MockMessenger {\n                sent_messenger: RefCell::new(vec![]),\n            }\n        }\n    }\n\n    impl Messenger for MockMessenger {\n        fn send(&amp;self, message: &amp;str) {\n            self.sent_messenger.borrow_mut().push(String::from(message))\n        }\n    }\n\n    #[test]\n    fn it_sends_an_over_75_percent_warning_message() {\n        // \u6d4b\u8bd5\u8d85\u8fc770%\u7684\u60c5\u51b5\n        let mock_messenger = MockMessenger::new();\n        let mut limit_tracker = LimitTracker::new(&amp;mock_messenger, 100);\n\n        limit_tracker.set_value(80);\n        assert_eq!(mock_messenger.sent_messenger.borrow().len(), 1);\n    }\n}\n</code></pre> <p>\u6b64\u65f6\u4ee3\u7801\u6d4b\u8bd5\u901a\u8fc7\u4e86\u3002\u6211\u4eec\u5c06<code>Vec</code>\u6362\u6210<code>RefCell&lt;Vec&gt;</code>\u4e4b\u540e\uff0c\u7136\u540e\u8c03\u7528\u5bf9\u5e94\u6570\u636e\u7684<code>borrow_mut</code>\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u83b7\u5f97\u5185\u90e8\u503c\u7684\u53ef\u53d8\u5f15\u7528\uff0c\u6700\u540e\u8c03\u7528\u4e86<code>borrow</code>\u65b9\u6cd5\uff0c\u83b7\u5f97\u4e86\u5185\u90e8\u503c\u7684\u4e0d\u53ef\u53d8\u5f15\u7528\u3002</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/#25-refcell","title":"2.5 \u4f7f\u7528RefCell\u5728\u8fd0\u884c\u65f6\u8bb0\u5f55\u501f\u7528\u4fe1\u606f <p>RefCell\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5b89\u5168\u63a5\u53e3</p> <ul> <li>borrow\u65b9\u6cd5\uff1a\u8fd4\u56de\u53ea\u80fd\u6307\u9488<code>Ref&lt;T&gt;</code>\uff0c\u5b83\u5b9e\u73b0\u4e86<code>Deref</code></li> <li>borrow_mut\u65b9\u6cd5\uff1a\u8fd4\u56de\u53ea\u80fd\u6307\u9488<code>RefMut&lt;T&gt;</code>\uff0c\u5b83\u5b9e\u73b0\u4e86<code>Deref</code></li> </ul> <p><code>RefCell&lt;T&gt;</code>\u4f1a\u8bb0\u5f55\u5f53\u524d\u5b58\u5728\u591a\u5c11\u4e2a\u6d3b\u8dc3\u7684<code>Ref&lt;T&gt;</code>\u548c<code>RefMut&lt;T&gt;</code>\u53ea\u80fd\u6307\u9488\u3002\u6bcf\u6b21\u8c03\u7528<code>borrow</code>\uff0c\u4e0d\u53ef\u53d8\u501f\u7528\u8ba1\u6570\u52a01\uff0c\u4efb\u4f55\u4e00\u4e2a<code>Ref&lt;T&gt;</code>\u7684\u503c\u79bb\u5f00\u4f5c\u7528\u57df\u88ab\u91ca\u653e\u65f6\uff0c\u4e0d\u53ef\u53d8\u501f\u7528\u8ba1\u6570\u51cf1\uff1b\u6bcf\u6b21\u8c03\u7528<code>borrow_mut</code>\uff0c\u53ef\u53d8\u501f\u7528\u8ba1\u6570\u52a01\uff0c\u4efb\u4f55\u4e00\u4e2a<code>RefMut&lt;T&gt;</code>\u7684\u503c\u79bb\u5f00\u4f5c\u7528\u57df\u88ab\u91ca\u653e\u65f6\uff0c\u53ef\u53d8\u501f\u7528\u8ba1\u6570\u51cf1\u3002</p> <p>rust\u901a\u8fc7\u4e0a\u8ff0\u6280\u672f\u6765\u7ef4\u62a4\u501f\u7528\u68c0\u67e5\u89c4\u5219\uff0c\u4efb\u4f55\u4e00\u4e2a\u7ed9\u5b9a\u65f6\u95f4\u91cc\uff0c\u503c\u5141\u8bb8\u62e5\u6709\u591a\u4e2a\u4e0d\u53ef\u53d8\u501f\u7528\u6216\u4e00\u4e2a\u53ef\u53d8\u501f\u7528\u3002\u800c\u5f53\u6211\u4eec\u8fdd\u80cc\u8fd9\u4e2a\u89c4\u5219\u65f6\uff0c<code>RefCell&lt;T&gt;</code>\u5c31\u4f1a\u5728\u8fd0\u884c\u65f6\u6765\u89e6\u53d1panic\u3002</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/#26-rcrefcell","title":"2.6 \u5c06Rc\u548cRefCell\u7ed3\u5408\u4f7f\u7528\u6765\u5b9e\u73b0\u591a\u91cd\u6240\u6709\u6743\u53ef\u53d8\u6570\u636e <p>\u5c06<code>RefCell&lt;T&gt;</code>\u548c<code>Rc&lt;T&gt;</code>\u7ed3\u5408\u4f7f\u7528\u662f\u4e00\u79cd\u5f88\u5e38\u7528\u7684\u505a\u6cd5\uff0c<code>Rec&lt;T&gt;</code>\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\u6301\u6709\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u4f46\u53ea\u80fd\u63d0\u4f9b\u5bf9\u6570\u636e\u7684\u4e0d\u53ef\u53d8\u8bbf\u95ee\uff0c\u5982\u679c\u6211\u4eec\u5728<code>Rc&lt;T&gt;</code>\u91cc\u5b58\u50a8<code>RefCell&lt;T&gt;</code>\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5b9a\u4e49\u51fa\u62e5\u6709\u591a\u4e2a\u6240\u6709\u8005\u800c\u4e14\u80fd\u591f\u8fdb\u884c\u4fee\u6539\u7684\u503c\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>#[derive(Debug)]\nenum List {\n    Cons(Rc&lt;RefCell&lt;i32&gt;&gt;, Rc&lt;List&gt;),\n    Nil,\n}\n\nuse crate::List::{Cons, Nil};\nuse std::rc::Rc;\nuse std::cell::RefCell;\n\nfn main() {\n    let value = Rc::new(RefCell::new(5));\n    // \u901a\u8fc7Rc::clone\u5171\u4eabvalue\u7684\u503c\u7ed9a\n    let a = Rc::new(Cons(Rc::clone(&amp;value), Rc::new(Nil)));\n    // b\u3001c\u5171\u4eaba\u5217\u8868\n    let b = Cons(Rc::new(RefCell::new(6)), Rc::clone(&amp;a));\n    let c = Cons(Rc::new(RefCell::new(10)), Rc::clone(&amp;a));\n\n    // \u4f7f\u7528*\u628aRc&lt;T&gt;\u89e3\u5f15\u7528\u4e3aRefCell&lt;T&gt;\uff0c\u901a\u8fc7borrow_mut\u4fee\u6539value\u7684\u503c\uff0c\u52a010\n    *value.borrow_mut() += 10;\n\n    println!(\"a after = {:?}\", a);\n    println!(\"b after = {:?}\", b);\n    println!(\"c after = {:?}\", c);\n}\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>a after = Cons(RefCell { value: 15 }, Nil)\nb after = Cons(RefCell { value: 6 }, Cons(RefCell { value: 15 }, Nil))\nc after = Cons(RefCell { value: 10 }, Cons(RefCell { value: 15 }, Nil))\n</code></pre> <p>value\u7684\u503c\u53d8\u4e86\uff0c\u7b26\u5408\u9884\u671f\u3002</p>","text":""},{"location":"15_smart_pointer/06_ref_cell/#_2","title":"\u4e09\u3001\u5176\u4ed6\u53ef\u5b9e\u73b0\u5185\u90e8\u53ef\u53d8\u6027\u7684\u7c7b\u578b <p>rust\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u53ef\u5b9e\u73b0\u5185\u90e8\u53ef\u53d8\u6027\u7684\u7c7b\u578b\uff0c\u5982\u4e0b\u793a\u4f8b</p> <ul> <li><code>Cell&lt;T&gt;</code>: \u901a\u8fc7\u590d\u5236\u6765\u8bbf\u95ee\u6570\u636e</li> <li><code>Mutex&lt;T&gt;</code>: \u7528\u4e8e\u5b9e\u73b0\u8de8\u7ebf\u7a0b\u60c5\u51b5\u4e0b\u7684\u5185\u90e8\u53ef\u53d8\u6027\u6a21\u5f0f</li> </ul>","text":""},{"location":"15_smart_pointer/07_loop_ref_leak/","title":"\u5faa\u73af\u5f15\u7528\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f","text":""},{"location":"15_smart_pointer/07_loop_ref_leak/#_2","title":"\u4e00\u3001\u5185\u5b58\u6cc4\u6f0f\u7684\u793a\u4f8b","text":"<p>rust\u7684\u5185\u5b58\u5b89\u5168\u673a\u5236\u53ef\u4ee5\u4fdd\u8bc1\u5f88\u96be\u53d1\u751f\u5185\u5b58\u6cc4\u6f0f\uff0c\u4f46\u4e0d\u662f\u4e0d\u53ef\u80fd\u3002\u5982\u4f7f\u7528<code>Rc&lt;T&gt;</code>\u548c<code>RefCell&lt;T&gt;</code>\u5c31\u53ef\u80fd\u9020\u51fa\u5faa\u73af\u4f7f\u7528\uff0c\u4ece\u800c\u53d1\u751f\u5185\u5b58\u6cc4\u6f0f\u3002\u56e0\u4e3a\u6bcf\u9879\u7684\u5f15\u7528\u6570\u91cf\u4e0d\u4f1a\u53d8\u62100\uff0c\u503c\u4e5f\u4e0d\u4f1a\u88ab\u5904\u7406\u6389\u3002\u6211\u4eec\u5148\u770b\u4e0b\u9762\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::{cell::RefCell, rc::Rc};\nuse crate::List::{Cons, Nil};\n#[derive(Debug)]\nenum List {\nCons(i32, RefCell&lt;Rc&lt;List&gt;&gt;),\nNil,\n}\nimpl List {\nfn tail(&amp;self) -&gt; Option&lt;&amp;RefCell&lt;Rc&lt;List&gt;&gt;&gt; {\nmatch self {\nCons(_, item) =&gt; Some(item),\nNil =&gt; None\n}\n}\n}\nfn main() {\nlet a = Rc::new(Cons(5, RefCell::new(Rc::new(Nil))));\n// \u6253\u5370a\u7684\u5f3a\u5f15\u7528\nprintln!(\"a initial rc count = {}\", Rc::strong_count(&amp;a));\n// \u6253\u5370a\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\nprintln!(\"a text item = {:?}\", a.tail());\n// b\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f10\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u5171\u4eaba\u7684\u6570\u636e\nlet b = Rc::new(Cons(10, RefCell::new(Rc::clone(&amp;a))));\n// \u6253\u5370a\u7684\u5f3a\u5f15\u7528\nprintln!(\"a rc count after b creation = {}\", Rc::strong_count(&amp;a));\n// \u6253\u5370b\u7684\u5f3a\u5f15\u7528\nprintln!(\"b initial rc count = {}\", Rc::strong_count(&amp;b));\n// \u6253\u5370b\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\nprintln!(\"b next item = {:?}\", b.tail());\n// \u53d6\u51faa\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\nif let  Some(link) = a.tail() {\n// \u628aa\u539f\u6765\u5b58\u50a8\u7684Nil\u6539\u4e3aB\u5b58\u50a8\u7684\u503c\n*link.borrow_mut() = Rc::clone(&amp;b);\n}\nprintln!(\"b rc count after changing a = {}\", Rc::strong_count(&amp;b));\nprintln!(\"a rc count after changing a = {}\", Rc::strong_count(&amp;a));\n}\n</code></pre> <p>\u8be5\u5f00\u59cb\u521b\u5efaa\u7684\u65f6\u5019\uff0c\u5b83\u7684\u5f15\u7528\u6570\u91cf\u662f1\uff0c\u5b83\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f2\uff0cb\u521b\u5efa\u4e4b\u540e\uff0ca\u7684\u5f3a\u5f15\u7528\u4e2a\u6570\u53d8\u62102\uff0cb\u7684\u5f15\u7528\u4e2a\u6570\u53d8\u62101\uff0cb\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662fa\u3002\u63a5\u4e0b\u6765\u8ba9a\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u6307\u5411b\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65f6\u5019b\u6709\u4e24\u4e2a\u5f15\u7528\uff0ca\u4e5f\u6709\u4e24\u4e2a\u5f15\u7528\uff0c\u76f8\u5f53\u4e8e\u6b64\u65f6\u521b\u5efa\u4e86\u4e00\u4e2a\u5faa\u73af\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>a\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f5\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662fb\uff0cb\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f10\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662fa\u3002\u8fd9\u65f6\u5019\u5f62\u6210\u4e86\u4e00\u4e2a\u5faa\u73af\u3002\u5047\u5982\u6b64\u65f6\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\uff0c\u5c06\u5148\u91ca\u653eb\uff0c\u56e0\u4e3ab\u662f\u5728\u540e\u9762\u521b\u5efa\u7684\u3002\u7a0b\u5e8f\u5c06\u4f1a\u628ab\u5bf9\u5e94\u7684\u6570\u636e\u7684\u5f15\u7528\u8ba1\u6570\u51cf\u5c11\u52301\uff0c\u56e0\u4e3a\u6b64\u65f6a\u4ecd\u7136\u5b58\u5728\u4e00\u4e2a\u6307\u5411b\u5bf9\u5e94\u7684\u6570\u636e\u7684\u5f15\u7528\u3002\u90a3\u4e48b\u5bf9\u5e94\u7684List\u5728\u5806\u5185\u5b58\u4e0a\u8bb2\u4e0d\u4f1a\u8fdb\u884c\u91ca\u653e\uff0c\u5982\u679c\u6211\u4eec\u5728<code>main</code>\u51fd\u6570\u7684\u6700\u540e\u6dfb\u52a0\u4ee5\u4e0b\u4e00\u884c\u4ee3\u7801\uff0c\u5c06\u4f1a\u5bfc\u81f4\u5806\u6808\u6ea2\u51fa</p> <pre><code>println(\"a next item = {:?}\", a.tail());\n</code></pre> <p>a\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662fb\uff0c\u800c\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662fa\uff0c\u4ee5\u6b64\u5faa\u73af\uff0c\u6700\u7ec8\u5bfc\u81f4\u5806\u6808\u6ea2\u51fa\u3002\u6240\u4ee5\uff0c\u5728rust\u91cc\uff0c\u5185\u5b58\u6ea2\u51fa\u5e76\u4e0d\u5bb9\u6613\uff0c\u4f46\u7edd\u975e\u4e0d\u53ef\u80fd\u3002</p>"},{"location":"15_smart_pointer/07_loop_ref_leak/#_3","title":"\u4e8c\u3001\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u7684\u89e3\u51b3\u529e\u6cd5","text":""},{"location":"15_smart_pointer/07_loop_ref_leak/#21-rust","title":"2.1 \u4f9d\u9760\u5f00\u53d1\u8005\u6765\u4fdd\u8bc1\uff0c\u4e0d\u80fd\u4f9d\u9760rust","text":"<p>\u5982\u8ba4\u8bc1\u68c0\u67e5\u81ea\u5df1\u7684\u4ee3\u7801\u903b\u8f91\uff0c\u5e76\u505a\u4e00\u4e9b\u6d4b\u8bd5\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f</p>"},{"location":"15_smart_pointer/07_loop_ref_leak/#22","title":"2.2 \u91cd\u7ec4\u6570\u636e\u7ed3\u6784","text":"<p>\u7b80\u5355\u6765\u8bf4\u628a\u5f15\u7528\u62c6\u5206\u6765\u6301\u6709\u6240\u6709\u6743\u548c\u4e0d\u6301\u6709\u6240\u6709\u6743\u4e24\u79cd\u60c5\u51b5\uff0c\u5982\u5728\u5faa\u73af\u5f15\u7528\u4e2d\uff0c\u8ba9\u67d0\u4e9b\u6307\u5411\u5173\u7cfb\u5177\u6709\u6240\u6709\u6743\uff0c\u800c\u53e6\u5916\u4e00\u90e8\u5206\u7684\u6307\u5411\u5173\u7cfb\u4e0d\u6d89\u53ca\u6240\u6709\u6743\u3002\u8fd9\u6837\u53ea\u6709\u6301\u6709\u6240\u6709\u6743\u7684\u5173\u7cfb\u624d\u5f71\u54cd\u503c\u7684\u6e05\u7406\u3002</p>"},{"location":"15_smart_pointer/07_loop_ref_leak/#23-rcweak","title":"2.3 \u9632\u6b62\u5faa\u73af\u5f15\u7528\uff0c\u628aRc\u6362\u6210Weak <p><code>Rc::clone</code>\u4e3a<code>Rc&lt;T&gt;</code>\u793a\u4f8b\u7684strong_count\u52a01\uff0c<code>Rc&lt;T&gt;</code>\u7684\u5b9e\u4f8b\u53ea\u6709\u5728strong_count\u4e3a0\u7684\u65f6\u5019\u624d\u4f1a\u88ab\u6e05\u7406\u3002</p> <p><code>Rc&lt;T&gt;</code>\u5b9e\u4f8b\u901a\u8fc7\u8c03\u7528<code>Rc::downgrade</code>\u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa\u503c\u7684<code>Weak Reference</code>\uff08\u5f31\u5f15\u7528\uff09\uff0c\u8fd4\u56de\u503c\u7c7b\u578b\u662f<code>Weak&lt;T&gt;</code>\uff08\u53ea\u80fd\u6307\u9488\uff09\u3002\u6bcf\u6b21\u8c03\u7528<code>Rc::downgrade</code>\u65b9\u6cd5\u4f1a\u4e3a<code>weak_count</code>\uff08\u5373\u5f31\u5f15\u7528\u8ba1\u6570\uff09\u52a01\uff0c\u800c<code>Rc&lt;T&gt;</code>\u4f7f\u7528<code>weak_count</code>\u6765\u8ffd\u8e2a\u5b58\u5728\u591a\u5c11<code>Weak&lt;T&gt;</code>\uff0c<code>weak_count</code>\u4e0d\u4e3a0\u5e76\u4e0d\u5f71\u54cd<code>Rc&lt;T&gt;</code>\u5b9e\u4f8b\u7684\u6e05\u7406\u3002</p>","text":""},{"location":"15_smart_pointer/07_loop_ref_leak/#24-strong-vs-weak","title":"2.4 Strong VS Weak <ul> <li>Strong Reference\uff08\u5f3a\u5f15\u7528\uff09\u662f\u5173\u4e8e\u5982\u4f55\u5206\u4eab<code>Rc&lt;T&gt;</code>\u5b9e\u4f8b\u7684\u6240\u6709\u6743</li> <li>Weak Reference\uff08\u5f31\u5f15\u7528\uff09\u5e76\u4e0d\u8868\u8ff0\u4e0a\u8ff0\u610f\u601d</li> </ul> <p>\u4f7f\u7528<code>Weak Reference</code>\u5e76\u4e0d\u4f1a\u521b\u5efa\u5faa\u73af\u5f15\u7528\uff0c\u56e0\u4e3a\u5f53<code>Strong Reference</code>\u6570\u91cf\u4e3a0\u7684\u65f6\u5019\uff0c<code>Weak Reference</code>\u4f1a\u81ea\u52a8\u65ad\u5f00\u3002\u5728\u4f7f\u7528<code>Weak&lt;T&gt;</code>\u524d\uff0c\u9700\u4fdd\u8bc1\u5b83\u6307\u5411\u7684\u503c\u4ecd\u7136\u5b58\u5728\uff0c\u5728<code>Weak&lt;T&gt;</code>\u5b9e\u4f8b\u4e0a\u8c03\u7528<code>upgrade</code>\u65b9\u6cd5\uff0c\u8fd4\u56de<code>Option&lt;Rc&lt;T&gt;&gt;</code>\u3002</p>","text":""},{"location":"15_smart_pointer/07_loop_ref_leak/#25-weak-reference","title":"2.5 Weak Reference\u4f7f\u7528\u793a\u4f8b <p>\u6211\u4eec\u5148\u770b\u4ee5\u4e0b\u7684\u793a\u4f8b</p> <pre><code>use std::rc::Rc;\nuse std::cell::RefCell;\n\n#[derive(Debug)]\n// \u5b9a\u4e49\u6811\u7684\u8282\u70b9\nstruct Node {\n    value: i32,\n    // \u4f7f\u7528Rc&lt;Node&gt;\u4e3a\u4e86\u8ba9\u6240\u6709\u7684\u5b50\u8282\u70b9\u80fd\u591f\u5171\u4eab\u6240\u6709\u6743\n    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u6811\u53f6\n    let leaf = Rc::new(Node {\n        value: 3,\n        children: RefCell::new(vec![]),\n    });\n\n    // \u521b\u5efa\u4e00\u4e2a\u6811\u679d\n    let branch = Rc::new(Node {\n        value: 5,\n        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),\n    });\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6811\u679d\u627e\u5230\u53f6\u5b50\uff0c\u4f46\u8fd8\u4e0d\u53ef\u4ee5\u901a\u8fc7\u53f6\u5b50\u627e\u5230\u6811\u679d\uff0c\u56e0\u4e3a\u6811\u53f6\u8fd8\u4e0d\u6301\u6709\u6811\u679d\u7684\u5f15\u7528\uff0c\u5b83\u5bf9\u5b83\u4eec\u4e24\u4e4b\u95f4\u7684\u7236\u5b50\u5173\u7cfb\u4e00\u65e0\u6240\u77e5\u3002\u6240\u4ee5\u6211\u95e8\u9700\u8981\u4fee\u6539\u4e00\u4e0b\u4ee3\u7801\uff0c\u4f46\u662f\u53cc\u5411\u7684\u5f15\u7528\u4f1a\u662f\u5faa\u73af\u5f15\u7528\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528<code>Weak&lt;T&gt;</code>\uff0c\u8ba9\u5b83\u907f\u514d\u4ea7\u751f\u5faa\u73af\u5f15\u7528\u3002\u4fee\u6539\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use std::borrow::Borrow;\nuse std::rc::{Rc, Weak};\nuse std::cell::RefCell;\n\n#[derive(Debug)]\n// \u5b9a\u4e49\u6811\u7684\u8282\u70b9\nstruct Node {\n    value: i32,\n    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,\n    // \u4f7f\u7528Rc&lt;Node&gt;\u4e3a\u4e86\u8ba9\u6240\u6709\u7684\u5b50\u8282\u70b9\u80fd\u591f\u5171\u4eab\u6240\u6709\u6743\n    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u53f6\u5b50\n    let leaf = Rc::new(Node {\n        value: 3,\n        parent: RefCell::new(Weak::new()),\n        children: RefCell::new(vec![]),\n    });\n\n    // \u901a\u8fc7\u6811\u53f6\u627e\u5230\u6811\u679d\uff0c\u901a\u8fc7borrow()\u83b7\u5f97\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u5728\u901a\u8fc7upgrade()\u5c06Weak&lt;T&gt;\u8f6c\u6362\u4e3aRc&lt;T&gt;\n    println!(\"leaf parent = {:?}\", leaf.parent.borrow().upgrade());\n\n    // \u521b\u5efa\u4e00\u4e2a\u6811\u679d\n    let branch = Rc::new(Node {\n        value: 5,\n        parent: RefCell::new(Weak::new()),\n        children: RefCell::new(vec![Rc::clone(&amp;leaf)]),\n    });\n\n    // \u8ba9\u6811\u53f6\u7684parent\u6307\u5411\u6811\u679d\n    *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);\n\n    println!(\"leaf parent = {:?}\", leaf.parent.borrow().upgrade());\n}\n</code></pre> <p>\u4e3a\u4e86\u89c2\u5bdf\u6570\u636e\u5f3a\u5f15\u7528\u4e5f\u5f31\u5f15\u7528\u7684\u8ba1\u6570\u53d8\u5316\uff0c\u6211\u4eec\u4fee\u6539\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use std::borrow::Borrow;\nuse std::cell::RefCell;\nuse std::rc::{Rc, Weak};\n\n#[derive(Debug)]\n// \u5b9a\u4e49\u6811\u7684\u8282\u70b9\nstruct Node {\n    value: i32,\n    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,\n    // \u4f7f\u7528Rc&lt;Node&gt;\u4e3a\u4e86\u8ba9\u6240\u6709\u7684\u5b50\u8282\u70b9\u80fd\u591f\u5171\u4eab\u6240\u6709\u6743\n    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u53f6\u5b50\n    let leaf = Rc::new(Node {\n        value: 3,\n        parent: RefCell::new(Weak::new()),\n        children: RefCell::new(vec![]),\n    });\n    // \u6253\u5370leaf\n    println!(\n        \"leaf strong = {}, weak = {}\",\n        Rc::strong_count(&amp;leaf),\n        Rc::weak_count(&amp;leaf)\n    );\n\n    // \u4e00\u4e2a\u4f5c\u7528\u57df\n    {\n        // \u521b\u5efa\u4e00\u4e2a\u6811\u679d\n        let branch = Rc::new(Node {\n            value: 5,\n            parent: RefCell::new(Weak::new()),\n            children: RefCell::new(vec![Rc::clone(&amp;leaf)]),\n        });\n\n        // \u8ba9\u6811\u53f6\u7684parent\u6307\u5411\u6811\u679d\n        *leaf.parent.borrow_mut() = Rc::downgrade(&amp;branch);\n\n        // \u6253\u5370branch\n        println!(\n            \"branch strong = {}, weak = {}\",\n            Rc::strong_count(&amp;branch),\n            Rc::weak_count(&amp;branch)\n        );\n\n        // \u6253\u5370leaf\n        println!(\n            \"leaf strong = {}, weak = {}\",\n            Rc::strong_count(&amp;leaf),\n            Rc::weak_count(&amp;leaf)\n        );\n    }\n\n    // \u4f7f\u7528leaf\u8bbf\u95eebranch\n    println!(\"leaf parent = {:?}\", leaf.parent.borrow().upgrade());\n    // \u6253\u5370leaf\n    println!(\n        \"leaf strong = {}, weak = {}\",\n        Rc::strong_count(&amp;leaf),\n        Rc::weak_count(&amp;leaf)\n    );\n\n}\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b</p> <pre><code>leaf strong = 1, weak = 0\nbranch strong = 1, weak = 1\nleaf strong = 2, weak = 0\nleaf parent = None\nleaf strong = 1, weak = 0\n</code></pre> <p>\u6839\u636e\u7ed3\u679c\uff0c\u6211\u4eec\u5f97\u51fa\u4e00\u4e0b\u7ed3\u8bba\uff1a</p> <ul> <li> <p>\u521b\u5efa<code>leaf</code>\u4e4b\u540e\uff0c\u67091\u4e2a\u5f3a\u5f15\u7528\uff0c0\u4e2a\u5f31\u5f15\u7528\u3002</p> </li> <li> <p>\u7136\u540e\u8fdb\u5165\u4e00\u4e2a\u4f5c\u7528\u57df\uff0c\u5728\u4f5c\u7528\u57df\u91cc\u521b\u5efa<code>branch</code>\uff0c\u518d\u628a<code>leaf</code>\u7684parent\u8fde\u63a5\u5230<code>branch</code>\u3002<code>branch</code>\u67091\u4e2a\u5f3a\u5f15\u7528\uff0c\u5e76\u4e14\u591a\u4e861\u4e2a\u5f31\u5f15\u7528\uff0c\u56e0\u4e3a<code>leaf</code>\u5bf9\u5176\u505a\u4e86\u5173\u8054\u3002\u8fd9\u65f6\u5019<code>leaf</code>\u67092\u4e2a\u5f3a\u5f15\u7528\uff0c\u56e0\u4e3a\u5728\u521b\u5efa<code>branch</code>\u7684\u65f6\u5019\uff0c<code>branch</code>\u4e2d\u7684<code>children</code>\u5bf9\u5176\u6709\u4e00\u4e2a\u5f3a\u5f15\u7528\u3002</p> </li> <li> <p>\u6700\u540e\u8d70\u51fa\u4f5c\u7528\u57df\uff0c\u901a\u8fc7<code>leaf</code>\u8bbf\u95ee\u5b83\u7684parent\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662fNone\u3002\u6b64\u65f6<code>leaf</code>\u5269\u4e0b\u672c\u77011\u4e2a\u5f3a\u5f15\u7528\uff0c\u800c\u5f31\u5f15\u7528\u4e5f\u662f0\u3002</p> </li> </ul> <p>\u6240\u4ee5\u770b\u4e00\u770b\u5230\uff0c<code>branch</code>\u79bb\u5f00\u4f5c\u7528\u57df\u4e4b\u540e\uff0c\u5b83\u7684\u5f3a\u5f15\u7528\u53d8\u62100\uff0c\u6b64\u65f6\u76f8\u5f53\u4e8e\u88ab\u4e22\u5f03\u4e86\u3002\u867d\u7136\u5728branch\u7684\u751f\u547d\u5468\u671f\u5185\u5b83\u62e5\u6709\u4e00\u4e2a\u5f31\u5f15\u7528\uff0c\u4f46\u5e76\u4e0d\u5f71\u54cd\u5176\u6570\u636e\u7684\u9500\u6bc1\u3002</p>","text":""},{"location":"16_concurrency/01_multi_thread/","title":"\u591a\u7ebf\u7a0b\u540c\u65f6\u8fd0\u884c\u4ee3\u7801","text":""},{"location":"16_concurrency/01_multi_thread/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":""},{"location":"16_concurrency/01_multi_thread/#11","title":"1.1 \u5e76\u53d1","text":"<ul> <li>Concurrent\uff08\u5e76\u53d1\uff09: \u7a0b\u5e8f\u4e0d\u540c\u7684\u90e8\u5206\u4e4b\u95f4\u72ec\u7acb\u6267\u884c</li> <li>Parallel\uff08\u5e76\u884c\uff09: \u7a0b\u5e8f\u4e0d\u540c\u90e8\u5206\u540c\u65f6\u8fd0\u884c</li> </ul> <p>Rust\u5141\u8bb8\u6211\u4eec\u7f16\u5199\u6ca1\u6709\u7ec6\u5faeBug\u7684\u4ee3\u7801\uff0c\u5e76\u5728\u4e0d\u5f15\u5165\u65b0bug\u7684\u60c5\u51b5\u4e0b\u6613\u4e8e\u91cd\u6784\u3002\u672c\u6587\u4e2d\u7684\u201c\u5e76\u53d1\u201d\u6cdb\u6307concurrent\u548cParallel\u3002</p>"},{"location":"16_concurrency/01_multi_thread/#12","title":"1.2 \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b","text":"<p>\u5728\u5927\u90e8\u5206OS\u91cc\uff0c\u4ee3\u7801\u8fd0\u884c\u5728\u8fdb\u7a0b\uff08process\uff09\u4e2d\uff0cOS\u540c\u65f6\u7ba1\u7406\u591a\u4e2a\u8fdb\u7a0b\u3002</p> <p>\u5728\u4f60\u7684\u7a0b\u5e8f\u91cc\uff0c\u5404\u4e2a\u72ec\u7acb\u7684\u90e8\u5206\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\uff0c\u8fd0\u884c\u8fd9\u4e9b\u72ec\u7acb\u7684\u90e8\u5206\u5c31\u662f\u7ebf\u7a0b\uff08thread\uff09\u3002\u7531\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u662f\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u628a\u7a0b\u5e8f\u7684\u8ba1\u7b97\u62c6\u5206\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6765\u8fd0\u884c\u3002\u8fd9\u6837\u7684\u597d\u5904\u5728\u4e8e\u63d0\u5347\u7a0b\u5e8f\u7684\u6027\u80fd\u8868\u73b0\uff0c\u4f46\u4e5f\u589e\u52a0\u4e86\u590d\u6742\u6027\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u5404\u7a0b\u5e8f\u7684\u6267\u884c\u987a\u5e8f\uff0c\u56e0\u4e3a\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u5404\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u7684\u987a\u5e8f\u3002</p>"},{"location":"16_concurrency/01_multi_thread/#13","title":"1.3 \u591a\u7ebf\u7a0b\u53ef\u5bfc\u81f4\u7684\u95ee\u9898","text":"<ul> <li>\u7ade\u4e89\u72b6\u6001\uff0c\u7ebf\u7a0b\u4ee5\u4e0d\u4e00\u81f4\u7684\u987a\u5e8f\u8bbf\u95ee\u6570\u636e\u6216\u8d44\u6e90</li> <li>\u6b7b\u9501\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u5f7c\u6b64\u7b49\u5f85\u5bf9\u65b9\u4f7f\u7528\u5b8c\u6301\u6709\u7684\u8d44\u6e90\uff0c\u5bfc\u81f4\u7ebf\u7a0b\u65e0\u6cd5\u7ee7\u7eed</li> <li>\u51fa\u73b0\u53ea\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53d1\u751f\u7684bug\uff0c\u800c\u4e14\u5f88\u96bek\u53ef\u9760\u5730\u590d\u73b0\u548c\u4fee\u590d</li> </ul>"},{"location":"16_concurrency/01_multi_thread/#14","title":"1.4 \u5b9e\u73b0\u7ebf\u7a0b\u7684\u65b9\u5f0f","text":"<p>\u7b2c\u4e00\u79cd\uff0c\u901a\u8fc7\u8c03\u7528OS\u7684API\u6765\u521b\u5efa\u7ebf\u7a0b\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u76841:1\u6a21\u578b\uff0c\u5373\u4e00\u4e2a\u64cd\u4f5c\u7684\u7ebf\u7a0b\u5bf9\u5e94\u4e00\u4e2a\u7f16\u7a0b\u8bed\u8a00\u7684\u7ebf\u7a0b\uff0c\u4f18\u70b9\u662f\u9700\u8981\u8f83\u5c0f\u7684\u8fd0\u884c\u65f6\u3002</p> <p>\u7b2c\u4e8c\u79cd\uff0c\u7f16\u7a0b\u8bed\u8a00\u5b9e\u73b0\u81ea\u5df1\u7684\u7ebf\u7a0b\uff08\u7eff\u8272\u7ebf\u7a0b\uff09\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684M:N\u6a21\u578b\uff0c\u5373M\u4e2a\u7eff\u8272\u7ebf\u7a0b\u5bf9\u5e94N\u4e2a\u7cfb\u7edf\u7ebf\u7a0b\uff0c\u4f46\u662f\u9700\u8981\u6bd4\u8f83\u5927\u7684\u8fd0\u884c\u65f6\u3002</p> <p>Rust\u6807\u51c6\u5e93\u4ec5\u63d0\u4f9b1:1\u7684\u7ebf\u7a0b\u652f\u6301\uff0c\u4f46\u662f\u7531\u4e8erust\u62e5\u6709\u826f\u597d\u7684\u5e95\u5c42\u62bd\u8c61\u80fd\u529b\uff0c\u6240\u4ee5\u5728\u793e\u533a\u91cc\u4e5f\u6d8c\u73b0\u51fa\u4e86\u5f88\u591aM:N\u7ebf\u7a0b\u6a21\u578b\u7684\u7b2c\u4e09\u65b9\u5305\u3002</p>"},{"location":"16_concurrency/01_multi_thread/#_3","title":"\u4e8c\u3001\u591a\u7ebf\u7a0b\u7684\u4f7f\u7528","text":""},{"location":"16_concurrency/01_multi_thread/#25-spawn","title":"2.5 \u4f7f\u7528spawn\u521b\u5efa\u65b0\u7ebf\u7a0b","text":"<p>rust\u901a\u8fc7<code>thread::spawn</code>\u51fd\u6570\u53ef\u4ee5\u521b\u5efa\u65b0\u7ebf\u7a0b\uff0c\u53c2\u6570\u4e3a\u4e00\u4e2a\u95ed\u5305\uff0c\u5728\u65b0\u7ebf\u7a0b\u5c06\u8fd0\u884c\u95ed\u5305\u7684\u4ee3\u7801\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>use std::thread::{self, Thread};\nuse std::time::Duration;\nfn main() {\nthread::spawn(||{\nfor i in 1..10 {\nprintln!(\"hi number {} from the spawnd thread!\", i);\nthread::sleep(Duration::from_millis(1));\n}\n});\nfor i in 1..5 {\nprintln!(\"hi number {} from the main thread!\", i);\nthread::sleep(Duration::from_millis(1));\n}\n}\n</code></pre> <p>\u6211\u4eec\u5c06\u5728\u7a0b\u5e8f\u4e2d\u770b\u5230\u4ea4\u66ff\u6253\u5370\u4e3b\u7ebf\u7a0b\u548c\u5b50\u7ebf\u7a0b\u7684\u8f93\u51fa\u5185\u5bb9\uff0c\u4e0d\u8fc7\u5f53\u4e3b\u7ebf\u8fd0\u884c\u7a0b\u7ed3\u675f\u540e\uff0c\u6574\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u7ed3\u675f\u3002\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u5e0c\u671b\u5b50\u7ebf\u7a0b\u80fd\u5b8c\u6574\u5730\u6267\u884c\u6240\u6709\u903b\u8f91\u3002</p>"},{"location":"16_concurrency/01_multi_thread/#22-join-handle","title":"2.2 \u901a\u8fc7join handle\u6765\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210","text":"<p><code>thread::spawn</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u7c7b\u578b\u662f<code>JoinHandle</code>\uff0c<code>JoinHandle</code>\u6301\u6709\u503c\u7684\u6240\u6709\u6743\uff0c\u901a\u8fc7\u8c03\u7528\u5176<code>join</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7b49\u5f85\u5bf9\u5e94\u7684\u5176\u4ed6\u7ebf\u7a0b\u7684\u5b8c\u6210\u3002\u8c03\u7528<code>JoinHandle</code>\u7684<code>join</code>\u65b9\u6cd5\u4f1a\u963b\u6b62\u5f53\u524d\u8fd0\u884c\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u76f4\u5230<code>handle</code>\u6240\u8868\u793a\u7684\u8fd9\u4e9b\u7ebf\u7a0b\u7ed3\u675f\u3002\u6211\u95e8\u53ef\u4ee5\u4fee\u6539\"2.1\"\u4e2d\u7684\u4ee3\u7801\u5982\u4e0b\uff0c\u4ee5\u4fdd\u8bc1\u5b50\u7ebf\u7a0b\u80fd\u5b8c\u6574\u5730\u6267\u884c\u6240\u6709\u903b\u8f91</p> <pre><code>use std::thread::{self, Thread};\nuse std::time::Duration;\nfn main() {\nlet handle = thread::spawn(||{\nfor i in 1..10 {\nprintln!(\"hi number {} from the spawnd thread!\", i);\nthread::sleep(Duration::from_millis(1));\n}\n});\nfor i in 1..5 {\nprintln!(\"hi number {} from the main thread!\", i);\nthread::sleep(Duration::from_millis(1));\n}\nhandle.join().unwrap();\n}\n</code></pre>"},{"location":"16_concurrency/01_multi_thread/#23-move","title":"2.3 \u4f7f\u7528move\u95ed\u5305","text":"<p>move\u95ed\u5305\u901a\u5e38\u548c<code>thread::spawn</code>\u51fd\u6570\u4e00\u8d77\u4f7f\u7528\uff0c\u5b83\u5141\u8bb8\u4f60\u4f7f\u7528\u5176\u4ed6\u7ebf\u7a0b\u7684\u6570\u636e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u521b\u5efa\u7ebf\u7a0b\u7684\u65f6\u5019\uff0c\u628a\u503c\u7684\u6240\u6709\u6743\u4ece\u4e00\u4e2a\u7ebf\u7a0b\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u3002\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e2a\u9519\u8bef\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::thread;\nfn main() {\nlet v = vec![1, 2, 3];\nlet handle = thread::spawn(|| {\nprintln!(\"Here's a vector: {:?}\", v);\n});\ndrop(v);\nhandle.join().unwrap();\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e4b\u6240\u4ee5\u4f1a\u62a5\u9519\uff0c\u662f\u56e0\u4e3a\u5b50\u7ebf\u7a0b\u501f\u7528\u4e86v\uff0c\u4f46\u662fv\u7684\u751f\u547d\u5468\u671f\u53ef\u80fd\u4f1a\u6bd4\u5b50\u7ebf\u7a0b\u77ed\u3002\u6240\u4ee5rust\u4e0d\u5141\u8bb8\u7f16\u8bd1\u901a\u8fc7\uff0c\u6b64\u65f6\u6211\u4eec\u53ea\u9700\u8981\u52a0\u4e0a<code>move</code>\u5173\u952e\u5b57\u8f6c\u79fbv\u7684\u6240\u6709\u6743\u5230\u5b50\u7ebf\u7a0b\uff0c\u4f46\u662f\u52a0\u4e86<code>move</code>\u5173\u952e\u5b57\u4e4b\u540e\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u4e0d\u80fd\u518d\u8c03\u7528<code>drop(v)</code>\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::thread;\nfn main() {\nlet v = vec![1, 2, 3];\nlet handle = thread::spawn(move || {\nprintln!(\"Here's a vector: {:?}\", v);\n});\nhandle.join().unwrap();\n}\n</code></pre>"},{"location":"16_concurrency/02_cross_thread_message_passing/","title":"\u8de8\u7ebf\u7a0b\u6d88\u606f\u4f20\u9012","text":""},{"location":"16_concurrency/02_cross_thread_message_passing/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u6d88\u606f\u4f20\u9012\u662f\u4e00\u79cd\u5f88\u6d41\u884c\u4e14\u80fd\u4fdd\u8bc1\u5b89\u5168\u5e76\u53d1\u7684\u6280\u672f\uff0c\u5728\u8fd9\u79cd\u673a\u5236\u91cc\u7ebf\u7a0b\uff08\u6216Actor\uff09\u901a\u8fc7\u5f7c\u6b64\u53d1\u9001\u6d88\u606f\uff08\u6570\u636e\uff09\u6765\u8fdb\u884c\u901a\u4fe1\u3002Go\u8bed\u8a00\u4e2d\u6709\u4e00\u53e5\u540d\u8a00\uff1a\u201c\u4e0d\u8981\u7528\u5171\u4eab\u5185\u5b58\u6765\u901a\u4fe1\uff0c\u8981\u7528\u901a\u4fe1\u6765\u5171\u4eab\u5185\u5b58\u201d\uff0cGo\u8bed\u8a00\u8fd9\u79cd\u5e76\u53d1\u673a\u5236\u5c31\u4f53\u73b0\u4e86\u8fd9\u4e2a\u601d\u60f3\u3002</p> <p>Rust\u4e5f\u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u4e8e\u6d88\u606f\u4f20\u9012\u7684\u5e76\u53d1\u65b9\u5f0f\uff0c\u5728rust\u91cc\u4f7f\u7528\u6807\u51c6\u5e93\u63d0\u4f9b\u7684<code>Channel</code>\u6765\u5b9e\u73b0\u3002<code>Channel</code>\u5305\u542b\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\uff0c\u6211\u95e8\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u53d1\u9001\u7aef\u7684\u65b9\u6cd5\u6765\u53d1\u9001\u6570\u636e\uff0c\u63a5\u6536\u7aef\u4f1a\u68c0\u67e5\u548c\u63a5\u6536\u5230\u8fbe\u7684\u6570\u636e\u3002\u5982\u679c\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u7684\u4efb\u610f\u4e00\u7aef\u88ab\u4e22\u5f03\u4e86\uff0c\u90a3\u4e48<code>Channel</code>\u5c31\u5173\u95ed\u4e86\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#channel","title":"\u4e8c\u3001\u4f7f\u7528Channel","text":""},{"location":"16_concurrency/02_cross_thread_message_passing/#21","title":"2.1 \u5728\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u521b\u5efa\u548c\u63a5\u6536\u6570\u636e","text":"<p>\u4f7f\u7528<code>mpsc::channel</code>\u51fd\u6570\u6765\u521b\u5efaChannel\uff0c<code>mpsc</code>\u8868\u793amultiple producer, singer consumer\uff08\u591a\u4e2a\u751f\u4ea7\u8005\u3001\u4e00\u4e2a\u6d88\u8d39\u8005\uff09\uff0c\u5373\u6709\u591a\u4e2a\u53d1\u9001\u7aef\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u63a5\u6536\u7aef\u3002\u8c03\u7528\u8be5\u51fd\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff0c\u5143\u7ec4\u91cc\u7684\u5143\u7d20\u5206\u522b\u662f\u53d1\u9001\u7aef\u3001\u63a5\u6536\u7aef\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::sync::mpsc;\nuse std::thread;\nfn main() {\nlet (tx, rx) = mpsc::channel();\nthread::spawn(move || {\nlet val = String::from(\"hi\");\ntx.send(val).unwrap();\n});\nlet received = rx.recv().unwrap();\nprintln!(\"Got: {}\", received);\n}\n</code></pre> <p>\u6d88\u8d39\u8005\u7684<code>recv</code>\u65b9\u6cd5\u4e00\u76f4\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u76f4\u5230\u63a5\u6536\u5230\u6d88\u606f\u4e3a\u6b62\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#22-send","title":"2.2 \u53d1\u9001\u7aef\u7684send\u65b9\u6cd5","text":"<p>\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\u4e3a\u60f3\u8981\u53d1\u9001\u7684\u6570\u636e\uff0c\u8fd4\u56de\u503c\u4e3a<code>Result&lt;T, E&gt;</code>\uff0c\u5982\u679c\u6709\u95ee\u9898\uff08\u4f8b\u5982\u63a5\u6536\u7aef\u5df2\u7ecf\u88ab\u4e22\u5f03\uff09\uff0c\u5c06\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#23","title":"2.3 \u63a5\u6536\u7aef\u7684\u65b9\u6cd5","text":"<p><code>recv</code>\u65b9\u6cd5\u963b\u6b62\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\uff0c\u76f4\u5230Channel\u4e2d\u6709\u503c\u88ab\u9001\u6765\u3002\u4e00\u65e6\u6536\u5230\u503c\uff0c\u5c31\u4f1a\u8fd4\u56de<code>Result&lt;T&gt;</code>\uff0c\u6240\u6709\u8fd9\u4e2a\u7ba1\u9053\u7684\u6240\u6709\u53d1\u9001\u7aef\u90fd\u5173\u95ed\u4e86\uff0c\u5c31\u4f1a\u6536\u5230\u4e00\u4e2a\u9519\u8bef\u3002</p> <p><code>try_recv</code>\u65b9\u6cd5\u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u7684\u7ebf\u7a0b\uff0c\u5982\u679c\u6709\u6570\u636e\u5230\u8fbe\uff0c\u8fd4\u56de<code>OK</code>\uff0c\u91cc\u9762\u5305\u542b\u7740\u6570\u636e\uff0c\u5426\u5219\u8fd4\u56de\u9519\u8bef\u3002\u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528\u5faa\u73af\u6765\u68c0\u67e5<code>try_recv</code>\u7684\u7ed3\u679c\uff0c\u5982\u679c\u6d88\u606f\u8fd8\u6ca1\u6709\u6765\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6267\u884c\u5176\u4ed6\u7684\u64cd\u4f5c\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#24-channel","title":"2.4 channel\u548c\u6240\u6709\u6743\u8f6c\u79fb","text":"<p>\u6240\u6709\u6743\u5148\u6d88\u606f\u4f20\u9012\u4e2d\u975e\u5e38\u91cd\u8981\uff0c\u80fd\u5e2e\u4f60\u8865\u5168\u7f16\u5199\u5b89\u5168\u3001\u5e76\u53d1\u7684\u4ee3\u7801\u3002\u6211\u4eec\u5148\u770b\u4ee5\u4e0b\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::sync::mpsc;\nuse std::thread;\nfn main() {\nlet (tx, rx) = mpsc::channel();\nthread::spawn(move || {\nlet val = String::from(\"hi\");\ntx.send(val).unwrap();\n// \u4e0b\u9762\u4e00\u884c\u4ee3\u7801\u5c06\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6240\u6709\u6743\u5df2\u7ecf\u88ab\u8f6c\u79fb\nprintln(\"val is {}\", val);\n});\nlet received = rx.recv().unwrap();\nprintln!(\"Got: {}\", received);\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u501f\u7528\u4e86\u5df2\u79fb\u52a8\u7684\u503c\uff0c\u56e0\u6b64\u4f1a\u53d1\u751f\u7f16\u8bd1\u9519\u8bef\u3002\u6240\u4ee5\u6240\u6709\u6743\u673a\u5236\u4f1a\u5e2e\u6211\u6211\u4eec\u7f16\u5199\u7f16\u5199\u5b89\u5168\u3001\u5e76\u53d1\u7684\u4ee3\u7801\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#25","title":"2.5 \u53d1\u9001\u591a\u4e2a\u503c","text":"<p>\u6211\u4eec\u901a\u8fc7\u53d1\u9001\u591a\u4e2a\u503c\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u63a5\u6536\u8005\u5728\u7b49\u5f85\u7684\u8fc7\u7a0b\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::sync::mpsc;\nuse std::{thread, vec};\nuse std::time::Duration;\nfn main() {\nlet (tx, rx) = mpsc::channel();\nthread::spawn(move || {\nlet vals = vec![\nString::from(\"hi\"),\nString::from(\"from\"),\nString::from(\"the\"),\nString::from(\"thread\"),\n];\n// \u5faa\u73af\u5206\u522b\u53d1\u9001\u56db\u4e2a\u5b57\u7b26\u4e32\nfor val in vals {\ntx.send(val).unwrap();\nthread::sleep(Duration::from_millis(1000));\n}\n});\n// \u6211\u4eec\u628a\u63a5\u6536\u7aef\u5f53\u4f5c\u8fed\u4ee3\u5668\u6765\u4f7f\u7528\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u663e\u5f0f\u8c03\u7528recv\u65b9\u6cd5\nfor received in rx {\nprintln!(\"Got: {}\", received);\n}\n}\n</code></pre> <p>\u8fd0\u884c\u4ee5\u4e0a\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u5c06\u770b\u5230\u63a5\u6536\u7aef\u5728\u7b49\u5f85\u6d88\u606f\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"16_concurrency/02_cross_thread_message_passing/#26","title":"2.6 \u901a\u8fc7\u514b\u9686\u521b\u5efa\u591a\u4e2a\u53d1\u9001\u8005","text":"<p>\u901a\u8fc7\u8c03\u7528<code>mpsc::Sender::clone</code>\u51fd\u6570\u53ef\u4ee5\u514b\u9686\u53d1\u9001\u8005\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::sync::mpsc;\nuse std::{thread, vec};\nuse std::time::Duration;\nfn main() {\nlet (tx, rx) = mpsc::channel();\nlet tx1 = mpsc::Sender::clone(&amp;tx);\nthread::spawn(move || {\nlet vals = vec![\nString::from(\"1: hi\"),\nString::from(\"1: from\"),\nString::from(\"1: the\"),\nString::from(\"1: thread\"),\n];\n// \u5faa\u73af\u5206\u522b\u53d1\u9001\u56db\u4e2a\u5b57\u7b26\u4e32\nfor val in vals {\ntx1.send(val).unwrap();\nthread::sleep(Duration::from_millis(200));\n}\n});\nthread::spawn(move || {\nlet vals = vec![\nString::from(\"hi\"),\nString::from(\"from\"),\nString::from(\"the\"),\nString::from(\"thread\"),\n];\n// \u5faa\u73af\u5206\u522b\u53d1\u9001\u56db\u4e2a\u5b57\u7b26\u4e32\nfor val in vals {\ntx.send(val).unwrap();\nthread::sleep(Duration::from_millis(200));\n}\n});\n// \u6211\u4eec\u628a\u63a5\u6536\u7aef\u5f53\u4f5c\u8fed\u4ee3\u5668\u6765\u4f7f\u7528\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u663e\u5f0f\u8c03\u7528recv\u65b9\u6cd5\nfor received in rx {\nprintln!(\"Got: {}\", received);\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u4e24\u4e2a\u5b50\u7ebf\u7a0b\u7531\u4e24\u4e2a\u53d1\u9001\u8005\u6765\u53d1\u6570\u636e\u3002\u5e76\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u4f7f\u7528\u63a5\u6536\u8005\u63a5\u6536\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u7a0b\u5e8f\u8fd0\u884c\u7ed3\u679c\u770b\u5230\u7531\u4e24\u4e2a\u53d1\u9001\u8005\u53d1\u9001\u7684\u6570\u636e\u88ab\u4ea4\u66ff\u8f93\u51fa\u3002</p>"},{"location":"16_concurrency/03_shared_state_concurrency/","title":"\u5171\u4eab\u72b6\u6001\u7684\u5e76\u53d1","text":""},{"location":"16_concurrency/03_shared_state_concurrency/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u201c\u4e0d\u8981\u7528\u5171\u4eab\u5185\u5b58\u6765\u901a\u4fe1\uff0c\u8981\u7528\u901a\u4fe1\u6765\u5171\u4eab\u5185\u5b58\u201d\u3002\u5b9e\u9645\u4e0a\uff0c\u5728\u4e0a\u8282\u4e2d\u6211\u4eec\u5c31\u662f\u4f7f\u7528\u901a\u4fe1\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u5e76\u53d1\u7684\uff0c\u5728\u672c\u8282\u6211\u4eec\u8981\u4f7f\u7528\u5171\u4eab\u5185\u5b58\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u5e76\u53d1\u3002</p> <p>rust\u652f\u6301\u901a\u8fc7\u5171\u4eab\u72b6\u6001\u6765\u5b9e\u73b0\u5e76\u53d1\u3002channel\u7c7b\u4f3c\u4e8e\u5355\u6240\u6709\u6743\uff0c\u4e00\u65e6\u5c06\u503c\u7684\u6240\u6709\u6743\u8f6c\u79fb\u81f3channel\uff0c\u5c31\u65e0\u6cd5\u4f7f\u7528\u5b83\u4e86\u3002\u800c\u5171\u4eab\u5185\u5b58\u7684\u5e76\u53d1\u65b9\u5f0f\u7c7b\u4f3c\u591a\u6240\u6709\u6743\uff0c\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u540c\u65f6\u8bbf\u95ee\u4e00\u5757\u5185\u5b58\u3002</p> <p>\u5728rust\u91cc\u4f7f\u7528<code>Mutex</code>\u6765\u6bcf\u6b21\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u6765\u8bbf\u95ee\u6570\u636e\uff0c\u662f<code>mutual exclusion</code>(\u4e92\u65a5\u9501)\u7684\u7b80\u5199\u3002\u5728\u540c\u4e00\u65f6\u523b\uff0cMutex\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u6765\u8bbf\u95ee\u67d0\u4e9b\u6570\u636e\u3002\u60f3\u8981\u8bbf\u95ee\u6570\u636e\uff0c\u7ebf\u7a0b\u5fc5\u987b\u9996\u5148\u83b7\u53d6\u4e92\u65a5\u9501\uff08lock\uff09\u3002<code>lock</code>\u6570\u636e\u7ed3\u6784\u662fmutex\u7684\u4e00\u90e8\u5206\uff0c\u5b83\u80fd\u8ddf\u8e2a\u8c01\u5bf9\u6570\u636e\u62e5\u6709\u72ec\u5360\u8bbf\u95ee\u6743\u3002mutex\u901a\u5e38\u88ab\u63cf\u8ff0\u4e3a\uff1a\u901a\u8fc7\u9501\u5b9a\u7cfb\u7edf\u6765\u4fdd\u62a4\u5b83\u9501\u6301\u6709\u7684\u6570\u636e\u3002</p>"},{"location":"16_concurrency/03_shared_state_concurrency/#mutext","title":"\u4e8c\u3001Mutext\u7684\u4e24\u6761\u89c4\u5219","text":"<ul> <li>\u5728\u4f7f\u7528\u6570\u636e\u4e4b\u524d\uff0c\u5fc5\u987b\u5c1d\u8bd5\u83b7\u53d6\u9501\uff08lock\uff09\u3002</li> <li>\u4f7f\u7528\u5b8cmutex\u6240\u4fdd\u62a4\u7684\u6570\u636e\uff0c\u5fc5\u987b\u5bf9\u6570\u636e\u8fdb\u884c\u89e3\u9501\uff0c\u4ee5\u4fbf\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u53d6\u9501\u3002</li> </ul>"},{"location":"16_concurrency/03_shared_state_concurrency/#mutexapi","title":"\u4e09\u3001Mutex\u7684API <p>\u901a\u8fc7<code>Mutex::new(\u6570\u636e)</code>\u6765\u521b\u5efa<code>Mutex&lt;T&gt;</code>\uff0c<code>Mutex&lt;T&gt;</code>\u662f\u4e00\u4e2a\u667a\u80fd\u6307\u9488\uff0c\u5728\u8bbf\u95ee\u6570\u636e\u4e4b\u524d\uff0c\u901a\u8fc7<code>lock</code>\u65b9\u6cd5\u6765\u83b7\u53d6\u9501\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\u7684\u6267\u884c\uff0c\u8fd4\u56de\u7684\u662f<code>MutexGuard</code>\uff08\u667a\u80fd\u6307\u9488\uff0c\u5b9e\u73b0\u4e86Deref\u548cDrop\uff09\uff0c\u4f46<code>lock</code>\u65b9\u6cd5\u53ef\u80fd\u4f1a\u5931\u8d25\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::sync::Mutex;\n\nfn main() {\n    let m = Mutex::new(5);\n\n    {\n        // \u83b7\u53d6\u6570\u636e\u7684\u53ef\u53d8\u5f15\u7528\n        let mut num = m.lock().unwrap();\n        // \u53d8\u66f4\u6570\u636e\n        *num = 6;\n    }\n    // \u7531\u4e8eMutexGuard\u5b9e\u73b0\u4e86 Drop trait\uff0c\u5f53\u4f5c\u7528\u57df\u8d70\u5b8c\uff0cm\u88ab\u81ea\u52a8\u89e3\u9501\n\n    println(\"m = {\"?\"}\", m);\n}\n</code></pre>","text":""},{"location":"16_concurrency/03_shared_state_concurrency/#mutex","title":"\u56db\u3001\u591a\u7ebf\u7a0b\u5171\u4eabMutex <p>\u5728rust\u91cc\u4f7f\u7528<code>Arc&lt;T&gt;</code>\u6765\u8fdb\u884c\u539f\u5b50\u5f15\u7528\u8ba1\u6570\uff0c<code>Arc&lt;T&gt;</code>\u548c<code>Rc&lt;T&gt;</code>\u7c7b\u4f3c\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8e\u5e76\u53d1\u573a\u666f\u3002A\u662fatomic\u7684\u7b80\u79f0\uff0c\u5373\u539f\u5b50\u7684\u3002\u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u6240\u6709\u7684\u57fa\u7840\u7c7b\u578b\u90fd\u4e0d\u662f\u539f\u5b50\u7684\uff0c\u4e3a\u4ec0\u4e48\u6807\u51c6\u5e93\u7c7b\u578b\u4e0d\u9ed8\u8ba4\u4f7f\u7528<code>Arc&lt;T&gt;</code>\uff1f\u56e0\u4e3a\u9700\u8981\u4ed8\u51fa\u6027\u80fd\u4ee3\u4ef7\u3002<code>Arc&lt;T&gt;</code>\u548c<code>Rc&lt;T&gt;</code>\u7684API\u662f\u76f8\u540c\u7684\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::rc::Rc;\nuse std::sync::{Arc, Mutex};\nuse std::thread;\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u6570\u636e\n    let counter = Arc::new(Mutex::new(0));\n    let mut handles = vec![];\n\n    // \u521b\u5efa10\u4e2a\u7ebf\u7a0b\u53bb\u4fee\u6539\u6570\u636e\uff0c\u518d\u628a\u8fd4\u56de\u768410\u4e2aJoinHandle\u653e\u5230handles\u4e2d\n    for _ in 0..10 {\n        let counter = Arc::clone(&amp;counter);\n\n        let handle = thread::spawn(move || {\n            let mut num = counter.lock().unwrap();\n\n            *num += 1;\n        });\n\n        handles.push(handle);\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u8fd0\u884c\u5b8c\u6210\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    println!(\"Result: {}\", *counter.lock().unwrap());\n}\n</code></pre> <p>\u6700\u7ec8\u8fd0\u884c\u7ed3\u679c\u4e3a<code>10</code>\u3002</p>","text":""},{"location":"16_concurrency/03_shared_state_concurrency/#refcellrcmutexarc","title":"\u4e94\u3001RefCell/Rc\u548cMutex/Arc <p><code>Mutext&lt;T&gt;</code>\u63d0\u4f9b\u4e86\u5185\u90e8\u53ef\u53d8\u6027\uff0c\u548c<code>Cell</code>\u5bb6\u65cf\u4e00\u6837\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>RefCell&lt;T&gt;</code>\u6539\u53d8<code>Rc&lt;T&gt;</code>\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528<code>Mutex&lt;T&gt;</code>\u6765\u6539\u53d8<code>Arc&lt;T&gt;</code>\u91cc\u9762\u7684\u5185\u5bb9\u3002</p> <p>\u4f46\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528<code>Rc&lt;T&gt;</code>\u53ef\u80fd\u4f1a\u9020\u6210\u5faa\u73af\u5f15\u7528\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u7684\u98ce\u9669\uff1b\u800c\u4f7f\u7528<code>Mutex&lt;T&gt;</code>\u4e5f\u6709\u6b7b\u9501\u7684\u98ce\u9669\u3002\u6240\u8c13\u7684\u6b7b\u9501\uff0c\u5c31\u662f\u5f53\u67d0\u4e2a\u64cd\u4f5c\u9700\u8981\u540c\u65f6\u9501\u4f4f\u4e24\u4e2a\u8d44\u6e90\uff0c\u4e24\u4e2a\u7ebf\u7a0b\u5206\u522b\u6301\u6709\u5176\u4e2d\u4e00\u4e2a\u9501\uff0c\u5e76\u76f8\u4e92\u8bf7\u6c42\u53e6\u5916\u4e00\u4e2a\u9501\u7684\u65f6\u5019\uff0c\u8fd9\u4e24\u4e2a\u7ebf\u7a0b\u5c31\u4f1a\u9677\u5165\u65e0\u7a77\u65e0\u5c3d\u7684\u7b49\u5f85\u3002</p>","text":""},{"location":"16_concurrency/04_sync_and_send/","title":"Sync\u548cSend\u6269\u5c55\u5e76\u53d1","text":""},{"location":"16_concurrency/04_sync_and_send/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>rust\u8bed\u8a00\u672c\u7701\u7684\u5e76\u53d1\u7279\u6027\u8f83\u5c11\uff0c\u76ee\u524d\u5c06\u7684\u5e76\u53d1\u7279\u6027\u90fd\u662f\u6765\u81ea\u6807\u51c6\u5e93\uff08\u800c\u4e0d\u662f\u8bed\u8a00\u672c\u8eab\uff09\u3002\u5176\u5b9e\u6211\u4eec\u65e0\u9700\u4ec5\u9650\u4e8e\u6807\u51c6\u5e93\u7684\u5e76\u53d1\uff0c\u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u5e76\u53d1\u3002\u4f46\u5728rust\u8bed\u8a00\u4e2d\u6709\u4e24\u4e2a\u5e76\u53d1\u6982\u5ff5\uff1a<code>std::marker::Sync</code>\u548c<code>std::marker::Send</code>\u8fd9\u4e24\u4e2atrait\u3002</p>"},{"location":"16_concurrency/04_sync_and_send/#send","title":"\u4e8c\u3001Send","text":"<p>Send\uff1a\u5141\u8bb8\u7ebf\u7a0b\u95f4\u8f6c\u79fb\u6240\u6709\u6743\u3002\u5b9e\u73b0Send trait\u7684\u7c7b\u578b\u53ef\u4ee5\u5728\u7ebf\u7a0b\u95f4\u8f6c\u79fb\u6240\u6709\u6743\uff0cRust\u4e2d\u51e0\u4e4e\u6240\u6709\u7684\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86Send\uff0c\u4f46<code>Rc&lt;T&gt;</code>\u6ca1\u6709\u5b9e\u73b0Send\uff0c\u5b83\u53ea\u7528\u4e8e\u5355\u7ebf\u7a0b\u7684\u573a\u666f\u3002\u4efb\u4f55\u5b8c\u5168\u7531Send\u7ec4\u6210\u7684\u7c7b\u578b\u4e5f\u88ab\u6807\u8bb0\u4e3aSend\uff0c\u5b9e\u9645\u4e0a\u9664\u4e86\u539f\u59cb\u6307\u9488\u4e4b\u5916\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u57fa\u7840\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86Send\u3002</p>"},{"location":"16_concurrency/04_sync_and_send/#sync","title":"\u4e09\u3001Sync","text":"<p>Sync\uff1a\u5141\u8bb8\u4ece\u591a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u3002\u5b9e\u73b0Sync\u7684\u7c7b\u578b\u53ef\u4ee5\u5b89\u5168\u7684\u88ab\u591a\u4e2a\u7ebf\u7a0b\u5f15\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\uff1a\u5982\u679c<code>T</code>\u5b9e\u73b0\u4e86<code>Sync</code>\uff0c\u90a3\u4e48<code>&amp;T</code>\uff08T\u7684\u5f15\u7528\uff09\u5c31\u662f\u5b9e\u73b0\u4e86<code>Send</code>\uff0c\u8868\u793a<code>T</code>\u7684\u5f15\u7528\u53ef\u4ee5\u88ab\u5b89\u5168\u5730\u9001\u5f80\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u3002\u57fa\u7840\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86Sync\uff0c\u5b8c\u5168\u7531Sync\u7c7b\u578b\u7ec4\u6210\u7684\u7c7b\u578b\u4e5f\u662fSync\uff0c\u4f46\u662f<code>Rc&lt;T&gt;</code>\u4e0d\u662fSync\uff0c<code>RefCell&lt;T&gt;</code>\u548c<code>Cell&lt;T&gt;</code>\u5bb6\u65cf\u4e5f\u4e0d\u662fSync\uff0c\u800c<code>Mutex&lt;T&gt;</code>\u5b9e\u73b0\u4e86Sync\u3002</p>"},{"location":"16_concurrency/04_sync_and_send/#sendsync","title":"\u56db\u3001\u624b\u52a8\u5b9e\u73b0Send\u548cSync\u5f88\u96be\u4fdd\u8bc1\u5b89\u5168","text":"<p>\u624b\u52a8\u6765\u5b9e\u73b0Send\u548cSync\u662f\u5f88\u96be\u4fdd\u8bc1\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u624b\u52a8\u5b9e\u73b0\u8fd9\u4e9btrait\u7684\u65f6\u5019\u6d89\u53ca\u5230\u4f7f\u7528\u7279\u6b8a\u4e0d\u5b89\u5168\u7684Rust\u4ee3\u7801\uff0c\u4f60\u9700\u8981\u975e\u5e38\u8c28\u614e\u5730\u786e\u4fdd\u8bbe\u8ba1\uff0c\u624d\u80fd\u6ee1\u8db3\u7ebf\u7a0b\u95f4\u7684\u5b89\u5168\u6027\u8981\u6c42\u3002</p>"},{"location":"17_oop/01_oop_language_features/","title":"\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u7279\u6027","text":""},{"location":"17_oop/01_oop_language_features/#rust","title":"\u4e00\u3001rust\u662f\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u5417\uff1f","text":"<p>Rust\u5728\u8bbe\u8ba1\u7684\u65f6\u5019\u53d7\u5230\u5404\u79cd\u7f16\u7a0b\u8303\u5f0f\u7684\u5f71\u54cd\uff0c\u5305\u62ec\u9762\u5411\u5bf9\u8c61\u3002\u9762\u5411\u5bf9\u8c61\u901a\u5e38\u5305\u542b\u4ee5\u4e0b\u7279\u6027\uff1a\u547d\u540d\u5bf9\u8c61\u3001\u5c01\u88c5\u3001\u7ee7\u627f\u3002</p> <p>\u6211\u4eec\u6240\u8bf4\u7684\u5bf9\u8c61\u5305\u542b\u6570\u636e\u548c\u884c\u4e3a\uff0c\u201c\u8bbe\u8ba1\u6a21\u5f0f\u56db\u4eba\u5e2e\u201d\u5728\u300a\u8bbe\u8ba1\u6a21\u5f0f\u300b\u4e2d\u7ed9\u51fa\u9762\u5411\u5bf9\u8c61\u7684\u5b9a\u4e49\u5982\u4e0b</p> <ul> <li>\u9762\u5411\u5bf9\u8c61\u7684\u7a0b\u5e8f\u7531\u5bf9\u8c61\u7ec4\u6210</li> <li>\u5bf9\u8c61\u5305\u88c5\u4e86\u6570\u636e\u548c\u64cd\u4f5c\u8fd9\u4e9b\u6570\u636e\u7684\u8fc7\u7a0b\uff0c\u8fd9\u4e9b\u8fc7\u7a0b\u901a\u5e38\u88ab\u79f0\u4e3a\u65b9\u6cd5\u6216\u64cd\u4f5c</li> </ul> <p>\u57fa\u4e8e\u4ee5\u4e0a\u5b9a\u4e49\uff0crust\u662f\u9762\u5411\u5bf9\u8c61\u7684\u3002struct\u3001enum\u5305\u542b\u6570\u636e\uff0cimpl\u5757\u4e3a\u4e4b\u63d0\u4f9b\u4e86\u65b9\u6cd5\uff0c\u4f46\u5728rust\u91cc\uff0c\u5e26\u6709\u65b9\u6cd5\u7684struct\u3001enum\u5e76\u6ca1\u6709\u88ab\u79f0\u4e3a\u5bf9\u8c61\u3002</p>"},{"location":"17_oop/01_oop_language_features/#_2","title":"\u4e8c\u3001\u5c01\u88c5","text":"<p>\u5c01\u88c5\u6307\u7684\u662f\uff1a\u8c03\u7528\u5bf9\u8c61\u5916\u90e8\u7684\u4ee3\u7801\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5bf9\u8c61\u5185\u90e8\u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u552f\u4e00\u53ef\u4ee5\u4e0e\u5bf9\u8c61\u8fdb\u884c\u4ea4\u4e92\u7684\u65b9\u6cd5\u5c31\u662f\u901a\u8fc7\u5b83\u516c\u5f00\u7684API\u3002\u5728rust\u91cc\u6211\u4eec\u4f7f\u7528pub\u5173\u952e\u5b57\u6765\u51b3\u5b9a\u90a3\u4e9b\u51fd\u6570\u6216\u65b9\u6cd5\u662f\u516c\u5f00\u7684\uff0c\u800c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u90fd\u662f\u79c1\u6709\u7684\u3002</p>"},{"location":"17_oop/01_oop_language_features/#_3","title":"\u4e09\u3001\u7ee7\u627f","text":"<p>\u7ee7\u627f\u6307\u7684\u662f\uff1a\u4f7f\u5bf9\u8c61\u53ef\u4ee5\u6cbf\u7528\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\u7684\u6570\u636e\u548c\u884c\u4e3a\uff0c\u4e14\u65e0\u9700\u91cd\u590d\u5b9a\u4e49\u76f8\u5173\u4ee3\u7801\u3002</p> <p>\u4f7f\u7528\u7ee7\u627f\u7684\u5176\u4e2d\u4e00\u4e2a\u539f\u56e0\u901a\u5e38\u662f\u5e0c\u671b\u4ee3\u7801\u80fd\u591f\u590d\u7528\u3002\u4e0d\u8fc7rust\u6ca1\u6709\u7ee7\u627f\uff0c\u4f46\u5728rust\u91cc\u6211\u4eec\u4f7f\u7528\u9ed8\u8ba4\u7684trait\u65b9\u6cd5\u6765\u5b9e\u73b0\u4ee3\u7801\u7684\u5171\u4eab\u3002\u56e0\u4e3a\u5728trait\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u65b9\u6cd5\u6709\u9ed8\u8ba4\u5b9e\u73b0\uff08\u5373\u9ed8\u8ba4\u7684trait\u65b9\u6cd5\uff09\uff0c\u90a3\u4e48\u4efb\u4f55\u5b9e\u73b0\u4e86\u8fd9\u4e2atrait\u7684\u7c7b\u578b\u5c31\u4f1a\u81ea\u52a8\u62e5\u6709\u8fd9\u4e2a\u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u5728\u5b9e\u73b0trait\u7684\u65f6\u5019\uff0c\u9009\u62e9\u8986\u76d6trait\u91cc\u65b9\u6cd5\u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u8fd9\u5c31\u662f\u9762\u5411\u5bf9\u8c61\u4e2d\u7684\u5b50\u7c7b\u8986\u76d6\u7236\u7c7b\u65b9\u6cd5\u7c7b\u4f3c\u3002</p> <p>\u4f7f\u7528\u7ee7\u627f\u7684\u53e6\u4e00\u4e2a\u539f\u56e0\u662f\u4f7f\u7528\u591a\u6001\u3002\u591a\u6001\u662f\u540c\u4e00\u4e2a\u884c\u4e3a\u5177\u6709\u591a\u4e2a\u4e0d\u540c\u8868\u73b0\u5f62\u5f0f\u6216\u5f62\u6001\u7684\u80fd\u529b\uff0c\u591a\u6001\u5c31\u662f\u540c\u4e00\u4e2a\u63a5\u53e3\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u5b9e\u4f8b\u800c\u6267\u884c\u4e0d\u540c\u64cd\u4f5c\u3002\u6362\u53e5\u8bdd\u8bf4\u5c31\u662f\u5982\u679c\u4e00\u4e9b\u5bf9\u8c61\u62e5\u6709\u5171\u540c\u7684\u7279\u5f81\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u76f8\u4e92\u66ff\u6362\u3002\u5728rust\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6cdb\u578b\u6765\u6784\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u62bd\u8c61\uff0c\u5e76\u4f7f\u7528trait\u7ea6\u675f\u6765\u51b3\u5b9a\u7c7b\u578b\u5fc5\u987b\u63d0\u4f9b\u7684\u67d0\u4e9b\u5177\u4f53\u7279\u6027\uff0c\u8fd9\u4e2a\u6280\u672f\u6709\u65f6\u5019\u53ef\u4ee5\u53eb\u505a\u9650\u5b9a\u53c2\u6570\u591a\u6001\u5316\uff08bounded parametric\uff09\u3002</p> <p>\u4e0d\u8fc7\uff0c\u73b0\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u90fd\u4e0d\u4f7f\u7528\u7ee7\u627f\u4f5c\u4e3a\u5185\u7f6e\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u65b9\u6848\u4e86\u3002</p>"},{"location":"17_oop/02_trait_objects/","title":"\u4f7f\u7528trait\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u503c","text":""},{"location":"17_oop/02_trait_objects/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5047\u8bbe\u6211\u4eec\u6709\u8fd9\u6837\u7684\u9700\u6c42\uff1a\u521b\u5efa\u4e00\u4e2aGUI\u5de5\u5177\uff0c\u5b83\u4f1a\u904d\u5386\u67d0\u4e2a\u5143\u7d20\uff08\u6307\u7684\u662fGUI\u539f\u5c5e\uff09\u7684\u5217\u8868\uff0c\u4f9d\u6b21\u8c03\u7528\u5143\u7d20\u7684draw\u65b9\u6cd5\u8fdb\u884c\u7ed8\u5236\u3002\u4f8b\u5982Button\u3001TextField\u7b49\u5143\u7d20\u3002</p> <p>\u5bf9\u4e8e\u4ee5\u4e0a\u7684\u9700\u6c42\uff0c\u5728\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u91cc\uff0c\u6211\u4eec\u901a\u5e38\u5148\u5b9a\u4e49\u4e00\u4e2aComponent\u7236\u7c7b\uff0c\u91cc\u9762\u5b9a\u4e49\u4e86draw\u65b9\u6cd5\uff0c\u63a5\u4e0b\u6765\u5b9a\u4e49\u5404\u4e2a\u5143\u7d20\u7684\u7c7b\uff08Button\u3001TextField\u7b49\uff09\uff0c\u5b83\u4eec\u90fd\u7ee7\u627f\u4e8eComponent\u7c7b\uff0c\u518d\u8986\u76d6draw\u65b9\u6cd5\u3002</p> <p>\u800c\u5728rust\u91cc\u662f\u6ca1\u6709\u7ee7\u627f\u529f\u80fd\u7684\uff0c\u6240\u4ee5\u8bf4\u5982\u679c\u60f3\u7528rust\u6765\u6784\u5efa\u8fd9\u4e2aGUI\u5de5\u5177\uff0c\u6211\u4eec\u5c31\u5f97\u4f7f\u7528\u5176\u4ed6\u7684\u65b9\u6cd5\uff0c\u5373\u4e3a\u5171\u6709\u7684\u884c\u4e3a\u5b9a\u4e49\u4e00\u4e2atrait\u3002</p>"},{"location":"17_oop/02_trait_objects/#trait_1","title":"\u4e8c\u3001\u4e3a\u5171\u6709\u884c\u4e3a\u5b9a\u4e49\u4e00\u4e2atrait","text":"<p>\u5728rust\u91cc\uff0c\u6211\u4eec\u907f\u514d\u5c06struct\u6216enum\u79f0\u4e3a\u5bf9\u8c61\uff0c\u867d\u7136\u5b83\u4eec\u662f\u6301\u6709\u6570\u636e\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u65b9\u6cd5\u5b9e\u73b0\u662f\u5728impl\u5757\u91cc\uff0c\u800cstruct\u548cenum\u548cimpl\u5757\u662f\u5206\u5f00\u7684\u3002\u800ctrait\u5bf9\u8c61\u6709\u4e9b\u7c7b\u4f3c\u4e8e\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u5bf9\u8c61\uff0c\u56e0\u4e3atrait\u5bf9\u8c61\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u5b9e\u9645\u4e0a\u662f\u7ec4\u5408\u4e86\u6570\u636e\u4e8e\u884c\u4e3a\u3002trait\u5bf9\u8c61\u4e8e\u4f20\u7edf\u7684\u5bf9\u8c61\u4e0d\u540c\u7684\u5730\u65b9\u5728\u4e8e\uff0c\u6211\u4eec\u65e0\u6cd5\u4e3atrait\u5bf9\u8c61\u6dfb\u52a0\u6570\u636e\u3002trait\u5bf9\u8c61\u88ab\u4e13\u95e8\u7528\u4e8e\u62bd\u8c61\u5171\u6709\u884c\u4e3a\u7684\uff0c\u5b83\u6ca1\u6709\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u5bf9\u8c61\u90a3\u4e48\u901a\u7528\u3002</p> <p>\u6211\u4eec\u5c06\u5b9e\u73b0\u7684\u793a\u4f8b\u4ee3\u7801\u5b58\u5728<code>src/s60_trait_save_different_val</code>\u4e2d\u3002</p>"},{"location":"17_oop/02_trait_objects/#trait_2","title":"\u4e09\u3001trait\u5bf9\u8c61\u6267\u884c\u7684\u662f\u52a8\u6001\u6d3e\u53d1","text":"<p>\u5c06trait\u7ea6\u675f\u4f5c\u7528\u4e8e\u6cdb\u578b\u65f6\uff0crust\u7f16\u8bd1\u5668\u4f1a\u6267\u884c\u5355\u6001\u5316\u3002\u7f16\u8bd1\u5668\u4f1a\u4e3a\u6211\u4eec\u7528\u6765\u66ff\u6362\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u7684\u6bcf\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u751f\u6210\u5bf9\u5e94\u51fd\u6570\u548c\u65b9\u6cd5\u7684\u975e\u6cdb\u578b\u5b9e\u73b0\u3002</p> <p>\u901a\u8fc7\u5355\u6001\u5316\u751f\u6210\u7684\u4ee3\u7801\u4f1a\u6267\u884c\u9759\u6001\u6d3e\u53d1\uff08static dispatch\uff09\uff0c\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u786e\u5b9a\u8c03\u7528\u7684\u5177\u4f53\u65b9\u6cd5\u3002</p> <p>\u6240\u8c13\u7684\u52a8\u6001\u6d3e\u53d1\uff08dynamic dispatch\uff09\uff0c\u5b83\u65e0\u6cd5\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u786e\u5b9a\u4f60\u8c03\u7528\u7684\u7a76\u7adf\u662f\u54ea\u4e2a\u65b9\u6cd5\uff0c\u7f16\u8bd1\u65f6\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u4ee3\u7801\u4ee5\u4fbf\u5728\u8fd0\u884c\u65f6\u627e\u51fa\u5e0c\u671b\u8c03\u7528\u7684\u65b9\u6cd5\u3002\u5982\u679c\u4f7f\u7528trait\u5bf9\u8c61\uff0c\u5c31\u4f1a\u6267\u884c\u52a8\u6001\u6d3e\u53d1\uff0c\u90a3\u4e48\u5c06\u4f1a\u5bfc\u81f4\u4ea7\u751f\u8fd0\u884c\u65f6\u5f00\u9500\uff0c\u5e76\u4e14\u963b\u6b62\u7f16\u8bd1\u5668\u5185\u8054\u65b9\u6cd5\u4ee3\u7801\uff0c\u4f7f\u5f97\u90e8\u5206\u4f18\u5316\u65e0\u6cd5\u8fdb\u884c\u3002</p>"},{"location":"17_oop/02_trait_objects/#trait_3","title":"\u4e09\u3001Trait\u5bf9\u8c61\u5fc5\u987b\u4fdd\u8bc1\u5bf9\u8c61\u5b89\u5168","text":"<p>\u53ea\u80fd\u628a\u6ee1\u8db3\u5bf9\u8c61\u5b89\u5168\uff08object-safe\uff09\u7684trait\u8f6c\u5316\u4e3atrait\u5bf9\u8c61\u3002rust\u91c7\u7528\u4e86\u4e00\u7cfb\u5217\u89c4\u5219\u6765\u5224\u5b9a\u67d0\u4e2a\u5bf9\u8c61\u662f\u5426\u5b89\u5168\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8bb0\u4f4f\u4e24\u6761\u89c4\u5219</p> <ul> <li>\u65b9\u6cd5\u7684\u8fd4\u56de\u7c7b\u578b\u4e0d\u662fSelf</li> <li>\u65b9\u6cd5\u4e2d\u4e0d\u5305\u542b\u4efb\u4f55\u6cdb\u578b\u7c7b\u578b\u53c2\u6570</li> </ul> <p>\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u5728\u6807\u51c6\u5e93\u4e2d\uff0cClone trait\u5c31\u662f\u4e0d\u7b26\u5408\u5bf9\u8c61\u5b89\u5168\u7684\u4f8b\u5b50\uff0cClone trait\u7684<code>clone</code>\u65b9\u6cd5\u5982\u4e0b</p> <pre><code>pub trait Clone {\nfn clone(&amp;self) -&gt; Self;\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u5728\u201c\u4e8c\u201d\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u4f7f\u7528<code>Clone</code> trait\u4f5c\u4e3a <code>Screen</code> \u7ed3\u6784\u4f53 conponents \u7684\u5bf9\u8c61\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>pub struct Screen {\npub commponents: Vec&lt;Box&lt;dyn Clone&gt;&gt;\n}\n</code></pre> <p>\u7a0b\u5e8f\u5c06\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3aClone trait\u7684<code>clone</code>\u65b9\u6cd5\u8fd4\u56de<code>Self</code>\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u4e0d\u662f\u5bf9\u8c61\u5b89\u5168\u7684\u3002</p>"},{"location":"17_oop/03_oop_design_patterns/","title":"\u5b9e\u73b0\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u6a21\u5f0f","text":""},{"location":"17_oop/03_oop_design_patterns/#_2","title":"\u4e00\u3001\u72b6\u6001\u6a21\u5f0f","text":"<p>\u72b6\u6001\u6a21\u5f0f\uff08state pattern\uff09\u662f\u4e00\u79cd\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u4e00\u4e2a\u503c\u62e5\u6709\u7684\u5185\u90e8\u72b6\u6001\u7531\u6570\u4e2a\u72b6\u6001\u5bf9\u8c61\uff08state object\uff09\u8868\u8fbe\u800c\u6210\uff0c\u800c\u503c\u7684\u884c\u4e3a\u5219\u968f\u7740\u5185\u90e8\u72b6\u6001\u7684\u6539\u53d8\u800c\u6539\u53d8\u3002</p> <p>\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u610f\u5473\u7740\uff1a\u4e1a\u52a1\u9700\u6c42\u4e0d\u65ad\u53d8\u5316\u65f6\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u6301\u6709\u72b6\u6001\u7684\u503c\u7684\u4ee3\u7801\uff0c\u6216\u8005\u4f7f\u7528\u8fd9\u4e2a\u503c\u7684\u4ee3\u7801\u3002\u53ea\u9700\u8981\u66f4\u65b0\u72b6\u6001\u5bf9\u8c61\u5185\u90e8\u7684\u4ee3\u7801\uff0c\u4ee5\u6539\u53d8\u5176\u89c4\u5219\u3002\u6216\u8005\u589e\u52a0\u4e00\u4e9b\u65b0\u7684\u72b6\u6001\u5bf9\u8c61\u3002</p>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/","title":"\u7528\u5230\u6a21\u5f0f\u5339\u914d\u7684\u5730\u65b9","text":""},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u6a21\u5f0f\u5339\u914d\u662frust\u7684\u4e00\u79cd\u7279\u6b8a\u8bed\u6cd5\uff0c\u7528\u4e8e\u5339\u914d\u590d\u6742\u548c\u7b80\u5355\u7c7b\u578b\u7684\u7ed3\u6784\uff0c\u5c06\u6a21\u5f0f\u4e0e\u5339\u914d\u8868\u8fbe\u5f0f\u548c\u5176\u4ed6\u7ed3\u6784\u7ed3\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236\u7a0b\u5e8f\u7684\u63a7\u5236\u6d41\u3002\u6a21\u5f0f\u7531\u4ee5\u4e0b\u5143\u7d20\uff08\u7684\u4e00\u4e9b\u7ec4\u5408\uff09\u7ec4\u6210</p> <ul> <li>\u5b57\u9762\u503c</li> <li>\u89e3\u6790\u7684\u6570\u7ec4\u3001enum\u3001struct\u548ctuple</li> <li>\u53d8\u91cf</li> <li>\u901a\u914d\u7b26</li> <li>\u5360\u4f4d\u7b26</li> </ul> <p>\u60f3\u8981\u4f7f\u7528\u6a21\u5f0f\uff0c\u9700\u8981\u5c06\u5176\u4e0e\u67d0\u4e2a\u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u6a21\u5f0f\u5339\u914d\uff0c\u5c31\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u503c\u7684\u76f8\u5e94\u90e8\u5206\u3002\u4e0b\u6587\u5c06\u4ecb\u7ecdrust\u4e2d\u4f7f\u7528\u5230\u6a21\u5f0f\u5339\u914d\u7684\u5730\u65b9\u3002</p>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#matcharm","title":"\u4e8c\u3001match\u7684Arm\uff08\u5206\u652f\uff09","text":"<pre><code>match VALUE {\nPATTERN =&gt; EXPRESSION,\nPATTERN =&gt; EXPRESSION,\nPATTERN =&gt; EXPRESSION,\n}\n</code></pre> <p>match\u8868\u8fbe\u5f0f\u7684\u8981\u6c42\u662f\u8be6\u5c3d\uff0c\u5373\u5305\u542b\u6240\u6709\u7684\u53ef\u80fd\u6027\u3002\u4e00\u4e2a\u7279\u6b8a\u7684\u6a21\u5f0f\u662f<code>_</code>\uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u5b83\u4f1a\u5339\u914d\u5230\u4efb\u4f55\u4e1c\u897f\uff0c\u4e0d\u4f1a\u7ed1\u5b9a\u5230\u53d8\u91cf\uff0c\u6240\u4ee5\u901a\u5e38\u7528\u6237match\u7684\u6700\u540e\u4e00\u4e2a\u5206\u652f\uff0c\u6216\u8005\u7528\u4e8e\u5ffd\u7565\u67d0\u4e9b\u503c\u3002</p>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#if-let","title":"\u4e09\u3001\u6761\u4ef6if let\u8868\u8fbe\u5f0f","text":"<p><code>if let</code>\u4e3b\u8981\u662f\u4f5c\u4e3a\u4e00\u79cd\u7b80\u77ed\u7684\u65b9\u5f0f\u6765\u7b49\u4ef7\u7684\u4ee3\u66ff\u53ea\u6709\u4e00\u4e2a\u5339\u914d\u9879\u7684match\u3002<code>if let</code>\u53ef\u9009\u53ef\u4ee5\u62e5\u6709<code>else</code>\uff0c\u5305\u62ec<code>else if</code>\u548c<code>else if let</code>\uff0c\u4f46\u662f<code>if let</code>\u4e0d\u4f1a\u68c0\u67e5\u7a77\u5c3d\u6027\u3002</p>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#while-let","title":"\u56db\u3001while let\u6761\u4ef6\u5faa\u73af","text":"<p>\u53ea\u8981\u6a21\u5f0f\u5339\u914d\u7ee7\u7eed\u6ee1\u8db3\u5339\u914d\u7684\u6761\u4ef6\uff0c\u90a3\u5b83\u5141\u8bb8while\u5faa\u73af\u4e00\u76f4\u8fd0\u884c\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\nlet mut stack = Vec::new();\nstatck.push(1);\nstatck.push(2);\nstatck.push(3);\nwhile let Some(top) = stack.pop() {\nprintln(\"{}\", top);\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#for","title":"\u4e94\u3001for\u5faa\u73af","text":"<p>for\u5faa\u73af\u662frust\u4e2d\u6700\u5e38\u89c1\u7684\u5faa\u73af\uff0cfor\u5faa\u73af\u4e2d\uff0c\u6a21\u5f0f\u5c31\u662f\u7d27\u968ffor\u5173\u952e\u5b57\u540e\u7684\u503c\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet v = vec!['a', 'b', 'c'];\nfor (index, value) in v.iter().enumerate() {\nprintln(\"{} is at index {}\", value, index);\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#let","title":"\u516d\u3001let\u8bed\u53e5","text":"<p>let\u8bed\u53e5\u4e5f\u662f\u6a21\u5f0f\uff0c\u5b98\u65b9\u5199\u6cd5\u4e3a<code>let PATTERN = EXPRESSION;</code>\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet a = 5;\nlet (x, y, z) = (1, 2, 3);\n}\n</code></pre>"},{"location":"18_pattern_matching/01_how_to_use_pattern_matching/#_3","title":"\u4e03\u3001\u51fd\u6570\u53c2\u6570","text":"<p>\u51fd\u6570\u53c2\u6570\u4e5f\u662f\u6a21\u5f0f\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn foo(x: i32) {\n// code goes here\n}\nfn print_coordinates(&amp;(x, y): &amp;(i32, i32)) {\nprintln(\"Current location: ({}, {})\", x, y);\n}\nfn main() {\nlet point = (3, 5);\nprint_coordinates(&amp;point);\n}\n</code></pre>"},{"location":"18_pattern_matching/02_pattern_matching_failure/","title":"\u6a21\u5f0f\u5339\u914d\u53ef\u5931\u8d25\u6027","text":"<p>\u6a21\u5f0f\u7684\u4e24\u79cd\u5f62\u5f0f\u5305\u62ec\uff1a\u53ef\u8fa9\u9a73\u7684\uff08\u53ef\u53cd\u9a73\u7684\u6216\u53ef\u5931\u8d25\u7684\uff09\u3001\u65e0\u53ef\u8fa9\u9a73\u7684\uff08\u4e0d\u53ef\u53cd\u9a73\u7684\u6216\u4e0d\u53ef\u5931\u8d25\u7684\uff09\u3002</p> <p>\u80fd\u591f\u5339\u914d\u4efb\u4f55\u53ef\u80fd\u4f20\u9012\u7684\u503c\u7684\u6a21\u5f0f\u662f\u65e0\u53ef\u8fa9\u9a73\u7684\uff0c\u5373\u4e0d\u80fd\u5931\u8d25\uff0c\u600e\u4e48\u5339\u914d\u90fd\u4f1a\u6210\u529f\u3002\u4f8b\u5982<code>let x = 5</code>\u4e0d\u53ef\u80fd\u5931\u8d25\uff0c\u5b83\u80fd\u5339\u914d\u6240\u6709\u8868\u8fbe\u5f0f\u53f3\u4fa7\u7684\u503c\u3002</p> <p>\u5bf9\u4e8e\u67d0\u4e9b\u53ef\u80fd\u7684\u503c\uff0c\u65e0\u6cd5\u8fdb\u884c\u5339\u914d\u7684\u6a21\u5f0f\uff0c\u5c31\u662f\u53ef\u8fa9\u9a73\u7684\u3002\u4f8b\u5982<code>if let Some(x) = a_value</code>\uff0c\u5982\u679c\u53f3\u8fb9\u7684\u503c\u662fnull\uff0c\u8fd9\u65f6\u5019\u5c31\u4f1a\u53d1\u751f\u4e0d\u5339\u914d\u7684\u60c5\u51b5\uff0c\u8fd9\u5c31\u662f\u53ef\u8fa9\u9a73\u7684\uff0c\u6216\u8005\u53ef\u5931\u8d25\u7684\u3002</p> <p>\u5176\u4e2d\uff0c\u51fd\u6570\u53c2\u6570\u3001let\u8bed\u53e5\u3001for\u5faa\u73af\u53ea\u63a5\u53d7\u65e0\u53ef\u8fa9\u9a73\u7684\u6a21\u5f0f\u3002<code>if let</code>\u548c<code>while let</code>\u63a5\u53d7\u53ef\u8fa9\u9a73\u548c\u65e0\u53ef\u8fa9\u9a73\u7684\u6a21\u5f0f\u3002\u5728\u63a5\u53d7\u65e0\u53ef\u8fa9\u9a73\u6a21\u5f0f\u7684\u65f6\u5019\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u53d1\u751f\u8b66\u544a\uff0c\u56e0\u4e3a\u5b58\u5728\u53ef\u80fd\u7684\u5931\u8d25\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet a: Option&lt;i32&gt; = Some(5);\n// Some\u662f\u4e2a\u53ef\u8fa9\u9a73\u7684\nlet Some(x) = a;\n}\n</code></pre> <p>a\u662fOption\u7c7b\u578b\uff0c\u800cSome\u662f\u4e00\u4e2a\u53ef\u8fa9\u9a73\u7684\uff0c\u4ee5\u4e0a\u4ee3\u7801\u5c06\u4f1a\u7f16\u8bd1\u9519\u8bef\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet a: Option&lt;i32&gt; = Some(5);\nif let Some(x) = a {\n}\n}\n</code></pre> <p>\u4f46\u662f\u5982\u679c\u6211\u4eec\u6539\u4e3a\u4e0d\u53ef\u8fa9\u9a73\u7684\u6a21\u5f0f\uff0c\u5982\u4e0b</p> <pre><code>fn main() {\nlet a: Option&lt;i32&gt; = Some(5);\nif let x = 5 {}\n}\n</code></pre> <p>\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f46\u662f<code>x = 5</code>\u603b\u662f\u5339\u914d\u6210\u529f\u7684\uff0c\u6240\u4ee5\u4f7f\u7528\u4e00\u4e2a\u53ef\u8fa9\u9a73\u7684\u6a21\u5f0f\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\u3002\u7ed3\u5408\u4e0a\u9762\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230<code>match</code>\u8868\u8fbe\u9664\u4e86\u6700\u540e\u4e00\u4e2a\u5206\u652f\u7684\u6240\u6709\u5206\u652f\u5fc5\u987b\u662f\u53ef\u8fa9\u9a73\u7684\uff08\u5373\u53ef\u5931\u8d25\u7684\uff09\uff0c\u800c\u6700\u540e\u4e00\u4e2a\u5206\u652f\u56e0\u4e3a\u662f\u4e0d\u53ef\u8fa9\u9a73\u7684\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5339\u914d\u6240\u6709\u5269\u4f59\u7684\u60c5\u51b5\u3002</p>"},{"location":"18_pattern_matching/03_match_grammer/","title":"\u6a21\u5f0f\u5339\u914d\u7684\u8bed\u6cd5","text":""},{"location":"18_pattern_matching/03_match_grammer/#_2","title":"\u4e00\u3001\u5339\u914d\u5b57\u9762\u503c","text":"<p>\u6a21\u5f0f\u53ef\u4ee5\u76f4\u63a5\u5339\u914d\u5b57\u9762\u503c\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet x = 1;\nmatch x {\n1 =&gt; println(\"one\"),\n2 =&gt; println(\"two\"),\n3 =&gt; println(\"three\"),\n_ =&gt; println(\"anything\"),\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_3","title":"\u4e8c\u3001\u5339\u914d\u547d\u540d\u53d8\u91cf","text":"<p>\u547d\u540d\u7684\u53d8\u91cf\u662f\u53ef\u5339\u914d\u4efb\u4f55\u503c\u7684\u65e0\u53ef\u8fa9\u9a73\u6a21\u5f0f\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = Some(5);\nlet y = 10;\nmatch x {\nSome(50) =&gt; println(\"Got 50\"),\nSome(y) =&gt; println(\"Matched, y = {:?}\", y),\n_ =&gt; println(\"Default case, x = {:?}\", x),\n}\nprintln(\"at the end: x = {:?}, y = {:?}\", x, y);\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_4","title":"\u4e09\u3001\u591a\u91cd\u6a21\u5f0f","text":"<p>\u5728match\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4f7f\u7528<code>|</code>\u8bed\u6cd5\uff08\u5c31\u662f\u6216\u7684\u610f\u601d\uff09\uff0c\u53ef\u4ee5\u5339\u914d\u591a\u79cd\u6a21\u5f0f\uff0c\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet x = 1;\nmatch x {\n1 | 2 =&gt; println(\"one or two\"),\n3 =&gt; println(\"three\"),\n_ =&gt; println(\"anything\"),\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_5","title":"\u56db\u3001\u4f7f\u7528..=\u6765\u5339\u914d\u67d0\u4e2a\u8303\u56f4\u7684\u503c","text":"<p>\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\nlet x = 5;\nmatch x {\n1..=5 =&gt; println(\"one through five\"),\n_ =&gt; println(\"something else\"),\n}\nlet x = 'c';\nmatch x {\n'a'..='j' =&gt; println(\"early ASCII letter\"),\n'k'..='z' =&gt; println(\"late ASCII letter\"),\n_ =&gt; println(\"something else\"),\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_6","title":"\u4e94\u3001\u7ed3\u6784\u4ee5\u5206\u89e3\u503c","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u6765\u89e3\u6784struct\u3001enum\u3001tuple\uff0c\u4ece\u800c\u5f15\u7528\u8fd9\u4e9b\u7c7b\u578b\u503c\u7684\u4e0d\u540c\u90e8\u5206\u3002</p> <pre><code>struct Point {\nx: i32,\ny: i32,\n}\nfn main() {\nlet p = Point { x: 0, y: 7 };\nlet Point { x: a, y: b } = p;\nassert_eq!(0, a);\nassert_eq!(0, b);\n}\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u4ee5\u4e0a\u5728main\u7684\u4ee3\u7801\u53ef\u4ee5\u7b80\u5199\u6210\u5982\u4e0b</p> <pre><code>fn main() {\nlet p = Point { x: 0, y: 7 };\nlet Point { x, y } = p;\nassert_eq!(0, x);\nassert_eq!(0, y);\n}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u7075\u6d3b\u5730\u4f7f\u7528\u89e3\u6784\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>match p {\n// \u8981\u6c42y\u7684\u503c\u662f0\uff0cx\u968f\u610f\nPoint { x, y: 0 } =&gt; println(\"On the x axis at {}\", x),\n// \u8981\u6c42x\u7684\u503c\u662f0\uff0cy\u968f\u610f\nPoint { x: 0, y } =&gt; println(\"On the y axis at {}\", y),\n// \u5982\u679c\u524d\u4e24\u4e2a\u6a21\u5f0f\u90fd\u65e0\u6cd5\u5339\u914d\u7684\u8bdd\uff0c\u5c06\u5339\u914d\u6700\u540e\u4e00\u4e2a\nPoint { x, y } =&gt; println(\"On neither axis: ({}, {})\", x, y),\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_7","title":"\u516d\u3001\u89e3\u6784\u679a\u4e3e","text":"<pre><code>enum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(i32, i32, i32),\n}\nfn main() {\nlet msg = Message::ChangeColor(0, 160, 255);\nmatch msg {\nMessage::Quit =&gt; {\nprintln!(\"The Quit variant has no data to destructure.\")\n}\nMessage::Move { x, y } =&gt; {\nprintln!(\"Move in the x direction {} and in the y direction {}.\", x, y)\n}\nMessage::Write(text) =&gt; println!(\"Text message: {}\", text),\nMessage::ChangeColor(r, g, b) =&gt; {\nprintln!(\"change the color to red {}, green {}, and blue {}\", r, g, b)\n}\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#structenum","title":"\u4e03\u3001\u89e3\u6784\u5d4c\u5957\u7684struct\u548cenum","text":"<p>\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b</p> <pre><code>enum Color {\nRgb(i32, i32, i32),\nHsv(i32, i32, i32),\n}\nenum Message {\nQuit,\nMove { x: i32, y: i32 },\nWrite(String),\nChangeColor(Color),\n}\nfn main() {\nlet msg = Message::ChangeColor(Color::Hsv(0, 160, 255));\nmatch msg {\nMessage::ChangeColor(Color::Rgb(r, g, b)) =&gt; {\nprintln!(\"change the color to red {}, green {}, and blue {}\", r, g, b)\n}\nMessage::ChangeColor(Color::Hsv(h, s, v)) =&gt; {\nprintln!(\"change the color to hue {}, saturation {}, and value {}\", h, s, v)\n}\n_ =&gt; (),\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#structtuple","title":"\u516b\u3001\u89e3\u6784struct\u548ctuple","text":"<pre><code>struct Point {\nx: i32,\ny: i32,\n}\nfn main() {\nlet ((feet, inches), Point { x, y }) = ((3, 10), Point { x: 3, y: -10 });\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#_8","title":"\u4e5d\u3001\u5728\u6a21\u5f0f\u4e2d\u5ffd\u7565\u503c","text":"<p>\u6709\u51e0\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5728\u6a21\u5f0f\u4e2d\u5ffd\u7565\u6574\u4e2a\u503c\u6216\u90e8\u5206\u503c\uff0c\u5982\u4e0b</p> <ul> <li><code>_</code>\u5ffd\u7565\u6574\u4e2a\u503c</li> <li><code>_\u914d\u5408\u5176\u4ed6\u6a21\u5f0f</code>\u53ef\u4ee5\u5ffd\u7565\u90e8\u5206\u503c</li> <li><code>_\u5f00\u5934\u7684\u540d\u79f0</code></li> <li><code>..</code>\u5ffd\u7565\u503c\u7684\u5269\u4f59\u90e8\u5206</li> </ul>"},{"location":"18_pattern_matching/03_match_grammer/#91-_","title":"9.1 \u4f7f\u7528\u201c_\u201d\u6765\u5ffd\u7565\u6574\u4e2a\u503c","text":"<p>\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u4f46\u662f\u51fd\u6570\u4f53\u4e2d\u53ea\u7528\u5230\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn foo(_: i32, y: i32 ) {\nprinltln!(\"This code only uses the y parameter: {}\", y);\n}\nfn main() {\nfoo(3, 4);\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#92-_","title":"9.2 \u4f7f\u7528\u5d4c\u5957\u7684\u201c_\u201d\u6765\u5ffd\u7565\u503c\u7684\u4e00\u90e8\u5206","text":"<p>\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet mut setting_value = Some(5);\nlet new_setting_value = Some(10);\nmatch (setting_value, new_setting_value) {\n// \u5185\u914d\u7684\u503c\uff1a\u53ea\u8981\u4e24\u4e2a\u503c\u90fd\u662fSome\u5373\u53ef\n(Some(_), Some(_)) =&gt; {\nprintln!(\"Can't overwrite an existing customized value\");\n}\n_ =&gt; {\nsetting_value = new_setting_value }\n}\nprintln(\"setting is {:?}\", setting_value);\nlet numbers = (2, 4, 6, 16, 32);\nmatch numbers {\n// \u53ea\u9700\u8981\u5143\u7ec4\u7684\u67d0\u90e8\u5206\u503c\n(first, _, third, _, fifth) =&gt; {\nprintln!(\"Some numbers: {}, {}, {}\", first, third, fifth);\n}\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#93-_","title":"9.3 \u901a\u8fc7\u4f7f\u7528\u201c_\u201d\u5f00\u5934\u547d\u540d\u6765\u5ffd\u7565\u672a\u4f7f\u7528\u7684\u53d8\u91cf","text":"<p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2a\u53d8\u91cf\uff0c\u4f46\u662f\u6ca1\u6709\u4f7f\u7528\uff0crust\u7f16\u8bd1\u5668\u5c31\u4f1a\u53d1\u51fa\u8b66\u544a\u3002\u6709\u65f6\u5019\u6211\u4eec\u60f3\u8981\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf\uff0c\u4f46\u6709\u4e0d\u60f3\u8ba9\u7f16\u8bd1\u5668\u53d1\u51fa\u8b66\u544a\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u65b9\u5f0f\u3002\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>fn main() {\nlet _x = 5;\nley y = 10;\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u7f16\u8bd1\u4e4b\u540e\uff0c<code>x</code>\u4e0d\u4f1a\u53d1\u751f\u8b66\u544a\uff0c\u800c<code>y</code>\u4f1a\u53d1\u51fa\u8b66\u544a\u3002\u6211\u4eec\u518d\u6765\u770b\u4e00\u4e2a\u793a\u4f8b</p> <pre><code>fn mian() {\nlet s = Some(String::from(\"Hello!\"));\nif let Some(_s) = s {\nprintln!(\"found a string\");\n}\nprintln!(\"{:?}\", s);\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u7f16\u8bd1\u5c06\u4f1a\u53d1\u751f\u62a5\u9519\uff0c\u56e0\u4e3a\u5728\u55f2\u7528\u6700\u540e\u7684<code>println!</code>\u4e4b\u524d\uff0c<code>s</code>\u5df2\u7ecf\u5c06\u6240\u6709\u6743\u79fb\u52a8\u5230\u4e86<code>_s</code>\uff0c\u5982\u679c\u5c06\u4ee3\u7801\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\u5f97\u4ee5\u89e3\u51b3\u95ee\u9898</p> <pre><code>fn mian() {\nlet s = Some(String::from(\"Hello!\"));\nif let Some(_) = s {\nprintln!(\"found a string\");\n}\nprintln!(\"{:?}\", s);\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#94","title":"9.4 \u4f7f\u7528..\u6765\u5ffd\u7565\u503c\u7684\u5269\u4f59\u90e8\u5206","text":"<p>\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>struct Point {\nx: i32,\ny: i32,\nz: i32,\n}\nfn main() {\nlet origin = Point { x: 0, y: 0, z: 0 };\nmatch origin {\n// \u53ea\u9700\u8981\u7528\u5230struct\u7684x\u5b57\u6bb5\nPoint { x, .. } =&gt; println!(\"x is {}\", x),\n}\nlet numbers = (2, 4, 8, 16, 32);\nmatch numbers {\n// \u53ea\u9700\u8981\u7528\u5230\u5143\u7ec4\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6570\u548c\u6700\u540e\u4e00\u4e2a\u6570\n(first, .., last) =&gt; {\nprintln!(\"Some numbers: {}, {}\", first, last);\n}\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#95-match","title":"9.5 \u4f7f\u7528match\u5b88\u536b\u6765\u63d0\u4f9b\u989d\u5916\u7684\u6761\u4ef6","text":"<p>match\u5b88\u536b\u5c31\u662fmatch arm\u6a21\u5f0f\u540e\u989d\u5916\u7684if\u6761\u4ef6\uff0c\u60f3\u8981\u5339\u914d\u8be5\u6761\u4ef6\u4e5f\u5fc5\u987b\u6ee1\u8db3\uff0cmacth\u5b88\u536b\u9002\u7528\u4e8e\u95ed\u5355\u72ec\u7684\u6a21\u5f0f\u66f4\u590d\u6742\u7684\u573a\u666f\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\nlet num = Some(4);\nmatch num {\nSome(x) if x &lt; 5 =&gt; println!(\"less than five: {}\", x);\nSome(x) =&gt; println(\"{}\", x),\nNone =&gt; (),\n}\n}\n</code></pre> <p>\u518d\u6709\u53e6\u5916\u4e00\u4e2a\u793a\u4f8b\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\nlet x = Some(5);\nlet y = 10;\nmatch y {\nSome(50) =&gt; println!(\"Got 50\");\nSome(n) if n == y =&gt; println(\"Matchd, n = {}\", n),\n_ =&gt; println!(\"Default case, x = {:?}\", x),\n}\nprintln!(\"at the end: x = {:?}, y = {:?}\", x, y);\n}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u591a\u91cd\u6a21\u5f0f\u4e2d\u4f7f\u7528match\u5b88\u536b\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn main() {\nlet x = 4;\nlet y = false;\nmatch x {\n4 | 5 | 6 if y =&gt; println(\"yes\"),\n_ =&gt; println!(\"no\"),\n}\n}\n</code></pre>"},{"location":"18_pattern_matching/03_match_grammer/#96","title":"9.6 @\u7ed1\u5b9a","text":"<p><code>@</code>\u7b26\u53f7\u8ba9\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u53d8\u91cf\uff0c\u8be5\u53d8\u91cf\u53ef\u4ee5\u5728\u6d4b\u8bd5\u67d0\u4e2a\u503c\u662f\u5426\u4e0e\u6a21\u5f0f\u5339\u914d\u7684\u540c\u65f6\u4fdd\u5b58\u8be5\u503c\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>enum Message {\nHello { id: i32 },\n}\nfn main() {\nlet msg {\nMessage::Hello {\nid: id_variable @ 3..=7,\n} =&gt; {\nprintln!(\"Found an id in range: {}\", id_variable);\n}\nMessage::Hello {\nid: 10..=12,\n} =&gt; {\nprintln!(\"Found an id in another range\");\n}\nMessage::Hello { id } =&gt; {\nprintln!(\"Found an other id: {}\", id);\n}\n}\n}\n</code></pre> <p>\u6700\u540e\u8f93\u51fa\u7ed3\u679c\u4e3a<code>5</code>\uff0c\u5373\u53d8\u91cf<code>id_variable</code>\u5b58\u50a8\u4e86\u5339\u914d\u7684\u503c\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/","title":"\u4e0d\u5b89\u5168Rust","text":""},{"location":"19_advanced_features/01_unsafe_rust/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>rust\u9690\u85cf\u7740\u7b2c\u4e8c\u4e2a\u8bed\u8a00\uff0c\u5b83\u6ca1\u6709\u5f3a\u5236\u5185\u5b58\u5b89\u5168\u4fdd\u8bc1\uff0c\u8fd9\u5c31\u662f unsafe rust\uff08\u4e0d\u5b89\u5168\u7684rust\uff09\u3002\u5b9e\u9645\u4e0a\u548c\u666e\u901a\u7684rust\u4e00\u6837\uff0c\u4f46\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u201c\u8d85\u80fd\u529b\u201d\u3002Unsafe Rust\u5b58\u5728\u7684\u539f\u56e0\u5982\u4e0b</p> <p>\u7b2c\u4e00\u4e2a\u539f\u56e0\u662f\uff0c\u9759\u6001\u5206\u6790\u662f\u4fdd\u5b88\u7684\uff0c\u7f16\u8bd1\u5668\u5728\u5224\u65ad\u4e00\u6bb5\u662f\u5426\u62e5\u6709\u5b89\u5168\u4fdd\u8bc1\u65f6\uff0c\u5b83\u5b81\u53ef\u9519\u6740\u4e00\u4e9b\u5408\u6cd5\u7684\u7a0b\u5e8f\uff0c\u4e5f\u4e0d\u4f1a\u63a5\u53d7\u4ec5\u4ec5\u662f\u53ef\u80fd\u5b58\u5728\u975e\u6cd5\u7684\u4ee3\u7801\uff0c\u91d1\u5c3d\u7ba1\u8fd9\u4e9b\u4ee3\u7801\u662f\u5b89\u5168\u7684\u3002\u800c\u4f7f\u7528 Unsafe Rust\uff0c\u6211\u4eec\u5c31\u662f\u544a\u8bc9\u7f16\u8bd1\u5668\uff0c\u6211\u77e5\u9053\u81ea\u5df1\u5728\u505a\u4ec0\u4e48\uff0c\u6211\u613f\u610f\u81ea\u5df1\u627f\u62c5\u8fd9\u4e2a\u98ce\u9669\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u539f\u56e0\u662f\uff0c\u8ba1\u7b97\u673a\u786c\u4ef6\u672c\u8eab\u5c31\u662f\u4e0d\u5b89\u5168\u7684\uff0cRust \u9700\u8981\u80fd\u591f\u8fdb\u884c\u5e95\u5c42\u7cfb\u7edf\u7f16\u7a0b\uff0c\u5982\u679c\u4e0d\u5141\u8bb8 Unsafe Rust\uff0c\u90a3\u4e48\u8fd9\u4e9b\u5de5\u4f5c\u5c31\u65e0\u6cd5\u5b8c\u6210\u4e86\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/#unsafe","title":"\u4e8c\u3001Unsafe\u8d85\u80fd\u529b","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>unsafe</code>\u5173\u952e\u5b57\u6765\u5207\u6362\u4ee3\u7801\u5230 Unsafe Rust\uff0c\u5f00\u542f\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u91cc\u9762\u5b58\u653e\u7740 unsafe \u4ee3\u7801\u3002Unsafe Rust \u91cc\u53ef\u4ee5\u6267\u884c\u56db\u7c7b\u52a8\u4f5c\uff08unsafe \u8d85\u80fd\u529b\uff09\uff0c\u5982\u4e0b</p> <ul> <li>\u89e3\u5f15\u7528\u539f\u59cb\u6307\u9488</li> <li>\u8c03\u7528unsafe\u51fd\u6570\u6216\u65b9\u6cd5</li> <li>\u8bbf\u95ee\u6216\u4fee\u6539\u53ef\u53d8\u7684\u9759\u6001\u53d8\u91cf</li> <li>\u5b9e\u73b0unsafe trait</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cunsafe \u5e76\u6ca1\u6709\u5173\u95ed\u501f\u7528\u68c0\u67e5\u6216\u505c\u7528\u5176\u4ed6\u5b89\u5168\u68c0\u67e5\u3002\u4efb\u4f55\u5185\u5b58\u5b89\u5168\u76f8\u5173\u7684\u9519\u8bef\uff0c\u6211\u4eec\u5fc5\u987b\u7559\u5728unsafe\u5757\u91cc\u3002\u540c\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u53ef\u80fd\u9694\u79bb unsafe \u4ee3\u7801\uff0c\u6700\u597d\u5c06\u5176\u5c01\u88c5\u5728\u5b89\u5168\u7684\u62bd\u8c61\u91cc\uff0c\u63d0\u4f9b\u5b89\u5168\u7684API\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/#21","title":"2.1 \u89e3\u5f15\u7528\u539f\u59cb\u6307\u9488","text":"<p>\u5728\u4e0d\u5b89\u5168\u7684rust\u91cc\uff0c\u6709\u4e24\u79cd\u7c7b\u4f3c\u4e8e\u5f15\u7528\u7684\u65b0\u578b\u6307\u9488\uff0c\u5b83\u4eec\u5c31\u53eb\u505a\u539f\u59cb\u6307\u9488\u6216\u8005\u88f8\u6307\u9488\u3002\u539f\u59cb\u6307\u9488\u7684\u5199\u6cd5\u5982\u4e0b</p> <ul> <li>\u53ef\u53d8\u7684\uff1a<code>*mut T</code></li> <li>\u4e0d\u53ef\u53d8\u7684\uff1a<code>*const T</code>\u3002\u610f\u5473\u7740\u6307\u9488\u5728\u89e3\u5f15\u7528\u540e\u4e0d\u80fd\u76f4\u63a5\u5bf9\u5176\u8fdb\u884c\u8d4b\u503c\u3002</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u7684<code>*</code>\u4e0d\u662f\u89e3\u5f15\u7528\u7b26\u53f7\uff0c\u5b83\u662f\u7c7b\u578b\u540d\u7684\u4e00\u90e8\u5206\u3002\u4e0e\u5f15\u7528\u4e0d\u540c\uff0c\u539f\u59cb\u6307\u9488\u5141\u8bb8\u901a\u8fc7\u540c\u65f6\u5177\u6709\u4e0d\u53ef\u53d8\u548c\u53ef\u53d8\u6307\u9488\u6216\u591a\u4e2a\u6307\u5411\u540c\u4e00\u4f4d\u7f6e\u7684\u53ef\u53d8\u6307\u9488\u6765\u5ffd\u7565\u501f\u7528\u89c4\u5219\u3002\u539f\u59cb\u6307\u9488\u65e0\u6cd5\u4fdd\u8bc1\u6307\u5411\u5408\u7406\u7684\u5185\u5b58\uff0c\u539f\u59cb\u6307\u9488\u5141\u8bb8\u4e3a<code>null</code>\uff0c\u539f\u59cb\u6307\u9488\u4e5f\u4e0d\u5b9e\u73b0\u4efb\u4f55\u7684\u81ea\u52a8\u6e05\u7406\u3002</p> <p>\u5728\u653e\u5f03\u4fdd\u8bc1\u7684\u5b89\u5168\uff0crust\u6362\u53d6\u4e86\u66f4\u597d\u7684\u6027\u80fd\uff0c\u4ee5\u53ca\u4e0e\u5176\u4ed6\u8bed\u8a00\u6216\u786c\u4ef6\u63a5\u53e3\u7684\u80fd\u529b\u3002\u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u521b\u5efa\u539f\u59cb\u6307\u9488\u7684\u4f8b\u5b50</p> <pre><code>fn main() {\nlet mut num = 5;\n// \u4ee5\u4e0b\u4e24\u4e2a\u6307\u9488\u6765\u81ea\u6709\u6548\u7684\u5f15\u7528\uff0c\u6240\u4ee5\u4ee5\u4e0b\u4e24\u4e2a\u6307\u9488\u4e5f\u662f\u6709\u6548\u7684\n// \u4e0d\u53ef\u53d8\u7684\u539f\u59cb\u6307\u9488\nlet r1 = &amp;num as *const i32;\n// \u53ef\u53d8\u7684\u539f\u59cb\u6307\u9488\nlet r2 = &amp;mut num as *const i32;\n// \u521b\u5efa\u4e00\u4e2a\u65e0\u6cd5\u786e\u5b9a\u5176\u6709\u6548\u6027\u7684\u6307\u9488\nlet address = 0x012345usize;// \u5185\u5b58\u5730\u5740\u4e2d\u53ef\u80fd\u6709\u6570\u636e\uff0c\u53ef\u80fd\u6ca1\u6709\u6570\u636e\nlet r = address as *const i32;// \u521b\u5efa\u672a\u786e\u5b9a\u6709\u6548\u6027\u7684\u5185\u5b58\u7684\u539f\u59cb\u6307\u9488\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u5b89\u5168\u4ee3\u7801\u4e4b\u5916\u521b\u5efa\u539f\u59cb\u6307\u9488\uff0c\u4f46\u662f\u53ea\u80fd\u5728\u4e0d\u5b89\u5168\u4ee3\u7801\u4e2d\u5bf9\u5176\u8fdb\u884c\u89e3\u5f15\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nlet mut num = 5;\n// \u4ee5\u4e0b\u4e24\u4e2a\u6307\u9488\u6765\u81ea\u6709\u6548\u7684\u5f15\u7528\uff0c\u6240\u4ee5\u4ee5\u4e0b\u4e24\u4e2a\u6307\u9488\u4e5f\u662f\u6709\u6548\u7684\n// \u4e0d\u53ef\u53d8\u7684\u539f\u59cb\u6307\u9488\nlet r1 = &amp;num as *const i32;\n// \u53ef\u53d8\u7684\u539f\u59cb\u6307\u9488\nlet r2 = &amp;mut num as *const i32;\nunsafe {\nprintln!(\"r1: {}\", *r1);\nprintln!(\"r2: {}\", *r2);\n}\n// \u521b\u5efa\u4e00\u4e2a\u65e0\u6cd5\u786e\u5b9a\u5176\u6709\u6548\u6027\u7684\u6307\u9488\nlet address = 0x012345usize;// \u5185\u5b58\u5730\u5740\u4e2d\u53ef\u80fd\u6709\u6570\u636e\uff0c\u53ef\u80fd\u6ca1\u6709\u6570\u636e\nlet r = address as *const i32;// \u521b\u5efa\u672a\u786e\u5b9a\u6709\u6548\u6027\u7684\u5185\u5b58\u7684\u539f\u59cb\u6307\u9488\nunsafe {\nprintln!(\"r: {}\", *r);\n}\n}\n</code></pre> <p>\u5728\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u7a0b\u5e8f\u8fd0\u884c\u5230\u7b2c\u4e8c\u4e2aunsafe\u4ee3\u7801\u5757\u65f6\uff0c\u53d1\u751f\u4e86\u9519\u8bef\u3002\u56e0\u4e3a\u6211\u4eec\u6307\u5b9a\u7684\u5730\u5740\u662f\u6709\u53ef\u80fd\u4e0d\u5b58\u5728\u7684\uff0c\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u4e5f\u6709\u7531\u6211\u4eec\u81ea\u5df1\u6765\u8d1f\u8d23\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u539f\u59cb\u6307\u9488\uff1f\u76ee\u7684\u662f\u4e0eC\u8bed\u8a00\u8fdb\u884c\u63a5\u53e3\u4ea4\u4e92\uff0c\u53e6\u5916\u53ef\u4ee5\u6784\u5efa\u501f\u7528\u68c0\u67e5\u5668\u65e0\u6cd5\u7406\u89e3\u7684\u5b89\u5168\u62bd\u8c61\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/#22-unsafe","title":"2.2 \u8c03\u7528unsafe\u51fd\u6570\u6216\u65b9\u6cd5","text":"<p>unsafe\u51fd\u6570\u6216\u65b9\u6cd5\u6307\u7684\u662f\u5728\u51fd\u6570\u6216\u65b9\u6cd5\u524d\u52a0\u4e0a\u4e86<code>unsafe</code>\u5173\u952e\u5b57\uff0c\u9664\u6b64\u4e4b\u5916\u548c\u5176\u4ed6\u51fd\u6570\u6216\u8005\u65b9\u6cd5\u6ca1\u4ec0\u4e48\u533a\u522b\u3002\u4f46\u662f\u5728\u8c03\u7528\u8fd9\u79cd\u51fd\u6570\u6216\u8005\u65b9\u6cd5\u4e4b\u524d\uff0c\u9700\u8981\u624b\u52a8\u6ee1\u8db3\u4e00\u4e9b\u6761\u4ef6\uff0c\u56e0\u4e3arust\u65e0\u6cd5\u5bf9\u8fd9\u4e9b\u6761\u4ef6\u8fdb\u884c\u9a8c\u8bc1\u3002\u53e6\u5916\uff0c\u60f3\u8981\u8c03\u7528<code>unsafe</code>\u7684\u51fd\u6570\u6216\u8005\u65b9\u6cd5\uff0c\u5fc5\u987b\u5728<code>unsafe</code>\u4ee3\u7801\u5757\u91cc\u8fdb\u884c\u8c03\u7528\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>unsafe fn dangerous() {}\nfn main() {\nunsafe {\ndangerous();\n}\n}\n</code></pre>"},{"location":"19_advanced_features/01_unsafe_rust/#23-unsafe","title":"2.3 \u521b\u5efaunsafe\u4ee3\u7801\u7684\u5b89\u5168\u62bd\u8c61","text":"<p>\u51fd\u6570\u5305\u542bunsafe\u4ee3\u7801\u5e76\u4e0d\u9700\u8981\u5c06\u6574\u4e2a\u51fd\u6570\u6807\u8bb0\u4e3aunsafe\uff0c\u5c06unsafe\u4ee3\u7801\u5305\u88f9\u5728\u5b89\u5168\u51fd\u6570\u4e2d\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u62bd\u8c61\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::{slice, vec};\n// \u4e0d\u5b89\u5168\u4ee3\u7801\u7684\u5b89\u5168\u62bd\u8c61\nfn split_at_mut(slice: &amp;mut [i32], mid: usize) -&gt; (&amp;mut [i32], &amp;mut [i32]) {\nlet len = slice.len();\nlet ptr = slice.as_mut_ptr();\nassert!(mid &lt;= len);\nunsafe {\n(\nslice::from_raw_parts_mut(ptr, mid),\nslice::from_raw_parts_mut(ptr.add(mid), len - mid),\n)\n}\n}\nfn main() {\nlet mut v = vec![1, 2, 3, 4, 5, 6];\nlet r = &amp;mut v[..];\nlet (a, b) = r.split_at_mut(3);\nassert_eq!(a, &amp;mut [1, 2, 3]);\nassert_eq!(b, &amp;mut [4, 5, 6]);\n}\n</code></pre>"},{"location":"19_advanced_features/01_unsafe_rust/#24-extern","title":"2.4 \u4f7f\u7528extern\u51fd\u6570\u8c03\u7528\u5916\u90e8\u4ee3\u7801","text":"<p>extern\u5173\u952e\u5b57\uff1a\u7b80\u5316\u521b\u5efa\u548c\u4f7f\u7528\u5916\u90e8\u51fd\u6570\u63a5\u53e3\uff08FFI\uff09\u7684\u8fc7\u7a0b\u3002\u5916\u90e8\u51fd\u6570\u63a5\u53e3\uff08FFI\uff0cForeign Function Interface\uff09\uff0c\u5b83\u5141\u8bb8\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\u5b9a\u4e49\u51fd\u6570\uff0c\u5e76\u8ba9\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u80fd\u8c03\u7528\u8fd9\u4e9b\u51fd\u6570\u3002\u4efb\u4f55\u5728<code>extern</code>\u5757\u91cc\u58f0\u660e\u7684\u51fd\u6570\u90fd\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u5176\u4ed6\u8bed\u8a00\u5e76\u4e0d\u4f1a\u5f3a\u5236\u6267\u884crust\u9075\u5b88\u7684\u89c4\u5219\uff0c\u800crust\u53c8\u65e0\u6cd5\u5bf9\u5b83\u4eec\u8fdb\u884c\u68c0\u67e5\u3002\u6240\u4ee5\u5728\u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u4f55\u4fdd\u8bc1\u7a0b\u5e8f\u5b89\u5168\u7684\u8d23\u4efb\u4e5f\u843d\u5728\u4e86\u5f00\u53d1\u8005\u8eab\u4e0a\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// C \u6307\u660e\u4e86\u5916\u90e8\u51fd\u6570\u4f7f\u7528\u7684\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3\uff08Application Binary Intreface\uff09\uff0c\u5373ABI\n// ABI \u662f\u7528\u4e8e\u5b9a\u4e49\u51fd\u6570\u5728\u6c47\u7f16\u5c42\u9762\u7684\u8c03\u7528\u65b9\u5f0f\nextern \"C\" {\n// \u60f3\u8981\u8c03\u7528\u7684\u5916\u90e8\u51fd\u6570\u7684\u540d\u79f0\u548c\u7b7e\u540d\nfn abs(input: i32) -&gt; i32;\n}\nfn main() {\nunsafe {\nprintln!(\"Absolute value of -3 according to C: {}\", abs(-3));\n}\n}\n</code></pre> <p>\"C\" ABI\u662f\u6700\u5e38\u89c1\u7684ABI\uff0c\u5b83\u9075\u5faaC\u8bed\u8a00\u7684ABI\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/#25-rust","title":"2.5 \u4ece\u5176\u4ed6\u8bed\u8a00\u8c03\u7528rust\u51fd\u6570","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>extern</code>\u521b\u5efa\u63a5\u53e3\uff0c\u5176\u4ed6\u8bed\u8a00\u901a\u8fc7\u5b83\u4eec\u53ef\u4ee5\u8c03\u7528rust\u51fd\u6570\u3002\u5728<code>fn</code>\u524d\u6dfb\u52a0<code>extern</code>\u5173\u952e\u5b57\uff0c\u5e76\u5236\u5b9a\u5bf9\u5e94\u7684ABI\u3002\u8fd8\u9700\u8981\u6dfb\u52a0<code>#[no_mangle]</code>\u6ce8\u89e3\uff0c\u76ee\u7684\u662f\u907f\u514drust\u5728\u7f16\u8bd1\u65f6\u6539\u53d8\u5b83\u4eec\u7684\u540d\u79f0\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>#[no_mangle]\npub extern \"C\" fn call_from_c() {\nprintln!(\"Just called a Rust function from C\");\n}\nfn main() {}\n</code></pre> <p><code>call_from_c</code>\u51fd\u6570\u5728\u7f16\u8bd1\u548c\u94fe\u63a5\u4e4b\u540e\u5c31\u53ef\u4ee5\u88abC\u8bed\u8a00\u8bbf\u95ee\u3002</p>"},{"location":"19_advanced_features/01_unsafe_rust/#26","title":"2.6 \u8bbf\u95ee\u6216\u4fee\u6539\u4e00\u4e2a\u53ef\u53d8\u9759\u6001\u53d8\u91cf","text":"<p>rust\u652f\u6301\u5168\u5c40\u53d8\u91cf\uff0c\u4f46\u56e0\u4e3a\u6240\u6709\u6743\u673a\u5236\u53ef\u80fd\u4ea7\u751f\u67d0\u4e9b\u95ee\u9898\uff0c\u4f8b\u5982\u6570\u636e\u7ade\u4e89\u3002\u5728rust\u91cc\uff0c\u5168\u5c40\u53d8\u91cf\u53eb\u505a\u9759\u6001\uff08static\uff09\u53d8\u91cf\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>static HELLO_WORLD: &amp;str = \"Hello, world!\";\nfn main() {\nprintln!(\"name is: {}\", HELLO_WORLD);\n}\n</code></pre> <p>\u9759\u6001\u53d8\u91cf\u4e0e\u5e38\u91cf\u7c7b\u4f3c\uff0c\u547d\u540d\u89c4\u8303\u793a\u4f8b\u5982\uff1a<code>SCREAMING_SNAKE_CASE</code>\u3002\u58f0\u660e\u7684\u65f6\u5019\u5fc5\u987b\u6807\u6ce8\u7c7b\u578b\uff0c\u9759\u6001\u53d8\u91cf\u53ea\u80fd\u5b58\u50a8<code>'static</code>\u58f0\u660e\u5468\u671f\u7684\u5f15\u7528\uff0c\u65e0\u9700\u663e\u5f0f\u6807\u6ce8\u3002\u8bbf\u95ee\u4e0d\u53ef\u53d8\u7684\u9759\u6001\u53d8\u91cf\u662f\u5b89\u5168\u7684\u3002\u5e38\u91cf\u4e0e\u9759\u6001\u53d8\u91cf\u7684\u533a\u522b\u5982\u4e0b</p> <ul> <li>\u9759\u6001\u53d8\u91cf\uff1a\u6709\u56fa\u5b9a\u7684\u5185\u5b58\u5730\u5740\uff0c\u4f7f\u7528\u5b83\u7684\u503c\u603b\u4f1a\u8bbf\u95ee\u540c\u6837\u7684\u6570\u636e</li> <li>\u5e38\u91cf\uff1a\u5141\u8bb8\u4f7f\u7528\u5b83\u4eec\u7684\u65f6\u5019\u5bf9\u6570\u636e\u8fdb\u884c\u8d4b\u503c</li> </ul> <p>\u9759\u6001\u53d8\u91cf\u662f\u53ef\u53d8\u7684\uff0c\u8bbf\u95ee\u548c\u4fee\u6539\u9759\u6001\u53ef\u53d8\u53d8\u91cf\u662f\u4e0d\u5b89\u5168\uff08unsafe\uff09\u7684\u64cd\u4f5c\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>static mut COUNTER: u32 = 0;\nfn add_to_count(inc: u32) {\n// \u4fee\u6539\u9759\u6001\u53d8\u91cf\nunsafe {\nCOUNTER += inc;\n}\n}\nfn main() {\nadd_to_count(3);\n// \u8bbf\u95ee\u9759\u6001\u53d8\u91cf\nunsafe {\nprintln(\"COUNTER: {}\", COUNTER);\n}\n}\n</code></pre>"},{"location":"19_advanced_features/01_unsafe_rust/#27-trait","title":"2.7 \u5b9e\u73b0\u4e0d\u5b89\u5168\u7684trait","text":"<p>\u5f53\u67d0\u4e2atrait\u4e2d\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u65b9\u6cd5\u62e5\u6709\u7f16\u8bd1\u5668\u65e0\u6cd5\u6821\u9a8c\u7684\u5b89\u5168\u56e0\u7d20\u65f6\uff0c\u5c31\u79f0\u8fd9\u4e2atrait\u65f6\u4e0d\u5b89\u5168\u7684\uff0c\u58f0\u660eunsafe trait\uff0c\u9700\u5b9a\u4e49\u524d\u52a0<code>unsafe</code>\u5173\u952e\u5b57\u3002\u8be5trait\u53ea\u80fd\u5728unsafe\u4ee3\u7801\u5757\u4e2d\u5b9e\u73b0\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>unsafe trait Foo {\n// methods go here\n}\nunsafe impl Foo for i32 {\n// method implements go here\n}\nfn main() {}\n</code></pre>"},{"location":"19_advanced_features/01_unsafe_rust/#unsafe_1","title":"\u4e09\u3001\u4f55\u65f6\u4f7f\u7528unsafe","text":"<p>\u4f7f\u7528unsafe\u4ee3\u7801\u7684\u65f6\u5019\u8981\u8003\u8651\u4ee5\u4e0b\u95ee\u9898</p> <ul> <li>\u4f7f\u7528unsafe\u4ee3\u7801\u65f6\u7f16\u8bd1\u5668\u65e0\u6cd5\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\uff0c\u8ba9\u5f00\u53d1\u8005\u4fdd\u8bc1unsafe\u4ee3\u7801\u6b63\u786e\u6027\u5e76\u4e0d\u7b80\u5355\u3002\u4f46\u6709\u5145\u8db3\u7684\u7406\u7531\u4f7f\u7528unsafe\u4ee3\u7801\u65f6\uff0c\u5c31\u53ef\u4ee5\u8fd9\u6837\u505a</li> <li>\u901a\u8fc7\u663e\u793a\u6807\u8bb0<code>unsafe</code>\uff0c\u53ef\u4ee5\u5728\u51fa\u73b0\u95ee\u9898\u65f6\u8f7b\u677e\u5b9a\u4f4d</li> </ul>"},{"location":"19_advanced_features/02_advanced_trait/","title":"\u9ad8\u7ea7Trait","text":""},{"location":"19_advanced_features/02_advanced_trait/#rust","title":"\u4e00\u3001\u5728rust\u4e2d\u4f7f\u7528\u5173\u8054\u7c7b\u578b\u6765\u5236\u5b9a\u5360\u4f4d\u7c7b\u578b","text":"<p>\u5173\u8054\u7c7b\u578b\uff08assciated type\uff09\u662ftrait\u4e2d\u7c7b\u578b\u5360\u4f4d\u7b26\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8etrait\u7684\u65b9\u6cd5\u7b7e\u540d\u4e2d\u3002\u5177\u4f53\u5730\u8bf4\u53ef\u4ee5\u5b9a\u4e49\u51fa\u5305\u542b\u67d0\u4e9b\u7c7b\u578b\u7684trait\uff0c\u800c\u5728\u5b9e\u73b0\u524d\u65e0\u9700\u77e5\u9053\u8fd9\u4e9b\u7c7b\u578b\u662f\u4ec0\u4e48\u3002\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>pub trait Iterator {\ntype Item;\nfn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;\n}\nfn main() {\nprintln!(\"Hello, world\");\n}\n</code></pre>"},{"location":"19_advanced_features/02_advanced_trait/#_1","title":"\u4e8c\u3001\u5173\u8054\u7c7b\u578b\u4e0e\u6cdb\u578b\u7684\u533a\u522b","text":"<p>\u6bcf\u6b21\u5b9e\u73b0\u6cdb\u578btrait\u7684\u65f6\u5019\u5fc5\u987b\u6807\u6ce8\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u800c\u4e14\u53ef\u4ee5\u4e3a\u4e00\u4e2a\u7c7b\u578b\u591a\u6b21\u5b9e\u73b0\u67d0\u4e2aTrait\uff08\u4f7f\u7528\u4e0d\u540c\u7684\u6cdb\u578b\u53c2\u6570\uff09\uff1b\u800c\u5b9e\u73b0\u5173\u8054\u7c7b\u578btrait\u7684\u65f6\u5019\uff0c\u6211\u4eec\u65e0\u9700\u6807\u6ce8\u7c7b\u578b\uff0c\u4f46\u662f\u8981\u5728\u91cc\u9762\u6307\u660e\u5177\u4f53\u7684\u5173\u8054\u7c7b\u578b\uff0c\u800c\u4e14\u6211\u95e8\u65e0\u6cd5\u4e3a\u5355\u4e2a\u7c7b\u578b\u591a\u6b21\u5b9e\u73b0\u67d0\u4e2aTrait\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// \u5173\u8054\u7c7b\u578bTrait\npub trait Iterator {\ntype Item;\nfn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;\n}\n// \u6cdb\u578b\u7c7b\u578bTrait\npub trait Iterator2&lt;T&gt; {\nfn next(&amp;mut self) -&gt; Option&lt;T&gt;;\n}\n// struct\nstruct Counter {}\n// \u5b9e\u73b0\u5173\u8054\u7c7b\u578b\u7684Trait\nimpl Iterator for Counter {\ntype Item = u32;\nfn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\nNone\n}\n}\n// \u5b9e\u73b0\u6cdb\u578b\u7c7b\u578b\u7684trait\nimpl Iterator2&lt;String&gt; for Counter {\nfn next(&amp;mut self) -&gt; Option&lt;String&gt; {\nNone\n}\n}\n// \u518d\u6b21\u5b9e\u73b0\u6cdb\u578b\u7c7b\u578b\u7684trait\nimpl Iterator2&lt;u32&gt; for Counter {\nfn next(&amp;mut self) -&gt; Option&lt;u32&gt; {\nNone\n}\n}\nfn main() {\nprintln!(\"Hello, world!\");\n}\n</code></pre>"},{"location":"19_advanced_features/02_advanced_trait/#_2","title":"\u4e09\u3001\u9ed8\u8ba4\u6cdb\u578b\u53c2\u6570\u548c\u8fd0\u7b97\u7b26\u91cd\u8f7d","text":"<p>\u53ef\u4ee5\u5728\u4f7f\u7528\u6cdb\u578b\u53c2\u6570\u65f6\u4e3a\u6cdb\u578b\u6307\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u8bed\u6cd5\u4e3a\uff1a<code>&lt;PlaceholderType=ConcreteType&gt;</code>\uff0c\u8fd9\u79cd\u6280\u672f\u5e38\u7528\u4e8e\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff08operator overloading\uff09\u3002\u867d\u7136Rust\u4e0d\u5141\u8bb8\u521b\u5efa\u81ea\u5df1\u7684\u8fd0\u7b97\u7b26\u4ee5\u53ca\u91cd\u8f7d\u4efb\u610f\u7684\u8fd0\u7b97\u7b26\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0<code>std::ops</code>\u4e2d\u5217\u51fa\u7684\u90a3\u4e9btrait\u6765\u91cd\u8f7d\u4e00\u90e8\u5206\u76f8\u5e94\u7684\u8fd0\u7b97\u7b26\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>use std::ops::Add;\n#[derive(Debug, PartiaEq)]\nstruct Point {\nx: i32,\ny: i32,\n}\nimpl Add for Point {\ntype Output = Point;\nfn add(self, other: Point) -&gt; Point {\nPoint {\nx: self.x + other.x,\ny: self.y + other.y,\n}\n}\n}\nfn main() {\nassert_eq!(Point { x: 1, y: 0 } + Point { x: 2, y: 3 },\nPoint { x: 3, y: 3 });\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c<code>std::ops::Add</code> trait \u4f7f\u7528\u9ed8\u8ba4\u7684\u6cdb\u578b\u53c2\u6570\u7c7b\u578b\u4e3a <code>&lt;Rhs = Self&gt;</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6211\u4eec\u5b9e\u73b0<code>std::ops::Add</code> trait\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6ca1\u6709\u4e3a<code>Rhs</code>\u6307\u5b9a\u4e00\u4e2a\u5177\u4f53\u7684\u53c2\u6570\u7c7b\u578b\uff0c\u90a3\u4e48<code>Rhs</code>\u7c7b\u578b\u5c31\u9ed8\u8ba4\u4e3a<code>Self</code>\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d<code>Rhs</code>\u5c31\u662f<code>Self</code>\u5373<code>Point</code>\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u505a\u4e00\u4e2a\u6beb\u7c73\u548c\u7c73\u76f8\u52a0\u7684\u4f8b\u5b50\uff0c\u5c31\u9700\u8981\u6307\u5b9a\u6cdb\u578b\u53c2\u6570\u7c7b\u578b\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::ops::Add;\nstruct Millimeters(u32);\nstruct Meters(u32);\nimpl Add(Meters) for Millimeters {\ntype Output = Millimeters;\nfn add(self, other: Point) -&gt; Point {\nMillimeters(self.0 + (other.o * 1000))\n}\n}\nfn main() {\n}\n</code></pre>"},{"location":"19_advanced_features/02_advanced_trait/#_3","title":"\u56db\u3001\u9ed8\u8ba4\u6cdb\u578b\u53c2\u6570\u7684\u4e3b\u8981\u5e94\u7528\u573a\u666f","text":"<p>\u4e3b\u8981\u6709\u4e24\u4e2a\u5e94\u7528\u573a\u666f\uff0c\u5982\u4e0b</p> <ul> <li>\u6269\u5c55\u4e00\u4e2a\u7c7b\u578b\u800c\u4e0d\u7834\u574f\u73b0\u6709\u7684\u4ee3\u7801</li> <li>\u5141\u8bb8\u5728\u5927\u90e8\u5206\u7528\u6237\u90fd\u4e0d\u9700\u8981\u7684\u7279\u5b9a\u573a\u666f\u4e0b\u8fdb\u884c\u81ea\u5b9a\u4e49</li> </ul>"},{"location":"19_advanced_features/02_advanced_trait/#fully-qualified-syntax","title":"\u4e94\u3001\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5\uff08Fully Qualified Syntax\uff09\u4e0e\u5982\u4f55\u8c03\u7528\u540c\u540d\u65b9\u6cd5","text":"<p>\u6211\u4eec\u770b\u5982\u4e0b\u4f8b\u5b50</p> <pre><code>trait Pilot {\nfn fly(&amp;self);\n}\ntrait Wizard {\nfn fly(&amp;self);\n}\nstruct Human;\nimpl Pilot for Human {\nfn fly(&amp;self) {\nprintln!(\"This is your caption speaking.\")\n}\n}\nimpl Wizard for Human {\nfn fly(&amp;self) {\nprintln!(\"Up!\");\n}\n}\nimpl Human {\nfn fly(&amp;self) {\nprintln!(\"*waving arms furiously*\");\n}\n}\nfn mian() {\nlet person = Human;\nperson.fly();\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2astruct\u5206\u522b\u5b9e\u73b0\u4e86<code>Human</code>trait\uff0c\u5b9e\u73b0\u4e86<code>fly</code>\u65b9\u6cd5\uff0c\u5e76\u4e14<code>Human</code> trait\u6709\u81ea\u5df1\u7684fly\u65b9\u6cd5\u3002\u6700\u540e\u5728<code>main</code>\u51fd\u6570\u4e2d\u8c03\u7528\u4e86<code>fly</code>\u65b9\u6cd5\uff0c\u90a3\u4e48\u4f1a\u8c03\u7528\u5230\u54ea\u4e2a\u65b9\u6cd5\u5462\uff1f\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u5c06\u8c03\u7528\u672c\u8eab\u7684<code>fly</code>\u65b9\u6cd5\u3002\u6b64\u65f6\u53c8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u4e48\u5982\u4f55\u8c03\u7528\u5b9e\u73b0\u4e86\u4e24\u4e2atrait\u7684\u65b9\u6cd5\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn mian() {\nlet person = Human;\n// \u8c03\u7528\u672c\u8eab\u7684\u65b9\u6cd5\nperson.fly();\n// \u8c03\u7528Pilot\u7684\u65b9\u6cd5\nPilot::fly(&amp;person);\n// \u8c03\u7528Wizard\u7684\u65b9\u6cd5\nWizard::fly(&amp;person);\n}\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>Pilot</code>\u53ef\u4ee5\u88ab\u591a\u4e2astruct\u5b9e\u73b0\uff0c\u90a3\u4e48\u5982\u4f55\u77e5\u9053\u4e3a\u4ec0\u4e48\u8c03\u7684\u662f<code>Human</code>\u7684\u65b9\u6cd5\uff0c\u662f\u56e0\u4e3a\u6709<code>self</code>\u53c2\u6570\uff0c\u4f20\u5165\u7684<code>&amp;person</code>\u53c2\u6570\u4e2d\u5b83\u5c31\u662f<code>Human</code>\u7c7b\u578b\u3002\u6211\u4eec\u518d\u6765\u770b\u4e00\u4e2a\u4e0d\u4e00\u6837\u7684\u793a\u4f8b</p> <pre><code>trait Animal {\nfn baby_name() -&gt; String;\n}\nstruct Dog;\nimpl Dog {\nfn baby_name() -&gt; String {\nString::from(\"Spot\");\n}\n}\nimpl Animal for Dog {\nfn baby_name() -&gt; String {\nString::from(\"puppy\");\n}\n}\nfn main() {\nprintln!(\"A baby dog is called a {}\", Dog::baby_name());\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c<code>Dog</code>\u672c\u8eab\u6709<code>baby_name</code>\u5173\u8054\u65b9\u6cd5\uff0c\u5b83\u8f93\u51fa\u7684\u662f\u201cSpot\u201d\uff0c\u90a3\u4e48\u5982\u4f55\u8c03\u7528<code>Animal</code>\u7684\u65b9\u6cd5\u5462\uff1f\u8fd9\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5\u3002</p> <p>\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5\u7684\u683c\u5f0f\u4e3a\uff1a<code>&lt;Type as Trait&gt;::function(receiver_if_method, next_arg, ...)</code>\uff0c\u8fd9\u79cd\u8bed\u6cd5\u53ef\u4ee5\u5728\u4efb\u4f55\u8c03\u7528\u51fd\u6570\u6216\u65b9\u6cd5\u7684\u5730\u65b9\u4f7f\u7528\uff0c\u5e76\u4e14\u5b83\u5141\u8bb8\u5ffd\u7565\u90a3\u4e9b\u4ece\u4e0a\u4e0b\u6587\u80fd\u63a8\u5bfc\u51fa\u6765\u7684\u90e8\u5206\u3002\u4f46\u8981\u8bb0\u4f4f\u7684\u662f\uff0c\u5f53rust\u65e0\u6cd5\u533a\u5206\u6211\u4eec\u8c03\u7528\u54ea\u4e2a\u5177\u4f53\u5b9e\u73b0\u7684\u65f6\u5019\uff0c\u624d\u9700\u4f7f\u7528\u8fd9\u79cd\u8bed\u6cd5\uff0c\u56e0\u4e3a\u8fd9\u79cd\u8bed\u6cd5\u5199\u8d77\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4e0d\u8be5\u8f7b\u6613\u4f7f\u7528\u3002\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// ...\nfn main() {\n// \u8c03\u7528\u672c\u8eab\u7684\u65b9\u6cd5\nprintln!(\"A baby dog is called a {}\", Dog::baby_name());\n// \u8c03\u7528\u5b9e\u73b0Animal\u7684\u65b9\u6cd5\nprintln!(\"A baby dog is called a {}\", &lt;Dog as Animal&gt;::baby_name());\n}\n</code></pre>"},{"location":"19_advanced_features/02_advanced_trait/#supertraittraittrait","title":"\u4e94\u3001\u4f7f\u7528supertrait\u6765\u8981\u6c42trait\u9644\u5e26\u5176\u4ed6trait\u7684\u529f\u80fd","text":"<p>\u5176\u5b9e\u76f8\u5f53\u4e8e\u4e00\u4e2atrait\u7ee7\u627f\u53e6\u5916\u4e00\u4e2atrait\u3002\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u518d\u4e00\u4e2atrait\u4e2d\u4f7f\u7528\u5176\u4ed6trait\u7684\u529f\u80fd\uff0c\u4e5f\u5c31\u662f\u8bf4\u9700\u8981\u95f4\u63a5\u88ab\u4f9d\u8d56\u7684trait\u4e5f\u88ab\u5b9e\u73b0\uff0c\u90a3\u4e2a\u88ab\u95f4\u63a5\u4f9d\u8d56\u7684trait\u5c31\u662f\u5f53\u524dtrait\u7684supertrait\u3002\u52a0\u5165\u6211\u4eec\u5e0c\u671b\u4e00\u4e2atrait\u6709\u6253\u5370\u529f\u80fd\u7684\u65b9\u6cd5\uff0c\u5e76\u5e0c\u671b\u6253\u5370\u7684\u65b9\u6cd5\u80fd\u591f\u8c03\u7528<code>to_string</code>\u65b9\u6cd5\uff0c\u5b9e\u73b0\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>use std::fmt;\n// \u4f9d\u8d56\u4e8efmt::Display\ntrait OutlinePrint: fmt::Display {\nfn outline_print(&amp;self) {\nlet output = self.to_string();\nlet len = output.len();\nprintln!(\"{}\", \"*\".repeat(len + 4));\nprintln!(\"*{}*\", \"*\".repeat(len + 2));\nprintln!(\"* {} *\", output);\nprintln!(\"*{}*\", \" \".repeat(len + 2));\nprintln!(\"{}\", \"*\".repeat(len + 4));\n}\n}\nstruct Point {\nx: i32,\ny: i32,\n}\n// \u4e3aPoint\u5b9e\u73b0OutlinePrint\nimpl OutlinePrint for Point {}\n// Point\u5b9e\u73b0\u4e86OutlinePrint\u5c31\u5fc5\u987b\u5b9e\u73b0fmt::Display\nimpl fmt::Display for Point {\nfn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {\nwrite!(f, \"({}, {})\", self.x, self.y)\n}\n}\nfn main() {}\n</code></pre>"},{"location":"19_advanced_features/02_advanced_trait/#newtypetrait","title":"\u516d\u3001\u4f7f\u7528newtype\u6a21\u5f0f\u5728\u5916\u90e8\u7c7b\u578b\u4e0a\u5b9e\u73b0\u5916\u90e8trait","text":"<p>\u5b64\u513f\u89c4\u5219\uff1a\u53ea\u6709\u5f53trait\u6216\u7c7b\u578b\u5b9a\u4e49\u5728\u672c\u5730\u5305\u65f6\uff0c\u624d\u80fd\u4e3a\u8be5\u7c7b\u578b\u5b9e\u73b0\u8fd9\u4e2atrait\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528newtype\u6a21\u5f0f\u6765\u7ed5\u8fc7\u8fd9\u89c4\u5219\uff0c\u5373\u4f7f\u7528tuple struct\uff08\u5143\u7ec4\u7ed3\u6784\u4f53\uff09\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\u653e\u5728\u672c\u5730\u3002\u5982\u6211\u4eec\u60f3\u4e3a<code>Vec</code>\u5b9e\u73b0<code>fmt::Display</code> trait\uff0c\u800c<code>Vec</code>\u548c<code>fmt::Display</code>\u90fd\u5728\u5b9a\u4e49\u5728\u5916\u90e8\u5305\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u76f4\u63a5\u4e3a<code>Vec</code>\u5b9e\u73b0<code>fmt::Display</code>\u3002\u5b9e\u73b0\u65b9\u6848\u5982\u4e0b</p> <pre><code>use std::fmt;\n// \u5b9a\u4e49Wrapper\u5143\u7ec4\u7ed3\u6784\u4f53\uff0c\u5305\u4f4fVec\nstruct Wrapper(Vec&lt;String&gt;);\n// \u4e3aWrapper\u5b9e\u73b0Display\nimpl fmt::Display for Wrapper {\nfn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {\n// \u4f7f\u7528selef.0\u5373\u53d6\u51favec\nwrite!(\"[{}]\", selef.0.join(\", \"));\n}\n}\nfn main() {\nlet w = Wrapper(vec![String::from(\"hello\"), String::from(\"world\")]);\nprintln!(\"w = {}\", w);\n}\n</code></pre>"},{"location":"19_advanced_features/03_advanced_type/","title":"\u9ad8\u7ea7\u7c7b\u578b","text":""},{"location":"19_advanced_features/03_advanced_type/#newtype","title":"\u4e00\u3001\u4f7f\u7528newtype\u6a21\u5f0f\u5b9e\u73b0\u7c7b\u578b\u5b89\u5168\u548c\u62bd\u8c61","text":"<p>newtype\u6a21\u5f0f\u6709\u4ee5\u4e0b\u4f5c\u7528</p> <ul> <li>\u7528\u6765\u9759\u6001\u7684\u4fdd\u8bc1\u5404\u79cd\u503c\u4e4b\u95f4\u4e0d\u4f1a\u6df7\u6dc6\u5e76\u8868\u660e\u503c\u7684\u5355\u4f4d</li> <li>\u4e3a\u7c7b\u578b\u7684\u67d0\u4e9b\u7ec6\u8282\u63d0\u4f9b\u62bd\u8c61\u80fd\u529b</li> <li>\u901a\u8fc7\u8f7b\u91cf\u7ea7\u7684\u5c01\u88c5\u6765\u9690\u85cf\u5185\u90e8\u7684\u5b9e\u73b0\u7ec6\u8282</li> </ul>"},{"location":"19_advanced_features/03_advanced_type/#_2","title":"\u4e8c\u3001\u4f7f\u7528\u7c7b\u578b\u7684\u522b\u540d\u521b\u5efa\u7c7b\u578b\u540c\u4e49\u8bcd","text":"<p>Rust\u63d0\u4f9b\u4e86\u7c7b\u578b\u522b\u540d\u7684\u529f\u80fd\uff0c\u4e3a\u73b0\u6709\u7c7b\u578b\u4ea7\u751f\u53e6\u5916\u7684\u540d\u79f0\uff08\u540c\u4e49\u8bcd\uff09\uff0c\u7c7b\u578b\u7684\u522b\u540d\u5e76\u4e0d\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u7c7b\u578b\uff0c\u4f7f\u7528type\u5173\u952e\u5b57\u521b\u5efa\u7c7b\u578b\u522b\u540d\u3002\u4e3b\u8981\u7528\u9014\u662f\u51cf\u5c11\u4ee3\u7801\u5b57\u7b26\u7684\u91cd\u590d\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>type Kilometers = i32;\nfn main() {\nlet x: i32 = 5;\nlet y: Kilometers = 5;\nprintln!(\"x + y = {}\", x + y);\n}\n</code></pre>"},{"location":"19_advanced_features/03_advanced_type/#never","title":"\u4e09\u3001Never\u7c7b\u578b","text":"<p>\u6709\u4e00\u4e2a\u540d\u4e3a<code>!</code>\u7684\u7279\u6b8a\u7c7b\u578b\uff0c\u5b83\u6ca1\u6709\u4efb\u4f55\u503c\uff0c\u884c\u8bdd\u79f0\u4e4b\u4e3a\u7a7a\u7c7b\u578b\uff08empty type\uff09\u3002\u6211\u4eec\u503e\u5411\u4e8e\u53ebnever\u7c7b\u578b\uff0c\u56e0\u4e3a\u5b83\u5728\u4e0d\u8fd4\u56de\u7684\u51fd\u6570\u4e2d\u5145\u5f53\u8fd4\u56de\u7c7b\u578b\u3002\u5176\u4e2d\uff0c\u4e0d\u8fd4\u56de\u503c\u7684\u51fd\u6570\u4e5f\u53eb\u53d1\u6563\u51fd\u6570\uff08diverging function\uff09\u3002</p>"},{"location":"19_advanced_features/03_advanced_type/#sized-trait","title":"\u56db\u3001\u52a8\u6001\u5927\u5c0f\u548csized trait","text":"<p>rust\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7c7b\u578b\u7684\u503c\u5206\u914d\u591a\u5c11\u7a7a\u95f4\u3002\u5728rust\u4e2d\u5b58\u5728\u52a8\u6001\u5927\u5c0f\u7684\u7c7b\u578b\uff08Dynamically Sized Types, DST\uff09\u7684\u6982\u5ff5\uff0c\u4ed6\u53ef\u4ee5\u4f7f\u6211\u4eec\u5728\u7f16\u5199\u4ee3\u7801\u7684\u65f6\u5019\u4f7f\u7528\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\u5927\u5c0f\u7684\u503c\u3002str\u662f\u52a8\u6001\u5927\u5c0f\u7684\u7c7b\u578b\uff08\u6ce8\u610f\u4e0d\u662f&amp;str\uff09\uff0c\u7279\u70b9\u662f\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002\u5982\u4e0b\u5217\u4ee3\u7801\u5c06\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c</p> <pre><code>let s1:str = \"Hello there!\";\nlet s2:str = \"How's it going?\";\n</code></pre> <p>rust\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u9700\u8981\u786e\u5b9a\u67d0\u4e2a\u7c7b\u578b\u7a76\u7adf\u4f1a\u5360\u591a\u5c11\u5185\u5b58\uff0c\u4e8c\u540c\u4e00\u7c7b\u578b\u6240\u6709\u7684\u503c\u5fc5\u987b\u4f7f\u7528\u7b49\u91cf\u7684\u5185\u5b58\uff0c\u6240\u4ee5\u4ee5\u4e0a\u4ee3\u7801\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\u5207\u7247\uff08&amp;str\uff09\u6765\u89e3\u51b3\uff0c\u56e0\u4e3a\u5b57\u7b26\u4e32\u5207\u7247\u5b58\u50a8\u7684\u662fstr\u7684\u5730\u5740\u4ee5\u53castr\u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u8fc7\u53bb\u6211\u4eec\u5728\u7a0b\u5e8f\u4e2d\u5b58\u50a8\u5b57\u7b26\u4e32\u7684\u65f6\u5019\u90fd\u662f\u7528<code>&amp;str</code>\u3002</p> <p>\u5728rust\u4e2d\uff0c\u5b58\u50a8\u52a8\u6001\u5927\u5c0f\u7c7b\u578b\u7684\u6570\u636e\u65f6\uff0c\u603b\u4f1a\u9644\u5e26\u4e00\u4e9b\u989d\u5916\u7684\u5143\u6570\u636e\u6765\u5b58\u50a8\u52a8\u6001\u4fe1\u606f\u7684\u5927\u5c0f\u3002\u5373\u4f7f\u7528\u52a8\u6001\u5927\u5c0f\u7c7b\u578b\u7684\u65f6\u5019\u603b\u4f1a\u628a\u5b83\u7684\u503c\u5b58\u653e\u5728\u67d0\u79cd\u6307\u9488\u540e\u9762\uff0c\u5982\u5b57\u7b26\u4e32\u5207\u7247\u3002</p>"},{"location":"19_advanced_features/03_advanced_type/#trait","title":"\u4e94\u3001\u53e6\u5916\u4e00\u79cd\u52a8\u6001\u5927\u5c0f\u7684\u7c7b\u578b\uff1atrait","text":"<p>\u5176\u5b9e\u6bcf\u4e00\u4e2atrait\u90fd\u662f\u4e00\u4e2a\u52a8\u6001\u5927\u5c0f\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u540d\u79f0\u5bf9\u5176\u5f15\u7528\u3002\u5982\u4e3a\u4e86\u5c06trait\u7528\u4f5ctrait\u5bf9\u8c61\uff0c\u5fc5\u987b\u5c06\u5b83\u653e\u7f6e\u5728\u67d0\u79cd\u6307\u9488\u4e4b\u540e\uff0c\u4f8b\u5982<code>&amp;dyn Trait</code>\u6216<code>Box&lt;dyn Trait&gt;</code>\u6216<code>Rc&lt;dyn trait&gt;</code>\u4e4b\u540e\u3002</p>"},{"location":"19_advanced_features/03_advanced_type/#sized-trait_1","title":"\u516d\u3001sized trait","text":"<p>\u4e3a\u4e86\u5904\u7406\u52a8\u6001\u5927\u5c0f\u7684\u7c7b\u578b\uff0crust\u63d0\u4f9b\u4e00\u4e2a<code>Sized trait</code>\u6765\u786e\u5b9a\u7c7b\u578b\u7684\u5927\u5c0f\u5728\u7f16\u8bd1\u65f6\u662f\u5426\u5df2\u77e5\uff0c\u5728\u7f16\u8bd1\u65f6\u53ef\u8ba1\u7b97\u51fa\u5927\u5c0f\u7684\u7c7b\u578b\u4f1a\u81ea\u52a8\u5b9e\u73b0\u8fd9trait\uff0crust\u8fd8\u4f1a\u4e3a\u6bcf\u4e00\u4e2a\u6cdb\u578b\u51fd\u6570\u9690\u5f0f\u7684\u6dfb\u52a0Sized\u7ea6\u675f\u3002\u5982\u4e0b</p> <pre><code>fn generic&lt;T&gt;(t: T) {}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u4f1a\u88ab\u9690\u5f0f\u8f6c\u4e3a\u5982\u4e0b\u51fd\u6570</p> <pre><code>fn generic&lt;T: Sized&gt;(t: T) {}\n</code></pre> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6cdb\u578b\u51fd\u6570\u53ea\u80fd\u88ab\u5e94\u7528\u4e8e\u7f16\u8bd1\u65f6\u5df2\u7ecf\u77e5\u9053\u5927\u5c0f\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u7279\u6b8a\u8bed\u6cd5\u89e3\u9664\u8fd9\u4e00\u9650\u5236\uff0c\u5373<code>?Sized trait</code>\u7ea6\u675f\u3002\u8868\u793a\u7684\u662f\u7c7b\u578b\u7684\u4e0d\u786e\u5b9a\u6027\uff0c\u53ef\u80fd\u662f<code>Sized</code>\u7c7b\u578b\uff0c\u53ef\u80fd\u4e0d\u662f<code>Sized</code>\u7c7b\u578b\uff0c\u6b64\u8bed\u6cd5\u53ea\u80fd\u7528\u5728<code>Sized</code>\u4e0a\uff0c\u4e0d\u80fd\u7528\u4e8e\u5176\u4ed6trait\uff0c\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn generic&lt;T: ?Sized&gt;(t: &amp;T) {}\n</code></pre>"},{"location":"19_advanced_features/04_advanced_function/","title":"\u9ad8\u7ea7\u51fd\u6570\u548c\u95ed\u5305","text":""},{"location":"19_advanced_features/04_advanced_function/#_2","title":"\u4e00\u3001\u51fd\u6570\u6307\u9488","text":"<p>\u5728rust\u4e2d\uff0c\u95ed\u5305\u53ef\u4ee5\u4f20\u9012\u7ed9\u51fd\u6570\uff0c\u8fd8\u53ef\u4ee5\u5c06\u51fd\u6570\u4f20\u9012\u7ed9\u5176\u4ed6\u51fd\u6570\u3002\u5728\u4f20\u9012\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u88ab\u5f3a\u5236\u8f6c\u6362\u6210fn\u7c7b\u578b\uff0cfn\u7c7b\u578b\u5c31\u662f\u201c\u51fd\u6570\u6307\u9488\u201d\uff08function pointer\uff09\u3002\u5982\u4e0b</p> <pre><code>fn add_one(x: i32) -&gt; i32 {\nx + 1\n}\nfn do_twice(f: fn(i32) -&gt; i32, arg: i32) -&gt; i32 {\nf(arg) + f(arg)\n}\nfn main() {\nlet answer = do_twice(add_one, 5);\nprintln!(\"The answer is: {}\", answer);\n}\n</code></pre>"},{"location":"19_advanced_features/04_advanced_function/#_3","title":"\u4e8c\u3001\u51fd\u6570\u6307\u9488\u4e0e\u95ed\u5305\u7684\u4e0d\u540c","text":"<p>\u95ed\u5305\u5b9e\u73b0\u4e86\u4e09\u79cd\u95ed\u5305trait\uff0c\u800c\u51fd\u6570\u6307\u9488\u5373fn\u662f\u4e00\u4e2a\u7c7b\u578b\uff0c\u4e0d\u662f\u4e00\u4e2atrait\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5236\u5b9afn\u4e3a\u53c2\u6570\u7c7b\u578b\uff0c\u4e0d\u7528\u58f0\u660e\u4e00\u4e2a\u4ee5\u5185<code>Fn trait</code>\u4e3a\u7ea6\u675f\u7684\u6cdb\u578b\u53c2\u6570\u3002</p> <p>\u51fd\u6570\u6307\u9488\u5b9e\u73b0\u4e863\u79cd\u95ed\u5305trait\uff08Fn, FnMut, FnOnce\uff09\uff0c\u6240\u4ee5\u603b\u662f\u53ef\u4ee5\u628a\u51fd\u6570\u6307\u9488\u7528\u4f5c\u53c2\u6570\u4f20\u9012\u7ed9\u4e00\u4e2a\u63a5\u6536\u95ed\u5305\u7684\u51fd\u6570\u3002\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\uff0c\u6211\u4eec\u66f4\u503e\u5411\u4e8e\u642d\u914d\u95ed\u5305trait\u7684\u6cdb\u578b\u6765\u7f16\u5199\u51fd\u6570\uff0c\u8fd9\u6837\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u540c\u65f6\u63a5\u6536\u95ed\u5305\u548c\u666e\u901a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002</p> <p>\u67d0\u4e9b\u60c5\u666f\u4e0b\uff0c\u6211\u4eec\u53ea\u60f3\u63a5\u6536fn\u800c\u4e0d\u63a5\u6536\u95ed\u5305\uff0c\u5982\u4e0e\u5916\u90e8\u4e0d\u652f\u6301\u95ed\u5305\u7684\u4ee3\u7801\u4ea4\u4e92\uff1aC\u51fd\u6570\u3002\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c06vec\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u8f6c\u6362\u4e3aString\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>fn main() {\n// \u4f7f\u7528\u95ed\u5305\nlet list_of_numbers = vec![1, 2, 3];\nlet list_of_strings: Vec&lt;String&gt; = list_of_numbers\n.iter()\n.map(|i| i.to_string())\n.collect();\n// \u4f7f\u7528\u51fd\u6570\nlet list_of_numbers = vec![1, 2, 3];\nlet list_of_strings: Vec&lt;String&gt; = list_of_numbers\n.iter()\n.map(ToString::to_string)\n.collect();\n}\n</code></pre> <p>\u6211\u4eec\u518d\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u5728\u521b\u5efa\u4e00\u4e9b\u679a\u4e3e\u6570\u636e\u65f6\uff0c\u9700\u4f20\u5165\u4e00\u4e2a\u6570\u636e\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u79cd\u6784\u9020\u5668\u4e5f\u4f5c\u4e3a\u5b9e\u73b0\u4e86\u95ed\u5305trait\u7684\u51fd\u6570\u6307\u9488\u6765\u8fdb\u884c\u4f7f\u7528\uff0c\u5982\u4e0b\u793a\u4f8b\u4ee3\u7801</p> <pre><code>fn main() {\nenum Status {\nValue(u32),\nStop,\n}\nlet v = Status::Value(2);\nlet list_of_statuses: Vec&lt;Status&gt; = (0u32..20)\n.map(Status::Value)\n.collect();\n}\n</code></pre>"},{"location":"19_advanced_features/04_advanced_function/#_4","title":"\u4e09\u3001\u8fd4\u56de\u95ed\u5305","text":"<p>\u95ed\u5305\u4f7f\u7528trait\u8fdb\u884c\u8868\u8fbe\uff0c\u65e0\u6cd5\u5728\u51fd\u6570\u4e2d\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u95ed\u5305\uff0c\u56e0\u4e3arust\u65e0\u6cd5\u63a8\u65ad\u51fa\u9700\u8981\u591a\u5c11\u7a7a\u95f4\u6765\u5b58\u50a8\u4e00\u4e2a\u8fd4\u56de\u7684\u95ed\u5305\uff0c\u4f46\u662f\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5b9e\u73b0\u4e86\u8be5trait\u7684\u5177\u4f53\u7c7b\u578b\u4f5c\u4e3a\u8fd4\u56de\u503c\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>fn returns_closure() -&gt; Box&lt;dyn Fn(i32) -&gt; i32&gt; {\nBox::new(|x| x + 1)\n}\nfn main() {}\n</code></pre>"},{"location":"19_advanced_features/04_macro/","title":"\u5b8f","text":""},{"location":"19_advanced_features/04_macro/#_2","title":"\u4e00\u3001\u6982\u8ff0","text":"<p>\u5b8f\u5728rust\u91cc\u6307\u7684\u662f\u4e00\u7ec4\u76f8\u5173\u7279\u6027\u7684\u96c6\u5408\u79f0\u8c13\uff0c\u5305\u62ec\u4f7f\u7528<code>macro_rules!</code>\u6784\u5efa\u7684\u58f0\u660e\u5b8f\uff08declarative macro\uff09\uff0c\u4ee5\u53ca3\u4e2d\u8fc7\u7a0b\u5b8f\uff0c3\u79cd\u8fc7\u7a0b\u5b8f\u5982\u4e0b</p> <ul> <li>\u81ea\u5b9a\u4e49<code>#[derive]</code>\u5b8f\uff0c\u7528\u4e8erust\u6216enum\uff0c\u53ef\u4ee5\u4e3a\u5176\u6307\u5b9a\u968fderive\u5c5e\u6027\u6dfb\u52a0\u7684\u4ee3\u7801</li> <li>\u7c7b\u4f3c\u5c5e\u6027\u7684\u5b8f\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u6761\u76ee\u4e0a\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027</li> <li>\u7c7b\u4f3c\u51fd\u6570\u7684\u5b8f\uff0c\u770b\u8d77\u6765\u50cf\u51fd\u6570\u8c03\u7528\uff0c\u5bf9\u5176\u5236\u5b9a\u4e3a\u53c2\u6570\u7684token\u8fdb\u884c\u64cd\u4f5c</li> </ul>"},{"location":"19_advanced_features/04_macro/#_3","title":"\u4e8c\u3001\u51fd\u6570\u548c\u5b8f\u7684\u5dee\u522b","text":"<p>\u672c\u8d28\u4e0a\uff0c\u5b8f\u662f\u7528\u6765\u7f16\u5199\u53ef\u4ee5\u751f\u6210\u5176\u4ed6\u4ee3\u7801\u7684\u4ee3\u7801\uff08\u5143\u7f16\u7a0b\uff0cmetaprogramming\uff09\u3002\u51fd\u6570\u5728\u5b9a\u4e49\u7b7e\u540d\u65f6\uff0c\u5fc5\u987b\u58f0\u660e\u53c2\u6570\u7684\u4e2a\u6570\u548c\u7c7b\u578b\uff0c\u800c\u5b8f\u53ef\u4ee5\u5904\u7406\u53ef\u53d8\u7684\u53c2\u6570\u3002\u7f16\u8bd1\u5668\u4f1a\u5728\u89e3\u91ca\u4ee3\u7801\u524d\u628a\u5c55\u5f00\u5b8f\u3002\u5b8f\u7684\u5b9a\u4e49\u6bd4\u51fd\u6570\u7684\u5b9a\u4e49\u590d\u6742\u5f97\u591a\uff0c\u5b8f\u65f6\u96be\u4ee5\u9605\u8bfb\u3001\u7406\u89e3\u3001\u7ef4\u62a4\u3002\u5728\u67d0\u4e2a\u6587\u4ef6\u8c03\u7528\u5b8f\u7684\u65f6\u5019\u5fc5\u987b\u63d0\u524d\u5b9a\u4e49\u5b8f\u6216\u5c06\u5b8f\u5f15\u5165\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u800c\u51fd\u6570\u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u5b9a\u4e49\u5e76\u5728\u4efb\u4f55\u4f4d\u7f6e\u4f7f\u7528\u3002</p>"},{"location":"19_advanced_features/04_macro/#macro_rules","title":"\u4e09\u3001macro_rules!\u58f0\u660e\u5b8f","text":"<p>rust\u4e2d\u6700\u5e38\u89c1\u7684\u5b8f\u5f62\u5f0f\uff1a\u58f0\u660e\u5b8f\uff0c\u7c7b\u4f3c\u4e8ematch\u7684\u5339\u914d\u6a21\u5f0f\uff0c\u5728\u5b9a\u4e49\u58f0\u660e\u5b8f\u65f6\uff0c\u9700\u8981\u4f7f\u7528<code>macro_rules!</code>\u3002\u5982\u4e0b\u793a\u4f8b\uff0c\u662f\u4e00\u4e2a\u7b80\u5316\u7684<code>vec!</code></p> <pre><code>// \u4ee5\u4e0b\u6807\u6ce8\u610f\u5473\u7740\u5b83\u6240\u5904\u7684\u5305\u88ab\u5f15\u5165\u4f5c\u7528\u57df\u540e\u624d\u53ef\u4ee5\u4f7f\u7528\uff0c\u7f3a\u5c11\u4e0b\u9762\u6807\u6ce8\u7684\u5b8f\u4e0d\u80fd\u5f15\u5165\u4f5c\u7528\u57df\n#[macro_export]\n// \u4f7f\u7528macro_rules!\u58f0\u660e\u5b8f\uff0c\u5b8f\u7684\u540d\u79f0\u53ebvec\nmacro_rules! vec {\n// \u5927\u62ec\u53f7\u91cc\u662f\u5b8f\u7684\u5b9a\u4e49\u4f53\n// \u4ee5\u4e0b\u4ee3\u7801\u7c7b\u4f3c\u4e8ematch\u8868\u8fbe\u5f0f\uff0c\u4f46\u662fmatch\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u662f\u503c\uff0c\u8fd9\u91cc\u5339\u914d\u7684\u662frust\u7684\u4ee3\u7801\u7ed3\u6784\n// $( $x:expr ) \u5339\u914d\u4efb\u4f55\u7684rust\u8868\u8fbe\u5f0f\uff0c\u5e76\u547d\u540d\u4e3a$x\u3002\n// \u540e\u9762\u7d27\u8ddf\u7684\u9017\u53f7\u5339\u914d\u53ef\u80fd\u51fa\u73b0\u7684\u9017\u53f7\u5206\u9694\u7b26\uff08,\uff09\u51fa\u73b0\u5728\u6355\u83b7\u7684\u4ee3\u7801\u7684\u540e\u9762\n// \u661f\u53f7\uff08*\uff09\u4ee3\u8868\u5339\u914d0\u4e2a\u6216\u8005\u591a\u4e2a\u661f\u53f7\u4e4b\u524d\u7684\u5185\u5bb9\n( $( $x:expr ), * ) =&gt; {\n{\n// \u6bcf\u6b21\u5339\u914d\uff0c\u5c06\u4f1a\u751f\u6210\u7c7b\u4f3c\u5982\u4e0b\u4ee3\u7801\nlet mut temp_vec = Vec::new();\n$(\ntemp_vec.push($x);\n)*\ntemp_vec\n}\n};\n}\n</code></pre> <p>\u90a3\u4e48\u5bf9\u4e8e<code>let v: Vec&lt;u32&gt; = vec![1, 2, 3];</code>\u8fd9\u884c\u4ee3\u7801\uff0c\u5c06\u4f1a\u751f\u6210\u7c7b\u4f3c\u5982\u4e0b\u7684\u4ee3\u7801</p> <pre><code>let mut temp_vec = Vec::new();\ntemp_vec.push(1);\ntemp_vec.push(2);\ntemp_vec.push(3);\n</code></pre> <p>\u5176\u5b9e\uff0c<code>macro_rules!</code>\u5b58\u5728\u4e00\u4e9b\u5947\u602a\u7684\u6280\u672f\u7ec6\u8282\uff0c\u6240\u4ee5rust\u56e2\u961f\u6b63\u5728\u81f4\u529b\u4e8e\u63a8\u51fa<code>macro</code>\u5173\u952e\u5b57\u7684\u7b2c\u4e8c\u79cd\u58f0\u660e\u5b8f\uff0c\u5b83\u548c\u73b0\u5728\u5b8f\u7684\u5de5\u4f5c\u65b9\u5f0f\u6709\u4e9b\u7c7b\u4f3c\uff0c\u4f46\u662f\u4fee\u590d\u4e86\u67d0\u4e9b\u53ef\u80fd\u7684\u6781\u7aef\u60c5\u51b5\uff0c\u800c\u5728\u66f4\u65b0\u4e4b\u540e\uff0c<code>macro_rules!</code>\u5c31\u4f1a\u88ab\u6807\u8bb0\u4e3a\u5f03\u7528\u3002</p> <p>\u5176\u5b9e\u9488\u5bf9\u5b8f\uff0c\u5927\u591a\u6570\u7a0b\u5e8f\u5458\u53ea\u662f\u7528\uff0c\u901a\u5e38\u4e0d\u4f1a\u53bb\u7f16\u5199\u5b8f\uff0c\u6240\u4ee5\u8fd9\u5757\u6211\u4eec\u4e0d\u518d\u6df1\u5165\u7814\u7a76\u3002</p>"},{"location":"19_advanced_features/04_macro/#_4","title":"\u56db\u3001\u57fa\u4e8e\u5c5e\u6027\u6765\u751f\u6210\u4ee3\u7801\u7684\u8fc7\u7a0b\u5b8f","text":"<p>\u8fd9\u79cd\u5f62\u5f0f\u7684\u5b8f\u66f4\u50cf\u51fd\u6570\uff08\u6216\u8005\u67d0\u79cd\u5f62\u5f0f\u7684\u8fc7\u7a0b\uff09\uff0c\u5b83\u4f1a\u63a5\u6536\u5e76\u64cd\u4f5c\u8f93\u5165\u7684rust\u4ee3\u7801\uff0c\u518d\u751f\u6210\u53e6\u4e00\u4e9brust\u4ee3\u7801\u4f5c\u4e3a\u7ed3\u679c\u3002\u4e00\u5171\u6709\u4e09\u79cd\u8fc7\u7a0b\u5b8f\uff0c\u5982\u4e0b</p> <ul> <li>\u81ea\u5b9a\u4e49\u6d3e\u751f</li> <li>\u5c5e\u6027\u5b8f</li> <li>\u51fd\u6570\u5b8f</li> </ul> <p>\u5728\u521b\u5efa\u8fc7\u7a0b\u5b8f\u65f6\uff0c\u5b8f\u5b9a\u4e49\u5fc5\u987b\u5355\u72ec\u653e\u5728\u5b83\u4eec\u81ea\u5df1\u7684\u5305\u4e2d\uff0c\u5e76\u4f7f\u7528\u7279\u6b8a\u7684\u5305\u7c7b\u578b\u3002\u5982\u4e0b\u793a\u4f8b</p> <pre><code>use proc_macro;\n// some_attribute\u662f\u4e00\u4e2a\u7528\u6765\u5236\u5b9a\u8fc7\u7a0b\u5b8f\u7684\u5360\u4f4d\u7b26 \n#[some_attribute]\n// \u5b9a\u4e49\u8fc7\u7a0b\u5b8f\u7684\u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2aTokenStream\uff08TokenStream\u5c5e\u4e8eproc_macro\u5305\u4e0b\uff09\n// \u4ea7\u751f\u4e00\u4e2aTokenStream\u4f5c\u4e3a\u8f93\u51fa\npub fn some_name(input: TokenStream) -&gt; TokenStream {\n}\n</code></pre> <p>\u51fd\u6570\u9644\u5e26\u7684\u5c5e\u6027\u51b3\u5b9a\u4e86\u6211\u4eec\u521b\u5efa\u7684\u662f\u54ea\u79cd\u8fc7\u7a0b\u5b8f\uff0c\u540c\u4e00\u4e2a\u5305\u4e2d\u53ef\u4ee5\u62e5\u6709\u4e0d\u540c\u7684\u8fc7\u7a0b\u5b8f\u3002</p>"},{"location":"19_advanced_features/04_macro/#41-derive","title":"4.1 \u81ea\u5b9a\u4e49derive\u5b8f","text":"<p>\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u793a\u4f8b\u7b80\u5355\u4ecb\u7ecd\u81ea\u5b9a\u4e49\u5b8f\uff0c\u9700\u6c42\u4e3a\uff1a\u521b\u5efa\u4e00\u4e2a<code>hello_macro</code>\u5305\uff0c\u5b9a\u4e49\u4e00\u4e2a\u62e5\u6709\u5173\u8054\u51fd\u6570<code>hello_macro</code>\u7684<code>HelloMacro</code> trait\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u81ea\u52a8\u5b9e\u73b0trait\u7684\u8fc7\u7a0b\u5b8f\u3002</p> <p>\u8fd9\u5c31\u4f7f\u5f97\u7528\u6237\u5728\u5b83\u4eec\u7684\u7c7b\u578b\u4e0a\u6807\u6ce8<code>#[derive(HelloMacro)]</code>\uff0c\u8fdb\u800c\u5f97\u5230<code>hello_macro</code>\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002</p> <p>\u5b9e\u73b0\u8fc7\u7a0b\u6bd4\u8f83\u590d\u6742\uff0c\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\u6682\u65f6\u7559\u7a7a......</p>"},{"location":"19_advanced_features/04_macro/#42","title":"4.2 \u7c7b\u4f3c\u5c5e\u6027\u7684\u5b8f","text":"<p>\u7c7b\u4f3c\u5c5e\u6027\u7684\u5b8f\u53ef\u4ee5\u53eb\u5c5e\u6027\u5b8f\uff0c\u5c5e\u6027\u5b8f\u4e0e\u81ea\u5b9a\u4e49 derive \u5b8f\u7c7b\u4f3c\uff0c\u5b83\u5141\u8bb8\u521b\u5efa\u65b0\u7684\u5c5e\u6027\uff0c\u4f46\u4e0d\u662f\u4e3a derive \u5c5e\u6027\u751f\u6210\u4ee3\u7801\u3002\u5c5e\u6027\u5b8f\u66f4\u52a0\u7075\u6d3b\uff0cderive \u53ea\u80fd\u7528\u4e8estruct\u548cenum\uff0c\u800c\u5c5e\u6027\u5b8f\u53ef\u4ee5\u7528\u4e8e\u4efb\u610f\u6761\u76ee\uff0c\u4f8b\u5982\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// \u5728MVC\u7684\u9879\u76ee\u4e2d\uff0cController\u901a\u5e38\u5b58\u5728\u8fd9\u6837\u7684\u5c5e\u6027\uff0c\u7528\u6765\u505a\u8def\u7531\n// \u800croute\u4f7f\u7528\u4e00\u4e2a\u5171\u540c\u5b8f\u6765\u5b9a\u4e49\n#[route(GET, \"/\")]\nfn index() {}\n#[proc_macro_attribute]\n// \u5b8f\u5b9a\u4e49\u7684\u51fd\u6570\u7b7e\u540d\u5982\u4e0b\uff0c\u6709\u4e24\u4e2aTokenStream\u4f5c\u4e3a\u53c2\u6570\n// \u524d\u9762\u7684attr: TokenStream\u5bf9\u5e94\u201cGET, \"/\"\u201d\uff0c\u540e\u9762\u7684item: TokenStream\u5bf9\u5e94index\u51fd\u6570\u4f53\n// \u6700\u540e\u8fd4\u56de\u4e00\u4e2aTokenStream\npub fn route(attr: TokenStream, item: TokenStream) -&gt; TokenStream {}\n</code></pre>"},{"location":"19_advanced_features/04_macro/#43","title":"4.3 \u7c7b\u4f3c\u51fd\u6570\u7684\u5b8f","text":"<p>\u7c7b\u4f3c\u51fd\u6570\u7684\u5b8f\u53c8\u53eb\u51fd\u6570\u5b8f\uff0c\u51fd\u6570\u5b8f\u7684\u5b9a\u4e49\u7c7b\u4f3c\u4e8e\u51fd\u6570\u8c03\u7528\u7684\u5b8f\uff0c\u4f46\u6bd4\u666e\u901a\u7684\u51fd\u6570\u66f4\u52a0\u7075\u6d3b\u3002\u51fd\u6570\u5b8f\u53ef\u4ee5\u63a5\u53d7TokenStream\u4f5c\u4e3a\u53c2\u6570\uff0c\u4e0e\u53e6\u5916\u4e24\u79cd\u5b8f\u7684\u8fc7\u7a0b\u4e00\u6837\uff0c\u5728\u5b9a\u4e49\u4e2d\u4f7f\u7528rust\u4ee3\u7801\u6765\u64cd\u4f5cTokenStream\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684\u793a\u4f8b\u4ee3\u7801</p> <pre><code>// \u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u80fd\u591f\u89e3\u6790SQL\u8bed\u53e5\u7684\u5b8f\nlet sql = sql!(SELECT * FROM posts WHERE id = 1);\n#[proc_macro]\n// \u51fd\u6570\u7684\u7b7e\u540d\u5982\u4e0b\uff0c\u63a5\u53d7\u4e00\u4e2aTokenStream\uff0c\u518d\u8fd4\u56de\u76f8\u5e94\u529f\u80fd\u7684TokenStream\npub fn sql(input: TokenStream) -&gt; TokenStream {}\n</code></pre>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/","title":"Rust\u7b80\u6613\u5e76\u53d1\u5b9e\u4f8b","text":""},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#_1","title":"\u4e00\u3001\u6982\u8ff0","text":"<ul> <li> <p>\u5e76\u53d1\uff08concurrency\uff09\uff1a\u5e76\u53d1\u662f\u591a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u540c\u65f6\u8fd0\u884c\uff0c\u800c\u662f\u4ea4\u66ff\u8fd0\u884c\u3002</p> </li> <li> <p>\u5e76\u884c\uff08parallelism\uff09\uff1a\u5e76\u884c\u662f\u591a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c\u3002</p> </li> </ul> <p>\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4eba\u4eec\u4f1a\u5c06\u5e76\u53d1\u8fd9\u4e2a\u8bcd\u7528\u6765\u4ee3\u8868\u5e76\u53d1\u548c\u5e76\u884c\u3002\u5c24\u5176\u662f\u5728\u65e5\u5e38\u8bed\u8a00\u4e2d\u6216\u8005\u4e00\u822c\u6027\u7684\u8ba8\u8bba\u4e2d\uff0c\u4eba\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u5e76\u53d1\u6765\u8868\u793a\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u6267\u884c\u7684\u6982\u5ff5\uff0c\u800c\u4e0d\u7279\u522b\u533a\u5206\u5e76\u53d1\u548c\u5e76\u884c\u4e4b\u95f4\u7684\u7ec6\u5fae\u5dee\u522b\u3002\u56e0\u6b64\u5728\u8fd9\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u7528\u5e76\u53d1\u4ee3\u8868 <code>concurrency</code> \u548c <code>parallelism</code>\u3002</p> <p>\u5728 Rust \u4e2d\uff0c\u5b9e\u73b0\u9ad8\u5e76\u53d1\u4e3b\u8981\u901a\u8fc7\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\u6765\u5904\u7406\u3002\u672c\u8282\u5c06\u4ecb\u7ecd\u4e3a\u4ec0\u4e48\u9700\u8981\u5e76\u53d1\u4ee5\u53ca Rust \u5f02\u6b65\u7f16\u7a0b\u7684\u57fa\u672c\u6982\u5ff5\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#_2","title":"\u4e8c\u3001\u4e3a\u4ec0\u4e48\u9700\u8981\u5e76\u53d1\uff1f","text":"<p>\u7a0b\u5e8f\u7684\u5e76\u53d1\u7684\u4e3b\u8981\u76ee\u7684\u662f\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u3001\u8d44\u6e90\u5229\u7528\u7387\u548c\u54cd\u5e94\u80fd\u529b\u3002\u6211\u4eec\u9996\u5148\u9700\u8981\u4e86\u89e3\u7a0b\u5e8f\u5904\u7406\u4efb\u52a1\u7684\u4e24\u79cd\u7c7b\u578b\uff1a</p> <ul> <li>CPU\u5bc6\u96c6\u578b\uff1aCPU \u5bc6\u96c6\u578b\u4efb\u52a1\u6307\u7684\u662f\u5360\u7528 CPU \u8d44\u6e90\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\uff1a\u6587\u4ef6\u538b\u7f29\u3001\u52a0\u5bc6\u3001\u89e3\u5bc6\u7b49\uff1b</li> <li>IO\u5bc6\u96c6\u578b\uff1aIO \u5bc6\u96c6\u578b\u4efb\u52a1\u6307\u7684\u662f\u5360\u7528 IO \u8d44\u6e90\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\uff1a\u7f51\u7edc\u4f20\u8f93\u3001\u6587\u4ef6\u8bfb\u53d6\u3001\u6570\u636e\u5e93\u64cd\u4f5c\u7b49\u3002</li> </ul> <p>\u9488\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u4efb\u52a1\uff08CPU \u5bc6\u96c6\u578b\u548c IO \u5bc6\u96c6\u578b\uff09\uff0c\u9700\u8981\u4e0d\u540c\u7684\u5e76\u53d1\u65b9\u6848\u6765\u8fbe\u5230\u6700\u4f73\u6027\u80fd\u3002\u5bf9\u4e8eCPU\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6211\u4eec\u5c31\u901a\u5e38\u53ef\u4ee5\u5229\u7528\u591aCPU\u6216\u8005\u591a\u6838\u8fdb\u884c\u5904\u7406\uff1b\u9488\u5bf9IO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6211\u4eec\u901a\u5e38\u53ef\u4ee5\u5229\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u5904\u7406\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#rust_1","title":"\u4e09\u3001Rust \u5f02\u6b65\u7f16\u7a0b\u7684\u6982\u5ff5","text":""},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#31","title":"3.1 \u5f02\u6b65\u4e0e\u591a\u7ebf\u7a0b","text":"<p>\u6211\u4eec\u5148\u6765\u4e86\u89e3\u4ee5\u4e0b\u4e00\u4e9b\u6982\u5ff5\uff1a</p> <p></p> <ul> <li>\u540c\u6b65\uff08synchronous\uff09\uff1a\u540c\u6b65\u662f\u6307\u7a0b\u5e8f\u6267\u884c\u5230\u67d0\u4e2a\u4efb\u52a1\u65f6\uff0c\u5fc5\u987b\u7b49\u5f85\u8be5\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002</li> <li>\u5f02\u6b65\uff08asynchronous\uff09\uff1a\u5f02\u6b65\u662f\u6307\u7a0b\u5e8f\u6267\u884c\u5230\u67d0\u4e2a\u4efb\u52a1\u65f6\uff0c\u4e0d\u9700\u8981\u7b49\u5f85\u8be5\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002</li> <li>\u591a\u7ebf\u7a0b\uff08multithreading\uff09\uff1a\u591a\u7ebf\u7a0b\u662f\u6307\u5728\u5355\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u540c\u65f6\u6267\u884c\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u53ef\u4ee5\u6267\u884c\u4e0d\u540c\u7684\u4efb\u52a1\u3002</li> </ul> <p>\u5728 Rust \u4e2d\uff0c\u5b9e\u73b0\u5e76\u53d1\u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u5176\u4e2d\u5f02\u6b65\u7f16\u7a0b\u662f\u4e00\u79cd\u5e38\u7528\u7684\u65b9\u5f0f\u4e4b\u4e00\u3002\u591a\u7ebf\u7a0b\u662f\u4e00\u79cd\u5b9e\u73b0\u5e76\u53d1\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#32","title":"3.2 \u5e76\u53d1\u7684\u5b9e\u73b0\u65b9\u6848","text":""},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#321","title":"3.2.1 \u591a\u7ebf\u7a0b\u7684\u5c40\u9650\u6027","text":"<p>\u6211\u4eec\u4ee5Web\u670d\u52a1\u5668\u4f5c\u4e3a\u793a\u4f8b\uff0cWeb\u670d\u52a1\u5668\u53ef\u4ee5\u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u5904\u7406\u591a\u4e2a\u8bf7\u6c42\u3002\u9488\u5bf9\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u5f00\u542f\u4e00\u4e2a\u539f\u751f\u7684\u7cfb\u7edf\u7ebf\u7a0b\uff0c\u867d\u7136\u4e86\u63d0\u9ad8\u6027\u80fd\uff0c\u5374\u5f15\u5165\u4e86\u65b0\u7684\u590d\u6742\u6027\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u6267\u884c\u987a\u5e8f\u65e0\u6cd5\u9884\u6d4b: \u4f8b\u5982\uff0c\u539f\u672c\u7684\u8bf7\u6c42\u5e94\u8be5\u987a\u5e8f\u5e94\u8be5\u662f <code>get</code>\u3001<code>post</code>\u3001<code>put</code>\u3001<code>delete</code>\uff0c\u4f46\u662f\u7531\u4e8e\u591a\u7ebf\u7a0b\uff0c\u987a\u5e8f\u53ef\u80fd\u4e0d\u662f\u8fd9\u6837\u7684\uff0c\u53ef\u80fd <code>delete</code> \u5148\u6267\u884c\u5b8c\u6210\uff0c\u5bfc\u81f4\u5176\u4ed6\u8bf7\u6c42\u5904\u7406\u5931\u8d25;</li> <li>\u6b7b\u9501: \u4e24\u4e2a\u7ebf\u7a0b\u5f7c\u6b64\u7b49\u5f85\u5bf9\u65b9\u4f7f\u7528\u5b8c\u6301\u6709\u7684\u8d44\u6e90\uff0c\u5bfc\u81f4\u7ebf\u7a0b\u65e0\u6cd5\u7ee7\u7eed;</li> <li>\u7ade\u6001\u6761\u4ef6\uff08race condition\uff09: \u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u5bfc\u81f4\u7ed3\u679c\u4e0d\u53ef\u9884\u671f\uff0c\u4f8b\u5982\uff1a\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u540c\u4e00\u4e2a\u53d8\u91cf\uff0c\u5bfc\u81f4\u7ed3\u679c\u4e0d\u53ef\u9884\u671f\u3002</li> </ul> <p>\u5176\u5b9e\u591a\u7ebf\u7a0b\u8fd8\u5b58\u5728\u53e6\u5916\u4e00\u4e2a\u95ee\u9898\uff0c\u5728\u4e86\u89e3\u8fd9\u4e2a\u95ee\u9898\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e0b\u7ebf\u7a0b\u7684\u4e24\u79cd\u6a21\u578b\uff1a</p> <ul> <li>1:1 \u6a21\u578b\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u5bf9\u5e94\u4e00\u4e2a\u539f\u751f\u7684\u7cfb\u7edf\u7ebf\u7a0b\u3002</li> <li>M:N \u6a21\u578b: M\u7ebf\u7a0b\u5bf9\u5e94 N \u4e2a\u539f\u751f\u7684\u7cfb\u7edf\u7ebf\u7a0b\u3002\u8fd9\u91cc\u7684 M \u7ebf\u7a0b\u53eb\u505a\u51c6\u7ebf\u7a0b\uff0c\u6216\u8005\u53eb\u505a\u7eff\u8272\u7ebf\u7a0b\uff0c\u90fd\u6307\u7684\u662f\u8bed\u8a00\u7ebf\u7a0b\uff0cN \u4e2a\u539f\u751f\u7684\u7cfb\u7edf\u7ebf\u7a0b\u53eb\u505a\u64cd\u4f5c\u7cfb\u7edf\u7ebf\u7a0b\u3002</li> </ul> <p>Rust\u6807\u51c6\u5e93\u4e2d\u5c31\u662f\u5b9e\u73b0\u4e86 1:1 \u6a21\u578b\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u51c6\u7ebf\u7a0b\u6570\u662f\u6709\u9650\u5236\u7684\uff0c\u5b83\u53d7\u5230\u6808\u5185\u5b58\u548c\u865a\u62df\u5185\u5b58\u7684\u5f71\u54cd\uff0c\u800c\u4e14\u7ebf\u7a0b\u5207\u6362\u7684\u65f6\u5019\u8fd8\u6709\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u6210\u672c\u548c\u7ba1\u7406\u7ebf\u7a0b\u7684\u5176\u4ed6\u8d44\u6e90\u6210\u672c\u3002\u6240\u4ee5\u591a\u7ebf\u7a0b\u5e76\u4e0d\u662f\u4e07\u80fd\u7684\uff0c\u5b83\u4e0d\u9002\u5408\u6240\u6709\u7684\u9700\u6c42\u573a\u666f\uff0c\u5c24\u5176\u662f\u5728Web\u670d\u52a1\u5668\u4e2d\u7684\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#322-nginx","title":"3.2.2 Nginx \u7684\u4e8b\u4ef6\u9a71\u52a8\u5e76\u53d1\u6a21\u578b","text":"<p>Nginx \u5e76\u4e0d\u662f\u5178\u578b\u7684\u591a\u7ebf\u7a0b\u670d\u52a1\u5668\uff0cNginx \u91c7\u7528\u4e86\u4e8b\u4ef6\u9a71\u52a8\u7684\u5e76\u53d1\u6a21\u578b\uff0c\u4f7f\u7528\u5355\u7ebf\u7a0b\u6216\u5c11\u91cf\u7ebf\u7a0b\u5904\u7406\u5e76\u53d1\u8fde\u63a5\uff0c\u5229\u7528\u975e\u963b\u585e I/O \u548c\u4e8b\u4ef6\u9a71\u52a8\u7684\u65b9\u5f0f\u6765\u63d0\u9ad8\u6027\u80fd\u548c\u53ef\u4f38\u7f29\u6027\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u5173\u952e\u7684\u6982\u5ff5\uff1a</p> <ul> <li> <p>\u4e8b\u4ef6\u9a71\u52a8\uff1aNginx \u4f7f\u7528\u4e8b\u4ef6\u9a71\u52a8\u7684\u65b9\u5f0f\u6765\u5904\u7406\u5e76\u53d1\u8fde\u63a5\uff0c\u901a\u8fc7\u76d1\u542c\u4e8b\u4ef6\u5e76\u5728\u4e8b\u4ef6\u53d1\u751f\u65f6\u89e6\u53d1\u76f8\u5e94\u7684\u5904\u7406\u51fd\u6570\u6765\u5b9e\u73b0\u9ad8\u6548\u7684\u5e76\u53d1\u5904\u7406\u3002\u8fd9\u79cd\u6a21\u578b\u907f\u514d\u4e86\u4f20\u7edf\u591a\u7ebf\u7a0b\u6a21\u578b\u4e2d\u7ebf\u7a0b\u5207\u6362\u7684\u5f00\u9500\uff0c\u63d0\u9ad8\u4e86\u670d\u52a1\u5668\u7684\u6027\u80fd\u548c\u54cd\u5e94\u901f\u5ea6\u3002</p> </li> <li> <p>\u5355\u7ebf\u7a0b\u6216\u5c11\u91cf\u7ebf\u7a0b\uff1aNginx \u901a\u5e38\u4f7f\u7528\u5355\u7ebf\u7a0b\u6216\u5c11\u91cf\u7ebf\u7a0b\u6765\u5904\u7406\u5e76\u53d1\u8fde\u63a5\uff0c\u6bcf\u4e2a\u8fde\u63a5\u90fd\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u5904\u7406\uff0c\u907f\u514d\u4e86\u7ebf\u7a0b\u95f4\u7684\u7ade\u4e89\u548c\u540c\u6b65\u5f00\u9500\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u6548\u7387\u548c\u53ef\u9760\u6027\u3002</p> </li> <li> <p>\u975e\u963b\u585e I/O\uff1aNginx \u4f7f\u7528\u975e\u963b\u585e I/O \u6765\u5904\u7406\u7f51\u7edc\u8bf7\u6c42\uff0c\u5f53\u4e00\u4e2a I/O \u64cd\u4f5c\u65e0\u6cd5\u7acb\u5373\u5b8c\u6210\u65f6\uff0cNginx \u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u800c\u662f\u7ee7\u7eed\u5904\u7406\u5176\u4ed6\u8bf7\u6c42\uff0c\u7b49\u5f85\u4e8b\u4ef6\u5c31\u7eea\u540e\u518d\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u79cd\u65b9\u5f0f\u907f\u514d\u4e86\u7ebf\u7a0b\u5728\u7b49\u5f85 I/O \u64cd\u4f5c\u5b8c\u6210\u65f6\u7684\u95f2\u7f6e\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u548c\u6027\u80fd\u3002</p> </li> </ul>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#323-rust","title":"3.2.3 Rust \u5f02\u6b65\u7f16\u7a0b\u6a21\u578b","text":"<p>\u7ecf\u8fc7\u4e0a\u6587\u7684\u4ecb\u7ecd\uff0c\u53ef\u4ee5\u77e5\u9053\u591a\u7ebf\u7a0b\u5e76\u4e0d\u9002\u5408\u4efb\u610f\u7684\u573a\u666f\uff0c\u7279\u522b\u662f\u6709\u9ad8\u5e76\u53d1\u9700\u6c42\u7684web\u670d\u52a1\u5668\u3002\u5728Rust\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u56fe\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u9ad8\u5e76\u53d1\uff08\u56fe\u6765\u81ea\u4e92\u8054\u7f51\uff09\uff1a</p> <p></p> <p>\u6bcf\u4e2a HTTP \u8bf7\u6c42\u88ab\u5f02\u6b65 <code>Web Server</code> \u63a5\u6536\uff0c<code>Web Server</code> \u4f1a\u5c06\u8bf7\u6c42\u5206\u53d1\u7ed9\u4e0d\u540c\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u7531\u5f02\u6b65\u8fd0\u884c\u65f6\u4efb\u52a1\u5b89\u6392\u5404\u4e2a\u5f02\u6b65\u4efb\u52a1\u5728\u53ef\u7528\u7684 CPU \u4e0a\u6267\u884c\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u679c\u3002\u8fd9\u5c31\u662f Rust \u7684**\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b**\u3002</p> <p>Rust \u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u578b\u57fa\u4e8e <code>Future</code> \u548c <code>Executor</code>\uff0c\u901a\u8fc7 <code>async/await</code> \u5173\u952e\u5b57\u548c <code>futures</code> \u5e93\u6765\u5b9e\u73b0\u3002\u5f02\u6b65\u7f16\u7a0b\u5141\u8bb8\u5728\u5355\u4e2a\u7ebf\u7a0b\u6216\u8005\u591a\u4e2a\u7ebf\u7a0b\u4e0a\u5904\u7406\u591a\u4e2a\u5e76\u53d1\u4efb\u52a1\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u548c\u8d44\u6e90\u5229\u7528\u7387\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#rust_2","title":"\u56db\u3001\u7f16\u5199 Rust \u5f02\u6b65\u7a0b\u5e8f","text":""},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#41-","title":"4.1 \u540c\u6b65\u591a\u4efb\u52a1 - \u987a\u5e8f\u6267\u884c\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1","text":"<p>\u6211\u4eec\u7b80\u5355\u6a21\u62df\u4e24\u4e2a\u4efb\u52a1\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u7f16\u5199\u4e00\u4e2a\u7b80\u5355\u7684\u540c\u6b65\u7a0b\u5e8f\uff1a</p> <pre><code>use std::{thread::sleep, time::Duration};\nfn main() {\nprintln!(\"Hello, before read file!\");\nlet file1_content = read_from_file1();\nprintln!(\"{:?}\", file1_content);\nlet file2_content = read_from_file2();\nprintln!(\"{:?}\", file2_content);\nprintln!(\"Hello, after read file2!\");\n}\nfn read_from_file1() -&gt; String {\nsleep(Duration::new(4, 0));\nString::from(\"Hello, there from file 1\")\n}\nfn read_from_file2() -&gt; String {\nsleep(Duration::new(2, 0));\nString::from(\"Hello, there from file 2\")\n}\n</code></pre> <p>\u4ee5\u4e0a\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>Hello, before read file!\n\"Hello, there from file 1\"\n\"Hello, there from file 2\"\nHello, after read file2!\n</code></pre> <p>\u5728\u4ee5\u4e0a\u7a0b\u5e8f\u4e2d\uff0c\u8bfb\u53d6\u6587\u4ef61\u82b1\u4e864\u79d2\uff0c\u8bfb\u53d6\u6587\u4ef62\u82b1\u4e862\u79d2\uff0c\u6240\u4ee5\u7a0b\u5e8f\u6267\u884c\u5b8c\u4e4b\u540e\uff0c\u8f93\u51fa\u7ed3\u679c\u662f\u6309\u7167\u987a\u5e8f\u6267\u884c\u7684\u3002\u6700\u7ec8\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u9700\u89816\u79d2\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#42-","title":"4.2 \u591a\u7ebf\u7a0b\u591a\u4efb\u52a1 - \u5e76\u53d1\u6267\u884c\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1","text":"<p>\u57284.1\u4e2d\u5b58\u5728\u7684\u95ee\u9898\u662f\u7a0b\u5e8f\u662f\u540c\u6b65\u6267\u884c\u7684\uff0c\u5373\u5728\u8bfb\u53d6\u6587\u4ef61\u65f6\u4f1a\u963b\u585e\u540e\u7eed\u4ee3\u7801\u7684\u6267\u884c\uff0c\u76f4\u5230\u6587\u4ef61\u8bfb\u53d6\u5b8c\u6210\u624d\u4f1a\u5f00\u59cb\u8bfb\u53d6\u6587\u4ef62\u3002\u8fd9\u5bfc\u81f4\u7a0b\u5e8f\u7684\u603b\u6267\u884c\u65f6\u95f4\u7b49\u4e8e\u4e24\u4e2a\u4efb\u52a1\u4e2d\u6267\u884c\u65f6\u95f4\u8f83\u957f\u7684\u90a3\u4e2a\u4efb\u52a1\u7684\u6267\u884c\u65f6\u95f4\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5373\u4f7f\u6587\u4ef62\u7684\u8bfb\u53d6\u4efb\u52a1\u53ea\u9700\u89812\u79d2\uff0c\u4f46\u662f\u56e0\u4e3a\u6587\u4ef61\u7684\u8bfb\u53d6\u4efb\u52a1\u9700\u89814\u79d2\uff0c\u6240\u4ee5\u6574\u4e2a\u7a0b\u5e8f\u7684\u6267\u884c\u65f6\u95f4\u53d8\u6210\u4e866\u79d2\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u5b9e\u73b0\u5f02\u6b65\u6267\u884c\uff0c\u5982\u4e0b\u4ee3\u7801</p> <pre><code>use std::thread;\nuse std::thread::sleep;\nuse std::time::Duration;\nfn main() {\nprintln!(\"Hello, before read file!\");\nlet handle1 = thread::spawn(move || {\nlet file1_content = read_from_file1();\nprintln!(\"{:?}\", file1_content);\n});\nlet handle2 = thread::spawn(move || {\nlet file2_content = read_from_file2();\nprintln!(\"{:?}\", file2_content);\n});\nhandle1.join().unwrap();\nhandle2.join().unwrap();\n}\nfn read_from_file1() -&gt; String {\nsleep(Duration::new(4, 0));\nString::from(\"Hello, there from file 1\")\n}\nfn read_from_file2() -&gt; String {\nsleep(Duration::new(2, 0));\nString::from(\"Hello, there from file 2\")\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528\u4e86 <code>thread::spawn</code> \u6765\u521b\u5efa\u4e24\u4e2a\u7ebf\u7a0b\uff0c\u5206\u522b\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef61\u548c\u6587\u4ef62\u3002\u8fd9\u6837\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u8fd9\u4e24\u4e2a\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u7b2c\u4e00\u4e2a\u4efb\u52a1\u5b8c\u6210\u540e\u624d\u5f00\u59cb\u7b2c\u4e8c\u4e2a\u4efb\u52a1\u3002\u56e0\u6b64\uff0c\u603b\u7684\u6267\u884c\u65f6\u95f4\u5c06\u5927\u5927\u7f29\u77ed\u3002\u6700\u540e\uff0c\u8c03\u7528\u4e86 <code>join</code> \u65b9\u6cd5\u6765\u7b49\u5f85\u6bcf\u4e2a\u7ebf\u7a0b\u5b8c\u6210\uff0c\u5e76\u83b7\u53d6\u5b83\u4eec\u7684\u7ed3\u679c\u3002\u6700\u7ec8\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>Hello, before read file!\n\"Hello, there from file 2\"\n\"Hello, there from file 1\"\n</code></pre>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#43-tokio-","title":"4.3 \u4f7f\u7528Tokio\u5b9e\u73b0\u5f02\u6b65\u4efb\u52a1 - \u9ad8\u6548\u6267\u884c\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 <code>Tokio</code> \u6765\u5b9e\u73b0\u5f02\u6b65\u4efb\u52a1\u3002<code>Tokio</code> \u662f\u4e00\u4e2a\u57fa\u4e8e Rust \u7684\u5f02\u6b65\u8fd0\u884c\u65f6\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u5957\u5de5\u5177\u548c\u5e93\uff0c\u4f7f\u5f97\u7f16\u5199\u5f02\u6b65\u7a0b\u5e8f\u66f4\u52a0\u65b9\u4fbf\u3002\u76f8\u6bd4\u4e8e\u4f7f\u7528\u88f8\u7ebf\u7a0b\uff0c<code>Tokio</code> \u63d0\u4f9b\u4e86\u66f4\u9ad8\u7ea7\u7684\u62bd\u8c61\uff0c\u4f7f\u5f97\u5f02\u6b65\u7f16\u7a0b\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\u548c\u9ad8\u6548\u3002\u5b9e\u73b0\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u6267\u884c <code>cargo add tokio</code> \u6765\u6dfb\u52a0 <code>tokio</code> \u4f9d\u8d56\u3002\u7136\u540e\u7f16\u5199\u4ee3\u7801\u5982\u4e0b</p> <pre><code>use std::{thread::sleep, time::Duration};\n#[tokio::main]\nasync fn main() {\nprintln!(\"Hello, before read file!\");\nlet h1 = tokio::spawn(async {\nlet _file1_content = read_from_file1().await;\nprintln!(\"{:?}\", _file1_content);\n});\nlet h2 = tokio::spawn(async {\nlet _file2_content = read_from_file2().await;\nprintln!(\"{:?}\", _file2_content);\n});\nlet _ = tokio::join!(h1, h2);\n}\nasync fn read_from_file1() -&gt; String {\nsleep(Duration::new(4, 0));\nprintln!(\"{:?}\", \"Processing file 1\");\nString::from(\"Hello, there from file 1\")\n}\nasync fn read_from_file2() -&gt; String {\nsleep(Duration::new(2, 0));\nprintln!(\"{:?}\", \"Processing file 2\");\nString::from(\"Hello, there from file 2\")\n}\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u4f7f\u7528\u4e86 <code>Tokio</code> \u63d0\u4f9b\u7684\u5f02\u6b65\u529f\u80fd\u6765\u6267\u884c\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\u3002\u5728 main \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>tokio::spawn</code> \u521b\u5efa\u4e86\u4e24\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u5206\u522b\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef61\u548c\u6587\u4ef62\u3002\u8fd9\u6837\uff0c\u8fd9\u4e24\u4e2a\u4efb\u52a1\u53ef\u4ee5\u5e76\u884c\u6267\u884c\uff0c\u800c\u4e0d\u4f1a\u76f8\u4e92\u963b\u585e\u3002</p> <p>\u5f53\u6211\u4eec\u5728\u5f02\u6b65\u51fd\u6570\u4e2d\u8c03\u7528\u53e6\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570\u65f6\uff0c\u9700\u8981\u4f7f\u7528 <code>await</code> \u5173\u952e\u5b57\u6765\u7b49\u5f85\u8be5\u5f02\u6b65\u51fd\u6570\u7684\u5b8c\u6210\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0cread_from_file1 \u548c read_from_file2 \u90fd\u662f\u5f02\u6b65\u51fd\u6570\uff0c\u56e0\u6b64\u5728 main \u51fd\u6570\u4e2d\u8c03\u7528\u5b83\u4eec\u65f6\uff0c\u9700\u8981\u5728\u5176\u524d\u9762\u52a0\u4e0a <code>await</code> \u5173\u952e\u5b57\u6765\u7b49\u5f85\u5b83\u4eec\u7684\u6267\u884c\u7ed3\u679c\u3002</p> <p>\u6700\u540e\uff0c\u4f7f\u7528 <code>tokio::join!</code> \u5b8f\u6765\u7b49\u5f85\u4e24\u4e2a\u5f02\u6b65\u4efb\u52a1\u5b8c\u6210\u3002\u4f7f\u7528 <code>Tokio</code> \u80fd\u591f\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u5730\u7f16\u5199\u5f02\u6b65\u7a0b\u5e8f\uff0c\u800c\u4e0d\u7528\u5173\u5fc3\u5e95\u5c42\u7684\u7ebf\u7a0b\u7ba1\u7406\u548c\u8c03\u5ea6\u3002</p>"},{"location":"20_simple_concurrency/01_a_simple_concurrency_example/#_3","title":"\u4e94\u3001\u603b\u7ed3","text":"<p>\u901a\u8fc7\u672c\u6587\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u4e86\u89e3\u4e86\u7a0b\u5e8f\u5e76\u53d1\u4ee5\u53ca\u5f02\u6b65\u7f16\u7a0b\u7684\u57fa\u672c\u6982\u5ff5\u3002\u5728\u73b0\u4ee3\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u5229\u7528\u7684\u5f02\u6b65\u7f16\u7a0b\u53ef\u4ee5\u5145\u5206\u5229\u7528\u7cfb\u7edf\u8d44\u6e90\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6027\u80fd\u548c\u54cd\u5e94\u80fd\u529b\u3002\u800c <code>Tokio</code> \u662f\u4e00\u4e2a\u57fa\u4e8e Rust \u7684\u5f02\u6b65\u8fd0\u884c\u65f6\uff0c\u63d0\u4f9b\u4e86\u4e00\u5957\u5de5\u5177\u548c\u5e93\uff0c\u4f7f\u5f97\u6211\u4eec\u7f16\u5199 Rust \u5f02\u6b65\u7a0b\u5e8f\u66f4\u52a0\u65b9\u4fbf\u3002</p>"}]}